---
title: 树莓派初始化设置
date: 2021-02-10 20:15:54
tags: linux
category: linux
---
先执行
sudo apt-get install vim

WIFI设置
每当重新安装树莓派的系统或者初始化一块全新的树莓派都会遇到这样的问题：连接WIFI。

那当我们没有显示器和键盘的情况下怎末可以将树莓连接到当前的WIFI网络呢？

方法非常简单，首先在SD卡的根目录下添加一个名为 wpa_supplicant.conf的文件，然后在该文件内添加以下的内容：

	country=CN
	ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
	update_config=1
	 
	network={
		ssid="AlexVB"
		key_mgmt=WPA-PSK
		psk="*********"
		priority=1
	}

密码设置
树莓派很多功能都需要解锁root权限后才能完成，比如下载安装，更改文件等等。

在命令行界面执行以下命令，再输入两次想设置的root密码，执行后设置成功。

	sudo passwd root

输入以下命令开启root权限：

	sudo passwd --unlock root

更改pi用户密码：

	sudo passwd pi

python设置
树莓派的python默认版本是python2.7，如果想用python3.x的话，树莓派有自带的python3.5，此乃大坑，不需要再下载python3，直接把python和自带的python3建立软链接就OK。

	which python

	/usr/bin/python

	which python3

	/usr/bin/python3

注意：不能直接就把python链接到python3上，会报错，先把原来的python2备份一下。
ln: 无法创建符号链接’/usr/bin/python’: 文件已存在

	sudo mv /usr/bin/python  /usr/bin/python2

	sudo ln -s /usr/bin/python3 /usr/bin/python

之后在终端输入python就可以看到python的默认版本改为python3.5了。
在这里插入图片描述

更改软件源
树莓派系统安装后默认使用国外的镜像源来更新软件，由于不可描述原因，国内访问速度非常慢，因此需要换成国内源。

树莓派官方提供了一个更新源列表，在这里我们使用中科大的软件源和系统源。

首先还是要备份原来的源文件：

	sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak

	sudo cp /etc/apt/sources.list.d/raspi.list /etc/apt/sources.list.d/raspi.list.bak

修改软件更新源，执行如下命令：

	sudo vim /etc/apt/sources.list

将原来的内容注释掉，改为中科大的源：

	deb http://mirrors.ustc.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi

在这里插入图片描述
修改系统更新源，执行如下命令：

	sudo vim /etc/apt/sources.list.d/raspi.list

将原来的内容注释掉，改为中科大的源：

	deb http://mirrors.ustc.edu.cn/archive.raspberrypi.org/debian/ stretch main ui

在这里插入图片描述
之后就可以快速更新和安装了。

	sudo apt-get update

	sudo apt-get upgrade -y

这时候可能会有提示“有些没有软件包是自动安装的但是当前已经不需要了，可以使用如下命令卸载：	

	sudo apt autoremove

！！千万别用！！
更改pip源
pip更换为国内源，可以大大的提高安装成功率和速度。

不管你用的是pip3还是pip，方法都是一样的，如下：

	sudo vim /etc/pip.conf

更改文件内容：

	index-url = https://mirrors.aliyun.com/pypi/simple

输入法

sudo apt-get install scim-pinyin

一、安装

      1.安装mongodb

              sudo apt-get install mongodb

      2. 启动服务

              /usr/bin/mongod -f /etc/mongodb.conf

      3.启动命令行

              /usr/bin/mongo 

              此时可以看到版本是MongoDB shell version: 2.4.14

	  4.关闭mongo
			/usr/bin/mongod -shutdown -dbpath=/home/data/mongodb



二、配置

     1.配置主机ip：

               sudo vim /etc/mongodb.conf

               加入如下：127.0.0.1，自己的ip

     2.配置防火墙，让局域网环境可以访问数据库

               2.1  安装：sudo apt-get install ufw

               2.2  启用：sudo ufw enable

               2.3  禁止外部访问 sudo ufw default deny

               2.4  启用局域网mongodb端口访问：       sudo ufw allow from 192.168.0.0/8 



三、使用

     1.pymongo下载

                 这里注意，最新版本pymongo是不兼容MongoDB2.4的，所以下载的时候记得下载老版本

                       pip install pymongo==3.1.1

      2.使用

                       使用起来非常方便：连接、关闭、增删改查。具体操作见官网文档：

                       http://api.mongodb.com/python/current/index.html


python3.7导入gevent模块报错的解决方案

	RuntimeWarning: greenlet.greenlet size changed, may indicate binary incompatibility. Expected 144, got 128
	  return f(*args, **kwds)

	pip3 install -U --force-reinstall --no-binary :all: gevent