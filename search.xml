<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[PRINCIPLES]]></title>
    <url>%2F2020%2F10%2F29%2FPRINCIPLES%2F</url>
    <content type="text"><![CDATA[ä»‹ç»ã€ŠåŽŸåˆ™ã€‹å…¨ä¹¦ä¸€å…±åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ† ï¼š ç¬¬ä¸€éƒ¨åˆ†æ˜¯ä¸ªäººç»åŽ†çš„ä»‹ç»ï¼›ç¬¬äºŒéƒ¨åˆ†æ˜¯ç”Ÿæ´»åŽŸåˆ™çš„æè¿°ï¼›ç¬¬ä¸‰éƒ¨åˆ†æ˜¯å·¥ä½œåŽŸåˆ™çš„æè¿°ã€‚ ç”Ÿæ´»åŽŸåˆ™æ‹¥æŠ±çŽ°å®žï¼›åº”å¯¹çŽ°å®ž ä¸è¦æ··æ·†æ„¿æœ›ä¸ŽçŽ°å®ž ä¸è¦æ‹…å¿ƒè‡ªå·±å½¢è±¡ï¼›è€Œå…³å¿ƒèƒ½ä¸èƒ½å®žçŽ°ä½ çš„ç›®æ ‡ è¦é‡è§†åŽç»­çš„ç»“æžœä»¥åŠåŽç»­çš„åŽç»­ ä¸è¦è®©ç—›è‹¦å¦¨ç¢è‡ªå·±çš„è¿›æ­¥ ä¸è¦æŠŠä¸å¥½å½’å’Žä¸Žä»»ä½•äººï¼›ä»Žè‡ªå·±èº«ä¸Šæ‰¾åŽŸå›  åšä¸€ä¸ªè¶…çº§çŽ°å®žçš„äººåœ¨ä¹Žæ¢¦æƒ³ï¼›ä½†æ˜¯æ‰Žæ ¹äºŽçŽ°å®ž æ¢¦æƒ³ + çŽ°å®ž + å†³å¿ƒ = æˆåŠŸçš„ç”Ÿæ´» ç†è§£çŽ°å®žï¼›æ˜¯ä»»ä½•è‰¯å¥½ç»“æžœçš„æ ¹æœ¬ä¾æ®å› ä¸ºå½“çœŸç›¸ä¸Žæ„¿æœ›ä¸ç¬¦çš„æ—¶å€™ï¼›å¤§éƒ¨åˆ†äººæŠ—æ‹’çœŸç›¸ã€‚ è¿™ç§è®¤çŸ¥åå·®ï¼›æœ‰å¾ˆå¤šå¿ƒç†å­¦çŽ°è±¡ä¸Žä¹‹ç›¸å…³ï¼›å¦‚æˆ¿é—´é‡Œçš„å¤§è±¡ç­‰ã€‚åœ¨ã€Šéœ€æ±‚ã€‹ å’Œ ã€Šæ€è€ƒå¿«ä¸Žæ…¢ä¸­ã€‹éƒ½æœ‰è¿‡ç›¸å…³çš„è®ºè¿°ã€‚è¯´åˆ°åº•ï¼›å°±æ˜¯è¦æ‰Žæ ¹çŽ°å®žã€‚ç†è§£çŽ°å®žï¼Œç„¶åŽï¼Œæ”¹å˜è‡ªå·±ï¼›æ”¹å˜çŽ°å®ž å¤´è„‘éœ€è¦æžåº¦å¼€æ”¾å¤´è„‘æžåº¦å¼€æ”¾ï¼›æžåº¦é€æ˜Žæœ‰åˆ©äºŽå¿«é€Ÿå­¦ä¹ ä¸Žæ”¹è¿›è¿™å‡ ä¹Žæ˜¯æ•´ä¸ªç”Ÿæ´»åŽŸåˆ™ä¸­æœ€é‡è¦çš„ä¸€æ¡åŽŸåˆ™äº†ä½ å¤´è„‘è¶Šæ˜¯å¼€æ”¾ï¼Œè¶Šæ˜¯ä¸ä¼šè‡ªæ¬ºæ¬ºäººã€‚å…¶ä»–äººç»™ä½ çš„åé¦ˆå°±ä¼šæ›´åŠ è¯šå®žï¼ˆâ€œä½ å¦‚æžœæ˜¯å–œæ¬¢å¬ä¸Žè‡ªå·±æ„è§ä¸€æ ·çš„è¯ï¼›å°±ä¼šå¾—åˆ°çš„åé¦ˆå°±è¶Šæ˜¯è™šå‡â€ï¼‰ å¦‚æžœè¿™äº›äººæ˜¯å¯ä¿¡çš„äºº ï¼›ä½ å°†ä¼šæ”¶èŽ·å¾ˆå¤šã€‚ ä¸è¦æ‹…å¿ƒå…¶ä»–äººçš„çœ‹æ³•ï¼›é‚£ä¼šæˆä¸ºä½ çš„éšœç¢ä½ å¿…é¡»ä»¥ä½ è®¤ä¸ºæœ€å¥½çš„ç‹¬ç‰¹çš„æ–¹å¼è¡Œäº‹ï¼›è¿™æ ·åšä¸€å®šä¼šæ”¶åˆ°åé¦ˆï¼›æˆ‘ä»¬å¿…é¡»ä»¥å¼€æ”¾çš„å¤´è„‘æ€è€ƒè¿™äº›åé¦ˆã€‚ å°½ç®¡ä½ çš„æžåº¦é€æ˜Žä¼šè®©ä½ æ„Ÿè§‰åˆ°ä¸èˆ’æœï¼›ä½†æ˜¯è¿™æ ·å¯¹ä½ æ˜¯æœ€å¥½çš„ã€‚ æžåº¦æ±‚çœŸï¼Œæžåº¦é€æ˜Žä¼šå¸¦æ¥æ›´åŠ æœ‰æ„ä¹‰çš„å·¥ä½œå’Œæ›´å¥½çš„äººé™…å…³ç³» è§‚å¯Ÿè‡ªç„¶ï¼›å­¦ä¹ çŽ°å®žè§„å¾‹ä¸¤ç§è§†è§’ï¼š è‡ªä¸Šè€Œä¸‹ æ‰¾äº‹åŠ¡èƒŒåŽè§„å¾‹ï¼š ç†è§£å¸‚åœºï¼›ä¾›æ±‚å…³ç³»ï¼›å®è§‚å¤§åŠ¿ è‡ªä¸‹è€Œä¸ŠåŽ»éªŒè¯å…·ä½“æƒ…å†µ ï¼š éªŒè¯å…·ä½“æƒ…å†µæ˜¯å¦ç›¸ç¬¦åˆ ä¸è¦å›ºå®ˆä½ è®¤ä¸ºäº‹ç‰© â€œåº”è¯¥â€ æ˜¯ä»€ä¹ˆæ ·å­ä¿æŒå®¢è§‚ï¼š ä¸è¦è®©åè§ä½¿æˆ‘ä»¬æ— æ³•è®¤è¯†å®¢è§‚æƒ…å†µã€‚ å½“çœ‹åˆ°ä¸€ä¸ªè®¤ä¸ºè‡ªç„¶æ˜¯é”™è¯¯çš„æƒ³æ³•çš„æ—¶å€™ï¼Œå…ˆå‡è®¾è‡ªå·±æ˜¯é”™çš„ï¼Œç„¶åŽæƒ³åŠžæ³•å¼„æ˜Žç™½ä¸ºä»€ä¹ˆè‡ªç„¶å¦‚æ­¤æ˜¯åˆç†çš„ã€‚ä¸€ä¸ªä¾‹å­ï¼š å¤§è‰åŽŸä¸Šé¬£ç‹—åƒäº†å°å¹¼é©¬ï¼Œæˆ‘ä»¬ä¼šå¿ƒç”ŸåŒæƒ…ã€‚ä½†æ˜¯äº‹å®žä¸Šè¿™æ˜¯è‡ªç„¶æ³•åˆ™ï¼Œè‡ªç„¶ä¼šèµ°å‘æ•´ä½“æœ€ä¼˜ï¼Œè€Œä¸æ˜¯ä¸ªä½“æœ€ä¼˜åŒ–ã€‚ äººä¹Ÿæ˜¯ä¸€æ ·ã€‚äººä»¬ä¼šæŠŠå¯¹è‡ªå·±æˆ–è€…è‡ªå·±ç›¸å…³çš„äººä¸åˆ©çš„äº‹æƒ…å«åšåäº‹ï¼Œè€Œå¿½ç•¥æ›´å¤§çš„å¥½ã€‚ ç¾¤ä½“ä¸­ä¹Ÿæœ‰è¿™ç§å€¾å‘ï¼Œå¦‚å®—æ•™æ­§è§†ã€‚ åªæ ¹æ®äº‹åŠ¡å¯¹ä¸ªäººçš„å½±å“å°±åˆ¤æ–­ç»å¯¹çš„å¥½ä¸Žåæ˜¯ä¸åˆç†çš„ã€‚ï¼ˆè¿™ç‚¹å¾ˆéš¾åšåˆ°ï¼‰ ä¸€ä¸ªä¸œè¥¿è¦å¥½ï¼Œå¿…é¡»ç¬¦åˆçŽ°å®žè§„å¾‹ï¼Œå¹¶ä¿ƒè¿›æ•´ä½“çš„è¿›åŒ–ã€‚è¿™ä¼šå¸¦æ¥æ›´å¤§çš„å¥½ã€‚ è¿›åŒ–æ˜¯å®‡å®™ä¸­æœ€å¼ºå¤§çš„åŠ›é‡ è¿™é‡ŒæŽ¨èä¸€æœ¬ä¹¦ï¼šã€ŠåŸºå› ä¹‹æ²³ã€‹ï¼› å…³äºŽè¿›åŒ–ï¼šè¿˜æœ‰ä¸€æœ¬ä¹¦ï¼Œã€Šè‡ªç§çš„åŸºå› ã€‹ï¼Œ ä¹Ÿéžå¸¸å¼€è„‘æ´žã€‚ è¿›åŒ–æ˜¯ç”Ÿå‘½æœ€å¤§çš„æˆå°±å’Œå›žæŠ¥ä¸ªäººæ¿€åŠ±æœºåˆ¶å¿…é¡»ç¬¦åˆç¾¤ä½“ç›®æ ‡ã€‚æ¯”å¦‚è‡ªç„¶ç»™äº†æ€§è¡Œä¸ºä¸ªä½“å·¨å¤§çš„å¿«ä¹æ¿€åŠ±ï¼Œæ¥è¾¾åˆ°ç¾¤ä½“çš„ä¸æ–­è¿›åŒ–è¿­ä»£ã€‚ çŽ°å®žä¸ºäº†è¶‹å‘æ•´ä½“æœ€å¤§åŒ–ï¼Œè€Œä¸æ˜¯ä¸ªä½“ã€‚ä¸ºäº†æ•´ä½“åšè´¡çŒ®ï¼Œä½ å°±æœ‰å¯èƒ½æ”¶åˆ°å›žæŠ¥ã€‚è‡ªç„¶é€‰æ‹©è®©æ›´å¥½äº§å“å¾—ä»¥ä¿ç•™ï¼Œç»“æžœæ˜¯æ•´ä½“çš„æœ€ä¼˜åŒ–ã€‚ é€šè¿‡å¿«é€Ÿè¯•é”™ä»¥é€‚åº”çŽ°å®žæ˜¯æ— ä»·çš„ã€‚å®žéªŒå’Œé€‚åº”èƒ½å¸¦æ¥æ›´å¿«çš„è¿›æ­¥ã€‚ è¦æ„è¯†åˆ°ä½ å³æ˜¯ä¸€åˆ‡ï¼Œåˆä»€ä¹ˆéƒ½ä¸æ˜¯ï¼Œå¹¶å†³å®šä½ æƒ³æˆä¸ºä»€ä¹ˆæ ·å­ã€‚â€œä¸ªäººå³æ˜¯ä¸€åˆ‡ï¼Œåˆä»€ä¹ˆéƒ½ä¸æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„æ‚–è®ºã€‚â€ ä½ çš„æœªæ¥å–å†³äºŽä½ çš„è§†è§’ã€‚ä½ çš„æœªæ¥å–å†³äºŽä½ çš„å¦‚ä½•çœ‹å¾…äº‹ç‰©ï¼Œå…³å¿ƒä»€ä¹ˆäº‹ç‰©ã€‚å¿…é¡»å†³å®šä½ å¤šå¤§ç¨‹åº¦å°†åˆ«äººçš„åˆ©ç›Šæ”¾åœ¨ä½ çš„è‡ªå·±åˆ©ç›Šä¹‹ä¸Šã€‚æ‹¥æŠ±çŽ°å®žï¼Œä»Žè‡ªç„¶çš„è§’åº¦ä¿¯è§†è‡ªèº«å¾ˆç¾Žå¦™ã€‚ ç†è§£è‡ªç„¶æä¾›çš„çŽ°å®žæ•™è®­æ”¶ç›Šé€’å‡è§„å¾‹ã€‚ ä»»ä½•ä¸œè¥¿åœ¨ä»Žå¤ªå°‘å˜å¤ªå¤šçš„è¿‡ç¨‹ä¸­ï¼Œè¾¹é™…æ”¶ç›Šéƒ½ä¼šé€’å‡ã€‚ æ²¡æœ‰ç—›è‹¦å°±æ²¡æœ‰æ”¶èŽ·ã€‚ â€œäººéœ€è¦å›°éš¾ï¼Œè¿™å¯¹å¥åº·æ¥è¯´æ˜¯å¿…é¡»çš„ã€‚â€ ç—›è‹¦ + åæ€ = è¿›æ­¥å¦‚æžœä»¥æ­£ç¡®çš„æ€åº¦é¢å¯¹ç—›è‹¦ï¼Œæ„Ÿåˆ°ç—›è‹¦å°±æ˜¯ä½ çš„å¹¸è¿ï¼ï¼å³ä½¿åæ€ç—›è‹¦ã€‚ æœ€å¥½çš„å°±æ˜¯åœ¨ç—›è‹¦çš„å½“æ—¶å°±è¿›è¡Œåæ€ã€‚ è€ƒè™‘åŽç»­ä¸Žå†åŽç»­çš„ç»“æžœç›´æŽ¥ç»“æžœå¾ˆå¯èƒ½æ˜¯è¯±æƒ‘æˆ–è€…ç—›è‹¦ã€‚ å¦‚æžœå› ä¸ºç›´æŽ¥ç»“æžœçš„ç—›è‹¦è€Œä¸åŽ»åšï¼Œå°±å¾ˆéš¾èŽ·å¾—å¤§çš„æˆåŠŸã€‚ å¦‚æžœå› ä¸ºç›´æŽ¥ç»“æžœçš„è¯±æƒ‘è€ŒåŽ»åšäº†ï¼Œå°±ä¼šé­é‡æ›´å¤§çš„å¤±è´¥ã€‚ æŽ¥å—ç»“æžœï¼šå†…æŽ§ç‚¹åœ¨ç”Ÿæ´»ä¸­ä¸è®ºé‡åˆ°ä»€ä¹ˆæƒ…å†µï¼Œå¦‚æžœä½ èƒ½å¤Ÿè´Ÿèµ·è´£ä»»ï¼Œè¿›è¡Œè‰¯å¥½çš„å†³ç­–ï¼Œè€Œä¸æ˜¯æŠ±æ€¨ä½ æ— æ³•æŽ§åˆ¶çš„äº‹æƒ…ï¼Œä½ å°†æ›´åŠ å®¹æ˜“çŸ¥æ‰¾åˆ°å¹¸ç¦ã€‚ ä¸è¦ä¸ºå–œä¸å–œæ¬¢è‡ªå·±çš„å¤„å¢ƒæ‹…å¿§ï¼Œä½ å¿…é¡»æ ¹æ®è‡ªå·±çš„æ„¿æœ›æ‰¾åˆ°å®žçŽ°æ„¿æœ›çš„é€”å¾„ã€‚ç„¶åŽï¼Œé¼“èµ·å‹‡æ°”åšæŒä¸‹åŽ»ã€‚ åŽé¢çš„äº”æ­¥æµç¨‹ä¼šç»™åˆ°ä½ ä¸€å®šå¸®åŠ©ã€‚ ä»Žæ›´é«˜çš„å±‚æ¬¡è…èš€æœºå™¨æƒ³è±¡è‡ªå·±æ˜¯ä¸€ä¸ªå¤§æœºå™¨é‡Œçš„ä¸€ä¸ªå°æœºå™¨ï¼Œæ‹¥æœ‰æ”¹å˜è‡ªå·±è€Œå˜å¾—æ›´å¥½çš„èƒ½åŠ›ã€‚ é€šè¿‡æ¯”è¾ƒä½ å®žçŽ°çš„ç»“æžœå’Œä½ çš„ç›®æ ‡ï¼Œä½ å°±èƒ½ç¡®å®šå¦‚ä½•æ”¹è¿›ä½ çš„æœºå™¨ã€‚ å´åˆ«ä½œä¸ºæœºå™¨è®¾è®¡è€…çš„ä½ å’Œä½œä¸ºæœºå™¨ä¸­å·¥ä½œè€…çš„ä½ ã€‚ æœ€éš¾çš„äº‹æƒ…æ˜¯åœ¨è‡ªèº«æ‰€å¤„çš„çŽ¯å¢ƒä¸­ï¼Œå®¢è§‚çš„çœ‹å¾…æˆ‘ä»¬è‡ªå·±ï¼Œä¸é«˜çœ‹è‡ªå·±ï¼Œä¸æ‰¿æ‹…ä¸åº”è¯¥æ‰¿æ‹…çš„ä»»åŠ¡ã€‚ æ“…äºŽè¯·æ•™é¢†åŸŸè¾¾äººï¼Œå› ä¸ºä½ å¾ˆéš¾å®¢è§‚çœ‹å¾…è‡ªå·±ï¼Œæ‰€ä»¥ä½ éœ€è¦ä¾èµ–ä»–äººçš„æ„è§ä»¥åŠè¯æ®ã€‚ å¦‚æžœä½ å¤´è„‘å¼€æ”¾ï¼Œè¶³å¤Ÿæœ‰å†³å¿ƒï¼Œä½ å‡ ä¹Žå¯ä»¥å®žçŽ°ä»»ä½•æ„¿æœ›ã€‚ äº”éƒ¨æµç¨‹ï¼›å®žçŽ°ä½ çš„äººç”Ÿæ„¿æœ› æ˜Žç¡®ç›®æ ‡ æ‰¾åˆ°é˜»ç¢ç›®æ ‡çš„é—®é¢˜ï¼Œå¹¶ä¸”ä¸å®¹å¿é—®é¢˜ å‡†ç¡®è¯Šæ–­é—®é¢˜ï¼Œæ‰¾åˆ°é—®é¢˜æ ¹æº è§„åˆ’å¯ä»¥è§£å†³é—®é¢˜çš„æ–¹æ¡ˆ åšä¸€åˆ‡å¿…è¦çš„äº‹å„¿æ¥è·µè¡Œè¿™äº›æ–¹æ¡ˆï¼Œå®žçŽ°æˆæžœ è¿™äº”ä¸ªæ­¥éª¤å½¢æˆä¸€ä¸ªå¾ªçŽ¯ã€‚ éœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼š ä¸“æ³¨æ¯ä¸ªç‚¹ã€‚è®¾å®šç›®æ ‡çš„æ—¶å€™å°±è®¾å®šç›®æ ‡ï¼Œä¸è¦æƒ³å®žçŽ°å’Œå‡ºé”™ï¼ˆå»¶è¿Ÿæ‰¹åˆ¤ï¼‰ã€‚ å½“ä½ è¯Šæ–­é—®é¢˜çš„æ—¶å€™ï¼Œå°±ä¸è¦æƒ³å¦‚ä½•è§£å†³é—®é¢˜ï¼Œæ··æ·†è¿™ä¸¤ä¸ªé—®é¢˜ä¼šå¯¼è‡´ä½ æ— æ³•å‘çŽ°çœŸæ­£çš„é—®é¢˜ã€‚ åšæŒè¿™äº›è§„åˆ™ã€‚æŒ«æŠ˜ï¼Œä¼šè®©ä½ éš¾å—ï¼Œä¸å®Œç¾Žæ°¸è¿œå­˜åœ¨ã€‚å¥½æ¶ˆæ¯æ˜¯ä½ å¯ä»¥ä»Žé”™è¯¯ä¸­å¸æ”¶å­¦ä¹ å’Œæˆé•¿ã€‚ åšæŒä¸‹åŽ»ä½ å°±ä¼šæœ‰æ”¶èŽ·ã€‚ æœ‰æ˜Žç¡®çš„ç›®æ ‡æŽ’åˆ—ç›®æ ‡ä¼˜å…ˆçº§ã€‚ä½ å‡ ä¹Žå¯ä»¥å¾—åˆ°ä½ æƒ³è¦çš„ä»»ä½•ä¸œè¥¿ï¼Œä½†ä½ æ— æ³•å¾—åˆ°æ‰€æœ‰ä¸œè¥¿ã€‚ åˆ†æ¸…ç›®æ ‡å’Œæ¬²æœ› ç›®æ ‡æ˜¯ä½ çœŸæ­£éœ€è¦çš„ä¸œè¥¿ æ¬²æœ›æ˜¯ä½ æƒ³è¦ä½†ä¼šé˜»ç¢ä½ å®žçŽ°ç›®æ ‡çš„ä¸œè¥¿ï¼ˆæ¯”å¦‚å·æ‡’ï¼‰ ä¸è¦å› ä¸ºæŸä¸ªç›®æ ‡æ— æ³•å®žçŽ°å°±å¦å®šå®ƒ ä¼Ÿå¤§çš„æœŸæœ›åˆ›é€ ä¼Ÿå¤§çš„èƒ½åŠ› æ‹¥æœ‰çµæ´»æ€§å’Œè‡ªæˆ‘å½’å’Žï¼Œé‚£æ²¡ä»€ä¹ˆèƒ½é˜»æ­¢ä½  çŸ¥é“å¦‚ä½•åº”å¯¹æŒ«æŠ˜å¾ˆé‡è¦ é€†å¢ƒä¸­ï¼Œé‡è¦çš„æ˜¯å®ˆä½ä¼˜åŠ¿ï¼Œå‡å°‘æŸå¤± ä½ çš„ä»»åŠ¡æ°¸è¿œæ˜¯åšå‡ºå°½å¯èƒ½å°‘çš„é€‰æ‹© æˆåŠŸä¸éš¾ï¼Œå…³é”®åœ¨äºŽå°‘çŠ¯é”™è¯¯ æ‰¾å‡ºé—®é¢˜ä½†æ˜¯ä¸å®¹å¿ä»¤äººç—›è‹¦çš„é—®é¢˜å½“åšè€ƒéªŒä½ æ½œåœ¨è¿›æ­¥çš„æœºä¼š å½“ä½ é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ä¸€ä¸ªæœºä¼šã€‚ å¤§å¤šæ•°äººä¸å–œæ¬¢è¿™ä¹ˆåš ä¸è¦é€ƒé¿é—®é¢˜ï¼Œæ‰¿è®¤é—®é¢˜æ˜¯æ”¹å˜çš„ç¬¬ä¸€æ­¥ å¿ç—›å‰è¡Œï¼Œç—›è‹¦ä¼šç»™ä½ æ±‡æŠ¥ ä¸è¦æŠŠæŸä¸ªåŽŸå› å½“åšé—®é¢˜æœ¬èº« æˆ‘æ— æ³•å¾—åˆ°å¾ˆå¥½çš„ç¡çœ æ˜¯ä¸€ä¸ªåŽŸå› ï¼Œæˆ‘å·¥ä½œæ•ˆçŽ‡ä½Žæ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå‰è€…å¯èƒ½æ˜¯åŽè€…çš„åŽŸå› ã€‚ é‡ç‚¹è§£å†³å¤§é—®é¢˜ æ‰¾åˆ°é—®é¢˜æ ¹æºå¼„æ¸…æ¥šé—®é¢˜ï¼Œè¿™éœ€è¦æ—¶é—´åŽ»è¯Šæ–­ï¼Œä¸€æ¬¡è‰¯å¥½çš„è¯Šæ–­ä¸€èˆ¬éœ€è¦15-60åˆ†é’Ÿã€‚ åŒºåˆ†ç›´æŽ¥ä¸Žæ ¹æœ¬åŽŸå›  è§„åˆ’æ–¹æ¡ˆå‰è¿›ä¹‹å‰å…ˆå›žé¡¾ è®¾ç½®æ–¹æ¡ˆï¼Œå†™æ¥æ¥æ‰€æœ‰äººéƒ½èƒ½çœ‹åˆ°ï¼Œä¸¥æ ¼æ‰§è¡Œ è§„åˆ’å…ˆäºŽè¡ŒåŠ¨ï¼Œå¥½è§„åˆ’ä¸åº”å®šè¦å¾ˆå¤šæ—¶é—´ åšå®šçš„ä»Žå¤´åˆ°å°¾æ‰§è¡Œæ–¹æ¡ˆä¿æŒè°¦é€Šä¸Žå…¶ä»–äººé«˜è´¨é‡äº¤æµ ä¿æŒè°¦é€Šï¼Œä½ å¯ä»¥ä»Žåˆ«äººé‚£é‡Œå¾—åˆ°ä½ éœ€è¦çš„ä¸œè¥¿ æ‰¾åˆ°ä½ æœ€å¤§çš„å¼±ç‚¹ï¼Œå¹¶å¤„ç†æŽ‰ ç†è§£è‡ªå·±çš„è®¤çŸ¥ï¼Œç†è§£ä»–äººä¸Žä½ ä¸åŒæå‡è®¤çŸ¥èƒ½åŠ›ï¼Œä¿æŒå¤´è„‘å¼€æ”¾ï¼Œä»Žä»–äººé‚£é‡ŒèŽ·å¾—å¸®åŠ©ï¼Œä½ å¯ä»¥å®žçŽ°å¾ˆå¤šäº‹æƒ… åšåˆ°å¤´è„‘æžåº¦å¼€æ”¾è¿™ä¸€ç« å‡ ä¹Žæ˜¯ç”Ÿæ´»åŽŸåˆ™ä¸­æœ€é‡è¦çš„ä¸€ç« ã€‚(é›·è¾¾é‡Œå¥¥è¯´ï¼›è¿™ä¹Ÿæ˜¯å…¨ä¹¦æœ€é‡è¦çš„ä¸€ç« )ä¸»è¦é‡ç‚¹æœ‰ä¸¤ä¸ªï¼š ä¸€ä¸ªæ˜¯ä¸ºä»€ä¹ˆè¦ä¿æŒå¤´è„‘å¼€æ”¾ï¼›ä¸€ä¸ªæ˜¯ä»€ä¹ˆæƒ…å†µä¸‹ä½ æ˜¯å¤´è„‘å°é—­çš„ã€‚è®¤è¯†åˆ°ç¬¬äºŒç‚¹å…¶å®žå¾ˆé‡è¦ï¼Œè¿™ä¼šå¸®åŠ©ä½ çš„æ—¥å¸¸åæ€ã€‚ è®¤è¯†åˆ°è‡ªå·±çš„éšœç¢å’Œä¸è¶³ï¼› å¯»æ±‚å¯ä¿¡åº¦é«˜çš„äººçš„æ„è§ï¼Œè®¾èº«å¤„åœ°æ€è€ƒå’Œç†è§£ï¼Œå¯¹æ¯”è‡ªå·±çš„ï¼Œæœ€ç»ˆåšå‡ºæ›´å¥½çš„å†³ç­–ã€‚ è®¤è¯†ä½ çš„ä¸¤å¤§éšœç¢éšœç¢ä¸€ï¼šæ„è¯†éšœç¢ï¼›ç†è§£ä½ çš„è‡ªæˆ‘æ„è¯†éšœç¢ ä¸»è¦æ˜¯ä½ æ½œæ„è¯†é‡Œçš„é˜²å¤‡æœºåˆ¶ï¼› ä½¿ä½ éš¾ä»¥æŽ¥å—ä½ çš„é”™è¯¯å’Œç¼ºç‚¹ã€‚ æˆ‘ä»¬æœ‰ä¸€äº›æ ¹æ¤äºŽå†…å¿ƒçš„éœ€æ±‚ï¼š è¢«çˆ± è¢«éœ€è¦ å®³æ€•æ­»äº¡ å®³æ€•å¤±åŽ» å®³æ€•è‡ªå·±æ— æ„ä¹‰ ä¸èƒ½è®©â€œæƒ³è¦è‡ªå·±æ­£ç¡®çš„éœ€æ±‚ â€ åŽ‹å€’ â€œæ‰¾å‡ºçœŸç›¸â€ çš„éœ€æ±‚ å½“æœ‰äººå’Œä½ æ„è§ä¸ä¸€æ ·ï¼›å¹¶ä¸”è¦æ±‚ä½ è§£é‡Šçš„æ—¶å€™ï¼›ä½ çš„å¤§è„‘ä¼šæŠŠè¿™æ ·çš„ä¸œè¥¿å½“åš æ”»å‡»ï¼›ä½ ä¼šå˜å¾—æ„¤æ€’ã€‚ å¦‚æžœä½ æƒ³è¦æˆåŠŸï¼›ä½ éœ€è¦å…‹åˆ¶è¿™ä¸€ç‚¹ã€‚ è¿™æ ·çš„äººä½ ä¹Ÿå¯ä»¥è§‚å¯Ÿä¸€ä¸‹ï¼›èº«è¾¹åˆ°å¤„éƒ½æ˜¯ã€‚ä½ ä¹Ÿå¯ä»¥åæ€ä¸€ä¸‹ï¼›ä½ è‡ªå·±æ˜¯ä¸æ˜¯è¿™æ ·çš„äººã€‚ï¼ˆæ€Žä¹ˆåˆ¤æ–­è‡ªå·±æœ‰è¿™ç§å€¾å‘åœ¨åŽé¢ä¼šè¯´åˆ°ï¼‰ éšœç¢äºŒï¼›æ€ç»´éšœç¢ï¼›ç†è§£ä½ çš„æ€ç»´ç›²ç‚¹éšœç¢ äººå¾ˆéš¾ç†è§£è‡ªå·±çœ‹ä¸åˆ°çš„ä¸œè¥¿ï¼›ã€Šéœ€æ±‚ã€‹ è¿™æœ¬ä¹¦é‡Œä¹Ÿæœ‰è¯´åˆ° å¡žç¼ªå°”æ€åå°„ ã€‚ å¦‚æžœä½ ä¸€å¿ƒåªæƒ³å‘Šè¯‰å¯¹æ–¹è‡ªå·±çš„è®¤ä¸ºæ­£ç¡®çš„æƒ³æ³•ï¼›ä½ å°±æ˜¯ ä¸€ä¸ªå¤´è„‘å°é—­çš„äºº è¿™æ ·çš„è¯ï¼›å½“å…¶ä»–äººç»™ä½ å±•ç¤ºå„ç§å¯èƒ½æ€§å¨èƒå’Œæ‰¹è¯„çš„æ—¶å€™ï¼›ä½ å¯èƒ½ä¼šçœ‹ä¸è§ã€‚ä¹Ÿæ— æ³•é¢†ä¼šã€‚ å¥‰è¡Œå¤´è„‘æžåº¦å¼€æ”¾ï¼›ä¸ä»…ä»…æ˜¯â€œæ‰¿è®¤è‡ªå·±å¯èƒ½é”™äº†â€å¦‚æžœä½ çŸ¥é“è‡ªå·±æœ‰ç›²ç‚¹ï¼›ä½ å°±èƒ½æ‰¾åˆ°ä¸€ç§è§£å†³åŠžæ³•ã€‚ å¤´è„‘å¼€æ”¾ä¸ä»…ä»…æ˜¯â€œæ‰¿è®¤è‡ªå·±å¯èƒ½é”™äº†â€ï¼›ä½†æ˜¯ä¾æ—§åšæŒè‡ªå·±çš„è§‚ç‚¹ã€‚è¿™æ ·ä½œç”¨ä¸å¤§ã€‚ a. è¯šæ³çš„æƒ³æƒ³è‡ªå·±ä¹Ÿè®¸å¹¶ä¸çŸ¥é“æœ€å¥½çš„è§£å†³åŠžæ³•æ˜¯ä»€ä¹ˆï¼›èƒ½ä¸èƒ½å¦¥å–„å¤„ç†â€œä¸çŸ¥é“â€å¾ˆé‡è¦å¾ˆå¤šç³Ÿç³•çš„å†³å®šæ˜¯å› ä¸ºä»–ä»¬ç›¸ä¿¡è‡ªå·±æ˜¯å¯¹çš„ã€‚è€Œå¤´è„‘æžåº¦å¼€æ”¾çš„äººçŸ¥é“ï¼›æ‰¾åˆ°é—®é¢˜çš„ç­”æ¡ˆå¾ˆé‡è¦ã€‚ b. å†³ç­–æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼š 1 åˆ†æžæ‰€æœ‰ç›¸å…³ä¿¡æ¯ï¼›2 å†³ç­–å¬å¬å…¶ä»–äººçš„è§‚ç‚¹å¹¶åŠ ä»¥æ€è€ƒï¼›ä¸ä¼šå‰Šå¼±ä½ ç‹¬ç«‹æ€è€ƒï¼›è‡ªä¸»å†³ç­–çš„è‡ªç”±ã€‚åªä¼šå¸®ä½ æ‹¥æœ‰æ›´å¹¿çš„è§’åº¦ c. ä¸è¦æ‹…å¿ƒä½ çš„å½¢è±¡ï¼›åªæ‹…å¿ƒå¦‚ä½•å®žçŽ°ç›®æ ‡åšå‡ºä¼˜ç§€å†³ç­–çš„äººï¼›å¾ˆå°‘åšä¿¡è‡ªå·±å·²ç»æŽŒæ¡äº†æœ€å¥½çš„ç­”æ¡ˆï¼›æ‰¿è®¤è‡ªå·±æœ‰ç¼ºç‚¹ å’Œ ç›²ç‚¹ ï¼›å¹¶è¯•å›¾äº†è§£æ›´å¤šï¼›å®¢æœç¼ºé™·å’Œç›²ç‚¹ã€‚ d ä¸å¸æ”¶ï¼› äº§å‡ºä¹Ÿä¸å¤§å¥½ã€‚ e ä»Žä»–äººçš„è§’åº¦ï¼›è®¾èº«å¤„åœ°ï¼›æ‰èƒ½è¯„ä¼°å¦ä¸€ç§è§‚ç‚¹çš„ä»·å€¼é«˜åº¦æŽ¥å—è‡ªå·±é”™äº†çš„å¯èƒ½æ€§ï¼›é¼“åŠ±åˆ«äººå‘Šè¯‰è‡ªå·±é”™åœ¨å“ªé‡Œ f è®°ä½ï¼›ä½ æ˜¯åœ¨å¯»æ‰¾æœ€å¥½çš„ç­”æ¡ˆï¼›ä¸æ˜¯è‡ªå·±èƒ½å¾—å‡ºæœ€å¥½çš„ç­”æ¡ˆçŸ¥é“è‡ªå·±ä¸çŸ¥é“ï¼›æ— æ¯”é‡è¦ã€‚ è‡ªé—®ä¸€ä¸‹ï¼›æˆ‘æ˜¯ä¸æ˜¯åªæ˜¯ä»Žè‡ªå·±çš„è§’åº¦çœ‹é—®é¢˜ g æžæ¸…æ¥šä½ æ˜¯åœ¨äº‰è®ºè¿˜æ˜¯åœ¨è¯•å›¾ç†è§£ä¸€ä¸ªé—®é¢˜ï¼›æ ¹æ®å¯ä¿¡åº¦ï¼›æƒ³æƒ³å“ªç§æ›´åŠ åˆç† å¯ä¿¡åº¦ æœ‰ä¸¤ä¸ªç‰¹å¾ï¼› åå¤çš„åœ¨ç›¸å…³é¢†åŸŸæˆåŠŸæ‰¾åˆ°ç­”æ¡ˆï¼ˆè‡³å°‘ä¸‰æ¬¡ï¼›æ‹¥æœ‰ç¡¬å±¥åŽ†ï¼‰ å†è¢«è´£é—®çš„æƒ…å†µä¸‹èƒ½å¯¹è‡ªå·±çš„è§‚ç‚¹åšå‡ºå¾ˆå¥½çš„è§£é‡Š é¢†ä¼šå¹¶æ„Ÿæ¿€ï¼šæ·±æ€ç†Ÿè™‘çš„æ„è§åˆ†æ­§æ²Ÿé€šæ–¹å¼è¦è®©å¯¹æ–¹è§‰å¾—ï¼šä½ æ˜¯è¯•å›¾åœ¨ç†è§£ ä½ éœ€è¦æé—®ï¼›è€Œä¸æ˜¯åšå‡ºé™ˆè¿°ï¼›å¿ƒå¹³æ°”å’Œçš„è¿›è¡Œè®¨è®ºï¼Œå¹¶é¼“åŠ±å¯¹æ–¹ä¹Ÿè¿™ä¹ˆåšã€‚ ï¼ˆæŸäº›æ—¶å€™ï¼‰äººä»¬åœ¨äº§ç”Ÿåˆ†æ­§æ—¶å˜å¾—æ„¤æ€’æ˜¯æ¯«æ— æ„ä¹‰çš„ å½“è®¨è®ºé™·å…¥åƒµå±€ï¼›æœ€æ²¡æ•ˆæžœçš„å°±æ˜¯ï¼›ä½ è¯•å›¾åœ¨è„‘å­ä¸­å°†æ‰€æœ‰çš„äº‹æƒ…éƒ½å¼„å¾—æ¸…æ¥šã€‚ å’Œå¯ä¿¡çš„ï¼›æ„¿æ„è¡¨è¾¾åˆ†æ­§çš„äººä¸€èµ·å®¡è§†ä½ çš„è§‚ç‚¹æ—¢å•ç‹¬è¯¢é—®ä¸“å®¶ï¼›ä¹Ÿé¼“åŠ±ä¸“å®¶åœ¨æˆ‘é¢å‰å±•çŽ°æ„è§åˆ†æ­§ã€‚ ä¸ºæœ€åçš„åšå‡†å¤‡ã€‚ä½¿å…¶çœ‹èµ·æ¥ä¸é‚£ä¹ˆç³Ÿç³•ã€‚ ï¼ˆé‡è¦ï¼‰è¯†åˆ«ä½ å¤´è„‘å°é—­çš„è¿¹è±¡a å°é—­çš„äººï¼šä¸å–œæ¬¢çœ‹åˆ°è‡ªå·±çš„è§‚ç‚¹è¢«æŒ‘æˆ˜ ä¸å¼€æ”¾ï¼šä¼šå› ä¸ºæ— æ³•è¯´æœä»–äººè€Œæ²®ä¸§ï¼›è€Œä¸æ˜¯å¥½å¥‡å¯¹æ–¹ä¸ºä½•çœ‹æ³•ä¸åŒã€‚ å¼€æ”¾ï¼š æ›´æƒ³äº†è§£ä¸ºä»€ä¹ˆä¼šæœ‰åˆ†æ­§ï¼›æ˜Žç™½è‡ªå·±å¯èƒ½æ˜¯é”™çš„ b å°é—­çš„äººï¼šå–œæ¬¢åšé™ˆè¿°è€Œä¸æ˜¯æé—® å¼€æ”¾çš„äººï¼›å¯ä¿¡åº¦å¾ˆé«˜çš„äººï¼›ç»å¸¸ä¼šæå‡ºå¾ˆå¤šé—®é¢˜ã€‚å¹¶çœŸè¯šçš„ç›¸ä¿¡è‡ªå·±å¯èƒ½æ˜¯é”™çš„ c å°é—­çš„äºº: æ›´å…³å¿ƒè‡ªå·±æ˜¯å¦è¢«ç†è§£ï¼›è€Œä¸æ˜¯ç†è§£ä»–äºº å°é—­çš„äººï¼š é€šå¸¸æ‹…å¿ƒè‡ªå·±æ²¡æœ‰è¢«ç†è§£ å¼€æ”¾çš„äººï¼šè§‰å¾—æœ‰å¿…è¦ä»Žä»–äººçš„è§†è§’çœ‹é—®é¢˜ã€‚ d å°é—­çš„äººï¼šâ€œæˆ‘å¯èƒ½é”™äº†ã€‚ã€‚ã€‚ä½†è¿™æ˜¯æˆ‘çš„è§‚ç‚¹â€ è¿™æ˜¯ä¸€ä¸ªæ•·è¡çš„å›žç­”ï¼›äººä»¬å€Ÿæ­¤æ¥å›ºå®ˆè‡ªå·±çš„è§‚ç‚¹ æœ€å¥½æå‡ºä¸€ä¸ªé—®é¢˜ï¼›è€Œä¸æ˜¯åšå‡ºä¸€ä¸ªæ–­è¨€ e å°é—­çš„äºº ï¼š å°é—­çš„äººï¼Œé˜»æŒ åˆ«äººçš„å‘è¨€ å¼€æ”¾çš„äººæ›´å–œæ¬¢å€¾å¬å‘è¨€ï¼›é¼“åŠ±è¡¨è¾¾ f å°é—­çš„äºº : å¾ˆéš¾åŒäº‹æ‹¥æœ‰ä¸¤ç§æƒ³æ³• åŒæ—¶æŒæœ‰ä¸¤ç§æƒ³æ³•ï¼›å¹¶ä¸”èƒ½ä¿æŒç‹¬ç«‹æ€è€ƒã€‚ g å°é—­çš„äºº ï¼š ç¼ºä¹è°¦é€Š å¼€æ”¾çš„äººï¼š æ—¶åˆ»æ‹…å¿§è‡ªå·±å¯èƒ½æ˜¯é”™è¯¯çš„ã€‚ å¦‚ä½•åšåˆ°å¤´è„‘å¼€æ”¾ï¼Ÿ åˆ©ç”¨è‡ªå·±çš„ç—›è‹¦è¿›è¡Œé«˜è´¨é‡çš„æ€è€ƒ ä¸€æ—¦è§‰å¾—æ„¤æ€’ï¼›å†·é™ä¸‹æ¥ï¼›ä»¥æ·±æ€ç†Ÿè™‘çš„æ–¹å¼çœ‹å¾…çœ¼å‰é—®é¢˜ ä¸€å®šè¦å®¢è§‚ï¼›æ„¿æ„å€¾å¬ é‡è§†è¯æ® å†¥æƒ³ ç†è§£äººä¸Žäººå¤§å¤§ä¸ç›¸åŒè¦ç†è§£ï¼šå·¦è„‘æ€è€ƒåé€»è¾‘ï¼›å³è„‘æ€è€ƒåæƒ…æ„Ÿã€‚ è¦ç†è§£ï¼šæœ€é•¿å‘ç”Ÿçš„æ–—äº‰å°±æ˜¯æ„è¯†ä¸Žæ½œæ„è¯†ï¼›æƒ…ç»ªå’Œæ€è€ƒçš„æ–—äº‰ã€‚ å¦‚æžœä½ æ„è¯†ä¸åˆ°ä½ çš„æ½œæ„è¯†çš„å­˜åœ¨ï¼›ä½ çš„è¡Œä¸ºå°±ä¼šåƒè¥¿å¥¥è¿ªå°¼åœ¨ã€Šå½±å“åŠ›ã€‹ä¸­åšçš„é‚£ä¸ªæ¯”å–»ä¸€æ ·ï¼›æ˜¯ä¸€ä¸ªå¸¦ç€æŒ‰é’®çš„å½•éŸ³æœºï¼›ä¸€æŒ‰å°±æ’­æ”¾ã€‚ æ¯”å¦‚ï¼›å¬åˆ°åˆ«äººåå¯¹æ—¶å€™çš„è¢«ä¾µçŠ¯æ„Ÿã€‚ è¦çŸ¥é“ï¼šæˆ‘ä»¬å¯ä»¥æ”¹å˜ï¼›é€šè¿‡ä¹ æƒ¯ã€‚ å¦‚ä½•åšå‡ºæ­£ç¡®çš„å†³ç­–å¥½å†³ç­–æœ€å¤§çš„æ•Œäººæ˜¯åæƒ…ç»ª å¦‚æžœä½ è¢«æƒ…ç»ªç»‘æž¶ï¼›ä½ è®²ä¸å¯èƒ½ä½œå‡ºå¥½çš„å†³ç­–ã€‚ä½œå‡ºå†³ç­–æ—¶å€™å¿…é¡»ç”¨é€»è¾‘ï¼›ç†æ€§ï¼›äº‹å®žã€‚ æ­£å¦‚è£æ ¼æ‰€è¯´ï¼šâ€œå¦‚æžœä½ ä¸çŸ¥é“æ½œæ„è¯†çš„å­˜åœ¨ï¼›å¦åˆ™æ½œæ„è¯†å°±ä¼šä¸»å¯¼ä½ çš„äººç”Ÿï¼›è€Œä½ ï¼›ç§°ä¹‹ä¸ºå‘½è¿â€ å…ˆäº†è§£ï¼›åŽå†³ç­– æ˜¯ä»€ä¹ˆ ï¼šå…ˆäº†è§£å†³ç­–çš„åŸºç¡€çŸ¥è¯†ï¼›æ—¢åŒ…æ‹¬â€œæ˜¯ä»€ä¹ˆâ€ï¼›ä¹ŸåŒ…æ‹¬å®è§‚çš„å› æžœå…³ç³» â€œä¹ æƒ¯æ€§çš„é—®è‡ªå·±ï¼›æˆ‘åœ¨äº†è§£ç›¸å…³æƒ…å†µå—ï¼Ÿæˆ‘å·²ç»æŽŒæ¡äº†å†³ç­–çš„æ‰€æœ‰çŸ¥è¯†äº†ä¹ˆï¼Ÿâ€ ä¸ºäº†äº†è§£ï¼š è¦çŸ¥é“åº”è¯¥é—®ä»€ä¹ˆäºº ä¸è¦é«˜ä¼°è‡ªå·±çš„å¯ä¿¡åº¦ ä¸è¦ä¸åŒºåˆ†åˆ«äººçš„å¯ä¿¡åº¦ï¼ˆåœ¨ç›¸åŒé¢†åŸŸæœ‰è¿‡3æ¬¡ä»¥ä¸ŠæˆåŠŸç»éªŒçš„ç¡¬ç®€åŽ†ï¼‰ åŒºåˆ†äº‹å®žå’Œè§‚ç‚¹ï¼›ä¸è¦å¬åˆ°ä»€ä¹ˆä¿¡ä»€ä¹ˆï¼›åˆ«äººè¯´çš„å’Œåšçš„å¾ˆå¯èƒ½ä¸ä¸€æ ·ã€‚ 80/20åŽŸåˆ™ï¼šä½ ä»Ž20%çš„ä¿¡æ¯èŽ·å¾—80%çš„ä»·å€¼ï¼›æ˜Žç™½å…³é”®æ€§çš„20%æ˜¯ä»€ä¹ˆ ä¸è¦å®Œç¾Žä¸»ä¹‰ï¼›å®Œç¾Žä¸»ä¹‰çš„è¾¹é™…æ•ˆç”¨æ˜¯ é€’å‡çš„ æ€Žä¹ˆåš ï¼šæƒè¡¡ç»“æžœï¼›è€ƒè™‘ç»“æžœï¼›åŽç»­çš„ç»“æžœï¼›åŽç»­çš„åŽç»­çš„ç»“æžœ]]></content>
      <categories>
        <category>è´¢åŠ¡</category>
      </categories>
      <tags>
        <tag>è´¢åŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[backtrader]]></title>
    <url>%2F2020%2F09%2F05%2Fbacktrader%2F</url>
    <content type="text"><![CDATA[Backtraderå¼•è¨€å‰åŸºäºŽPythonçš„é‡åŒ–å›žæµ‹æ¡†æž¶æœ‰å¾ˆå¤šï¼Œå¼€æºæ¡†æž¶æœ‰ziplineã€vnpyã€pyalgotraderå’Œbacktraderç­‰ï¼Œè€Œé‡åŒ–å¹³å°æœ‰Quantopianï¼ˆå›½å¤–ï¼‰ã€èšå®½ã€ä¸‡çŸ¿ã€ä¼˜çŸ¿ã€ç±³ç­ã€æŽ˜é‡‘ç­‰ï¼Œè¿™äº›é‡åŒ–æ¡†æž¶æˆ–å¹³å°å„æœ‰ä¼˜åŠ£ã€‚å°±ä¸ªäººè€Œè¨€ï¼Œæ¯”è¾ƒåå¥½ç”¨backtraderï¼Œå› ä¸ºå®ƒåŠŸèƒ½ååˆ†å®Œå–„ï¼Œæœ‰å®Œæ•´çš„ä½¿ç”¨æ–‡æ¡£ï¼Œå®‰è£…ç›¸å¯¹ç®€å•ï¼ˆç›´æŽ¥pipå®‰è£…å³å¯ï¼‰ã€‚ä¼˜ç‚¹æ˜¯è¿è¡Œé€Ÿåº¦å¿«ï¼Œæ”¯æŒpandasçš„çŸ¢é‡è¿ç®—ï¼›æ”¯æŒå‚æ•°è‡ªåŠ¨å¯»ä¼˜è¿ç®—ï¼Œå†…ç½®äº†talibè‚¡ç¥¨åˆ†æžæŠ€æœ¯æŒ‡æ ‡åº“ï¼›æ”¯æŒå¤šå“ç§ã€å¤šç­–ç•¥ã€å¤šå‘¨æœŸçš„å›žæµ‹å’Œäº¤æ˜“ï¼›æ”¯æŒpyflioã€empyricaåˆ†æžæ¨¡å—åº“ã€alphalenså¤šå› å­åˆ†æžæ¨¡å—åº“ç­‰ï¼›æ‰©å±•çµæ´»ï¼Œå¯ä»¥é›†æˆTensorFlowã€PyTorchå’ŒKerasç­‰æœºå™¨å­¦ä¹ ã€ç¥žç»ç½‘ç»œåˆ†æžæ¨¡å—ã€‚è€Œä¸è¶³ä¹‹å¤„åœ¨äºŽï¼Œbacktraderå­¦ä¹ èµ·æ¥ç›¸å¯¹å¤æ‚ï¼Œç¼–ç¨‹è¿‡ç¨‹ä¸­ä½¿ç”¨äº†å¤§é‡çš„å…ƒç¼–ç¨‹ï¼ˆç±»classï¼‰ï¼Œå¦‚æžœPythonç¼–ç¨‹åŸºç¡€ä¸æ‰Žå®žï¼ˆå°¤å…¶æ˜¯ç±»çš„æ“ä½œï¼‰ï¼Œå­¦èµ·æ¥ä¼šæ„Ÿåˆ°åƒåŠ›ã€‚æœ¬æ–‡ä½œä¸ºbacktraderçš„å…¥é—¨ç³»åˆ—ä¹‹ä¸€ï¼Œå¯¹å…¶è¿è¡Œæ¡†æž¶è¿›è¡Œç®€è¦ä»‹ç»ï¼Œå¹¶ä»¥å®žé™…æ¡ˆä¾‹å±•ç¤ºé‡åŒ–å›žæµ‹çš„è¿‡ç¨‹ã€‚ Backtraderä»‹ç»å¦‚æžœå°†backtraderåŒ…åˆ†è§£ä¸ºæ ¸å¿ƒç»„ä»¶ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ç»„æˆéƒ¨åˆ†ï¼š æ•°æ®åŠ è½½ï¼ˆData Feedï¼‰ï¼šå°†äº¤æ˜“ç­–ç•¥çš„æ•°æ®åŠ è½½åˆ°å›žæµ‹æ¡†æž¶ä¸­ã€‚ äº¤æ˜“ç­–ç•¥ï¼ˆStrategyï¼‰ï¼šè¯¥æ¨¡å—æ˜¯ç¼–ç¨‹è¿‡ç¨‹ä¸­æœ€å¤æ‚çš„éƒ¨åˆ†ï¼Œéœ€è¦è®¾è®¡äº¤æ˜“å†³ç­–ï¼Œå¾—å‡ºä¹°å…¥/å–å‡ºä¿¡å·ã€‚ å›žæµ‹æ¡†æž¶è®¾ç½®ï¼ˆ Cerebroï¼‰ï¼šéœ€è¦è®¾ç½®ï¼ˆiï¼‰åˆå§‹èµ„é‡‘ï¼ˆiiï¼‰ä½£é‡‘ï¼ˆiiiï¼‰æ•°æ®é¦ˆé€ï¼ˆivï¼‰äº¤æ˜“ç­–ç•¥äº¤æ˜“å¤´å¯¸å¤§å°ã€‚ è¿è¡Œå›žæµ‹ï¼šè¿è¡ŒCerebroå›žæµ‹å¹¶æ‰“å°å‡ºæ‰€æœ‰å·²æ‰§è¡Œçš„äº¤æ˜“ã€‚ è¯„ä¼°æ€§èƒ½ï¼ˆAnalyzersï¼‰:ä»¥å›¾å½¢å’Œé£Žé™©æ”¶ç›Šç­‰æŒ‡æ ‡å¯¹äº¤æ˜“ç­–ç•¥çš„å›žæµ‹ç»“æžœè¿›è¡Œè¯„ä»·ã€‚ â€œLinesâ€æ˜¯backtraderå›žæµ‹çš„æ•°æ®ï¼Œç”±ä¸€ç³»åˆ—çš„ç‚¹ç»„æˆï¼Œé€šå¸¸åŒ…æ‹¬ä»¥ä¸‹ç±»åˆ«çš„æ•°æ®ï¼šOpenï¼ˆå¼€ç›˜ä»·ï¼‰, Highï¼ˆæœ€é«˜ä»·ï¼‰, Lowï¼ˆæœ€ä½Žä»·ï¼‰, Closeï¼ˆæ”¶ç›˜ä»·ï¼‰, Volumeï¼ˆæˆäº¤é‡ï¼‰, OpenInterestï¼ˆæ— çš„è¯è®¾ç½®ä¸º0ï¼‰ã€‚Data Feedsï¼ˆæ•°æ®åŠ è½½ï¼‰ã€Indicatorsï¼ˆæŠ€æœ¯æŒ‡æ ‡ï¼‰å’ŒStrategiesï¼ˆç­–ç•¥ï¼‰éƒ½ä¼šç”Ÿæˆ Linesã€‚ä»·æ ¼æ•°æ®ä¸­çš„æ‰€æœ‰â€Openâ€ (å¼€ç›˜ä»·)æŒ‰æ—¶é—´ç»„æˆä¸€æ¡ Lineã€‚æ‰€ä»¥ï¼Œä¸€ç»„å«æœ‰ä»¥ä¸Š6ä¸ªç±»åˆ«çš„ä»·æ ¼æ•°æ®ï¼Œå…±æœ‰6æ¡ Linesã€‚å¦‚æžœç®—ä¸Šâ€œDateTimeâ€ï¼ˆæ—¶é—´ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç»„æ•°æ®çš„ä¸»é”®ï¼‰ï¼Œä¸€å…±æœ‰7æ¡ Linesã€‚å½“è®¿é—®ä¸€æ¡ Line çš„æ•°æ®æ—¶ï¼Œä¼šé»˜è®¤æŒ‡å‘ä¸‹æ ‡ä¸º 0 çš„æ•°æ®ã€‚æœ€åŽä¸€ä¸ªæ•°æ®é€šè¿‡ä¸‹æ ‡ -1 æ¥è®¿é—®ï¼Œåœ¨-1ä¹‹åŽæ˜¯ç´¢å¼•0ï¼Œç”¨äºŽè®¿é—®å½“å‰æ—¶åˆ»ã€‚å› æ­¤ï¼Œåœ¨å›žæµ‹è¿‡ç¨‹ä¸­ï¼Œæ— éœ€çŸ¥é“å·²ç»å¤„ç†äº†å¤šå°‘æ¡/åˆ†é’Ÿ/å¤©/æœˆï¼Œâ€0â€ä¸€ç›´æŒ‡å‘å½“å‰å€¼ï¼Œä¸‹æ ‡ -1 æ¥è®¿é—®æœ€åŽä¸€ä¸ªå€¼ã€‚ BacktraderçŽ¯å¢ƒæ­å»º å®‰è£…pythonçŽ¯å¢ƒ (anaconda) pip install backtrader[plotting] æ–°å»ºjupyterProjectæ–‡ä»¶å¤¹ï¼Œåœ¨å…¶è·¯å¾„æ è¾“å…¥ jupyter lab,æŒ‰enteré”®,ç­‰å¾…å¯ç”¨jupyter å›žæµ‹åº”ç”¨å®žä¾‹é‡åŒ–å›žæµ‹è¯´ç™½äº†æ˜¯ä½¿ç”¨åŽ†å²æ•°æ®åŽ»éªŒè¯äº¤æ˜“ç­–ç•¥çš„æ€§èƒ½ï¼Œå› æ­¤å›žæµ‹çš„ç¬¬ä¸€æ­¥æ˜¯æ­å»ºäº¤æ˜“ç­–ç•¥ï¼Œè¿™ä¹Ÿæ˜¯backtraderè¦è®¾ç½®çš„æœ€é‡è¦å’Œå¤æ‚çš„éƒ¨åˆ†ï¼Œç­–ç•¥è®¾å®šå¥½åŽï¼Œå…¶ä½™éƒ¨åˆ†çš„ä»£ç ç¼–å†™æ˜¯æ‰‹åˆ°æ“’æ¥ã€‚ æž„å»ºç­–ç•¥ï¼ˆStrategyï¼‰äº¤æ˜“ç­–ç•¥ç±»ä»£ç åŒ…å«é‡è¦çš„å‚æ•°å’Œç”¨äºŽæ‰§è¡Œç­–ç•¥çš„åŠŸèƒ½ï¼Œè¦å®šä¹‰çš„å‚æ•°æˆ–å‡½æ•°åå¦‚ä¸‹ï¼š ï¼ˆ1ï¼‰params-å…¨å±€å‚æ•°ï¼Œå¯é€‰ï¼šæ›´æ”¹äº¤æ˜“ç­–ç•¥ä¸­å˜é‡/å‚æ•°çš„å€¼ï¼Œå¯ç”¨äºŽå‚æ•°è°ƒä¼˜ã€‚ ï¼ˆ2ï¼‰logï¼šæ—¥å¿—ï¼Œå¯é€‰ï¼šè®°å½•ç­–ç•¥çš„æ‰§è¡Œæ—¥å¿—ï¼Œå¯ä»¥æ‰“å°å‡ºè¯¥å‡½æ•°æä¾›çš„æ—¥æœŸæ—¶é—´å’Œtxtå˜é‡ã€‚ ï¼ˆ3ï¼‰ initï¼šç”¨äºŽåˆå§‹åŒ–äº¤æ˜“ç­–ç•¥çš„ç±»å®žä¾‹çš„ä»£ç ã€‚ ï¼ˆ4ï¼‰notify_orderï¼Œå¯é€‰ï¼šè·Ÿè¸ªäº¤æ˜“æŒ‡ä»¤ï¼ˆorderï¼‰çš„çŠ¶æ€ã€‚orderå…·æœ‰æäº¤ï¼ŒæŽ¥å—ï¼Œä¹°å…¥/å–å‡ºæ‰§è¡Œå’Œä»·æ ¼ï¼Œå·²å–æ¶ˆ/æ‹’ç»ç­‰çŠ¶æ€ã€‚ ï¼ˆ5ï¼‰notify_tradeï¼Œå¯é€‰ï¼šè·Ÿè¸ªäº¤æ˜“çš„çŠ¶æ€ï¼Œä»»ä½•å·²å¹³ä»“çš„äº¤æ˜“éƒ½å°†æŠ¥å‘Šæ¯›åˆ©å’Œå‡€åˆ©æ¶¦ã€‚ ï¼ˆ6ï¼‰nextï¼Œå¿…é€‰ï¼šåˆ¶å®šäº¤æ˜“ç­–ç•¥çš„å‡½æ•°ï¼Œç­–ç•¥æ¨¡å—æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚ ä¸‹é¢ä»¥ä¸€ä¸ªç®€å•çš„å•å‡çº¿ç­–ç•¥ä¸ºä¾‹ï¼Œå±•ç¤ºbacktraderçš„ä½¿ç”¨è¿‡ç¨‹ï¼Œå³å½“æ”¶ç›˜ä»·ä¸Šæ¶¨çªç ´20æ—¥å‡çº¿ä¹°å…¥ï¼ˆåšå¤šï¼‰ï¼Œå½“æ”¶ç›˜ä»·ä¸‹è·Œè·Œç©¿20æ—¥å‡çº¿å–å‡ºï¼ˆåšç©ºï¼‰ã€‚ä¸ºç®€å•èµ·è§ï¼Œä¸æŠ¥å‘Šäº¤æ˜“å›žæµ‹çš„æ—¥å¿—ï¼Œå› æ­¤logã€notify_orderå’Œnotify_tradeå‡½æ•°çœç•¥ä¸å†™ã€‚ class my_strategy1(bt.Strategy): #å…¨å±€è®¾å®šäº¤æ˜“ç­–ç•¥çš„å‚æ•° params=( (&apos;maperiod&apos;,20), ) def __init__(self): #æŒ‡å®šä»·æ ¼åºåˆ— self.dataclose=self.datas[0].close # åˆå§‹åŒ–äº¤æ˜“æŒ‡ä»¤ã€ä¹°å–ä»·æ ¼å’Œæ‰‹ç»­è´¹ self.order = None self.buyprice = None self.buycomm = None #æ·»åŠ ç§»åŠ¨å‡çº¿æŒ‡æ ‡ï¼Œå†…ç½®äº†talibæ¨¡å— self.sma = bt.indicators.SimpleMovingAverage( self.datas[0], period=self.params.maperiod) def next(self): if self.order: # æ£€æŸ¥æ˜¯å¦æœ‰æŒ‡ä»¤ç­‰å¾…æ‰§è¡Œ, return # æ£€æŸ¥æ˜¯å¦æŒä»“ if not self.position: # æ²¡æœ‰æŒä»“ #æ‰§è¡Œä¹°å…¥æ¡ä»¶åˆ¤æ–­ï¼šæ”¶ç›˜ä»·æ ¼ä¸Šæ¶¨çªç ´20æ—¥å‡çº¿ if self.dataclose[0] &gt; self.sma[0]: #æ‰§è¡Œä¹°å…¥ self.order = self.buy(size=500) else: #æ‰§è¡Œå–å‡ºæ¡ä»¶åˆ¤æ–­ï¼šæ”¶ç›˜ä»·æ ¼è·Œç ´20æ—¥å‡çº¿ if self.dataclose[0] &lt; self.sma[0]: #æ‰§è¡Œå–å‡º self.order = self.sell(size=500) æ•°æ®åŠ è½½ï¼ˆData Feedsï¼‰ç­–ç•¥è®¾è®¡å¥½åŽï¼Œç¬¬äºŒæ­¥æ˜¯æ•°æ®åŠ è½½ï¼Œbacktraderæä¾›äº†å¾ˆå¤šæ•°æ®æŽ¥å£ï¼ŒåŒ…æ‹¬quandlï¼ˆç¾Žè‚¡ï¼‰ã€yahooã€pandasæ ¼å¼æ•°æ®ç­‰ï¼Œæˆ‘ä»¬ä¸»è¦åˆ†æžAè‚¡æ•°æ®ã€‚ #å…ˆå¼•å…¥åŽé¢å¯èƒ½ç”¨åˆ°çš„åŒ…ï¼ˆpackageï¼‰ import pandas as pd from datetime import datetime import backtrader as bt import matplotlib.pyplot as plt %matplotlib inline #æ­£å¸¸æ˜¾ç¤ºç”»å›¾æ—¶å‡ºçŽ°çš„ä¸­æ–‡å’Œè´Ÿå· from pylab import mpl mpl.rcParams[&apos;font.sans-serif&apos;]=[&apos;SimHei&apos;]ä½¿ç”¨tushareèŽ·å–æµ¦å‘é“¶è¡Œï¼ˆä»£ç ï¼š600000ï¼‰æ•°æ®ã€‚ #ä½¿ç”¨tushareæ—§ç‰ˆæŽ¥å£èŽ·å–æ•°æ® import tushare as ts def get_data(code,start=&apos;2010-01-01&apos;,end=&apos;2020-03-31&apos;): df=ts.get_k_data(code,autype=&apos;qfq&apos;,start=start,end=end) df.index=pd.to_datetime(df.date) df[&apos;openinterest&apos;]=0 df=df[[&apos;open&apos;,&apos;high&apos;,&apos;low&apos;,&apos;close&apos;,&apos;volume&apos;,&apos;openinterest&apos;]] return df dataframe=get_data(&apos;600000&apos;) #å›žæµ‹æœŸé—´ start=datetime(2010, 3, 31) end=datetime(2020, 3, 31) # åŠ è½½æ•°æ® data = bt.feeds.PandasData(dataname=dataframe,fromdate=start,todate=end) å›žæµ‹è®¾ç½®ï¼ˆCerebroï¼‰å›žæµ‹è®¾ç½®ä¸»è¦åŒ…æ‹¬å‡ é¡¹ï¼šå›žæµ‹ç³»ç»Ÿåˆå§‹åŒ–ï¼Œæ•°æ®åŠ è½½åˆ°å›žæµ‹ç³»ç»Ÿï¼Œæ·»åŠ äº¤æ˜“ç­–ç•¥ï¼Œ brokerè®¾ç½®ï¼ˆå¦‚äº¤æ˜“èµ„é‡‘å’Œäº¤æ˜“ä½£é‡‘ï¼‰ï¼Œå¤´å¯¸è§„æ¨¡è®¾ç½®ä½œä¸ºç­–ç•¥ä¸€éƒ¨åˆ†çš„äº¤æ˜“è§„æ¨¡ç­‰ï¼Œæœ€åŽæ˜¾ç¤ºæ‰§è¡Œäº¤æ˜“ç­–ç•¥æ—¶ç§¯ç´¯çš„æ€»èµ„é‡‘å’Œå‡€æ”¶ç›Šã€‚ åˆå§‹åŒ–cerebroå›žæµ‹ç³»ç»Ÿè®¾ç½®cerebro = bt.Cerebro() #å°†æ•°æ®ä¼ å…¥å›žæµ‹ç³»ç»Ÿcerebro.adddata(data) å°†äº¤æ˜“ç­–ç•¥åŠ è½½åˆ°å›žæµ‹ç³»ç»Ÿä¸­cerebro.addstrategy(my_strategy1) è®¾ç½®åˆå§‹èµ„æœ¬ä¸º10,000startcash = 10000cerebro.broker.setcash(startcash) è®¾ç½®äº¤æ˜“æ‰‹ç»­è´¹ä¸º 0.2%cerebro.broker.setcommission(commission=0.002) æ‰§è¡Œå›žæµ‹è¾“å‡ºå›žæµ‹ç»“æžœã€‚ print(f&apos;å‡€æ”¶ç›Š: {round(pnl,2)}&apos;) d1=start.strftime(&apos;%Y%m%d&apos;) d2=end.strftime(&apos;%Y%m%d&apos;) print(f&apos;åˆå§‹èµ„é‡‘: {startcash}\nå›žæµ‹æœŸé—´ï¼š{d1}:{d2}&apos;) #è¿è¡Œå›žæµ‹ç³»ç»Ÿ cerebro.run() #èŽ·å–å›žæµ‹ç»“æŸåŽçš„æ€»èµ„é‡‘ portvalue = cerebro.broker.getvalue() pnl = portvalue - startcash #æ‰“å°ç»“æžœ print(f&apos;æ€»èµ„é‡‘: {round(portvalue,2)}&apos;)ç»“æžœå¦‚ä¸‹ï¼š åˆå§‹èµ„é‡‘: 10000 å›žæµ‹æœŸé—´ï¼š20100331:20200331 æ€»èµ„é‡‘: 12065.36 å‡€æ”¶ç›Š: 2065.36 å¯è§†åŒ–å¯¹ä¸Šè¿°ç»“æžœè¿›è¡Œå¯è§†åŒ–ï¼Œä½¿ç”¨å†…ç½®çš„matplotlibç”»å›¾ã€‚è‡³æ­¤ï¼Œç®€å•çš„å•å‡çº¿å›žæµ‹å°±å®Œæˆäº†ã€‚ä¸‹é¢å›¾å½¢å±•ç¤ºäº†æµ¦å‘é“¶è¡Œåœ¨å›žæµ‹æœŸé—´çš„ä»·æ ¼èµ°åŠ¿ã€ä¹°å–ç‚¹å’Œäº¤æ˜“æ€»èµ„é‡‘çš„å˜åŒ–ç­‰ã€‚ # ç”»å›¾ cerebro.plot() å›žæµ‹å®žä¾‹from __future__ import (absolute_import, division, print_function, unicode_literals) import datetime # For datetime objects import os.path # To manage paths import sys # To find out the script name (in argv[0]) # Import the backtrader platform import backtrader as bt # Create a Stratey class TestStrategy(bt.Strategy): params = ( (&apos;exitbars&apos;, 5), (&apos;maperiod&apos;, 24), (&apos;printlog&apos;, False), ) def log(self, txt, dt=None, doprint=False): &apos;&apos;&apos; Logging function for this strategy&apos;&apos;&apos; if self.params.printlog or doprint: dt = dt or self.datas[0].datetime.date(0) print(&apos;[%s] %s&apos; % (dt.isoformat(), txt)) def __init__(self): # Keep a reference to the &quot;close&quot; line in the data[0] dataseries self.dataclose = self.datas[0].close # To keep track of pending orders and buy price/commission self.order = None self.buyprice = None self.buycomm = None # Add a MovingAverageSimple indicator self.sma = bt.indicators.SimpleMovingAverage( self.datas[0], period=self.params.maperiod) # Indicators for the plotting show bt.indicators.ExponentialMovingAverage(self.datas[0], period=25) bt.indicators.WeightedMovingAverage( self.datas[0], period=25).subplot = True bt.indicators.StochasticSlow(self.datas[0]) bt.indicators.MACDHisto(self.datas[0]) rsi = bt.indicators.RSI(self.datas[0]) bt.indicators.SmoothedMovingAverage(rsi, period=10) bt.indicators.ATR(self.datas[0]).plot = False def notify_order(self, order): if order.status in [order.Submitted, order.Accepted]: # Buy/Sell order submitted/accepted to/by broker - Nothing to do return # Check if an order has been completed # Attention: broker could reject order if not enough cash if order.status in [order.Completed]: if order.isbuy(): self.log( &apos;BUY EXECUTED, Price: %.2f, Cost: %.2f, Comm %.2f&apos; % (order.executed.price, order.executed.value, order.executed.comm)) self.buyprice = order.executed.price self.buycomm = order.executed.comm else: # Sell self.log(&apos;SELL EXECUTED, Price: %.2f, Cost: %.2f, Comm %.2f&apos; % (order.executed.price, order.executed.value, order.executed.comm)) self.bar_executed = len(self) elif order.status in [order.Canceled, order.Margin, order.Rejected]: self.log(&apos;Order Canceled/Margin/Rejected&apos;) self.order = None def notify_trade(self, trade): if not trade.isclosed: return self.log(&apos;OPERATION PROFITï¼š GROSS %.2f, NET %.2f&apos; % (trade.pnl, trade.pnlcomm)) def next(self): # Simply log the closing price of the series from the reference self.log(&apos;Close: %.2f&apos; % self.dataclose[0]) # Check if an order is pending ... if yes, we cannot send a 2nd one if self.order: return # Check if we are in the market if not self.position: # Not yet ... we MIGHT BUY if ... if self.dataclose[0] &gt; self.sma[0]: # current close less than previous close if self.dataclose[-1] &lt; self.dataclose[-2]: # previous close less than the previous close # BUY, BUY, BUY!!! (with default parameters) self.log(&apos;BUY CREATE: %.2f&apos; % self.dataclose[0]) # Keep track of the created order to avoid a 2nd order self.order = self.buy() else: # Already in the market ... we might sell if self.dataclose[0] &lt; self.sma[0]: # SELL, SELL, SELL!!! (with all possible default parameters) self.log(&apos;SELL CREATE: %.2f&apos; % self.dataclose[0]) # Keep track of the created order to avoid a 2nd order self.order = self.sell() def stop(self): self.log(&apos;(MA Period %2d) Ending Value %.2f&apos; % (self.params.maperiod, self.broker.getvalue()), doprint=True) if __name__ == &apos;__main__&apos;: cerebro = bt.Cerebro() # Add a strategy cerebro.addstrategy(TestStrategy) # cerebro.optstrategy(TestStrategy, maperiod=range(10, 31)) # åˆå§‹åŒ–æ•°æ®çš„è·¯å¾„ modpath = os.path.dirname(os.path.abspath(sys.argv[0])) datapath = os.path.join(modpath, &apos;.\\/datas\\/orcl-1995-2014.txt&apos;) # Create a Data Feed,reverse ä»£è¡¨æ˜¯å¦åè½¬æ•°æ® data = bt.feeds.YahooFinanceCSVData( dataname=datapath, # Do not pass values before this date fromdate=datetime.datetime(2000, 1, 1), # Do not pass values after this date todate=datetime.datetime(2000, 12, 31), reverse=False) # Add the Data Feed to Cerebro cerebro.adddata(data) # æ”¹å˜è´¦æˆ·åˆå§‹é‡‘é¢ cerebro.broker.set_cash(100000.0) # Set the commission - 0.1% ... divide by 100 to remove the % äº¤æ˜“ä½£é‡‘è®¾ç½® cerebro.broker.setcommission(commission=0.001) # è®¾ç½®æ¯ç¬”äº¤æ˜“äº¤æ˜“çš„è‚¡ç¥¨æ•°é‡ cerebro.addsizer(bt.sizers.FixedSize, stake=10) print(&apos;Starting Portfolio Value: %.2f&apos; % cerebro.broker.getvalue()) cerebro.run() print(&apos;Final Portfolio Value: %.2f&apos; % cerebro.broker.getvalue()) # ç”»å›¾ cerebro.plot() å…ˆæ¥å›žé¡¾ä¸€ä¸‹äº¤æ˜“ç­–ç•¥æ¨¡å—ï¼ˆStrategyï¼‰çš„æž„æˆã€‚äº¤æ˜“ç­–ç•¥ç±»ä»£ç åŒ…å«å‚æ•°æˆ–å‡½æ•°åå¦‚ä¸‹ï¼š ï¼ˆ1ï¼‰params-å…¨å±€å‚æ•°ï¼Œå¯é€‰ï¼šæ›´æ”¹äº¤æ˜“ç­–ç•¥ä¸­å˜é‡/å‚æ•°çš„å€¼ï¼Œå¯ç”¨äºŽå‚æ•°è°ƒä¼˜ã€‚ ï¼ˆ2ï¼‰logï¼šæ—¥å¿—ï¼Œå¯é€‰ï¼šè®°å½•ç­–ç•¥çš„æ‰§è¡Œæ—¥å¿—ï¼Œå¯ä»¥æ‰“å°å‡ºè¯¥å‡½æ•°æä¾›çš„æ—¥æœŸæ—¶é—´å’Œtxtå˜é‡ã€‚ ï¼ˆ3ï¼‰ initï¼šç”¨äºŽåˆå§‹åŒ–äº¤æ˜“ç­–ç•¥çš„ç±»å®žä¾‹çš„ä»£ç ã€‚ ï¼ˆ4ï¼‰notify_orderï¼Œå¯é€‰ï¼šè·Ÿè¸ªäº¤æ˜“æŒ‡ä»¤ï¼ˆorderï¼‰çš„çŠ¶æ€ã€‚orderå…·æœ‰æäº¤ï¼ŒæŽ¥å—ï¼Œä¹°å…¥/å–å‡ºæ‰§è¡Œå’Œä»·æ ¼ï¼Œå·²å–æ¶ˆ/æ‹’ç»ç­‰çŠ¶æ€ã€‚ ï¼ˆ5ï¼‰notify_tradeï¼Œå¯é€‰ï¼šè·Ÿè¸ªäº¤æ˜“çš„çŠ¶æ€ï¼Œä»»ä½•å·²å¹³ä»“çš„äº¤æ˜“éƒ½å°†æŠ¥å‘Šæ¯›åˆ©å’Œå‡€åˆ©æ¶¦ã€‚ ï¼ˆ6ï¼‰nextï¼Œå¿…é€‰ï¼šåˆ¶å®šäº¤æ˜“ç­–ç•¥çš„å‡½æ•°ï¼Œç­–ç•¥æ¨¡å—æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚ ä¸‹é¢ä»ç„¶ä»¥ç®€å•å‡çº¿ç­–ç•¥ä¸ºä¾‹ï¼Œé‡ç‚¹ä»‹ç»å‚æ•°å¯»ä¼˜å’Œäº¤æ˜“æ—¥å¿—æŠ¥å‘Šã€‚ å®žçŽ°ä»£ç å¦‚ä¸‹ï¼š #å…ˆå¼•å…¥åŽé¢å¯èƒ½ç”¨åˆ°çš„åŒ…ï¼ˆpackageï¼‰ import pandas as pd import numpy as np import tushare as ts import matplotlib.pyplot as plt %matplotlib inline #æ­£å¸¸æ˜¾ç¤ºç”»å›¾æ—¶å‡ºçŽ°çš„ä¸­æ–‡å’Œè´Ÿå· from pylab import mpl mpl.rcParams[&apos;font.sans-serif&apos;]=[&apos;SimHei&apos;] mpl.rcParams[&apos;axes.unicode_minus&apos;]=False paramsæ˜¯å…¨å±€å‚æ•°ï¼Œmaperiodæ˜¯MAå‡å€¼çš„é•¿åº¦ï¼Œé»˜è®¤15å¤©ï¼Œprintlogä¸ºæ‰“å°äº¤æ˜“æ—¥å¿—ï¼Œé»˜è®¤ä¸è¾“å‡ºç»“æžœï¼Œç­–ç•¥æ¨¡å—çš„æ ¸å¿ƒåœ¨nextï¼ˆï¼‰å‡½æ•°ã€‚ from datetime import datetime import backtrader as bt class MyStrategy(bt.Strategy): params=((&apos;maperiod&apos;,15), (&apos;printlog&apos;,False),) def __init__(self): #æŒ‡å®šä»·æ ¼åºåˆ— self.dataclose=self.datas[0].close # åˆå§‹åŒ–äº¤æ˜“æŒ‡ä»¤ã€ä¹°å–ä»·æ ¼å’Œæ‰‹ç»­è´¹ self.order = None self.buyprice = None self.buycomm = None #æ·»åŠ ç§»åŠ¨å‡çº¿æŒ‡æ ‡ self.sma = bt.indicators.SimpleMovingAverage( self.datas[0], period=self.params.maperiod) #ç­–ç•¥æ ¸å¿ƒï¼Œæ ¹æ®æ¡ä»¶æ‰§è¡Œä¹°å–äº¤æ˜“æŒ‡ä»¤ï¼ˆå¿…é€‰ï¼‰ def next(self): # è®°å½•æ”¶ç›˜ä»· #self.log(f&apos;æ”¶ç›˜ä»·, {dataclose[0]}&apos;) if self.order: # æ£€æŸ¥æ˜¯å¦æœ‰æŒ‡ä»¤ç­‰å¾…æ‰§è¡Œ, return # æ£€æŸ¥æ˜¯å¦æŒä»“ if not self.position: # æ²¡æœ‰æŒä»“ #æ‰§è¡Œä¹°å…¥æ¡ä»¶åˆ¤æ–­ï¼šæ”¶ç›˜ä»·æ ¼ä¸Šæ¶¨çªç ´15æ—¥å‡çº¿ if self.dataclose[0] &gt; self.sma[0]: self.log(&apos;BUY CREATE, %.2f&apos; % self.dataclose[0]) #æ‰§è¡Œä¹°å…¥ self.order = self.buy() else: #æ‰§è¡Œå–å‡ºæ¡ä»¶åˆ¤æ–­ï¼šæ”¶ç›˜ä»·æ ¼è·Œç ´15æ—¥å‡çº¿ if self.dataclose[0] &lt; self.sma[0]: self.log(&apos;SELL CREATE, %.2f&apos; % self.dataclose[0]) #æ‰§è¡Œå–å‡º self.order = self.sell() #äº¤æ˜“è®°å½•æ—¥å¿—ï¼ˆå¯çœç•¥ï¼Œé»˜è®¤ä¸è¾“å‡ºç»“æžœï¼‰ def log(self, txt, dt=None,doprint=False): if self.params.printlog or doprint: dt = dt or self.datas[0].datetime.date(0) print(f&apos;{dt.isoformat()},{txt}&apos;) #è®°å½•äº¤æ˜“æ‰§è¡Œæƒ…å†µï¼ˆå¯çœç•¥ï¼Œé»˜è®¤ä¸è¾“å‡ºç»“æžœï¼‰ def notify_order(self, order): # å¦‚æžœorderä¸ºsubmitted/accepted,è¿”å›žç©º if order.status in [order.Submitted, order.Accepted]: return # å¦‚æžœorderä¸ºbuy/sell executed,æŠ¥å‘Šä»·æ ¼ç»“æžœ if order.status in [order.Completed]: if order.isbuy(): self.log(f&apos;ä¹°å…¥:\nä»·æ ¼:{order.executed.price},\ æˆæœ¬:{order.executed.value},\ æ‰‹ç»­è´¹:{order.executed.comm}&apos;) self.buyprice = order.executed.price self.buycomm = order.executed.comm else: self.log(f&apos;å–å‡º:\nä»·æ ¼ï¼š{order.executed.price},\ æˆæœ¬: {order.executed.value},\ æ‰‹ç»­è´¹{order.executed.comm}&apos;) self.bar_executed = len(self) # å¦‚æžœæŒ‡ä»¤å–æ¶ˆ/äº¤æ˜“å¤±è´¥, æŠ¥å‘Šç»“æžœ elif order.status in [order.Canceled, order.Margin, order.Rejected]: self.log(&apos;äº¤æ˜“å¤±è´¥&apos;) self.order = None #è®°å½•äº¤æ˜“æ”¶ç›Šæƒ…å†µï¼ˆå¯çœç•¥ï¼Œé»˜è®¤ä¸è¾“å‡ºç»“æžœï¼‰ def notify_trade(self,trade): if not trade.isclosed: return self.log(f&apos;ç­–ç•¥æ”¶ç›Šï¼š\næ¯›æ”¶ç›Š {trade.pnl:.2f}, å‡€æ”¶ç›Š {trade.pnlcomm:.2f}&apos;) #å›žæµ‹ç»“æŸåŽè¾“å‡ºç»“æžœï¼ˆå¯çœç•¥ï¼Œé»˜è®¤è¾“å‡ºç»“æžœï¼‰ def stop(self): self.log(&apos;(MAå‡çº¿ï¼š %2dæ—¥) æœŸæœ«æ€»èµ„é‡‘ %.2f&apos; % (self.params.maperiod, self.broker.getvalue()), doprint=True) ä¸‹é¢å®šä¹‰ä¸€ä¸ªä¸»å‡½æ•°ï¼Œç”¨äºŽå¯¹æŸè‚¡ç¥¨æŒ‡æ•°ï¼ˆä¸ªè‚¡ï¼‰åœ¨æŒ‡å®šæœŸé—´è¿›è¡Œå›žæµ‹ï¼Œä½¿ç”¨tushareçš„æ—§æŽ¥å£èŽ·å–æ•°æ®ï¼ŒåŒ…å«å¼€ç›˜ä»·ã€æœ€é«˜ä»·ã€æœ€ä½Žä»·ã€æ”¶ç›˜ä»·å’Œæˆäº¤é‡ã€‚è¿™é‡Œä¸»è¦ä»¥3åˆ°30æ—¥å‡çº¿ä¸ºä¾‹è¿›è¡Œå‚æ•°å¯»ä¼˜ï¼Œè€ƒå¯Ÿä»¥å¤šå°‘æ—¥å‡çº¿ä¸Žä»·æ ¼çš„äº¤å‰ä½œä¸ºä¹°å–ä¿¡å·èƒ½èŽ·å¾—æœ€å¤§çš„æ”¶ç›Šã€‚ def main(code,start,end=&apos;&apos;,startcash=10000,qts=500,com=0.001): #åˆ›å»ºä¸»æŽ§åˆ¶å™¨ cerebro = bt.Cerebro() #å¯¼å…¥ç­–ç•¥å‚æ•°å¯»ä¼˜ cerebro.optstrategy(MyStrategy,maperiod=range(3, 31)) #èŽ·å–æ•°æ® df=ts.get_k_data(code,autype=&apos;qfq&apos;,start=start,end=end) df.index=pd.to_datetime(df.date) df=df[[&apos;open&apos;,&apos;high&apos;,&apos;low&apos;,&apos;close&apos;,&apos;volume&apos;]] #å°†æ•°æ®åŠ è½½è‡³å›žæµ‹ç³»ç»Ÿ data = bt.feeds.PandasData(dataname=df) cerebro.adddata(data) #brokerè®¾ç½®èµ„é‡‘ã€æ‰‹ç»­è´¹ cerebro.broker.setcash(startcash) cerebro.broker.setcommission(commission=com) #è®¾ç½®ä¹°å…¥è®¾ç½®ï¼Œç­–ç•¥ï¼Œæ•°é‡ cerebro.addsizer(bt.sizers.FixedSize, stake=qts) print(&apos;æœŸåˆæ€»èµ„é‡‘: %.2f&apos; % cerebro.broker.getvalue()) cerebro.run(maxcpus=1) print(&apos;æœŸæœ«æ€»èµ„é‡‘: %.2f&apos; % cerebro.broker.getvalue()) å†å®šä¹‰ä¸€ä¸ªç”»å›¾å‡½æ•°ï¼Œå¯¹ç›¸åº”è‚¡ç¥¨ï¼ˆæŒ‡æ•°ï¼‰åœ¨æŸæœŸé—´çš„ä»·æ ¼èµ°åŠ¿å’Œç´¯è®¡æ”¶ç›Šè¿›è¡Œå¯è§†åŒ–ã€‚ def plot_stock(code,title,start,end): dd=ts.get_k_data(code,autype=&apos;qfq&apos;,start=start,end=end) dd.index=pd.to_datetime(dd.date) dd.close.plot(figsize=(14,6),color=&apos;r&apos;) plt.title(title+&apos;ä»·æ ¼èµ°åŠ¿\n&apos;+start+&apos;:&apos;+end,size=15) plt.annotate(f&apos;æœŸé—´ç´¯è®¡æ¶¨å¹…:{(dd.close[-1]/dd.close[0]-1)*100:.2f}%&apos;, xy=(dd.index[-150],dd.close.mean()), xytext=(dd.index[-500],dd.close.min()), bbox = dict(boxstyle = &apos;round,pad=0.5&apos;, fc = &apos;yellow&apos;, alpha = 0.5), arrowprops=dict(facecolor=&apos;green&apos;, shrink=0.05),fontsize=12) plt.show() ä»¥ä¸Šè¯ç»¼æŒ‡ä¸ºä¾‹ï¼Œå›žæµ‹æœŸé—´ä¸º2010-01-01è‡³2020-03-30ï¼ŒæœŸé—´ç´¯è®¡æ”¶ç›ŠçŽ‡ä¸º-15.31%ï¼Œæƒ¨ä¸å¿ç¹ã€‚ é¢åˆ†åˆ«å¯¹3-30æ—¥å‡çº¿è¿›è¡Œå›žæµ‹ï¼Œè¿™é‡Œå‡è®¾æŒ‡æ•°å¯ä»¥äº¤æ˜“ï¼Œåˆå§‹èµ„é‡‘ä¸º100ä¸‡å…ƒï¼Œæ¯æ¬¡äº¤æ˜“100è‚¡ï¼Œæ³¨æ„å¦‚æžœæŒ‡æ•°æ”¶ç›˜ä»·ä¹˜ä»¥100è¶…è¿‡å¯ç”¨èµ„é‡‘ï¼Œä¼šå‡ºçŽ°äº¤æ˜“å¤±è´¥çš„æƒ…å†µï¼Œæ¢å¥è¯è¯´åœ¨æ•´ä¸ªäº¤æ˜“è¿‡ç¨‹ä¸­ï¼Œæ˜¯äº¤æ˜“å›ºå®šæ•°é‡çš„æ ‡çš„ï¼Œå› æ­¤ä»“ä½çš„å¤§å°è·Ÿè‚¡ä»·æœ‰ç›´æŽ¥å…³ç³»ã€‚ main(&apos;sh&apos;,&apos;2010-01-01&apos;,&apos;&apos;,1000000,100) plot_stock(&apos;sh&apos;,&apos;ä¸Šè¯ç»¼æŒ‡&apos;,&apos;2010-01-01&apos;,&apos;2020-03-30&apos;) Analyzersæ¨¡å—Analyzersæ¨¡å—æ¶µç›–äº†è¯„ä»·ä¸€ä¸ªé‡åŒ–ç­–ç•¥çš„å®Œæ•´æŒ‡æ ‡ï¼Œå¦‚å¸¸è§çš„å¤æ™®æ¯”çŽ‡ã€å¹´åŒ–æ”¶ç›ŠçŽ‡ã€æœ€å¤§å›žæ’¤ã€Calmaræ¯”çŽ‡ç­‰ç­‰ã€‚Analyzersæ¨¡å—åŽŸç”Ÿä»£ç èƒ½èŽ·å–çš„è¯„ä»·æŒ‡æ ‡å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶ä¸­TradeAnalyzerå’ŒPeriodStatsåˆåŒ…å«äº†ä¸å°‘æŒ‡æ ‡ã€‚ç”±äºŽé‡‡ç”¨å…ƒç¼–ç¨‹ï¼ŒAnalyzersçš„æ‰©å±•æ€§è¾ƒå¼ºï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ è‡ªå·±çš„åˆ†æžæŒ‡æ ‡ï¼Œå¦‚èŽ·å–å›žæµ‹æœŸé—´æ¯ä¸€æ—¶åˆ»å¯¹åº”çš„æ€»èµ„é‡‘ã€‚ ç­–ç•¥æ¨¡å—ç¼–å†™ï¼ˆ1ï¼‰params-å…¨å±€å‚æ•°ï¼Œå¯é€‰ï¼šæ›´æ”¹äº¤æ˜“ç­–ç•¥ä¸­å˜é‡/å‚æ•°çš„å€¼ï¼Œå¯ç”¨äºŽå‚æ•°è°ƒä¼˜ã€‚ ï¼ˆ2ï¼‰logï¼šæ—¥å¿—ï¼Œå¯é€‰ï¼šè®°å½•ç­–ç•¥çš„æ‰§è¡Œæ—¥å¿—ï¼Œå¯ä»¥æ‰“å°å‡ºè¯¥å‡½æ•°æä¾›çš„æ—¥æœŸæ—¶é—´å’Œtxtå˜é‡ã€‚ ï¼ˆ3ï¼‰ initï¼šç”¨äºŽåˆå§‹åŒ–äº¤æ˜“ç­–ç•¥çš„ç±»å®žä¾‹çš„ä»£ç ã€‚ ï¼ˆ4ï¼‰notify_orderï¼Œå¯é€‰ï¼šè·Ÿè¸ªäº¤æ˜“æŒ‡ä»¤ï¼ˆorderï¼‰çš„çŠ¶æ€ã€‚orderå…·æœ‰æäº¤ï¼ŒæŽ¥å—ï¼Œä¹°å…¥/å–å‡ºæ‰§è¡Œå’Œä»·æ ¼ï¼Œå·²å–æ¶ˆ/æ‹’ç»ç­‰çŠ¶æ€ã€‚ ï¼ˆ5ï¼‰notify_tradeï¼Œå¯é€‰ï¼šè·Ÿè¸ªäº¤æ˜“çš„çŠ¶æ€ï¼Œä»»ä½•å·²å¹³ä»“çš„äº¤æ˜“éƒ½å°†æŠ¥å‘Šæ¯›åˆ©å’Œå‡€åˆ©æ¶¦ã€‚ ï¼ˆ6ï¼‰nextï¼Œå¿…é€‰ï¼šåˆ¶å®šäº¤æ˜“ç­–ç•¥çš„å‡½æ•°ï¼Œç­–ç•¥æ¨¡å—æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚ ï¼ˆ7ï¼‰å…¶ä»–ï¼ŒåŒ…æ‹¬start()ã€nextsstart()ã€stop()ã€prenext()ã€notify_fund()ã€notify_store()å’Œnotify_cashvalueã€‚ é¢ä»¥æŠ€æœ¯åˆ†æžæŒ‡æ ‡RSIï¼ˆä¸äº†è§£çš„è¯·è‡ªè¡Œç™¾åº¦ï¼‰çš„æ‹©æ—¶ç­–ç•¥ä¸ºä¾‹ï¼Œå½“RSI&lt;30æ—¶ä¹°å…¥ï¼ŒRSI&gt;70æ—¶å–å‡ºã€‚ä¸ºäº†ç®€ä¾¿èµ·è§ï¼Œç­–ç•¥æ¨¡å—ä¸­åªåŒ…å«æœ€æ ¸å¿ƒçš„äº¤æ˜“ä¿¡å·ã€‚ import pandas as pd import backtrader as bt from datetime import datetime class MyStrategy(bt.Strategy): params=((&apos;short&apos;,30), (&apos;long&apos;,70),) def __init__(self): self.rsi = bt.indicators.RSI_SMA( self.data.close, period=21) def next(self): if not self.position: if self.rsi &lt; self.params.short: self.buy() else: if self.rsi &gt; self.params.long: self.sell() å›žæµ‹è®¾ç½®å›žæµ‹ç³»ç»Ÿè®¾ç½®ä¸Žä¹‹å‰ä¸€æ ·ï¼Œä¸»è¦æ˜¯æ•°æ®åŠ è½½ã€äº¤æ˜“æœ¬é‡‘ã€æ‰‹ç»­è´¹ã€äº¤æ˜“æ•°é‡çš„è®¾ç½®ï¼Œæ­¤å¤„ä»¥tushareçš„æ—§æŽ¥å£èŽ·å–è‚¡ç¥¨002537çš„äº¤æ˜“æ•°æ®è¿›è¡Œé‡åŒ–å›žæµ‹ã€‚ from __future__ import (absolute_import, division, print_function, unicode_literals) import tushare as ts #ä»¥è‚¡ç¥¨002537ä¸ºä¾‹ df=ts.get_k_data(&apos;002537&apos;,start=&apos;2010-01-01&apos;) df.index=pd.to_datetime(df.date) #df[&apos;openinterest&apos;] = 0 df=df[[&apos;open&apos;,&apos;high&apos;,&apos;low&apos;,&apos;close&apos;,&apos;volume&apos;]] data = bt.feeds.PandasData(dataname=df, fromdate=datetime(2013, 1, 1), todate=datetime(2020, 4, 17) ) # åˆå§‹åŒ–cerebroå›žæµ‹ç³»ç»Ÿè®¾ç½® cerebro = bt.Cerebro() # åŠ è½½æ•°æ® cerebro.adddata(data) # å°†äº¤æ˜“ç­–ç•¥åŠ è½½åˆ°å›žæµ‹ç³»ç»Ÿä¸­ cerebro.addstrategy(MyStrategy) # è®¾ç½®åˆå§‹èµ„æœ¬ä¸º100,000 cerebro.broker.setcash(100000.0) #æ¯æ¬¡å›ºå®šäº¤æ˜“æ•°é‡ cerebro.addsizer(bt.sizers.FixedSize, stake=1000) #æ‰‹ç»­è´¹ cerebro.broker.setcommission(commission=0.001) è¿è¡Œå›žæµ‹è¿™é‡Œé‡ç‚¹æ˜¯Analyzersæ¨¡å—çš„è°ƒç”¨ä¸Žç»“æžœè¾“å‡ºï¼Œè°ƒç”¨æ¨¡å—æ˜¯cerebro.addanalyzer()ï¼Œå†ä»Žæ¨¡å—ä¸­èŽ·å–åˆ†æžæŒ‡æ ‡ï¼Œå¦‚å¤æ™®æ¯”çŽ‡æ˜¯bt.analyzers.SharpeRatioï¼Œç„¶åŽæ˜¯ç»™è¯¥æŒ‡æ ‡é‡å‘½åæ–¹ä¾¿ä¹‹åŽè°ƒç”¨ï¼Œå³ _name=â€™SharpeRatioâ€™ã€‚è¦èŽ·å–åˆ†æžæŒ‡æ ‡ï¼Œéœ€è¦å…ˆæ‰§è¡Œå›žæµ‹ç³»ç»Ÿï¼Œcerebro.run()ï¼Œå¹¶å°†å›žæµ‹ç»“æžœèµ‹å€¼ç»™å˜é‡resultsï¼Œåˆ†æžæŒ‡æ ‡å­˜å‚¨åœ¨results[0]é‡Œ (stratå˜é‡ä»£æ›¿)ï¼Œé€šè¿‡strat.analyzers.SharpeRatio.get_analysis()å³å¯èŽ·å–ç›¸åº”æ•°æ®ï¼Œå…¶ä»–æŒ‡æ ‡æ“ä½œæ–¹æ³•ç±»ä¼¼ã€‚ print(&apos;åˆå§‹èµ„é‡‘: %.2f&apos; % cerebro.broker.getvalue()) cerebro.addanalyzer(bt.analyzers.SharpeRatio, _name = &apos;SharpeRatio&apos;) cerebro.addanalyzer(bt.analyzers.DrawDown, _name=&apos;DW&apos;) results = cerebro.run() strat = results[0] print(&apos;æœ€ç»ˆèµ„é‡‘: %.2f&apos; % cerebro.broker.getvalue()) print(&apos;å¤æ™®æ¯”çŽ‡:&apos;, strat.analyzers.SharpeRatio.get_analysis()) print(&apos;å›žæ’¤æŒ‡æ ‡:&apos;, strat.analyzers.DW.get_analysis()) è¾“å‡ºç»“æžœï¼š åˆå§‹èµ„é‡‘: 100000.00 æœ€ç»ˆèµ„é‡‘: 110215.33 å¤æ™®æ¯”çŽ‡: OrderedDict([(&apos;sharperatio&apos;, 0.094)]) å›žæ’¤æŒ‡æ ‡: AutoOrderedDict([(&apos;len&apos;, 280), (&apos;drawdown&apos;, 1.01), (&apos;moneydown&apos;, 1126.60), (&apos;max&apos;, AutoOrderedDict([(&apos;len&apos;, 280), (&apos;drawdown&apos;, 3.61), (&apos;moneydown&apos;, 4016.60)]))]) å›žæµ‹ç»“æžœå¯è§†åŒ–ä¸‹é¢è¾“å‡ºå›žæµ‹å›¾è¡¨ï¼Œä¸€å¼ å¤§å›¾ä¸ŠåŒ…å«äº†ä¸‰å¼ å›¾ï¼š ï¼ˆ1ï¼‰èµ„é‡‘å˜åŠ¨å›¾ï¼šå¯ä»¥çœ‹åˆ°åœ¨å®žæ–½äº¤æ˜“ç­–ç•¥çš„æ•°æ®æœŸå†…ï¼Œèµ„é‡‘çš„ç›ˆåˆ©/æŸå¤±ã€‚ ï¼ˆ2ï¼‰äº¤æ˜“æ”¶ç›Š/äºæŸã€‚è“è‰²ï¼ˆçº¢è‰²ï¼‰ç‚¹è¡¨ç¤ºèŽ·åˆ©ï¼ˆäºæŸï¼‰äº¤æ˜“ä»¥åŠèŽ·åˆ©ï¼ˆäºæŸï¼‰å¤šå°‘ã€‚ ï¼ˆ3ï¼‰ä»·æ ¼å›¾è¡¨ã€‚ç»¿è‰²å’Œçº¢è‰²ç®­å¤´åˆ†åˆ«è¡¨ç¤ºäº¤æ˜“ç­–ç•¥çš„è¿›å…¥ç‚¹å’Œé€€å‡ºç‚¹ã€‚é»‘çº¿æ˜¯äº¤æ˜“æ ‡çš„éšæ—¶é—´å˜åŒ–çš„ä»·æ ¼ï¼Œ æ¡å½¢å›¾è¡¨ç¤ºæ¯ä¸ªæ¡å½¢å›¾æœŸé—´èµ„é‡‘çš„äº¤æ˜“é‡ã€‚ Analyzersæ¨¡å—æŒ‡æ ‡å¯è§†åŒ–å…¶ä»–init ä»»ä½•ç±»åœ¨ç”Ÿæˆçš„æ—¶å€™éƒ½æ˜¯å…ˆè°ƒç”¨è¿™ä¸€åˆå§‹åŒ–æž„é€ å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å®žä¾‹ç”Ÿæˆçš„æ—¶å€™ï¼Œè¿™ä¸ªå‡½æ•°å°†è¢«è°ƒç”¨ã€‚ Birth: start startæ–¹æ³•åœ¨cerebroå‘Šè¯‰strategyï¼Œæ˜¯æ—¶å€™å¼€å§‹è¡ŒåŠ¨äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé€šçŸ¥ç­–ç•¥æ¿€æ´»çš„æ—¶å€™è¢«è°ƒç”¨ã€‚ Childhood: prenext æœ‰äº›æŠ€æœ¯æŒ‡æ ‡ï¼Œæ¯”å¦‚æˆ‘ä»¬æåˆ°çš„MAï¼Œå­˜åœ¨ä¸€ä¸ªçª—å£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œéœ€è¦nå¤©çš„æ•°æ®æ‰èƒ½äº§ç”ŸæŒ‡æ ‡ï¼Œé‚£ä¹ˆåœ¨æ²¡æœ‰äº§ç”Ÿä¹‹å‰å‘¢ï¼Ÿè¿™ä¸ªprenextæ–¹æ³•å°±ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚ Adulthood: nextè¿™ä¸ªæ–¹æ³•æ˜¯æœ€æ ¸å¿ƒçš„ï¼Œå°±æ˜¯æ¯æ¬¡ç§»åŠ¨åˆ°ä¸‹ä¸€çš„æ—¶é—´ç‚¹ï¼Œç­–ç•¥å°†ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥ï¼Œç­–ç•¥çš„æ ¸å¿ƒå¾€å¾€éƒ½æ˜¯å†™åœ¨è¿™ä¸ªæ–¹æ³•é‡Œçš„ã€‚ Death: stop ç­–ç•¥çš„ç”Ÿå‘½å‘¨æœŸç»“æŸï¼ŒcerebroæŠŠè¿™ä¸€ç­–ç•¥é€€å‡ºã€‚ ç­–ç•¥å½“ä¸­çš„å›žè°ƒå‡½æ•°Strategy ç±»å°±åƒçœŸå®žä¸–ç•Œçš„äº¤æ˜“å‘˜ä¸€æ ·ï¼Œå½“äº¤æ˜“æ‰§è¡Œçš„æ—¶å€™ï¼Œä»–ä¼šå¾—åˆ°ä¸€äº›æ¶ˆæ¯ï¼Œè­¬å¦‚orderæ˜¯å¦æ‰§è¡Œï¼Œä¸€ç¬”traderèµšäº†å¤šå°‘é’±ï¼Œç­‰ç­‰ã€‚è¿™äº›æ¶ˆæ¯éƒ½å°†åœ¨Strategyç±»ä¸­é€šè¿‡å›žè°ƒå‡½æ•°è¢«å¾—ä»¥çŸ¥æ™“ã€‚è¿™äº›å›žè°ƒå‡½æ•°å¦‚ä¸‹ï¼š notify_order(order)ï¼šä¸‹çš„å•å­ï¼Œorderçš„ä»»ä½•çŠ¶æ€å˜åŒ–éƒ½å°†å¼•èµ·è¿™ä¸€æ–¹æ³•çš„è°ƒç”¨ notify_trade(trade)ï¼šä»»ä½•ä¸€ç¬”äº¤æ˜“å¤´å¯¸çš„æ”¹å˜éƒ½å°†è°ƒç”¨è¿™ä¸€æ–¹æ³• notify_cashvalue(cash, value)ï¼šä»»ä½•çŽ°é‡‘å’Œèµ„äº§ç»„åˆçš„å˜åŒ–éƒ½å°†è°ƒç”¨è¿™ä¸€æ–¹æ³•notify_store(msg, *args, **kwargs)ï¼šå¯ä»¥ç»“åˆcerebroç±»è¿›è¡Œè‡ªå®šä¹‰æ–¹æ³•çš„è°ƒç”¨ é‚£ä¹ˆé—®é¢˜æŽ¥è¸µè€Œè‡³ï¼Œè¿™é‡Œæˆ‘ä»¬åªå…³æ³¨å‰2ç§æ–¹æ³•ä¸­ç›‘æµ‹å¯¹è±¡çš„å¯å˜åŒ–æ–¹å¼ã€‚ tradeæŒ‡çš„æ˜¯ä¸€ç¬”å¤´å¯¸ï¼Œtradeæ˜¯opençš„çŠ¶æ€æŒ‡å½“å‰æ—¶åˆ»ï¼Œè¿™ä¸€æ ‡çš„çš„å¤´å¯¸ä»Ž0å˜åˆ°æŸä¸€éžé›¶å€¼ã€‚tradeæ˜¯closedåˆ™åˆšå¥½ç›¸åã€‚ tradeå¤§æ¦‚æœ‰å¦‚ä¸‹å¸¸ç”¨å±žæ€§ ref: å”¯ä¸€id size (int): tradeçš„å½“å‰å¤´å¯¸ price (float): tradeèµ„äº§çš„å½“å‰ä»·æ ¼ value (float): tradeçš„å½“å‰ä»·å€¼ commission (float): tradeçš„ç´¯è®¡æ‰‹ç»­è´¹ pnl (float): tradeçš„å½“å‰pnl pnlcomm (float): tradeçš„å½“å‰pnlå‡åŽ»æ‰‹ç»­è´¹ isclosed (bool): å½“å‰æ—¶åˆ»tradeå¤´å¯¸æ˜¯å¦å½’é›¶ isopen (bool): æ–°çš„äº¤æ˜“æ›´æ–°äº†trade justopened (bool): æ–°å¼€å¤´å¯¸ dtopen (float): trade opençš„datetime dtclose (float): trade closeçš„datetime Orders orderæ˜¯strategyå‘å‡ºçš„æŒ‡ä»¤ï¼Œè®©cerebroåŽ»æ‰§è¡Œã€‚ strategyè‡ªèº«æœ‰buy, sell and closeæ–¹æ³•æ¥ç”Ÿæˆorderï¼Œcancelæ–¹æ³•æ¥å–æ¶ˆä¸€ç¬”orderã€‚ä¸‹å•çš„æ–¹å¼æœ‰å¾ˆå¤šï¼ŒåŽç»­ä¼šä»‹ç»ï¼Œè¿™é‡Œä¸»è¦è®²å›žè°ƒå‡½æ•°ä¸­ï¼Œå’±ä»¬å¯ä»¥èŽ·å¾—å“ªäº›ä¿¡æ¯ã€‚ order.statuså¯ä»¥è¿”å›žorderçš„å½“å‰çŠ¶æ€ order.isbuyå¯ä»¥èŽ·å¾—è¿™ç¬”orderæ˜¯å¦æ˜¯buy order.executed.price order.executed.value order.executed.comm åˆ†åˆ«å¯ä»¥èŽ·å¾—æ‰§è¡Œorderçš„ä»·æ ¼ï¼Œæ€»ä»·ï¼Œå’Œæ‰‹ç»­è´¹ class TestStrategy(bt.Strategy): params = ( (&apos;maperiod&apos;, 15), ) def log(self, txt, dt=None): &apos;&apos;&apos; Logging function fot this strategy&apos;&apos;&apos; dt = dt or self.datas[0].datetime.date(0) print(&apos;%s, %s&apos; % (dt.isoformat(), txt)) def __init__(self): # Keep a reference to the &quot;close&quot; line in the data[0] dataseries self.dataclose = self.datas[0].close # To keep track of pending orders and buy price/commission self.order = None self.buyprice = None self.buycomm = None # Add a MovingAverageSimple indicator self.sma = bt.indicators.SimpleMovingAverage( self.datas[0], period=self.params.maperiod) def start(self): print(&quot;the world call me!&quot;) def prenext(self): print(&quot;not mature&quot;) def notify_order(self, order): if order.status in [order.Submitted, order.Accepted]: # Buy/Sell order submitted/accepted to/by broker - Nothing to do return # Check if an order has been completed # Attention: broker could reject order if not enougth cash if order.status in [order.Completed]: if order.isbuy(): self.log( &apos;BUY EXECUTED, Price: %.2f, Cost: %.2f, Comm %.2f&apos; % (order.executed.price, order.executed.value, order.executed.comm)) self.buyprice = order.executed.price self.buycomm = order.executed.comm else: # Sell self.log(&apos;SELL EXECUTED, Price: %.2f, Cost: %.2f, Comm %.2f&apos; % (order.executed.price, order.executed.value, order.executed.comm)) self.bar_executed = len(self) elif order.status in [order.Canceled, order.Margin, order.Rejected]: self.log(&apos;Order Canceled/Margin/Rejected&apos;) self.order = None å¯ä»¥çœ‹åˆ°æ‰“å°å‡ºæ¥çš„ç»“æžœä¸­ï¼Œæœ‰startå’Œprenextï¼Œæœ€åŽå½“ç„¶ä¹Ÿæœ‰death Backtraderçš„indicatordef __init__(self): # Keep a reference to the &quot;close&quot; line in the data[0] dataseries self.dataclose = self.datas[0].close # To keep track of pending orders and buy price/commission self.order = None self.buyprice = None self.buycomm = None # Add a MovingAverageSimple indicator self.sma = bt.indicators.SimpleMovingAverage( self.datas[0], period=self.params.maperiod) è¿™é‡Œçš„æœ€åŽï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªbacktraderå†…ç½®çš„indicatorï¼ŒåŽç»­æˆ‘ä»¬å°†å°è¯•è‡ªå·±ç¼–å†™ä¸€ä¸ªindicatorã€‚ æ•°æ®çš„èŽ·å–datafeedï¼Œä¹Ÿå°±æ˜¯cerebroçš„æœ¬æºï¼Œæ•°æ® dataframe = pd.read_csv(&apos;dfqc.csv&apos;, index_col=0, parse_dates=True) dataframe[&apos;openinterest&apos;] = 0 data = bt.feeds.PandasData(dataname=dataframe, fromdate = datetime.datetime(2015, 1, 1), todate = datetime.datetime(2016, 12, 31) ) # Add the Data Feed to Cerebro cerebro.adddata(data) 2014-03-13 00:00:00.005,1.425,1.434,1.449,1.418,457767208.0 2014-03-14 00:00:00.005,1.429,1.422,1.436,1.416,196209439.0 2014-03-17 00:00:00.005,1.433,1.434,1.437,1.422,250946201.0 2014-03-18 00:00:00.005,1.434,1.425,1.437,1.424,245516577.0 2014-03-19 00:00:00.005,1.423,1.419,1.423,1.406,331866195.0 2014-03-20 00:00:00.005,1.412,1.408,1.434,1.407,379443759.0 2014-03-21 00:00:00.005,1.406,1.463,1.468,1.403,825467935.0 dataframe = pd.read_csv(&apos;dfqc.csv&apos;, index_col=0, parse_dates=True) æŠŠcsvè¯»å…¥pandasçš„å‚æ•°ï¼Œindex_col=0è¡¨ç¤ºç¬¬ä¸€åˆ—æ—¶é—´æ•°æ®æ˜¯ä½œä¸ºpandas çš„indexçš„ï¼Œparse_dates=Tureæ˜¯è‡ªåŠ¨æŠŠæ•°æ®ä¸­çš„ç¬¦åˆæ—¥æœŸçš„æ ¼å¼å˜æˆdatetimeç±»åž‹ã€‚ä¸ºä»€ä¹ˆè¦è¿™æ ·å‘¢ï¼Ÿå…¶å®žè¯»å…¥åŽçš„pandasé•¿æ€Žä¹ˆæ ·éƒ½æ˜¯ç”±backtraderè§„å®šçš„ pandasçš„è¦æ±‚çš„ç»“æž„ï¼Œæˆ‘ä»¬å°±çŸ¥é“ï¼Œä¸ä»…ä»…æœ‰self.datas[0].close,è¿˜ä¼šæœ‰self.datas[0].openã€‚ä¹Ÿç¡®å®žå¦‚æ­¤ã€‚åªæ˜¯æˆ‘ä»¬é€šå¸¸æ‹¿closeä½œä¸ºä¸€ä¸ªä»·æ ¼åŸºå‡† self.datas[0].close è¿”å›žçš„æ˜¯ä¸€ä¸ªlinesã€‚linesæ˜¯backtraderä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå¯ä»¥ç†è§£ä¸ºæ—¶é—´åºåˆ—æµï¼Œè¿™ç±»æ•°æ®ï¼ŒåŽé¢å¯ä»¥è·Ÿindexï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥æœ‰ self.datas[0].close[0] self.datas[0].close[-1] è¿™é‡Œçš„indexæ˜¯æœ‰æ„ä¹‰çš„ï¼Œ0ä»£è¡¨å½“å‰æ—¶åˆ»ï¼Œ-1ä»£è¡¨å‰ä¸€æ—¶åˆ»ï¼Œ1ä»£è¡¨åŽä¸€æ—¶åˆ»ï¼Œä»¥æ­¤ç±»æŽ¨ æ‰€ä»¥åœ¨nextä¸­ä½¿ç”¨self.dataclose[0],self.dataclose[-1]]]></content>
      <categories>
        <category>æŠ•èµ„</category>
      </categories>
      <tags>
        <tag>æŠ•èµ„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA['qaå‡½æ•°']]></title>
    <url>%2F2020%2F08%2F29%2Fqa%E5%87%BD%E6%95%B0%2F</url>
    <content type="text"><![CDATA[æ•°æ®ä¸‹å•QA_Account()QA_Account() æ˜¯quantaxisçš„æ ¸å¿ƒç±», å…¶ä½œç”¨æ˜¯ä¸€ä¸ªå¯ä»¥ä½¿ç”¨è§„åˆ™å…¼å®¹å„ç§å¸‚åœºçš„è´¦æˆ·ç±»1.3.0ä»¥åŽ, QA_Accountéœ€è¦ç”±ç»„åˆæ¥è¿›è¡Œåˆ›å»º(æŽ¨è) è°ƒç”¨æ–¹å¼ import QUANTAXIS as QA user = QA.QA_User(username =&apos;quantaxis&apos;, password = &apos;quantaxis&apos;) portfolio=user.new_portfolio(&apos;x1&apos;) account = *portfolio.new_account*(account_cookie=&apos;test&apos;) QA_AccountPRO? Init signature: QA_AccountPRO( user_cookie:str, portfolio_cookie:str, account_cookie=None, strategy_name=None, market_type=&apos;stock_cn&apos;, frequence=&apos;day&apos;, broker=&apos;backtest&apos;, init_hold={}, init_cash=1000000, commission_coeff=0.00025, tax_coeff=0.001, margin_level={}, allow_t0=False, allow_sellopen=False, allow_margin=False, running_environment=&apos;backtest&apos;, auto_reload=False, generated=&apos;direct&apos;, start=None, end=None, ) Docstring: JOBæ˜¯worker éœ€è¦æŽ¥å—QA_EVENT éœ€è¦å®Œå–„RUNæ–¹æ³• ðŸ‘»QA_Broker ç»§æ‰¿è¿™ä¸ªç±» ðŸ‘»QA_Account ç»§æ‰¿è¿™ä¸ªç±» ðŸ‘»QA_OrderHandler ç»§æ‰¿è¿™ä¸ªç±» è¿™äº›ç±»éƒ½è¦å®žçŽ°runæ–¹æ³•ï¼Œåœ¨å…¶å®ƒçº¿ç¨‹ðŸŒ€ä¸­å…è®¸è‡ªå·±çš„ä¸šåŠ¡ä»£ç  File: /usr/local/lib/python3.6/site-packages/QUANTAXIS/QAARP/QAAccountPro.py Type: type Subclasses: accpro = *portfolio.new_accountpro*(&apos;pro2&apos;,market_type=QA.MARKET_TYPE.STOCK_CN) accpro.positions {} *accpro.receive_deal*? Signature: accpro.receive_deal( code, trade_id:str, order_id:str, realorder_id:str, trade_price, trade_amount, trade_towards, trade_time, message=None, ) Docstring: &lt;no docstring&gt; File: /usr/local/lib/python3.6/site-packages/QUANTAXIS/QAARP/QAAccountPro.py Type: method `accpro.receive_deal`(&apos;000001&apos;,&apos;001&apos;,&apos;001&apos;,&apos;0001&apos;,trade_price=12,trade_amount=10000,trade_towards=QA.ORDER_DIRECTION.BUY,trade_time=&apos;2020-08-18&apos;) *accpro.positions* {&apos;000001&apos;: &lt; QAPOSITION 000001 amount 10000/0 &gt;} *accpro.history_table* *accpro.send_order?* Signature: accpro.send_order( code=None, amount=None, time=None, towards=None, price=None, money=None, order_model=&apos;LIMIT&apos;, amount_model=&apos;by_amount&apos;, order_id=None, position_id=None, *args, **kwargs, ) Docstring: &lt;no docstring&gt; File: /usr/local/lib/python3.6/site-packages/QUANTAXIS/QAARP/QAAccountPro.py Type: method åŸºäºŽæœŸè´§å¸‚åœºçš„è´¦æˆ·åˆå§‹åŒ– future_account = portfolio.new_account(account_cookie =&apos;future&apos;,allow_t0=True,allow_margin=True,allow_sellopen=True, running_environment=QA.MARKET_TYPE.FUTURE_CN) accountçš„å…¶ä»–å±žæ€§å¯ä»¥.å‡ºæ¥ï¼Œå¯ä»¥è‡ªå·±è¯•ç€çœ‹ *accpro.cash* [1000000, 879970.0, 779945.0] *accpro.cash_available* 779945.0 *accpro.get_history* *accpro.get_position*(&apos;000001&apos;) pos2 = accpro.get_position(&apos;000002&apos;) *pos2.message* {&apos;code&apos;: &apos;000002&apos;, &apos;instrument_id&apos;: &apos;000002&apos;, &apos;user_id&apos;: &apos;pro2&apos;, &apos;portfolio_cookie&apos;: &apos;x1&apos;, &apos;username&apos;: &apos;quantaxis&apos;, &apos;position_id&apos;: &apos;3e2cd89e-7143-4e0e-b344-40571e84eda5&apos;, &apos;account_cookie&apos;: &apos;pro2&apos;, &apos;frozen&apos;: {}, &apos;name&apos;: None, &apos;spms_id&apos;: None, &apos;oms_id&apos;: None, &apos;market_type&apos;: &apos;stock_cn&apos;, &apos;exchange_id&apos;: None, &apos;moneypreset&apos;: 100000, &apos;moneypresetLeft&apos;: 0.0, &apos;lastupdatetime&apos;: &apos;&apos;, &apos;volume_long_today&apos;: 5000, &apos;volume_long_his&apos;: 0, &apos;volume_long&apos;: 5000, &apos;volume_short_today&apos;: 0, &apos;volume_short_his&apos;: 0, &apos;volume_short&apos;: 0, &apos;volume_long_frozen_today&apos;: 0, &apos;volume_long_frozen_his&apos;: 0, &apos;volume_long_frozen&apos;: 0, &apos;volume_short_frozen_today&apos;: 0, &apos;volume_short_frozen_his&apos;: 0, &apos;volume_short_frozen&apos;: 0, &apos;margin_long&apos;: 100000.0, &apos;margin_short&apos;: 0, &apos;margin&apos;: 100000.0, &apos;position_price_long&apos;: 20.0, &apos;position_cost_long&apos;: 100000.0, &apos;position_price_short&apos;: 0, &apos;position_cost_short&apos;: 0.0, &apos;open_price_long&apos;: 20.0, &apos;open_cost_long&apos;: 100000.0, &apos;open_price_short&apos;: 0, &apos;open_cost_short&apos;: 0.0, &apos;trades&apos;: [], &apos;orders&apos;: {}, &apos;last_price&apos;: 20, &apos;float_profit_long&apos;: 0.0, &apos;float_profit_short&apos;: 0.0, &apos;float_profit&apos;: 0.0, &apos;position_profit_long&apos;: 0.0, &apos;position_profit_short&apos;: 0.0, &apos;position_profit&apos;: 0.0} *pos2.volume_long* 5000 *pos2.volume_long_today* 5000 *pos2.volume_long_his* 0 *pos2.last_price* 20 *pos2.on_price_change*(21) if pos2.float_profit_long &gt; 2000: print(&apos;sell&apos;) sell QIFIAccountfrom QIFIAccount import QIFI_Account aifiacc = QIFI_Account(username=&apos;x2&apos;,password=&apos;x2&apos;,) aifiacc.initial() Create new Account aifiacc? Type: QIFI_Account String form: &lt;QIFIAccount.QAQIFIAccount.QIFI_Account object at 0x7f6e3b2dfc18&gt; File: /usr/local/lib/python3.6/site-packages/QIFIAccount/QAQIFIAccount.py Docstring: &lt;no docstring&gt; Init docstring: Initial QIFI Accountæ˜¯ä¸€ä¸ªåŸºäºŽ DIFF/ QIFI/ QAAccountåŽçš„ä¸€ä¸ªå®žç›˜é€‚ç”¨çš„AccountåŸºç±» 1. å…¼å®¹å¤šæŒä»“ç»„åˆ 2. åŠ¨æ€è®¡ç®—æƒç›Š ä½¿ç”¨ model = SIM/ REALæ¥åˆ‡æ¢ sr = aifiacc.send_order(&apos;003&apos;,10,12,ORDER_DIRECTION.BUY) aifiacc.send_order? Signature: aifiacc.send_order( code:str, amount:float, price:float, towards:int, order_id:str=&apos;&apos;, ) Docstring: &lt;no docstring&gt; File: /usr/local/lib/python3.6/site-packages/QIFIAccount/QAQIFIAccount.py Type: method sr = aifiacc.send_order(&apos;004&apos;,10.0,12.0,QA.ORDER_DIRECTION.BUY) {&apos;volume_long&apos;: 0, &apos;volume_short&apos;: 0, &apos;volume_long_frozen&apos;: 0, &apos;volume_short_frozen&apos;: 0} {&apos;volume_long&apos;: 0, &apos;volume_short&apos;: 0} order check success ä¸‹å•æˆåŠŸ b3f155c7-ab2b-4ac1-94b7-08b6af152738 td = aifiacc.make_deal(sr) å…¨éƒ¨æˆäº¤ b3f155c7-ab2b-4ac1-94b7-08b6af152738 update trade]]></content>
      <categories>
        <category>æŠ•èµ„</category>
      </categories>
      <tags>
        <tag>æŠ•èµ„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[QUANTAXIS]]></title>
    <url>%2F2020%2F08%2F20%2FQUANTAXIS%2F</url>
    <content type="text"><![CDATA[çŽ¯å¢ƒå‡†å¤‡å®‰è£…cmder å®˜ç½‘ä¸‹è½½åœ°å€ http://cmder.net/ ä¸‹è½½å¥½è§£åŽ‹åŒ…å¯ç›´æŽ¥ä½¿ç”¨ çŽ¯å¢ƒå˜é‡é…ç½® åœ¨ç³»ç»Ÿå±žæ€§é‡Œé¢é…ç½®çŽ¯å¢ƒå˜é‡ï¼Œå°†Cmder.exeæ‰€åœ¨æ–‡ä»¶è·¯å¾„æ·»åŠ è‡³pathé‡Œ win+R,è¾“å…¥cmder,ç¡®å®šï¼Œå³å¯è¿è¡Œcmder é…ç½®å³é”®å¿«æ·å¯åŠ¨ // è®¾ç½®ä»»æ„åœ°æ–¹é¼ æ ‡å³é”®å¯åŠ¨Cmder Cmder.exe /REGISTER ALL å¿«æ·é”® Tab è‡ªåŠ¨è·¯å¾„è¡¥å…¨ Ctrl+T å»ºç«‹æ–°é¡µç­¾ Ctrl+W å…³é—­é¡µç­¾ Ctrl+Tab åˆ‡æ¢é¡µç­¾ Alt+F4 å…³é—­æ‰€æœ‰é¡µç­¾ Alt+Shift+1 å¼€å¯cmd.exe Alt+Shift+2 å¼€å¯powershell.exe Alt+Shift+3 å¼€å¯powershell.exe (ç³»ç»Ÿç®¡ç†å‘˜æƒé™) Ctrl+1 å¿«é€Ÿåˆ‡æ¢åˆ°ç¬¬1ä¸ªé¡µç­¾ Ctrl+n å¿«é€Ÿåˆ‡æ¢åˆ°ç¬¬nä¸ªé¡µç­¾( nå€¼æ— ä¸Šé™) Alt + enter åˆ‡æ¢åˆ°å…¨å±çŠ¶æ€ Ctr+r åŽ†å²å‘½ä»¤æœç´¢ Tab è‡ªåŠ¨è·¯å¾„è¡¥å…¨ Ctrl+T å»ºç«‹æ–°é¡µç­¾ Ctrl+W å…³é—­é¡µç­¾ Ctrl+Tab åˆ‡æ¢é¡µç­¾ Alt+F4 å…³é—­æ‰€æœ‰é¡µç­¾ Alt+Shift+1 å¼€å¯cmd.exe Alt+Shift+2 å¼€å¯powershell.exe Alt+Shift+3 å¼€å¯powershell.exe (ç³»ç»Ÿç®¡ç†å‘˜æƒé™) Ctrl+1 å¿«é€Ÿåˆ‡æ¢åˆ°ç¬¬1ä¸ªé¡µç­¾ Ctrl+n å¿«é€Ÿåˆ‡æ¢åˆ°ç¬¬nä¸ªé¡µç­¾( nå€¼æ— ä¸Šé™) Alt + enter åˆ‡æ¢åˆ°å…¨å±çŠ¶æ€ Ctr+r åŽ†å²å‘½ä»¤æœç´¢ Win+Alt+P å¼€å¯å·¥å…·é€‰é¡¹è§†çª— ä¸­æ–‡ä¹±ç é—®é¢˜ å°†ä¸‹é¢çš„4è¡Œå‘½ä»¤æ·»åŠ åˆ°cmder/config/aliasesæ–‡ä»¶æœ«å°¾ã€‚ l=ls --show-control-chars la=ls -aF --show-control-chars ll=ls -alF --show-control-chars ls=ls --show-control-chars -F å®‰è£…dockeræ¡Œé¢ç‰ˆä¸‹è½½https://www.docker.com/ ä¸‹è½½Docker Desktop å®‰è£…å¯èƒ½é‡åˆ°çš„é—®é¢˜Installation failed:one pre-requisite is not fullfilled æç¤ºæˆ‘ä»¬ç³»ç»Ÿç‰ˆæœ¬ä½Žï¼Œè§£å†³åŠžæ³•ï¼Œä¼ªè£…æˆä¸“ä¸šç‰ˆç³»ç»Ÿã€‚ç”¨ç®¡ç†å‘˜æƒé™å¼€å¯è¿è¡Œ[cmd]å‘½ä»¤å¼€å¯å‘½ä»¤è¡Œï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ REG ADD &quot;HKEY_LOCAL_MACHINE\software\Microsoft\Windows NT\CurrentVersion&quot; /v EditionId /T REG_EXPAND_SZ /d Professional /F å†æ¬¡å®‰è£…dockerå¯ä»¥æˆåŠŸ ä¸‹è½½QUANTAXISçš„docker-compose.yamlæ–‡ä»¶`https://github.com/QUANTAXIS/QUANTAXIS` å¦‚æžœä½ æ˜¯è‚¡ç¥¨æ–¹å‘çš„ ==&gt; é€‰æ‹© qa-service ä¸‹çš„docker-compose.yaml å¦‚æžœä½ æ˜¯æœŸè´§æ–¹å‘çš„ ==&gt; é€‰æ‹© qa-service-future ä¸‹çš„docker-compose.yaml ä½ å¯ä»¥ç†è§£ dockerçš„æž„æˆç±»ä¼¼æ­ç§¯æœ¨çš„æ¨¡å¼, ä½ éœ€è¦è¿™ä¸ªåŠŸèƒ½çš„ç§¯æœ¨, å°±é€‰æ‹©ä»–æ”¾åœ¨ä½ çš„docker-compose.yamlé‡Œé¢ æœŸè´§æ–¹å‘çš„yaml æ¯”è‚¡ç¥¨å¤šä¸€ä¸ª QACTPBEEçš„docker-container [è¿™æ˜¯ç”¨äºŽåˆ†å‘æœŸè´§çš„tickè¡Œæƒ…æ‰€éœ€çš„ è‚¡ç¥¨åˆ™æ— éœ€æ­¤ç§¯æœ¨] å¯é€šè¿‡gitæ‹‰å–å…¨éƒ¨ä»£ç åˆ°æœ¬åœ°ï¼Œä»Žæœ¬åœ°æ‹·è´å‡ºéœ€è¦çš„dockerfileæ–‡ä»¶ dockeréƒ¨ç½²quantaxis é€‰å–ä¸€ä¸ªç©ºé—´è¾ƒå¤§çš„ç›˜ï¼Œæœ€å¥½ä¸æ”¾cç›˜ï¼Œæ–°å»ºquantaxisæ–‡ä»¶å¤¹ï¼Œå°†docker-compose.yamlæ‹·è´åˆ°quantaxisæ–‡ä»¶å¤¹ cdåˆ°quantaxisæ–‡ä»¶å¤¹ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ docker volume create --name=qamg docker volume create --name=qacode docker-compose up -d æ„æ€åœ¨åŽå°å¯åŠ¨è¿™ä¸ªdockerçŽ¯å¢ƒï¼Œå¦‚æžœéœ€è¦æŽ§åˆ¶å°æ‰“å°è¾“å‡ºï¼Œåˆ™æŠŠ-dåŽ»æŽ‰ åœ¨æ— æŠ¥é”™çš„æƒ…å†µä¸‹ï¼Œæ‰“å¼€æµè§ˆå™¨è¾“å…¥localhost:81å³å¯çœ‹åˆ° åœ¨ä¸Šæ–¹éšæ„ç‚¹å‡»æ ç›®ï¼Œéƒ½å¯è¿›å…¥ç™»é™†ç•Œé¢ï¼Œé»˜è®¤å¯†ç æ˜¯quantaxis dockeråšäº†ä»€ä¹ˆ å¸®ä½ ç›´æŽ¥å¼€å¯ä½ éœ€è¦çš„æœåŠ¡ 27017 mongodb 8888 jupyter ï¼ˆå¯†ç ï¼‰quantaxis 8010 quantaxis_webserver 81 quantaxis_community ç¤¾åŒºç‰ˆç•Œé¢ 61208 ç³»ç»Ÿç›‘æŽ§ 15672 qa-eventmq ï¼ˆå¯†ç ï¼‰admin admin æ—¥å¿—æŸ¥çœ‹ docker logs cronå®¹å™¨å å…¶ä»–å‘½ä»¤ docker ps docker stats docker-compose top ï¼ˆå¿…é¡»åˆ°dockerfileæ–‡ä»¶å¤¹ç›®å½•ä¸‹ï¼‰ docker-compose ps ï¼ˆå¿…é¡»åˆ°dockerfileæ–‡ä»¶å¤¹ç›®å½•ä¸‹ï¼‰ docker stop $(docker ps -a -q)åœæ­¢å®¹å™¨ docker rm $(docker ps -a -q)åˆ é™¤å®¹å™¨ docker-compose pull æ›´æ–°ï¼ˆå¿…é¡»åˆ°dockerfileæ–‡ä»¶å¤¹ç›®å½•ä¸‹ï¼‰ docker-compose up -d é‡å¯æœåŠ¡ï¼ˆå¿…é¡»åˆ°dockerfileæ–‡ä»¶å¤¹ç›®å½•ä¸‹ï¼‰ docker-compose stop åœæ­¢æœåŠ¡ï¼ˆå¿…é¡»åˆ°dockerfileæ–‡ä»¶å¤¹ç›®å½•ä¸‹ï¼‰ docker run --rm -v qamg:/data/db \ -v $(pwd):/backup alpine \tar zcvf /backup/dbbackup.tar /data/db å¤‡ä»½æ•°æ®åº“åˆ°å½“å‰ç›®å½•ä¸‹ docker run --rm -v qamg:/data/db \ -v $(pwd):/backup alpine \ sh -c &quot;cd /data/db \ &amp;&amp; rm -rf diagnostic.data \ &amp;&amp; rm -rf journal \ &amp;&amp; rm -rf configdb \ &amp;&amp; cd / \ &amp;&amp; tar xvf /backup/dbbackup.tar&quot; è¿˜åŽŸå½“å‰ç›®å½•ä¸‹çš„dbbackup.taråˆ°mongodæ•°æ®åº“ å½“æ›´æ–°äº†dockerfileåŽé‡å¯æœåŠ¡ï¼Œä¹‹å‰ä¿å­˜çš„æ•°æ®ä¸ä¼šè¢«æ¸…é™¤ ä¿å­˜æ•°æ® å…ˆè¿›å…¥åˆ°jupyterçš„ç™»é™†é¡µç™»é™†ï¼Œæ‰¾åˆ°terminal åœ¨ç‚¹å¼€çš„terminalç•Œé¢ä¸­ï¼Œè¾“å…¥quantaxis å›žè½¦, è¿›å…¥quantaxis cliçš„å‘½ä»¤è¡Œç•Œé¢ åœ¨å‘½ä»¤è¡Œç•Œé¢ è¾“å…¥ save æŒ‰å›žè½¦, ä½ å¯ä»¥çœ‹åˆ°è®¸å¤šå‘½ä»¤è¡Œé€‰é¡¹ å‚è€ƒ save all (è‚¡ç¥¨/æŒ‡æ•° çš„æ—¥çº¿æ•°æ® | æƒæ¯æ•°æ® | æ¿å—æ•°æ®) save x (è‚¡ç¥¨/æŒ‡æ•°çš„ æ—¥çº¿/åˆ†é’Ÿçº¿æ•°æ® | æƒæ¯æ•°æ®| æ¿å—æ•°æ®) save future_min_all (æœŸè´§çš„å…¨éƒ¨åˆçº¦çš„åˆ†é’Ÿçº¿æ•°æ®) save future_min (qæœŸè´§ä¸»è¿žçš„åˆ†é’Ÿçº¿æ•°æ®) save future_day_all (æœŸè´§å…¨éƒ¨åˆçº¦çš„æ—¥çº¿æ•°æ®) save future_day (æœŸè´§ä¸»è¿žçš„æ—¥çº¿æ•°æ®) save index_day (æŒ‡æ•°æ•°æ® æ­¤å¤„ä¹Ÿè¦å­˜, å› ä¸ºåœ¨åšå›žæµ‹çš„æ—¶å€™, éœ€è¦æ²ªæ·±300ä½œä¸ºæ ‡çš„å¯¹ç…§ç‰©) å­˜å®Œæ•°æ®åŽå¯ä»¥æ‰“å¼€notebook,åšä¸€ä¸ªå›žæµ‹ import QUANTAXIS as QA import numpy as np import pandas as pd import datetime st1=datetime.datetime.now() # define the MACD strategy def MACD_JCSC(dataframe, SHORT=12, LONG=26, M=9): &quot;&quot;&quot; 1.DIFå‘ä¸Šçªç ´DEAï¼Œä¹°å…¥ä¿¡å·å‚è€ƒã€‚ 2.DIFå‘ä¸‹è·Œç ´DEAï¼Œå–å‡ºä¿¡å·å‚è€ƒã€‚ &quot;&quot;&quot; CLOSE = dataframe.close DIFF = QA.EMA(CLOSE, SHORT) - QA.EMA(CLOSE, LONG) DEA = QA.EMA(DIFF, M) MACD = 2*(DIFF-DEA) CROSS_JC = QA.CROSS(DIFF, DEA) CROSS_SC = QA.CROSS(DEA, DIFF) ZERO = 0 return pd.DataFrame({&apos;DIFF&apos;: DIFF, &apos;DEA&apos;: DEA, &apos;MACD&apos;: MACD, &apos;CROSS_JC&apos;: CROSS_JC, &apos;CROSS_SC&apos;: CROSS_SC, &apos;ZERO&apos;: ZERO}) # create account user = QA.QA_User(username=&apos;quantaxis&apos;, password=&apos;quantaxis&apos;) portfolio = user.new_portfolio(&apos;qatestportfolio&apos;) Account = portfolio.new_account(account_cookie=&apos;macd_stock&apos;, init_cash=1000000) Broker = QA.QA_BacktestBroker() QA.QA_SU_save_strategy(&apos;MACD_JCSC&apos;,&apos;Indicator&apos;,Account.account_cookie) # get data from mongodb QA.QA_SU_save_strategy(&apos;MACD_JCSC&apos;, &apos;Indicator&apos;, Account.account_cookie, if_save=True) data = QA.QA_fetch_stock_day_adv( [&apos;000001&apos;, &apos;000002&apos;, &apos;000004&apos;, &apos;600000&apos;], &apos;2017-09-01&apos;, &apos;2018-05-20&apos;) data = data.to_qfq() # add indicator ind = data.add_func(MACD_JCSC) # ind.xs(&apos;000001&apos;,level=1)[&apos;2018-01&apos;].plot() data_forbacktest=data.select_time(&apos;2018-01-01&apos;,&apos;2018-05-01&apos;) for items in data_forbacktest.panel_gen: for item in items.security_gen: ################### daily_ind=ind.loc[item.index] if daily_ind.CROSS_JC.iloc[0]&gt;0: order=Account.send_order( code=item.code[0], time=item.date[0], amount=1000, towards=QA.ORDER_DIRECTION.BUY, price=0, order_model=QA.ORDER_MODEL.CLOSE, amount_model=QA.AMOUNT_MODEL.BY_AMOUNT ) #print(item.to_json()[0]) Broker.receive_order(QA.QA_Event(order=order,market_data=item)) trade_mes=Broker.query_orders(Account.account_cookie,&apos;filled&apos;) res=trade_mes.loc[order.account_cookie,order.realorder_id] order.trade(res.trade_id,res.trade_price,res.trade_amount,res.trade_time) elif daily_ind.CROSS_SC.iloc[0]&gt;0: #print(item.code) if Account.sell_available.get(item.code[0], 0)&gt;0: order=Account.send_order( code=item.code[0], time=item.date[0], amount=Account.sell_available.get(item.code[0], 0), towards=QA.ORDER_DIRECTION.SELL, price=0, order_model=QA.ORDER_MODEL.MARKET, amount_model=QA.AMOUNT_MODEL.BY_AMOUNT ) #print Broker.receive_order(QA.QA_Event(order=order,market_data=item)) trade_mes=Broker.query_orders(Account.account_cookie,&apos;filled&apos;) res=trade_mes.loc[order.account_cookie,order.realorder_id] order.trade(res.trade_id,res.trade_price,res.trade_amount,res.trade_time) Account.settle() print(&apos;TIME -- {}&apos;.format(datetime.datetime.now()-st1)) print(Account.history) print(Account.history_table) print(Account.daily_hold) # create Risk analysis Risk = QA.QA_Risk(Account) Account.save() Risk.save() æŽ¨èçš„åšæ³• ä½¿ç”¨æœ€æ–°çš„QAStrategyæ¥åšå›žæµ‹/æ¨¡æ‹Ÿ é¦–å…ˆ æ‰“å¼€terminal (ä¸Šé¢æœ‰è®²), è¾“å…¥ pip install qastrategy ç„¶åŽ æ–°å»ºä¸€ä¸ªnotebook, è¾“å…¥ from QAStrategy import QAStrategyCTABase import QUANTAXIS as QA import pprint class CCI(QAStrategyCTABase): def on_bar(self, bar): res = self.cci() print(res.iloc[-1]) if res.CCI[-1] &lt; -100: print(&apos;LONG&apos;) if self.positions.volume_long == 0: self.send_order(&apos;BUY&apos;, &apos;OPEN&apos;, price=bar[&apos;close&apos;], volume=1) if self.positions.volume_short &gt; 0: self.send_order(&apos;SELL&apos;, &apos;CLOSE&apos;, price=bar[&apos;close&apos;], volume=1) elif res.CCI[-1] &gt; 100: print(&apos;SHORT&apos;) if self.positions.volume_short == 0: self.send_order(&apos;SELL&apos;, &apos;OPEN&apos;, price=bar[&apos;close&apos;], volume=1) if self.positions.volume_long &gt; 0: self.send_order(&apos;BUY&apos;, &apos;CLOSE&apos;, price=bar[&apos;close&apos;], volume=1) def cci(self,): return QA.QA_indicator_CCI(self.market_data, 61) def risk_check(self): pass # pprint.pprint(self.qifiacc.message) ç„¶åŽ ä½ å¯ä»¥è‡ªç”±æŒ‡å®šå›žæµ‹/æ¨¡æ‹Ÿ é¦–å…ˆå®žä¾‹åŒ–è¿™ä¸ªç±» strategy =CCI(code=&apos;RB2005&apos;, frequence=&apos;1min&apos;,strategy_id=&apos;a3916de0-bd28-4b9c-bea1-94d91f1744ac&apos;, start=â€˜2020-01-01â€˜, end=â€˜2020-02-07â€™) å¦‚æžœä½ éœ€è¦æµ‹è¯•è¿™ä¸ªç­–ç•¥ strategy.debug() å¦‚æžœä½ éœ€è¦åšå›žæµ‹ strategy.run_backtest() å¦‚æžœä½ éœ€è¦è®©ä»–ç›´æŽ¥æŒ‚æ¨¡æ‹Ÿ åœ¨æŒ‚æ¨¡æ‹Ÿçš„æ—¶å€™, ä½ éœ€è¦æ³¨æ„ä¸€äº›ä¸œè¥¿ æŒ‚æ¨¡æ‹Ÿçš„æ ‡çš„éœ€è¦å’ŒçœŸå®žæ ‡çš„ä¸€è‡´æŒ‚æ¨¡æ‹Ÿçš„æ—¶å€™, ä½ çš„è¡Œæƒ…å¿…é¡»æ˜¯æœ‰æŽ¨é€çš„, å¹¶ä¸”ç”³è¯·äº†ä½ æ‰€éœ€è¦çš„çš„åˆ†é’Ÿçº¿çº§åˆ«çš„æ•°æ® (å¦‚ä½•ç”³è¯·è¡Œæƒ…æ•°æ®? ä½ å¯ä»¥çœ‹è¿™é‡Œ )https://github.com/yutiansut/QUANTAXIS_RealtimeCollector # æœŸè´§è®¢é˜…è¯·æ±‚ curl -X POST &quot;http://127.0.0.1:8011?action=new_handler&amp;market_type=future_cn&amp;code=au1911&quot; 12345678910# è‚¡ç¥¨è®¢é˜…è¯·æ±‚curl -X POST "http://127.0.0.1:8011?action=new_handler&amp;market_type=stock_cn&amp;code=000001"# äºŒæ¬¡é‡‡æ ·è¯·æ±‚curl -X POST "http://127.0.0.1:8011?action=new_resampler&amp;market_type=future_cn&amp;code=au1911&amp;frequence=2min"å¯¹äºŽå°ç™½å¯èƒ½éš¾ä»¥ç†è§£curlæ˜¯ä¸ªå•¥, æ­¤å¤„ç»™å‡ºä¸€ä¸ªç®€å•æ˜“æ‡‚çš„ä»£ç import requestsrequests.post("http://127.0.0.1:8011?action=new_handler&amp;market_type=future_cn&amp;code=&#123;&#125;".format("rb2001")ä»¥æ­¤ç±»æŽ¨å…¶ä»–çš„è¯·æ±‚éƒ½å¯ä»¥è¿™ä¹ˆåš åƒ èžºçº¹2001 åˆçº¦, ä½ éœ€è¦æ”¹æˆ rb2001 æ³¨æ„æ­¤å¤„æ˜¯å°å†™ strategy =CCI(code=&apos;rb2001&apos;, frequence=&apos;1min&apos;,strategy_id=&apos;a3916de0-bd28-4b9c-bea1-94d91f1744ac&apos;) strategy.debug_sim() åšå®Œäº†è¿™äº›æ“ä½œä»¥åŽ, ä½ å¯ä»¥ç‚¹å‡» å›žæµ‹ ä½ å°±å¯ä»¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ç»“æžœ æ›´å¤šå‚è€ƒ http://www.yutiansut.com:3000/topic/5dc5da7dc466af76e9e3bc5d å¦‚ä½•ä¿®æ”¹æœŸè´§çš„å®žç›˜è¡Œæƒ…åœ°å€ http://www.yutiansut.com:3000/topic/5dfade9efe01257b44740e70 å®žæ—¶å¦‚ä½•ç”³è¯·è¡Œæƒ… http://www.yutiansut.com:3000/topic/5dd1be9b0c8e672840f3fea7 å¦‚ä½•æŽ¥å…¥ä½ çš„å®žç›˜æœŸè´§è´¦æˆ· http://www.yutiansut.com:3000/topic/5dc865e8c466af76e9e3bdd1 å¦‚ä½•å®žçŽ°æ¨¡æ‹Ÿç›˜/å®žç›˜çš„è·Ÿå• http://www.yutiansut.com:3000/topic/5ddb5ba8fe01257b4474080a docker å¦‚ä½•è®¿é—®å¤–éƒ¨æ•°æ®åº“ https://github.com/QUANTAXIS/QUANTAXIS/issues/1346 http://www.yutiansut.com:3000/topic/5e4531c96d3b182e88b4ebb4 dockerå°ç™½ç”¨æˆ·çš„æŽ¨è http://www.yutiansut.com:3000/topic/5e4cb13f6d3b182e88b4ef64 æ•´ä¸ªçŽ¯å¢ƒä¸€è§ˆ é…ç½®çš„ä¸€äº›å¤‡å¿˜ å®‰è£…vscodeå¯ä»¥è°ƒè¯•docker ä¿®æ”¹å®šæ—¶ä¿å­˜æ•°æ®çš„æ—¶é—´ä½¿ç”¨vscodeè¿›å…¥qa-cronçš„å®¹å™¨ä¸­ï¼Œè¿›å…¥ç›®å½• /etc/cron.d ä¿®æ”¹daily_updateé‡Œçš„æ—¶é—´å³å¯ï¼Œå¦‚æžœåªéœ€è¦ä¿å­˜æœŸè´§æ•°æ®ï¼Œè¦æ”¹æŽ‰è„šæœ¬é‡Œçš„ update_future.py éƒ¨ç½² crontab daily_update crontab -l æ£€æŸ¥ /etc/init.d/cron start /etc/init.d/cron status è§£å†³åœ¨æ‰§è¡Œæ—¶æç¤º cron: canâ€™t lock /var/run/crond.pid, otherpid may be 2699: Resource temporarily unavailable è§£å†³æ–¹æ¡ˆï¼š rm -rf /var/run/crond.pid /etc/init.d/cron reload sudo /usr/sbin/service cron restart å¦‚æžœå®šæ—¶ä¸å¯ç”¨ï¼Œå¯ä»¥åœ¨æœ¬åœ°saveä¿å­˜æ•°æ®ï¼Œsaveä¸ä¼šè¦†ç›–ä¹‹å‰å·²ç»ä¸‹è½½å¥½çš„æ•°æ® åœ¨ç•Œé¢å®‰è£…åŒ…!ls !pip -v !pip install !pip install qastrategy -U åœ¨terminalç•Œé¢ä¹Ÿå¯ä»¥å®‰è£… from QUANTAXIS.QAARP.QAAccountPro import QA_AccountPRO QA_AccountPRO? docker-composeå¸¸ç”¨å‘½ä»¤docker-compose up -d nginx æž„å»ºå»ºå¯åŠ¨nignxå®¹å™¨ docker-compose exec nginx bash ç™»å½•åˆ°nginxå®¹å™¨ä¸­ docker-compose down åˆ é™¤æ‰€æœ‰nginxå®¹å™¨,é•œåƒ docker-compose ps æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨ docker-compose restart nginx é‡æ–°å¯åŠ¨nginxå®¹å™¨ docker-compose run --no-deps --rm php-fpm php -v åœ¨php-fpmä¸­ä¸å¯åŠ¨å…³è”å®¹å™¨ï¼Œå¹¶å®¹å™¨æ‰§è¡Œphp -v æ‰§è¡Œå®ŒæˆåŽåˆ é™¤å®¹å™¨ docker-compose build nginx æž„å»ºé•œåƒ ã€‚ docker-compose build --no-cache nginx ä¸å¸¦ç¼“å­˜çš„æž„å»ºã€‚ docker-compose logs nginx æŸ¥çœ‹nginxçš„æ—¥å¿— docker-compose logs -f nginx æŸ¥çœ‹nginxçš„å®žæ—¶æ—¥å¿— docker-compose config -q éªŒè¯ï¼ˆdocker-compose.ymlï¼‰æ–‡ä»¶é…ç½®ï¼Œå½“é…ç½®æ­£ç¡®æ—¶ï¼Œä¸è¾“å‡ºä»»ä½•å†…å®¹ï¼Œå½“æ–‡ä»¶é…ç½®é”™è¯¯ï¼Œè¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚ docker-compose events --json nginx ä»¥jsonçš„å½¢å¼è¾“å‡ºnginxçš„dockeræ—¥å¿— docker-compose pause nginx æš‚åœnignxå®¹å™¨ docker-compose unpause nginx æ¢å¤ningxå®¹å™¨ docker-compose rm nginx åˆ é™¤å®¹å™¨ï¼ˆåˆ é™¤å‰å¿…é¡»å…³é—­å®¹å™¨ï¼‰ docker-compose stop nginx åœæ­¢nignxå®¹å™¨ docker-compose start nginx å¯åŠ¨nignxå®¹å™¨]]></content>
      <categories>
        <category>æŠ•èµ„</category>
      </categories>
      <tags>
        <tag>æŠ•èµ„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitä½¿ç”¨è¯¦è§£]]></title>
    <url>%2F2020%2F06%2F17%2FGIT%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[Gitçš„å®‰è£…å’Œä½¿ç”¨ä¸‹è½½å®‰è£…Git[https://git-scm.com/download/win](https://git-scm.com/download/win &quot;ä¸‹è½½Git&quot;) ä¸‹è½½å®ŒæˆåŽåŒå‡»å®‰è£…æ£€éªŒæ˜¯å¦å®‰è£…å®Œæˆé¼ æ ‡å³å‡»å¦‚æžœçœ‹åˆ°æœ‰ä¸¤ä¸ªgitå•è¯åˆ™å®‰è£…æˆåŠŸ GitåŸºæœ¬å·¥ä½œæµç¨‹Gitçš„å·¥ä½œåŒºåŸŸ å‘ä»“åº“ä¸­æ·»åŠ æ–‡ä»¶æµç¨‹ Gitåˆå§‹åŒ–åŠä»“åº“åˆ›å»ºå’Œæ“ä½œGitå®‰è£…ä¹‹åŽéœ€è¦è¿›è¡Œä¸€äº›åŸºæœ¬ä¿¡æ¯è®¾ç½® è®¾ç½®ç”¨æˆ·åï¼šgit config â€“ global user.name â€˜ä½ å†githubä¸Šæ³¨å†Œçš„ç”¨æˆ·åâ€™; è®¾ç½®ç”¨æˆ·é‚®ç®±ï¼šgit config â€“ global user.email â€˜æ³¨å†Œæ—¶å€™çš„é‚®ç®±â€™; æ³¨æ„ï¼šè¯¥é…ç½®ä¼šåœ¨githubä¸»é¡µä¸Šæ˜¾ç¤ºè°æäº¤äº†è¯¥æ–‡ä»¶ é…ç½®okä¹‹åŽï¼Œæˆ‘ä»¬ç”¨å¦‚ä¸‹å‘½ä»¤æ¥çœ‹çœ‹æ˜¯å¦é…ç½®æˆåŠŸ git config â€“list æ³¨æ„ï¼šgit config â€“global å‚æ•°ï¼Œæœ‰äº†è¿™ä¸ªå‚æ•°è¡¨ç¤ºä½ è¿™å°æœºå™¨ä¸Šæ‰€æœ‰çš„gitä»“åº“éƒ½ä¼šä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å¯¹æŸä¸ªä»“åº“æŒ‡å®šä¸åŒçš„ç”¨æˆ·åå’Œé‚®ç®± åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„gitä»“åº“ åˆ›å»ºæ–‡ä»¶å¤¹ æ–¹æ³•ä¸€ï¼šå¯ä»¥é¼ æ ‡å³å‡»-ã€‹ç‚¹å‡»æ–°å»ºæ–‡ä»¶å¤¹test1 æ–¹æ³•äºŒï¼šä½¿ç”¨gitæ–°å»ºï¼š$ mkdir test1 åœ¨æ–‡ä»¶å†…åˆå§‹åŒ–gitï¼ˆåˆ›å»ºgitä»“åº“ï¼‰ æ–¹æ³•ä¸€ï¼šç›´æŽ¥è¾“å…¥ $ cd test1 æ–¹æ³•ä¸€ï¼šç‚¹å‡»test1æ–‡ä»¶ä¸‹è¿›åŽ»ä¹‹åŽ-ã€‹é¼ æ ‡å³å‡»é€‰æ‹©Git Bash Here-&gt;è¾“å…¥$ git int å‘ä»“åº“ä¸­æ·»åŠ æ–‡ä»¶ æ–¹æ³•ä¸€ï¼šç”¨æ‰“å¼€ç¼–è¾‘å™¨æ–°å»ºindex.htmlæ–‡ä»¶ æ–¹æ³•äºŒï¼šä½¿ç”¨gitå‘½ä»¤ã€‚$ touch â€˜æ–‡ä»¶åâ€™ï¼Œç„¶åŽæŠŠæ–‡ä»¶é€šè¿‡$ git add â€˜æ–‡ä»¶åâ€™æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œæœ€åŽæäº¤æ“ä½œ ä¿®æ”¹ä»“åº“æ–‡ä»¶ æ–¹æ³•ä¸€ï¼šç”¨ç¼–è¾‘å™¨æ‰“å¼€index.htmlè¿›è¡Œä¿®æ”¹ æ–¹æ³•äºŒï¼šä½¿ç”¨gitå‘½ä»¤ã€‚$ vi â€˜æ–‡ä»¶åâ€™ï¼Œç„¶åŽåœ¨ä¸­é—´å†™å†…å®¹ï¼Œæœ€åŽæäº¤æ“ä½œ åˆ é™¤ä»“åº“æ–‡ä»¶ æ–¹æ³•ä¸€ï¼šåœ¨ç¼–è¾‘å™¨ä¸­ç›´æŽ¥æŠŠè¦åˆ é™¤çš„æ–‡ä»¶åˆ é™¤æŽ‰ æ–¹æ³•äºŒï¼šä½¿ç”¨gitåˆ é™¤ï¼š$ git rm â€˜æ–‡ä»¶åâ€™ï¼Œç„¶åŽæäº¤æ“ä½œ Gitç®¡ç†è¿œç¨‹ä»“åº“ Gitå…‹éš†æ“ä½œç›®çš„ï¼šå°†è¿œç¨‹ä»“åº“ï¼ˆgithubä¸Šå¯¹åº”çš„é¡¹ç›®ï¼‰å¤åˆ¶åˆ°æœ¬åœ° ä»£ç ï¼šgit clone ä»“åº“åœ°å€ä»“åº“åœ°å€ç”±æ¥å¦‚ä¸‹ï¼š å…‹éš†é¡¹ç›® å°†æœ¬åœ°ä»“åº“åŒæ­¥åˆ°gitè¿œç¨‹ä»“åº“ä¸­ï¼šgit push æ³¨æ„ è§£å†³ï¼šè¿™æ˜¯é€šè¿‡Git GUIè¿›è¡Œæäº¤æ—¶å‘ç”Ÿçš„é”™è¯¯ï¼Œç”± .git æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶è¢«è®¾ä¸ºâ€œåªè¯»â€æ‰€è‡´ï¼Œå°† .git æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€æ–‡ä»¶å¤¹åŠå…¶å­æ–‡ä»¶çš„åªè¯»å±žæ€§åŽ»æŽ‰å³å¯ã€‚]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¶ˆæ¯é˜Ÿåˆ—5ä¸ªåº”ç”¨åœºæ™¯]]></title>
    <url>%2F2020%2F06%2F08%2F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%975%E4%B8%AA%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%2F</url>
    <content type="text"><![CDATA[æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­é‡è¦çš„ç»„ä»¶ï¼Œä¸»è¦è§£å†³åº”ç”¨è§£è€¦ï¼Œå¼‚æ­¥æ¶ˆæ¯ï¼Œæµé‡å‰Šå³°ç­‰é—®é¢˜ï¼Œå®žçŽ°é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€å¯ä¼¸ç¼©å’Œæœ€ç»ˆä¸€è‡´æ€§æž¶æž„ï¼Œä½¿ç”¨è¾ƒå¤šçš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰ActiveMQã€RabbitMQã€ZeroMQã€Kafkaã€MetaMQã€RocketMQã€‚ æ¶ˆæ¯é˜Ÿåˆ—åº”ç”¨åœºæ™¯å¼‚æ­¥å¤„ç†åœºæ™¯è¯´æ˜Žï¼šç”¨æˆ·æ³¨å†ŒåŽï¼Œéœ€è¦å‘é€æ³¨å†Œé‚®ä»¶å’Œæ³¨å†ŒçŸ­ä¿¡ï¼Œä¼ ç»Ÿçš„åšæ³•æœ‰ä¸¤ç§ï¼Œä¸²è¡Œçš„æ–¹å¼å’Œå¹¶è¡Œçš„æ–¹å¼ã€‚ ä¸²è¡Œæ–¹å¼ï¼šå°†æ³¨å†Œä¿¡æ¯å†™å…¥æ•°æ®åº“æˆåŠŸåŽï¼Œå‘é€æ³¨å†Œé‚®ä»¶ï¼Œåœ¨å‘é€æ³¨å†ŒçŸ­ä¿¡ï¼Œä»¥ä¸Šä¸‰ä¸ªä»»åŠ¡å…¨éƒ¨å®ŒæˆåŽï¼Œè¿”å›žç»™ç”¨æˆ·ã€‚ å¹¶è¡Œçš„æ–¹å¼ï¼šå°†æ³¨å†Œä¿¡æ¯å†™å…¥æ•°æ®åº“æˆåŠŸåŽï¼Œå‘é€æ³¨å†Œé‚®ä»¶çš„åŒæ—¶ï¼Œå‘é€æ³¨å†ŒçŸ­ä¿¡ï¼Œä»¥ä¸Šä¸‰ä¸ªä»»åŠ¡å®ŒæˆåŽï¼Œè¿”å›žç»™å®¢æˆ·ç«¯ã€‚ä¸Žä¸²è¡Œçš„å·®åˆ«æ˜¯ï¼Œå¹¶è¡Œçš„æ–¹å¼å¯ä»¥æé«˜å¤„ç†çš„æ—¶é—´ã€‚ å‡è®¾ä¸‰ä¸ªä¸šåŠ¡èŠ‚ç‚¹æ¯ä¸ªä½¿ç”¨50æ¯«ç§’ï¼Œä¸è€ƒè™‘ç½‘ç»œç­‰å…¶ä»–å¼€é”€ï¼Œåˆ™ä¸²è¡Œæ–¹å¼æ—¶é—´æ˜¯150æ¯«ç§’ï¼Œå¹¶è¡Œçš„æ—¶é—´æ˜¯100æ¯«ç§’ã€‚ å› ä¸ºCPUåœ¨å•ä½æ—¶é—´å†…å¤„ç†çš„è¯·æ±‚æ•°æ˜¯ä¸€å®šçš„ï¼Œå‡è®¾CPU1ç§’å†…çš„åžåé‡æ˜¯100æ¬¡ã€‚åˆ™ä¸²è¡Œæ–¹å¼1ç§’å†…CPUå¯å¤„ç†çš„è¯·æ±‚é‡æ˜¯7æ¬¡ï¼ˆ1000/150ï¼‰ã€‚å¹¶è¡Œæ–¹å¼å¤„ç†çš„è¯·æ±‚æ˜¯10ï¼ˆ1000/100ï¼‰æ¬¡ã€‚ å¦‚ä»¥ä¸Šæ¡ˆä¾‹æè¿°ï¼Œä¼ ç»Ÿçš„æ–¹å¼ç³»ç»Ÿçš„æ€§èƒ½ï¼ˆå¹¶å‘é‡ï¼Œåžåé‡ï¼Œå“åº”æ—¶é—´ï¼‰ä¼šæœ‰ç“¶é¢ˆï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå°†ä¸æ˜¯å¿…é¡»çš„ä¸šåŠ¡é€»è¾‘ï¼Œå¼‚æ­¥å¤„ç†ï¼Œæ”¹é€ åŽå¦‚ä¸‹ æŒ‰ç…§ä»¥ä¸Šçº¦å®šï¼Œç”¨æˆ·çš„å“åº”æ—¶é—´æƒ³å½“ä¸Žæ˜¯æ³¨å†Œä¿¡æ¯å†™å…¥æ•°æ®åº“çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯50æ¯«ç§’ã€‚æ³¨å†Œé‚®ä»¶ï¼Œå‘é€çŸ­ä¿¡å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—åŽï¼Œç›´æŽ¥è¿”å›žï¼Œå› æ­¤å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—çš„é€Ÿåº¦å¾ˆå¿«ï¼ŒåŸºæœ¬å¯ä»¥å¿½ç•¥ï¼Œå› æ­¤ç”¨æˆ·çš„å“åº”æ—¶é—´å¯èƒ½å°±æ˜¯50æ¯«ç§’ã€‚å› æ­¤æž¶æž„æ”¹å˜åŽï¼Œç³»ç»Ÿçš„åžåé‡æé«˜åˆ°æ¯ç§’20QPSã€‚æ¯”ä¸²è¡Œæé«˜äº†3å€ï¼Œæ¯”å¹¶è¡Œæé«˜äº†2å€ã€‚ åº”ç”¨è§£è€¦åœºæ™¯è¯´æ˜Žï¼šç”¨æˆ·ä¸‹å•åŽï¼Œè®¢å•ç³»ç»Ÿéœ€è¦é€šçŸ¥åº“å­˜ç³»ç»Ÿã€‚ä¼ ç»Ÿçš„åšæ³•æ˜¯ï¼Œè®¢å•ç³»ç»Ÿè°ƒç”¨åº“å­˜ç³»ç»Ÿçš„æŽ¥å£ã€‚å¦‚ä¸‹å›¾ï¼š ç¼ºç‚¹ï¼šå‡å¦‚åº“å­˜ç³»ç»Ÿæ— æ³•è®¿é—®ï¼Œåˆ™è®¢å•å‡åº“å­˜å°†å¤±è´¥ï¼Œä»Žè€Œå¯¼è‡´è®¢å•å¤±è´¥ï¼Œè®¢å•ç³»ç»Ÿä¸Žåº“å­˜ç³»ç»Ÿå­˜åœ¨è€¦åˆ è§£å†³ï¼šå¼•å…¥åº”ç”¨æ¶ˆæ¯é˜Ÿåˆ— è®¢å•ç³»ç»Ÿï¼šç”¨æˆ·ä¸‹å•åŽï¼Œè®¢å•ç³»ç»Ÿå®ŒæˆæŒä¹…åŒ–å¤„ç†ï¼Œå°†æ¶ˆæ¯å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè¿”å›žç”¨æˆ·è®¢å•ä¸‹å•æˆåŠŸã€‚ åº“å­˜ç³»ç»Ÿï¼šè®¢é˜…ä¸‹å•çš„æ¶ˆæ¯ï¼Œé‡‡ç”¨æ‹‰/æŽ¨çš„æ–¹å¼ï¼ŒèŽ·å–ä¸‹å•ä¿¡æ¯ï¼Œåº“å­˜ç³»ç»Ÿæ ¹æ®ä¸‹å•ä¿¡æ¯ï¼Œè¿›è¡Œåº“å­˜æ“ä½œã€‚ å‡å¦‚ï¼šåœ¨ä¸‹å•æ—¶åº“å­˜ç³»ç»Ÿä¸èƒ½æ­£å¸¸ä½¿ç”¨ã€‚ä¹Ÿä¸å½±å“æ­£å¸¸ä¸‹å•ï¼Œå› ä¸ºä¸‹å•åŽï¼Œè®¢å•ç³»ç»Ÿå†™å…¥æ¶ˆæ¯é˜Ÿåˆ—å°±ä¸å†å…³å¿ƒå…¶ä»–çš„åŽç»­æ“ä½œäº†ã€‚å®žçŽ°è®¢å•ç³»ç»Ÿä¸Žåº“å­˜ç³»ç»Ÿçš„åº”ç”¨è§£è€¦ã€‚ æµé‡å‰Šå³°æµé‡å‰Šå³°ä¹Ÿæ˜¯æ¶ˆæ¯é˜Ÿåˆ—ä¸­å¸¸ç”¨çš„åœºæ™¯ï¼Œä¸€èˆ¬åœ¨ç§’æ€æˆ–å›¢æŠ¢æ´»åŠ¨ä¸­ä½¿ç”¨å¹¿æ³›ã€‚ åº”ç”¨åœºæ™¯ï¼šç§’æ€æ´»åŠ¨ï¼Œä¸€èˆ¬ä¼šå› ä¸ºæµé‡è¿‡å¤§ï¼Œå¯¼è‡´æµé‡æš´å¢žï¼Œåº”ç”¨æŒ‚æŽ‰ã€‚ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬éœ€è¦åœ¨åº”ç”¨å‰ç«¯å‡å¦‚æ¶ˆæ¯é˜Ÿåˆ—ã€‚ å¯ä»¥æŽ§åˆ¶æ´»åŠ¨çš„äººæ•°ï¼Œå¯ä»¥ç¼“è§£çŸ­æ—¶é—´å†…é«˜æµé‡åŽ‹åž®åº”ç”¨ã€‚ ç”¨æˆ·çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨æŽ¥æ”¶åˆ°åŽå…ˆå†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ã€‚å‡å¦‚æ¶ˆæ¯é˜Ÿåˆ—é•¿åº¦è¶…è¿‡æœ€å¤§æ•°é‡ï¼Œåˆ™ç›´æŽ¥æŠ›å¼ƒç”¨æˆ·è¯·æ±‚æˆ–è·³è½¬åˆ°é”™è¯¯çš„é¡µé¢ã€‚ ç§’æ€ä¸šåŠ¡æ ¹æ®æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„è¯·æ±‚ä¿¡æ¯ï¼Œå†åšåŽç»­å¤„ç†ã€‚ æ—¥å¿—å¤„ç†æ—¥å¿—å¤„ç†æ˜¯æŒ‡å°†æ¶ˆæ¯uiåˆ—ç”¨åœ¨æ—¥å¿—å¤„ç†ä¸­ï¼Œæ¯”å¦‚Kafkaçš„åº”ç”¨ï¼Œè§£å†³å¤§é‡æ—¥å¿—ä¼ è¾“çš„é—®é¢˜ã€‚æž¶æž„ç®€åŒ–å¦‚ä¸‹ï¼š æ—¥å¿—é‡‡é›†å®¢æˆ·ç«¯ï¼Œè´Ÿè´£æ—¥å¿—æ•°æ®é‡‡é›†ï¼Œå®šæ—¶å†™å…¥Kafkaé˜Ÿåˆ—ï¼›Kafakæ¶ˆæ¯é˜Ÿåˆ—ï¼Œè´Ÿè´£æ—¥å¿—æ•°æ®çš„æŽ¥æ”¶ï¼Œå­˜å‚¨å’Œè½¬å‘ï¼›æ—¥å¿—å¤„ç†åº”ç”¨ï¼šè®¢é˜…å¹¶æ¶ˆè´¹kafakaé˜Ÿåˆ—ä¸­çš„æ—¥å¿—æ•°æ®ã€‚ ä»¥ä¸‹æ˜¯æ–°æµªkafkaæ—¥å¿—å¤„ç†åº”ç”¨æ¡ˆä¾‹ï¼š Kafka:æŽ¥æ”¶ç”¨æˆ·æ—¥å¿—çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼› Logstach:åšæ—¥å¿—è§£æžï¼Œç»Ÿä¸€æˆJSONä¼ è¾“ç»™Elasticsearch; Elasticsearch:å®žæ—¶æ—¥å¿—åˆ†æžæœåŠ¡çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œä¸€ä¸ªschemaless,å®žæ—¶çš„æ•°æ®å­˜å‚¨æœåŠ¡ï¼Œé€šè¿‡indexç»„ç»‡æ•°æ®ï¼Œå…¼å…·å¼ºå¤§çš„æœç´¢å’Œç»Ÿè®¡åŠŸèƒ½ã€‚ Kibaba:åŸºäºŽElasticsearchçš„æ•°æ®å¯è§†åŒ–ç»„ä»¶ï¼Œè¶…å¼ºçš„æ•°æ®å¯è§†åŒ–èƒ½åŠ› æ¶ˆæ¯é€šè®¯æ¶ˆæ¯é€šè®¯æ˜¯æŒ‡ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸€èˆ¬éƒ½å†…ç½®äº†é«˜æ•ˆçš„é€šä¿¡æœºåˆ¶ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ç”¨åœ¨çº¯çš„æ¶ˆæ¯é€šè®¯ï¼Œæ¯”å¦‚å®žçŽ°ç‚¹å¯¹ç‚¹æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæˆ–è€…èŠå¤©å®¤ç­‰ã€‚ å®¢æˆ·ç«¯Aï¼Œå®¢æˆ·ç«¯Bï¼Œå®¢æˆ·ç«¯Nè®¢é˜…åŒä¸€ä¸»é¢˜ï¼Œè¿›è¡Œæ¶ˆæ¯å‘å¸ƒå’ŒæŽ¥æ”¶ã€‚å®žçŽ°ç±»ä¼¼èŠå¤©å®¤æ•ˆæžœã€‚ å®žæˆ˜ç”¨rediså®žçŽ°ç®€å•çš„å‘å¸ƒ/è®¢é˜…åœºæ™¯ï¼šä¸¤å°tomcatåšé›†ç¾¤ï¼Œé…ç½®æ–‡ä»¶ä¸åŒæ—¶ç”Ÿæ•ˆçš„é—®é¢˜ &lt;bean id=&quot;messageContainer&quot; class=&quot;org.springframework.data.redis.listener.RedisMessageListenerContainer&quot; destroy-method=&quot;destroy&quot;&gt; &lt;property name=&quot;connectionFactory&quot; ref=&quot;jedisConnectionFactory&quot; /&gt; &lt;property name=&quot;messageListeners&quot;&gt; &lt;map&gt; &lt;entry key-ref=&quot;subService&quot;&gt; &lt;ref bean=&quot;channelTopic&quot; /&gt; &lt;/entry&gt; &lt;/map&gt; &lt;/property&gt; &lt;/bean&gt; &lt;bean id=&quot;channelTopic&quot; class=&quot;org.springframework.data.redis.listener.ChannelTopic&quot;&gt; &lt;constructor-arg value=&quot;server:topic&quot; /&gt; &lt;/bean&gt; @Service public class PubServiceImpl implements PubService { private static final Logger logger = Logger.getLogger(PubService.class); @Autowired private RedisTemplate&lt;String, String&gt; redisTemplate; private String channelTopic = &quot;server:topic&quot;; public void publish(String str) { //String str = JsonUtils.toJson(message); logger.error(&quot;Publish message:&quot; + str + &quot;, topic:&quot; + channelTopic); redisTemplate.convertAndSend(channelTopic, str); } public void publish(Map&lt;String, Object&gt; message) { String str = JsonUtils.toJson(message); logger.error(&quot;Publish message:&quot; + str + &quot;, topic:&quot; + channelTopic); redisTemplate.convertAndSend(channelTopic, str); } } @Service(&quot;subService&quot;) public class SubServiceImpl implements MessageListener { private static final Logger logger = Logger.getLogger(SubServiceImpl.class); @Autowired private ChannelTopic channelTopic; @Override public void onMessage(Message message, byte[] pattern) { String str = message.toString(); logger.error(&quot;Subscribe message:&quot; + str + &quot;, topic:&quot; + channelTopic.getTopic()); try { String type = m.getType(); if (&quot;config&quot;.equals(type)) { System.out.println(&quot;æŽ¥æ”¶åˆ°æ¶ˆæ¯ï¼ŒdoSomething========&quot;); }else if(&quot;me&quot;.equals(type)){ System.out.println(&quot;æŽ¥æ”¶åˆ°æ¶ˆæ¯ï¼ŒdoSomething========&quot;); }else{ System.out.println(&quot;æŽ¥æ”¶åˆ°æ¶ˆæ¯ï¼ŒdoSomething========&quot;); } } catch (Exception e) { e.printStackTrace(); } } }]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JAVAçš„map]]></title>
    <url>%2F2020%2F06%2F08%2FJAVA%E7%9A%84map%2F</url>
    <content type="text"><![CDATA[Mapçš„ç”¨æ³•ç±»åž‹ä»‹ç» HashMap æœ€å¸¸ç”¨çš„Map,å®ƒæ ¹æ®é”®çš„HashCodeå€¼å­˜å‚¨æ•°æ®ï¼Œæ ¹æ®é”®å¯ä»¥ç›´æŽ¥èŽ·å–å®ƒçš„å€¼ï¼Œå…·æœ‰å¾ˆå¿«çš„è®¿é—®é€Ÿåº¦ã€‚HashMapæœ€å¤šåªå…è®¸ä¸€æ¡è®°å½•çš„é”®ä¸ºnullï¼ˆå¤šæ¡ä¼šè¦†ç›–ï¼‰ï¼›å…è®¸å¤šæ¡è®°å½•çš„å€¼ä¸ºnullã€‚éžåŒæ­¥çš„ã€‚ TreeMap èƒ½å¤ŸæŠŠå®ƒä¿å­˜çš„è®°å½•æ ¹æ®é”®ï¼ˆkeyï¼‰æŽ’åºï¼Œé»˜è®¤æ˜¯æŒ‰å‡åºæŽ’åºï¼Œä¹Ÿå¯æŒ‡å®šæŽ’åºçš„æ¯”è¾ƒå™¨ï¼Œå½“ç”¨IteratoréåŽ†TreeMapæ—¶ï¼Œå¾—åˆ°çš„è®°å½•æ˜¯æŽ’è¿‡åºçš„ã€‚TreeMapä¸å…è®¸keyçš„å€¼ä¸ºnullã€‚éžåŒæ­¥çš„ã€‚ Hashtable ä¸ŽHashMapç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼škeyå’Œvalueçš„å€¼å‡ä¸å…è®¸ä¸ºnull;å®ƒæ”¯æŒçº¿ç¨‹åŒæ­¥ï¼Œå³ä»»ä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å†™HashTable,å› æ­¤ä¹Ÿå¯¼è‡´äº†HashTableåœ¨å†™å…¥æ—¶ä¼šæ¯”è¾ƒæ…¢ã€‚ LinkedHashMap ä¿å­˜äº†è®°å½•çš„æ’å…¥é¡ºåºï¼Œåœ¨ä½¿ç”¨IteratoréåŽ†LinkedHashMapæ—¶ï¼Œå…ˆå¾—åˆ°çš„è®°å½•è‚¯å®šæ˜¯å…ˆæ’å…¥çš„ï¼Œåœ¨éåŽ†çš„æ—¶å€™ä¼šæ¯”HashMapæ…¢ã€‚keyå’Œvalueå‡å…è®¸ä¸ºç©ºã€‚éžåŒæ­¥çš„ã€‚ Mapç”¨æ³•ç”¨æ³• Map&lt;String,String&gt; map = new HashMap&lt;String,String&gt;(); æ’å…¥å…ƒç´  map.put(&quot;key1&quot;,&quot;value1&quot;); èŽ·å–å…ƒç´  map.get(&quot;key1&quot;); ç§»é™¤å…ƒç´  map.remove(&quot;key1&quot;) å››ç§å¸¸ç”¨Mapæ’å…¥ä¸Žè¯»å–æ€§èƒ½æ¯”è¾ƒ æµ‹è¯•ä»£ç  package net.xsoftlab.baike; import java.util.HashMap; import java.util.Hashtable; import java.util.LinkedHashMap; import java.util.Map; import java.util.Random; import java.util.TreeMap; import java.util.UUID; public class Test { static int hashMapW = 0; static int hashMapR = 0; static int linkMapW = 0; static int linkMapR = 0; static int treeMapW = 0; static int treeMapR = 0; static int hashTableW = 0; static int hashTableR = 0; public static void main(String[] args) { for (int i = 0; i &lt; 10; i++) { Test test = new Test(); test.test(100 * 10000); System.out.println(); } System.out.println(&quot;hashMapW = &quot; + hashMapW / 10); System.out.println(&quot;hashMapR = &quot; + hashMapR / 10); System.out.println(&quot;linkMapW = &quot; + linkMapW / 10); System.out.println(&quot;linkMapR = &quot; + linkMapR / 10); System.out.println(&quot;treeMapW = &quot; + treeMapW / 10); System.out.println(&quot;treeMapR = &quot; + treeMapR / 10); System.out.println(&quot;hashTableW = &quot; + hashTableW / 10); System.out.println(&quot;hashTableR = &quot; + hashTableR / 10); } public void test(int size) { int index; Random random = new Random(); String[] key = new String[size]; // HashMap æ’å…¥ Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;(); long start = System.currentTimeMillis(); for (int i = 0; i &lt; size; i++) { key[i] = UUID.randomUUID().toString(); map.put(key[i], UUID.randomUUID().toString()); } long end = System.currentTimeMillis(); hashMapW += (end - start); System.out.println(&quot;HashMapæ’å…¥è€—æ—¶ = &quot; + (end - start) + &quot; ms&quot;); // HashMap è¯»å– start = System.currentTimeMillis(); for (int i = 0; i &lt; size; i++) { index = random.nextInt(size); map.get(key[index]); } end = System.currentTimeMillis(); hashMapR += (end - start); System.out.println(&quot;HashMapè¯»å–è€—æ—¶ = &quot; + (end - start) + &quot; ms&quot;); // LinkedHashMap æ’å…¥ map = new LinkedHashMap&lt;String, String&gt;(); start = System.currentTimeMillis(); for (int i = 0; i &lt; size; i++) { key[i] = UUID.randomUUID().toString(); map.put(key[i], UUID.randomUUID().toString()); } end = System.currentTimeMillis(); linkMapW += (end - start); System.out.println(&quot;LinkedHashMapæ’å…¥è€—æ—¶ = &quot; + (end - start) + &quot; ms&quot;); // LinkedHashMap è¯»å– start = System.currentTimeMillis(); for (int i = 0; i &lt; size; i++) { index = random.nextInt(size); map.get(key[index]); } end = System.currentTimeMillis(); linkMapR += (end - start); System.out.println(&quot;LinkedHashMapè¯»å–è€—æ—¶ = &quot; + (end - start) + &quot; ms&quot;); // TreeMap æ’å…¥ key = new String[size]; map = new TreeMap&lt;String, String&gt;(); start = System.currentTimeMillis(); for (int i = 0; i &lt; size; i++) { key[i] = UUID.randomUUID().toString(); map.put(key[i], UUID.randomUUID().toString()); } end = System.currentTimeMillis(); treeMapW += (end - start); System.out.println(&quot;TreeMapæ’å…¥è€—æ—¶ = &quot; + (end - start) + &quot; ms&quot;); // TreeMap è¯»å– start = System.currentTimeMillis(); for (int i = 0; i &lt; size; i++) { index = random.nextInt(size); map.get(key[index]); } end = System.currentTimeMillis(); treeMapR += (end - start); System.out.println(&quot;TreeMapè¯»å–è€—æ—¶ = &quot; + (end - start) + &quot; ms&quot;); // Hashtable æ’å…¥ key = new String[size]; map = new Hashtable&lt;String, String&gt;(); start = System.currentTimeMillis(); for (int i = 0; i &lt; size; i++) { key[i] = UUID.randomUUID().toString(); map.put(key[i], UUID.randomUUID().toString()); } end = System.currentTimeMillis(); hashTableW += (end - start); System.out.println(&quot;Hashtableæ’å…¥è€—æ—¶ = &quot; + (end - start) + &quot; ms&quot;); // Hashtable è¯»å– start = System.currentTimeMillis(); for (int i = 0; i &lt; size; i++) { index = random.nextInt(size); map.get(key[index]); } end = System.currentTimeMillis(); hashTableR += (end - start); System.out.println(&quot;Hashtableè¯»å–è€—æ—¶ = &quot; + (end - start) + &quot; ms&quot;); } } MapéåŽ†åˆå§‹åŒ–æ•°æ®Map&lt;String,String&gt; map = new HashMap&lt;String,String&gt;(); map.put(&quot;key1&quot;,&quot;value1&quot;); map.put(&quot;key2&quot;,&quot;value2&quot;); å¢žå¼ºforå¾ªçŽ¯éåŽ†ä½¿ç”¨keySet()éåŽ† for(String key:map.keySet()){ System.out.println(key+&quot;:&quot;+map.get(key)) } ä½¿ç”¨entrySet()éåŽ† for(Map.Entry&lt;String,String&gt; entry:map.entrySet()){ System.out.println(entry.getKey()+&quot;:&quot;+entry.getValue()); } è¿­ä»£å™¨éåŽ†ä½¿ç”¨keySet()éåŽ† Iterator&lt;String&gt; iterator = map.keySet().iterator(); while(iterator.hasNext()){ String key = iterator.next(); System.out.println(key+&quot;:&quot;+map.get(key)); } ä½¿ç”¨entrySet()éåŽ† Iterator&lt;Map.Entry&lt;String,String&gt;&gt; iterator = map.entrySet().iterator(); while(iterator.hasNext()){ Map.Entry&lt;String,String&gt; entry = iterator.next(); System.out.println(entry.getKey()+&quot;:&quot;+entry.getValue()); } HashMapå››ç§éåŽ†æ–¹å¼æ€§èƒ½æ¯”è¾ƒpackage net.xsoftlab.baike; import java.util.HashMap; import java.util.Iterator; import java.util.Map; import java.util.Map.Entry; public class TestMap { public static void main(String[] args) { // åˆå§‹åŒ–ï¼Œ10Wæ¬¡èµ‹å€¼ Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;(); for (int i = 0; i &lt; 100000; i++) map.put(i, i); /** å¢žå¼ºforå¾ªçŽ¯ï¼ŒkeySetè¿­ä»£ **/ long start = System.currentTimeMillis(); for (Integer key : map.keySet()) { map.get(key); } long end = System.currentTimeMillis(); System.out.println(&quot;å¢žå¼ºforå¾ªçŽ¯ï¼ŒkeySetè¿­ä»£ -&gt; &quot; + (end - start) + &quot; ms&quot;); /** å¢žå¼ºforå¾ªçŽ¯ï¼ŒentrySetè¿­ä»£ */ start = System.currentTimeMillis(); for (Entry&lt;Integer, Integer&gt; entry : map.entrySet()) { entry.getKey(); entry.getValue(); } end = System.currentTimeMillis(); System.out.println(&quot;å¢žå¼ºforå¾ªçŽ¯ï¼ŒentrySetè¿­ä»£ -&gt; &quot; + (end - start) + &quot; ms&quot;); /** è¿­ä»£å™¨ï¼ŒkeySetè¿­ä»£ **/ start = System.currentTimeMillis(); Iterator&lt;Integer&gt; iterator = map.keySet().iterator(); Integer key; while (iterator.hasNext()) { key = iterator.next(); map.get(key); } end = System.currentTimeMillis(); System.out.println(&quot;è¿­ä»£å™¨ï¼ŒkeySetè¿­ä»£ -&gt; &quot; + (end - start) + &quot; ms&quot;); /** è¿­ä»£å™¨ï¼ŒentrySetè¿­ä»£ **/ start = System.currentTimeMillis(); Iterator&lt;Map.Entry&lt;Integer, Integer&gt;&gt; iterator1 = map.entrySet().iterator(); Map.Entry&lt;Integer, Integer&gt; entry; while (iterator1.hasNext()) { entry = iterator1.next(); entry.getKey(); entry.getValue(); } end = System.currentTimeMillis(); System.out.println(&quot;è¿­ä»£å™¨ï¼ŒentrySetè¿­ä»£ -&gt; &quot; + (end - start) + &quot; ms&quot;); } } è¿è¡Œä¸‰æ¬¡ï¼Œæ¯”è¾ƒç»“æžœ ç¬¬ä¸€æ¬¡ å¢žå¼ºforå¾ªçŽ¯ï¼ŒkeySetè¿­ä»£ -&gt; 37 ms å¢žå¼ºforå¾ªçŽ¯ï¼ŒentrySetè¿­ä»£ -&gt; 19 ms è¿­ä»£å™¨ï¼ŒkeySetè¿­ä»£ -&gt; 14 ms è¿­ä»£å™¨ï¼ŒentrySetè¿­ä»£ -&gt; 9 ms å¢žå¼ºforå¾ªçŽ¯ï¼ŒkeySetè¿­ä»£ -&gt; 29 ms å¢žå¼ºforå¾ªçŽ¯ï¼ŒentrySetè¿­ä»£ -&gt; 22 ms è¿­ä»£å™¨ï¼ŒkeySetè¿­ä»£ -&gt; 19 ms è¿­ä»£å™¨ï¼ŒentrySetè¿­ä»£ -&gt; 12 ms å¢žå¼ºforå¾ªçŽ¯ï¼ŒkeySetè¿­ä»£ -&gt; 27 ms å¢žå¼ºforå¾ªçŽ¯ï¼ŒentrySetè¿­ä»£ -&gt; 19 ms è¿­ä»£å™¨ï¼ŒkeySetè¿­ä»£ -&gt; 18 ms è¿­ä»£å™¨ï¼ŒentrySetè¿­ä»£ -&gt; 10 ms æ€»ç»“ï¼š å¢žå¼ºforå¾ªçŽ¯ä½¿ç”¨æ–¹ä¾¿ï¼Œä½†æ€§èƒ½è¾ƒå·®ï¼Œä¸é€‚åˆå¤„ç†è¶…å¤§é‡çº§çš„æ•°æ®ã€‚ è¿­ä»£å™¨çš„éåŽ†é€Ÿåº¦è¦æ¯”å¢žå¼ºforå¾ªçŽ¯å¿«å¾ˆå¤šï¼Œæ˜¯å¢žå¼ºforå¾ªçŽ¯çš„2å€å·¦å³ã€‚ ä½¿ç”¨entrySetéåŽ†çš„é€Ÿåº¦æ¯”keySetå¿«å¾ˆå¤šï¼Œæ˜¯keySetçš„1.5å€å·¦å³ã€‚ MapæŽ’åºHashMapã€HashTableã€LinkedHashMapæŽ’åº HashMapMap&lt;String,String&gt; map = new HashMap&lt;String,String&gt;(); map.put(&quot;b&quot;,&quot;b&quot;); map.put(&quot;a&quot;,&quot;c&quot;); map.put(&quot;c&quot;,&quot;a&quot;); //æŽ’åº List&lt;Map.Entry&lt;String,String&gt;&gt; list = new ArrayList&lt;Map.Entry&lt;String, String&gt;&gt;(map.entrySet().size()); Collections.sort(list, new Comparator&lt;Map.Entry&lt;String, String&gt;&gt;() { @Override public int compare(Map.Entry&lt;String, String&gt; o1, Map.Entry&lt;String, String&gt; o2) { return o1.getKey().compareTo(o2.getKey()); } }); for (Map.Entry&lt;String,String&gt; mapping: list) { System.out.println(mapping.getKey()+&quot;:&quot;+mapping.getValue()); } TreeMapMap&lt;String, String&gt; map = new TreeMap&lt;String, String&gt;(new Comparator&lt;String&gt;() { @Override public int compare(String o1, String o2) { // é™åºæŽ’åº return o1.compareTo(o2); } }); map.put(&quot;b&quot;, &quot;b&quot;); map.put(&quot;a&quot;, &quot;c&quot;); map.put(&quot;c&quot;, &quot;a&quot;); for (String key : map.keySet()) { System.out.println(key + &quot; ï¼š&quot; + map.get(key)); } æŒ‰valueæŽ’åº(é€šç”¨)Map&lt;String, String&gt; map = new TreeMap&lt;String, String&gt;(); map.put(&quot;b&quot;, &quot;b&quot;); map.put(&quot;a&quot;, &quot;c&quot;); map.put(&quot;c&quot;, &quot;a&quot;); // é€šè¿‡ArrayListæž„é€ å‡½æ•°æŠŠmap.entrySet()è½¬æ¢æˆlist List&lt;Map.Entry&lt;String, String&gt;&gt; list = new ArrayList&lt;Map.Entry&lt;String, String&gt;&gt;(map.entrySet()); // é€šè¿‡æ¯”è¾ƒå™¨å®žçŽ°æ¯”è¾ƒæŽ’åº Collections.sort(list, new Comparator&lt;Map.Entry&lt;String, String&gt;&gt;() { @Override public int compare(Map.Entry&lt;String, String&gt; mapping1, Map.Entry&lt;String, String&gt; mapping2) { return mapping1.getValue().compareTo(mapping2.getValue()); } }); for (String key : map.keySet()) { System.out.println(key + &quot; ï¼š&quot; + map.get(key)); } å¸¸ç”¨API æ‰©å±•Listå¦‚ä½•ä¸€è¾¹éåŽ†ä¸€è¾¹åˆ é™¤public static void main(String[] args) { List&lt;String&gt; platformList = new ArrayList&lt;&gt;(); platformList.add(&quot;åšå®¢å›­&quot;); platformList.add(&quot;CSDN&quot;); platformList.add(&quot;æŽ˜é‡‘&quot;); for (String platform : platformList) { if (platform.equals(&quot;åšå®¢å›­&quot;)) { platformList.remove(platform); } } System.out.println(platformList); } java.util.ConcurrentModificationExceptionå¼‚å¸¸äº†ï¼Œç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯ï¼šå¹¶å‘ä¿®æ”¹å¼‚å¸¸ ä½¿ç”¨Iteratorçš„remove()æ–¹æ³•public static void main(String[] args) { List&lt;String&gt; platformList = new ArrayList&lt;&gt;(); platformList.add(&quot;åšå®¢å›­&quot;); platformList.add(&quot;CSDN&quot;); platformList.add(&quot;æŽ˜é‡‘&quot;); Iterator&lt;String&gt; iterator = platformList.iterator(); while (iterator.hasNext()) { String platform = iterator.next(); if (platform.equals(&quot;åšå®¢å›­&quot;)) { iterator.remove(); } } System.out.println(platformList); } ä½¿ç”¨forå¾ªçŽ¯æ­£åºéåŽ†public static void main(String[] args) { List&lt;String&gt; platformList = new ArrayList&lt;&gt;(); platformList.add(&quot;åšå®¢å›­&quot;); platformList.add(&quot;CSDN&quot;); platformList.add(&quot;æŽ˜é‡‘&quot;); for (int i = 0; i &lt; platformList.size(); i++) { String item = platformList.get(i); if (item.equals(&quot;åšå®¢å›­&quot;)) { platformList.remove(i); i = i - 1; } } System.out.println(platformList); } ä½¿ç”¨forå¾ªçŽ¯å€’åºéåŽ†public static void main(String[] args) { List&lt;String&gt; platformList = new ArrayList&lt;&gt;(); platformList.add(&quot;åšå®¢å›­&quot;); platformList.add(&quot;CSDN&quot;); platformList.add(&quot;æŽ˜é‡‘&quot;); for (int i = platformList.size() - 1; i &gt;= 0; i--) { String item = platformList.get(i); if (item.equals(&quot;æŽ˜é‡‘&quot;)) { platformList.remove(i); } } System.out.println(platformList); }]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSONå¯¹è±¡å’ŒJSONå­—ç¬¦ä¸²]]></title>
    <url>%2F2020%2F06%2F05%2FJSON%E5%AF%B9%E8%B1%A1%E5%92%8CJSON%E5%AD%97%E7%AC%A6%E4%B8%B2%2F</url>
    <content type="text"><![CDATA[JSONå¯¹è±¡å¯¹è±¡çš„æ¦‚å¿µå¯¹è±¡çš„å±žæ€§æ˜¯å¯ä»¥ç”¨ï¼š å¯¹è±¡.å±žæ€§è¿›è¡Œè°ƒç”¨çš„ã€‚ var person={&quot;name&quot;:&quot;tom&quot;,&quot;sex&quot;:&quot;ç”·&quot;}//jsonå¯¹è±¡ console.log(person.name);//åœ¨æŽ§åˆ¶å°è¾“å‡ºtom alert(typeof(person));//object ä»¥ä¸Šå°±æ˜¯jsonå¯¹è±¡ã€‚æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨person.nameè¿™ç§æ–¹å¼è¿›è¡Œå±žæ€§çš„è°ƒç”¨ã€‚ç¬¬ä¸‰è¡Œä»£ç å°±æ˜¯çœ‹personçš„ç±»åž‹ä¸ºobjectç±»åž‹ JSONå­—ç¬¦ä¸²å­—ç¬¦ä¸²ï¼ŒJSä¸­çš„å­—ç¬¦ä¸²æ˜¯å•å¼•å·æˆ–è€…åŒå¼•å·å¼•èµ·æ¥çš„ã€‚é‚£ä¹ˆjsonå­—ç¬¦ä¸²å°±æ˜¯å¦‚ä¸‹var b = &apos;{&quot;name&quot;:&quot;tom&quot;,&quot;sex&quot;:&quot;ç”·&quot;}&apos;;//jsonå­—ç¬¦ä¸² console.log(b);//{&quot;name&quot;:&quot;tom&quot;,&quot;sex&quot;:&quot;ç”·&quot;}; alert(typeof(b));//string ä»¥ä¸Šbå°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯ä¸€ä¸ªstringç±»åž‹ JSONå­—ç¬¦ä¸²å’ŒJSONå¯¹è±¡çš„è½¬æ¢JSONå­—ç¬¦ä¸²è½¬jsonå¯¹è±¡ï¼Œè°ƒç”¨parseæ–¹æ³•ï¼›var b = &apos;{&quot;name&quot;:&quot;tom&quot;,&quot;sex&quot;:&quot;ç”·&quot;}&apos;;//jsonå­—ç¬¦ä¸² console.log(b);//{&quot;name&quot;:&quot;tom&quot;,&quot;sex&quot;:&quot;ç”·&quot;}; alert(typeof(b));//string var objb = JSON.parse(b); console.log(objb.name); JSONå¯¹è±¡è½¬JSONå­—ç¬¦ä¸²var person={&quot;name&quot;:&quot;tom&quot;,&quot;sex&quot;:&quot;ç”·&quot;}//jsonå¯¹è±¡ console.log(person.name);//åœ¨æŽ§åˆ¶å°è¾“å‡ºtom alert(typeof(person));//object var personStr = JSON.stringify(person); alert(typeof(personStr));//string console.log(personStr);//{&quot;name&quot;:&quot;tom&quot;,&quot;sex&quot;:&quot;ç”·&quot;} å­—ç¬¦ä¸²è½¬jsonå¯¹è±¡åœºæ™¯ï¼š åŽå°è¿”å›žçš„personå¯¹è±¡ä¸Šæœ‰herfå±žæ€§ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² href = {&apos;href&apos;:&apos;../juvenile/summerCamp/summerCamp.html&apos;,&apos;isLogined&apos;:&apos;1&apos;,&apos;param&apos;:{&apos;activityId&apos;:&apos;2141108450038362510&apos;}} è¦è§£æžåˆ°herf var configData = eval(&apos;(&apos; + href + &apos;)&apos;);//ç”±å­—ç¬¦ä¸²è½¬æ¢ä¸ºJSONå¯¹è±¡ console.log(configData.href)]]></content>
      <categories>
        <category>JS</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringSecurityéªŒè¯æµç¨‹è§£æž]]></title>
    <url>%2F2020%2F05%2F28%2FSpringSecurity%E9%AA%8C%E8%AF%81%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[SpringSecurity TokenAuthenticationFilter if (httpRequest.getServletPath().equals(loginLink)) { //å¦‚æžœæ˜¯ç™»å½•æˆ–æ³¨é”€çš„è¯ï¼Œè®¾ç½®ä¸æ²¿ç€è¿‡æ»¤å™¨å‘ä¸‹ doNotContinueWithRequestProcessing(httpRequest); checkLoginAnDoSomething(httpRequest, httpResponse, token); } checkLoginAnDoSomething(httpRequest, httpResponse, token); example: Authorization=Basic YWRtaW46MTIzNDU2 (admin:123456) private boolean checkLoginAnDoSomething(HttpServletRequest httpRequest, HttpServletResponse httpResponse, String token) throws IOException { String authorization = httpRequest.getHeader(CacheConstant.AUTHORIZATION); ReturnStatus result = null; if (authorization != null) { result = checkBasicAuthorization(authorization, httpRequest, httpResponse, token); } if (null == result) { result = new ReturnStatus(false); result.getErrors().add(new MError(MErrorCode.e9000)); result.setMessage(MErrorCode.e9000.desc()); } String body; try { body = JsonUtils.toJson(result);// JsonParserFactory.getParser().toJson(result).toString(); httpResponse.setContentType(&quot;text/html;charset=UTF-8&quot;); httpResponse.getWriter().write(body); } catch (Exception e) { throw new IOException(e); } return result.isSuccess(); } checkBasicAuthorization(authorization, httpRequest, httpResponse, token); private ReturnStatus checkBasicAuthorization(String authorization, HttpServletRequest httpRequest, HttpServletResponse httpResponse, String token) throws IOException { StringTokenizer tokenizer = new StringTokenizer(authorization); if (tokenizer.countTokens() &lt; 2) { return null; } if (!tokenizer.nextToken().equalsIgnoreCase(CacheConstant.BASIC_AUTH_PREFIX)) { return null; } String base64 = tokenizer.nextToken(); String loginPassword = new String(Base64.decode(base64.getBytes(StandardCharsets.UTF_8))); tokenizer = new StringTokenizer(loginPassword, &quot;:&quot;); String username = tokenizer.nextToken(); String pwd = tokenizer.nextToken(); String password = passwordEncoder.encodePassword(pwd, null); ReturnStatus status = checkUsernameAndPassword(username, password, httpRequest, httpResponse, token); // ç™»å½•æˆåŠŸåŽè¿”å›žç™»å½•çŠ¶æ€ return status; } private ReturnStatus checkUsernameAndPassword(String username, String password, HttpServletRequest httpRequest,HttpServletResponse httpResponse, String oldtoken) private ReturnStatus checkUsernameAndPassword(String username, String password, HttpServletRequest httpRequest, HttpServletResponse httpResponse, String oldtoken) throws IOException { ReturnStatus returnResult = new ReturnStatus(false); TokenInfo tokenInfo = authenticationService.authenticate(username, password, httpRequest); if (tokenInfo != null &amp;&amp; tokenInfo.getUserDetails() != null) { VerifyContext verifyContext = (VerifyContext) tokenInfo.getUserDetails(); Account account = (Account) verifyContext.getUser().getEntity(); if (account.isLogin()) { if (null != oldtoken &amp;&amp; !&quot;&quot;.equals(oldtoken) &amp;&amp; !&quot;null&quot;.equals(oldtoken) &amp;&amp; !&quot;undefined&quot;.equals(oldtoken)) { logger.info(&quot;tokenInfo.setToken use the oldtoken Token :{}&quot;, tokenInfo.getToken()); tokenInfo.setToken(oldtoken); } logger.info(&quot;the new Token :{},entity:{}&quot;, tokenInfo.getToken(), tokenInfo); this.cacheManager.saveObject(CacheEnum.TOKEN, tokenInfo.getToken(), tokenInfo.getUserDetails(), CacheConstant.USER_SESSION_TIME); logger.info(&quot;the token:{}, save object:{}&quot;, tokenInfo.getToken(), this.cacheManager.getObject(CacheEnum.TOKEN, tokenInfo.getToken())); returnResult.setEntity(account); returnResult.setSuccess(true); } else { returnResult.getErrors().add(new MError(MErrorCode.e9001)); returnResult.setMessage(MErrorCode.e9001.desc()); } httpResponse.setHeader(CacheConstant.HEADER_TOKEN, tokenInfo.getToken()); } else { logger.error(&quot;User {} ,Password {} Unauthorized!&quot;, username, password); returnResult.getErrors().add(new MError(MErrorCode.e9000)); returnResult.setMessage(MErrorCode.e9000.desc()); } return returnResult; } åŸºäºŽç”¨æˆ·-è§’è‰²-æƒé™è®¾è®¡Account accountName//è´¦å·å accountPwd//å¯†ç  status//çŠ¶æ€ accountType//è´¦å·ç±»åž‹ entityID//å®žä½“id lastLoginTime//æœ€åŽä¸€æ¬¡ç™»å½•æ—¶é—´ loginTimes//ç™»å½•æ¬¡æ•° roleIds//è§’è‰²åˆ—è¡¨ //ä¸€ä¸ªè´¦å·å¯ä»¥å…³è”è§’è‰²ï¼Œè§’è‰²å‘ˆæ ‘çŠ¶ç»“æž„ï¼Œå¯å¤šé€‰ Function name//åŠŸèƒ½ç‚¹åç§° parentId//çˆ¶çº§ memo//æè¿° action//èµ„æºurl order//æŽ’åº icon//å›¾æ ‡ permissionCode//å”¯ä¸€æƒé™æ ‡è¯† permissionName//æƒé™åç§° Role name//è§’è‰²åç§° parentId//çˆ¶çº§ memo//æè¿° functionIds//åŠŸèƒ½ç‚¹ order//æŽ’åº //è§’è‰²ä¹Ÿæ˜¯å‘ˆæ ‘çŠ¶èœå•çš„ï¼Œè§’è‰²é‡Œé¢æœ‰æƒé™é…ç½®ï¼Œæ‰€æœ‰çš„åŠŸèƒ½ç‚¹ä»¥æ ‘çŠ¶ç»“æž„å±•ç¤ºï¼Œé€šè¿‡è§’è‰²åŽ»å…³è”åŠŸèƒ½ç‚¹ é€’å½’èœå•å’Œè§’è‰²// èŽ·å–æ ‡å‡†JSONæ•°æ® public static List&lt;Map&lt;String, Object&gt;&gt; getStandardJSON() { // æ ¹æ®ä¸åŒæ¡†æž¶èŽ·å–å¯¹åº”çš„Listæ•°æ® List&lt;Map&lt;String, Object&gt;&gt; queryList = query.find(); List&lt;Map&lt;String, Object&gt;&gt; parentList = Lists.newArrayList(); for (Map&lt;String, Object&gt; map : queryList) { if (map.get(&quot;pId&quot;).equals(&quot;0&quot;)) { parentList.add(map); } } recursionChildren(parentList, queryList); return parentList; } // é€’å½’èŽ·å–å­èŠ‚ç‚¹æ•°æ® public static void recursionChildren (List&lt;Map&lt;String, Object&gt;&gt; parentList, List&lt;Map&lt;String, Object&gt;&gt; allList) { for (Map&lt;String, Object&gt; parentMap : parentList) { List&lt;Map&lt;String, Object&gt;&gt; childrenList = Lists.newArrayList(); for (Map&lt;String, Object&gt; allMap : allList) { if (allMap.get(&quot;pId&quot;).equals(parentMap.get(&quot;id&quot;))) { childrenList.add(allMap); } } if (!ParamValidUtils.isEmpty(childrenList)) { parentMap.put(&quot;children&quot;, childrenList); recursionChildren(childrenList, allList); } } }]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringBootç³»åˆ—]]></title>
    <url>%2F2020%2F05%2F26%2FSpringBoot%E7%B3%BB%E5%88%97%2F</url>
    <content type="text"><![CDATA[Spring Bootç®€ä»‹ Spring bootæ˜¯Springå®¶æ—ä¸­çš„ä¸€ä¸ªå…¨æ–°çš„æ¡†æž¶ï¼Œå®ƒç”¨æ¥ç®€åŒ–Springåº”ç”¨ç¨‹åºçš„åˆ›å»ºå’Œå¼€å‘è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥è¯´Spring bootèƒ½ç®€åŒ–æˆ‘ä»¬ä¹‹å‰é‡‡ç”¨SpringMVC+Spring+Mybatisæ¡†æž¶è¿›è¡Œå¼€å‘çš„è¿‡ç¨‹ã€‚ åœ¨ä»¥å¾€æˆ‘ä»¬é‡‡ç”¨SpringMVC+Spring+Mybatisæ¡†æž¶è¿›è¡Œå¼€å‘çš„æ—¶å€™ï¼Œæ­å»ºå’Œæ•´åˆä¸‰å¤§æ¡†æž¶ï¼Œæˆ‘ä»¬éœ€è¦åšå¾ˆå¥½å·¥ä½œï¼Œæ¯”å¦‚é…ç½®web.xmlï¼Œé…ç½®Springï¼Œé…ç½®Mybatis,å¹¶å°†å®ƒä»¬æ•´åˆåœ¨ä¸€èµ·ç­‰ï¼Œè€ŒSpring bootæ¡†æž¶å¯¹æ­¤å¼€å‘è¿‡ç¨‹è¿›è¡Œäº†é©å‘½æ€§çš„é¢ è¦†ï¼ŒæŠ›å¼ƒäº†ç¹ççš„xmlé…ç½®è¿‡ç¨‹ï¼Œé‡‡ç”¨å¤§é‡çš„é»˜è®¤é…ç½®ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘è¿‡ç¨‹ã€‚ æ‰€ä»¥é‡‡ç”¨Spring bootå¯ä»¥éžå¸¸å®¹æ˜“å’Œå¿«é€Ÿçš„åˆ›å»ºåŸºäºŽSpringæ¡†æž¶çš„åº”ç”¨ç¨‹åºï¼Œå®ƒè®©ç¼–ç å˜ç®€å•äº†ï¼Œé…ç½®å˜ç®€å•äº†ï¼Œéƒ¨ç½²å˜ç®€å•äº†ï¼Œç›‘æŽ§ä¹Ÿå˜ç®€å•äº†ã€‚ æ­£å› ä¸ºSpring bootå®ƒåŒ–ç¹ä¸ºç®€ï¼Œè®©å¼€å‘å˜å¾—æžå…¶ç®€å•å’Œå¿«æ·ï¼Œæ‰€ä»¥åœ¨ä¸šç•Œå¤‡å—å…³æ³¨ã€‚Spring bootåœ¨å›½å†…çš„å…³æ³¨è¶‹åŠ¿ä¹Ÿæ—¥æ¸è¶…è¿‡Springã€‚ èƒ½å¤Ÿå¿«é€Ÿåˆ›å»ºåŸºäºŽSpringçš„åº”ç”¨ç¨‹åºã€‚ï¼ˆç®€åŒ–é…ç½®ï¼‰ èƒ½å¤Ÿç›´æŽ¥ä½¿ç”¨javaçš„mainæ–¹æ³•å¯åŠ¨å†…åµŒçš„Tomcatï¼ŒJettyæœåŠ¡å™¨è¿è¡ŒSpring bootç¨‹åºï¼Œä¸éœ€è¦éƒ¨ç½²waråŒ…æ–‡ä»¶ã€‚ æä¾›çº¦å®šçš„starter POMæ¥ç®€åŒ–æ¥ç®€åŒ–Mavené…ç½®ï¼Œè®©Mavené…ç½®å˜å¾—ç®€å•ã€‚ æ ¹æ®é¡¹ç›®çš„mavenä¾èµ–é…ç½®ï¼ŒSpring bootè‡ªåŠ¨é…ç½®Spring,SpringMVCç­‰å…¶å®ƒå¼€æºæ¡†æž¶ã€‚.æä¾›ç¨‹åºçš„å¥åº·æ£€æŸ¥ç­‰åŠŸèƒ½ã€‚ï¼ˆæ£€æŸ¥å†…éƒ¨çš„è¿è¡ŒçŠ¶æ€ç­‰ï¼‰åŸºæœ¬å¯ä»¥å®Œå…¨ä¸ä½¿ç”¨xmlé…ç½®æ–‡ä»¶ï¼Œé‡‡ç”¨æ³¨è§£é…ç½®ã€‚ï¼ˆæˆ–è€…é»˜è®¤çº¦å®šçš„é…ç½®ï¼Œä»£ç ä¸­å·²ç»å®žçŽ°ï¼‰ å¾®æœåŠ¡å¾®æœåŠ¡ï¼šæž¶æž„é£Žæ ¼ ä¸€ä¸ªåº”ç”¨åº”è¯¥æ˜¯ä¸€ç»„å°åž‹æœåŠ¡ï¼›å¯ä»¥é€šè¿‡HTTPçš„æ–¹å¼è¿›è¡Œäº’é€šï¼› æ¯ä¸€ä¸ªåŠŸèƒ½å…ƒç´ æœ€ç»ˆéƒ½æ˜¯ä¸€ä¸ªå¯ç‹¬ç«‹æ›¿æ¢å’Œç‹¬ç«‹å‡çº§çš„è½¯ä»¶å•å…ƒï¼› çŽ¯å¢ƒå‡†å¤‡çŽ¯å¢ƒçº¦æŸ-jdk1.8 -maven 3.x -springboot1.5.9RELEASE MAVENè®¾ç½®123456789101112&lt;profile&gt; &lt;id&gt;jdk-1.8&lt;/id&gt; &lt;activation&gt; &lt;activeByDefault&gt;true&lt;/activeByDefault&gt; &lt;jdk&gt;1.8&lt;/jdk&gt; &lt;/activation&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;maven.compiler.compilerVersion&gt;1.8&lt;/maven.compiler.compilerVersion&gt; &lt;/properties&gt;&lt;/profile&gt; Spring Boot HelloWorldæµè§ˆå™¨å‘é€helloè¯·æ±‚ï¼ŒæœåŠ¡å™¨æŽ¥å—è¯·æ±‚å¹¶å¤„ç†ï¼Œå“åº”HelloWorldå­—ç¬¦ä¸²ï¼› åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹ï¼ˆjarï¼‰å¯¼å…¥springBoot ä¾èµ–&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.9.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt; &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; ç¼–å†™ä¸»ç¨‹åºï¼Œå¯åŠ¨Spring Bootåº”ç”¨/** * @Date2020/5/23 12:53 * SpringBootApplicationæ¥æ ‡æ³¨ä¸€ä¸ªä¸»ç¨‹åº **/ @SpringBootApplication public class HelloWorldMainApplication { public static void main(String[] args) { //springåº”ç”¨å¯åŠ¨èµ·æ¥ SpringApplication.run(HelloWorldMainApplication.class,args); } } ç¼–å†™ç›¸å…³çš„Controllerã€Serviceè¿è¡Œä¸»ç¨‹åºæµ‹è¯•ç®€åŒ–éƒ¨ç½²&lt;!--å¯ä»¥å°†åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œçš„jarå®--&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt; å°†è¿™ä¸ªåº”ç”¨æ‰“æˆjaråŒ…ï¼Œç›´æŽ¥ç”¨java -jarçš„å‘½ä»¤è¿›è¡Œæ‰§è¡Œï¼›ç»ˆæ­¢è¿è¡Œnetstat -aon|findstr &quot;8080&quot; taskkill /f /pid 8976 ç»ˆæ­¢jarå‘½ä»¤è¿è¡Œçš„ç¨‹åº Hello WorldæŽ¢ç©¶pomæ–‡ä»¶çˆ¶æ–‡ä»¶&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.9.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; Spring Bootçš„ç‰ˆæœ¬ä»²è£ä¸­å¿ƒ ä»¥åŽæˆ‘ä»¬å¯¼å…¥ä¾èµ–é»˜è®¤æ˜¯ä¸éœ€è¦å†™ç‰ˆæœ¬å·çš„ï¼ˆæ²¡æœ‰åœ¨dependenciesé‡Œé¢ç®¡ç†çš„ä¾èµ–è‡ªç„¶éœ€è¦å£°æ˜Žç‰ˆæœ¬å·ï¼‰ å¯¼å…¥çš„ä¾èµ–&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; spring-boot-starter-webï¼š spring-boot-starterï¼šspring-bootåœºæ™¯å¯åŠ¨å™¨ï¼›å¸®æˆ‘ä»¬å¯¼å…¥äº†webæ¨¡å—æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„ç»„ä»¶Spring Bootå°†æ‰€æœ‰åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªä¸ªstarters(å¯åŠ¨å™¨)ï¼Œåªéœ€è¦åœ¨é¡¹ç›®é‡Œå¼•å…¥è¿™äº›starterç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–éƒ½ä¼šå¯¼å…¥è¿›æ¥ã€‚è¦ç”¨ä»€ä¹ˆåŠŸèƒ½å°±å¯¼å…¥ä»€ä¹ˆåœºæ™¯çš„å¯åŠ¨å™¨ ä¸»ç¨‹åºç±»/** * @Date2020/5/23 12:53 * SpringBootApplicationæ¥æ ‡æ³¨ä¸€ä¸ªä¸»ç¨‹åº,è¯´æ˜Žè¿™æ˜¯ä¸€ä¸ªSpring Bootåº”ç”¨ **/ @SpringBootApplication public class HelloWorldMainApplication { private static Logger log= LoggerFactory.getLogger(HelloWorldMainApplication.class); public static void main(String[] args) { log.info(&quot;HelloWorldMainApplication is success!&quot;); //springåº”ç”¨å¯åŠ¨èµ·æ¥ SpringApplication.run(HelloWorldMainApplication.class,args); } } @SpringBootApplication Spring Bootåº”ç”¨æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šè¯´æ˜Žè¿™ä¸ªç±»æ˜¯SpringBootçš„ä¸»é…ç½®ç±»ï¼ŒSpringBootå°±åº”è¯¥è¿è¡Œè¿™ä¸ªç±»çš„mainæ–¹æ³•æ¥å¯åŠ¨SpringBootåº”ç”¨ã€‚ @Target({ElementType.TYPE}) @Retention(RetentionPolicy.RUNTIME) @Documented @Inherited @SpringBootConfiguration @EnableAutoConfiguration @ComponentScan( excludeFilters = {@Filter( type = FilterType.CUSTOM, classes = {TypeExcludeFilter.class} ), @Filter( type = FilterType.CUSTOM, classes = {AutoConfigurationExcludeFilter.class} )} ) @SpringBootConfigurationï¼šSpringBootçš„é…ç½®ç±»ï¼› â€‹ æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šï¼Œæ ‡è¯†è¿™æ˜¯ä¸€ä¸ªSpringBootçš„é…ç½®ç±»ï¼› â€‹ @Configuration:é…ç½®ç±»ä¸Šæ¥æ ‡æ³¨è¿™ä¸ªæ³¨è§£ï¼š â€‹ é…ç½®ç±»â€”é…ç½®æ–‡ä»¶ï¼›é…ç½®ç±»ä¹Ÿæ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼›@Componet @EnableAutoConfigurationï¼šå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ â€‹ ä»¥å‰éœ€è¦é…ç½®çš„ä¸œè¥¿ï¼ŒSpringBootå¸®æˆ‘ä»¬è‡ªåŠ¨é…ç½®ï¼›@EnableAutoConfigurationå‘Šè¯‰SpringBootå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼›è¿™æ ·è‡ªåŠ¨é…ç½®æ‰èƒ½ç”Ÿæ•ˆã€‚ @AutoConfigurationPackage @Import({EnableAutoConfigurationImportSelector.class}) @AutoConfigurationPackageï¼šè‡ªåŠ¨é…ç½®åŒ… @Import({Registrar.class}) â€‹Springçš„åº•å±‚æ³¨è§£@Importï¼Œç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶ï¼›å¯¼å…¥çš„ç»„ä»¶ç”±Registrar.class å°†ä¸»é…ç½®ç±»ï¼ˆ@SpringBootApplicationæ ‡æ³¨çš„ç±»ï¼‰çš„æ‰€åœ¨åŒ…åŠä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶æ‰«æåˆ° Springå®¹å™¨ï¼› â€‹@Import({EnableAutoConfigurationImportSelector.class}) â€‹ç»™å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶ â€‹EnableAutoConfigurationImportSelectorï¼šå¯¼å…¥é‚£äº›ç»„ä»¶çš„é€‰æ‹©å™¨ï¼› â€‹å°†æ‰€æœ‰éœ€è¦å¯¼å…¥çš„ç»„ä»¶ä»¥å…¨ç±»åçš„æ–¹å¼è¿”å›žï¼› â€‹ä¼šç»™å®¹å™¨ä¸­å¯¼å…¥éžå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±»ï¼ˆxxxAutoConfigurationï¼‰;å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€ æœ‰ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶ï¼›å…åŽ»äº†æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™é…ç½®æ³¨å…¥åŠŸèƒ½ç»„ä»¶çš„å·¥ä½œã€‚ SpringFactoriesLoader.loadFactoryNames( getSpringFactoriesLoaderFactoryClass(), getBeanClassLoader()); Spring Bootåœ¨å¯åŠ¨çš„æ—¶å€™ä»Žç±»è·¯å¾„ä¸‹çš„â€META-INF/spring.factoriesâ€ä¸­èŽ·å–EnableAutoConfigurationæŒ‡å®šçš„å€¼ï¼Œå°†è¿™äº›å€¼ä½œä¸ºè‡ªåŠ¨é…ç½®ç±»å¯¼å…¥åˆ°å®¹å™¨ä¸­ï¼Œè‡ªåŠ¨é…ç½®ç±»å°±ç”Ÿæ•ˆï¼Œå¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½®å·¥ä½œã€‚ J2EEçš„æ•´ä½“æ•´åˆè§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨m2\repository\org\springframework\boot\spring-boot-autoconfigure\1.5.9.RELEASE\spring-boot-autoconfigure-1.5.9.RELEASE.jar ä½¿ç”¨Spring Initializerå¿«é€Ÿåˆ›å»ºSpring Booté¡¹ç›®IDEéƒ½æ”¯æŒä½¿ç”¨Springçš„é¡¹ç›®åˆ›å»ºå‘å¯¼å¿«é€Ÿåˆ›å»ºä¸€ä¸ªSpring Booté¡¹ç›®ï¼› é€‰æ‹©æˆ‘ä»¬éœ€è¦çš„æ¨¡å—ï¼Œå‘å¯¼ä¼šè”ç½‘è¿›è¡Œé¡¹ç›®çš„åˆ›å»ºï¼› é»˜è®¤ç”Ÿæˆçš„Spring Booté¡¹ç›® ä¸»ç¨‹åºå·²ç»ç”Ÿæˆå¥½äº†ï¼Œåªéœ€è¦å®žçŽ°æˆ‘ä»¬è‡ªå·±çš„é€»è¾‘ resourcesæ–‡ä»¶å¤¹çš„ç›®å½•ç»“æž„ static:ä¿å­˜æ‰€æœ‰çš„js css images templates:ä¿å­˜æ‰€æœ‰çš„é¡µé¢æ¨¡æ¿ï¼›ï¼ˆSpring Booté»˜è®¤jaråŒ…ä½¿ç”¨åµŒå…¥å¼çš„Tomcat,é»˜è®¤ä¸æ”¯æŒJSPé¡µé¢ï¼‰ï¼›å¯ä»¥ä½¿ç”¨æ¨¡æ¿å¼•æ“Žï¼ˆfreemarkerã€thymeleafï¼‰; application.properties:Spring Boot çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä¿®æ”¹ä¸€äº›é»˜è®¤è®¾ç½®ï¼› é…ç½®æ–‡ä»¶SpringBootä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶åæ˜¯å›ºå®šçš„ï¼›application.properties application.yml é…ç½®æ–‡ä»¶çš„ä½œç”¨ï¼šä¿®æ”¹SpringBootè‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼ SpringBootåœ¨åº•å±‚éƒ½ç»™æˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½ï¼› YAMLæ˜¯ä¸€ä¸ªæ ‡è®°è¯­è¨€ï¼šä»¥å‰çš„é…ç½®å¤§éƒ½ä½¿ç”¨xxx.xmlæ–‡ä»¶ï¼Œè€Œyamlä»¥æ•°æ®ä¸ºä¸­å¿ƒï¼Œæ¯”json,xmlæ›´é€‚åˆä½œé…ç½®æ–‡ä»¶ YAMLè¯­æ³•k: v :æ ‡è¯†ä¸€å¯¹é”®å€¼å¯¹ï¼ˆç©ºæ ¼å¿…é¡»æœ‰ï¼‰ä»¥ç©ºæ ¼çš„ç¼©è¿›æ¥æŽ§åˆ¶å±‚çº§å…³ç³»ï¼Œåªè¦å·¦å¯¹é½çš„ä¸€åˆ—æ•°æ®ï¼Œéƒ½æ˜¯ä¸€ä¸ªå±‚çº§çš„ï¼Œå±žæ€§å’Œå€¼ä¹Ÿæ˜¯å¤§å°å†™æ•æ„Ÿï¼› å€¼çš„å†™æ³•å­—é¢é‡ï¼šæ™®é€šçš„å€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”ï¼‰ â€‹ å­—é¢é‡ç›´æŽ¥æ¥å†™ï¼Œå­—ç¬¦ä¸²é»˜è®¤ä¸ç”¨åŠ ä¸Šå•å¼•å·æˆ–è€…åŒå¼•å· â€‹ â€œâ€:åŒå¼•å·ï¼Œä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨ç¤ºçš„æ„æ€ â€‹ name: â€œzhangsan \n lisiâ€ è¾“å‡ºzhangsan æ¢è¡Œ lisi â€‹ â€˜â€™:å•å¼•å·ï¼Œä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œè¾“å‡ºzhangsan \n lisi å¯¹è±¡ã€mapï¼ˆå±žæ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰ â€‹k:v :å¯¹è±¡è¿˜æ˜¯k:vçš„å½¢å¼ friends: lastName: zhangsan age: 18 è¡Œå†…å†™æ³• friends{lastName:zhangsan,age:18} æ•°ç»„ï¼ˆlistã€setï¼‰ pets: - cat - dog - pig è¡Œå†…å†™æ³• pets:{cat,dog,pig} é…ç½®æ–‡ä»¶çš„æ³¨å…¥å’Œæ ¡éªŒproperitiesé…ç½®æ–‡ä»¶åœ¨ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šä¹±ç person: name: zhangsan age: 18 boss: false birth: 2020/12/12 map: {k1: v1,k2: 12} objectList: - lisi - wangwu dog: name: mumu age: 2 javaBean /** * @ClassNamePerson * @Description å°†é…ç½®æ–‡ä»¶ä¸­çš„æ¯ä¸€ä¸ªå±žæ€§çš„å€¼æ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­ * @Author * @Date2020/5/23 16:08 * @ConfigurationPropertieså‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±žæ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®š * prefix = &quot;person&quot;:é…ç½®æ–‡ä»¶ä¸­å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±žæ€§è¿›è¡Œä¸€ä¸€æ˜ å°„ * åªæœ‰è¿™ä¸ªç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½ç”¨å®¹å™¨æä¾›çš„@ConfigurationPropertiesåŠŸèƒ½,éœ€è¦åŠ ä¸Š@Component * @ConfigurationProperties(prefix = &quot;person&quot;)é»˜è®¤ä»Žå…¨å±€é…ç½®æ–‡ä»¶ä¸­èŽ·å–å€¼ **/ @Component @ConfigurationProperties(prefix = &quot;person&quot;) public class Person { private String name; private Integer age; private boolean boss; private Date birth; private Map&lt;String,Object&gt; map; private List&lt;Object&gt; objectList; private Dog dog; æˆ‘ä»¬å¯ä»¥å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œä»¥åŽç¼–å†™é…ç½®å°±æœ‰æç¤ºäº† &lt;!--å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®šå°±ä¼šæœ‰æç¤º--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; @ConfigurationProperties @Value åŠŸèƒ½ æ‰¹é‡æ³¨å…¥æ–‡ä»¶çš„å±žæ€§ ä¸€ä¸ªä¸ªæŒ‡å®š æ¾æ•£ç»‘å®š æ”¯æŒï¼ˆlastName,last-nameï¼‰ ä¸æ”¯æŒ SpEL ä¸æ”¯æŒ æ”¯æŒ JSR303æ•°æ®æ ¡éªŒ æ”¯æŒ ä¸æ”¯æŒ å¤æ‚ç±»åž‹å°è£… æ”¯æŒ ä¸æ”¯æŒ é…ç½®æ–‡ä»¶ymlè¿˜æ˜¯propertieséƒ½å¯èŽ·å–åˆ°å€¼ å¦‚æžœåªéœ€è¦èŽ·å–ç®€å•å±žæ€§å€¼å¯ç”¨@Value @PropertySource&amp;ImportResource@PropertySource:åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶ï¼Œéœ€è¦æŒ‡å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„ /** * @Description å°†é…ç½®æ–‡ä»¶ä¸­çš„æ¯ä¸€ä¸ªå±žæ€§çš„å€¼æ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­ * @ConfigurationPropertieså‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±žæ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®š * prefix = &quot;person&quot;:é…ç½®æ–‡ä»¶ä¸­å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±žæ€§è¿›è¡Œä¸€ä¸€æ˜ å°„ * åªæœ‰è¿™ä¸ªç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½ç”¨å®¹å™¨æä¾›çš„@ConfigurationPropertiesåŠŸèƒ½,éœ€è¦åŠ ä¸Š@Component **/ @PropertySource(value = {&quot;classpath:person.properties&quot;}) @Component @ConfigurationProperties(prefix = &quot;person&quot;) public class Person { private String name; private Integer age; private boolean boss; private Date birth; private Map&lt;String,Object&gt; map; private List&lt;Object&gt; objectList; private Dog dog; @ImportResource:å¯¼å…¥Springçš„é…ç½®æ–‡ä»¶ï¼Œè®©é…ç½®æ–‡ä»¶é‡Œé¢çš„å†…å®¹ç”Ÿæ•ˆï¼› Spring Booté‡Œé¢æ²¡æœ‰Springçš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿä¸èƒ½è‡ªåŠ¨è¯†åˆ«ï¼Œæƒ³è®©Springçš„é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼ŒåŠ è½½è¿›æ¥ï¼›@ImportResourceéœ€è¦æ ‡æ³¨åœ¨ä¸€ä¸ªé…ç½®ç±»ä¸Š @ImportResource(locations = {&quot;classpath:beans.xml&quot;}) å¯¼å…¥Springçš„é…ç½®æ–‡ä»¶ï¼Œè®©å…¶ç”Ÿæ•ˆ &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;bean id=&quot;helloService&quot; class=&quot;com.think.hello.service.HelloService&quot;&gt;&lt;/bean&gt; &lt;/beans&gt; SpringBootæŽ¨èç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ–¹å¼ï¼ŒæŽ¨èä½¿ç”¨å…¨æ³¨è§£çš„æ–¹å¼ï¼› 1ã€é…ç½®ç±»===Springé…ç½®æ–‡ä»¶ 2ã€@Beanç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ @Configuration public class myAppConfig { //å°†æ–¹æ³•çš„è¿”å›žå€¼æ·»åŠ åˆ°å®¹å™¨ï¼Œå®¹å™¨ä¸­è¿™ä¸ªç»„ä»¶é»˜è®¤çš„idå°±æ˜¯æ–¹æ³•å @Bean public HelloService helloService(){ return new HelloService(); } } é…ç½®æ–‡ä»¶å ä½ç¬¦å ä½ç¬¦åŽæœŸä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æžœæ²¡æœ‰å¯ç”¨ï¼šæŒ‡å®šé»˜è®¤å€¼ person: name: zhangsan${random.uuid} boss: false age: ${random.int} birth: 2020/12/12 map: {k1: v1,k2: 12} objectList: - lisi - wangwu - zhangsan dog: name: ${person.hello:hello}mumu age: 2 Profileå¤šprofileæ–‡ä»¶æˆ‘ä»¬åœ¨ä¸»é…ç½®æ–‡ä»¶ç¼–å†™çš„æ—¶å€™ï¼Œæ–‡ä»¶åå¯ç”¨applicaton-{profile}.properties/yml é»˜è®¤ä½¿ç”¨application.propertiesçš„é…ç½® ymlæ”¯æŒå¤šæ–‡æ¡£å—çš„æ–¹å¼server: port: 8080 spring: profiles: active: prod --- server: port: 8081 spring: profiles: dev --- server: port: 8082 spring: profiles: prod æ¿€æ´»æŒ‡å®šprofileåœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šspring.profiles.active=devå‘½ä»¤è¡Œçš„æ–¹å¼â€‹ åœ¨å¯åŠ¨é…ç½®é‡Œ â€“spring.profiles.active=devæˆ–java -jar xxx.jar â€“spring.profiles.active=dev è™šæ‹Ÿæœºå‚æ•°â€‹ -Dspring.profiles.active=dev é…ç½®æ–‡ä»¶çš„åŠ è½½é»˜è®¤çš„ä¼˜å…ˆçº§ç”±é«˜åˆ°ä½Žé«˜ä¼˜å…ˆçº§çš„é…ç½®ä¼šè¦†ç›–ä½Žä¼˜å…ˆçº§çš„é…ç½®ç”Ÿæ•ˆï¼› SpringBootä¼šä»Žè¿™å››ä¸ªä½ç½®å…¨éƒ¨åŠ è½½ä¸»é…ç½®æ–‡ä»¶ï¼›äº’è¡¥é…ç½®ï¼› -file:./conifg/ -file:./ -classpath:/config/ -classpath:/ æˆ‘ä»¬è¿˜å¯ç”¨é€šè¿‡spring.config.locationæ¥æ”¹å˜é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½® é¡¹ç›®æ‰“åŒ…åŽå¯ç”¨å‘½ä»¤è¡Œå‚æ•°çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼ŒæŒ‡å®šé…ç½®æ–‡ä»¶ä¼šå’Œé»˜è®¤åŠ è½½çš„è¿™äº›é…ç½®æ–‡ä»¶å…±åŒèµ·ä½œç”¨å½¢æˆé…ç½® -jar xxx.jar â€“server.port=8080 è‡ªåŠ¨é…ç½®åŽŸç†é…ç½®æ–‡ä»¶èƒ½é…ç½®çš„å±žæ€§å‚ç…§ https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties @SpringBootApplication @SpringBootApplicationæ˜¯ä¸€ä¸ªå¤åˆæ³¨è§£æˆ–æ´¾ç”Ÿæ³¨è§£ï¼Œåœ¨@SpringBootApplicationä¸­æœ‰ä¸€ä¸ªæ³¨è§£@EnableAutoConfigurationï¼Œè¯¥æ³¨è§£æ˜¯å¼€å¯è‡ªåŠ¨é…ç½® @Target(ElementType.TYPE) @Retention(RetentionPolicy.RUNTIME) @Documented @Inherited @SpringBootConfiguration @EnableAutoConfiguration @ComponentScan(excludeFilters = { @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class), @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) }) public @interface SpringBootApplication { @EnableAutoConfigurationä¹Ÿæ˜¯ä¸€ä¸ªæ´¾ç”Ÿæ³¨è§£ï¼Œå…¶ä¸­çš„å…³é”®åŠŸèƒ½æ˜¯ç”±@Importæä¾›ï¼Œå…¶å¯¼å…¥çš„AutoConfigurationImportSelectorçš„selectImports()æ–¹æ³•é€šè¿‡SpringFactoriesLoader.loadFactoryNames()æ‰«ææ‰€æœ‰å…·æœ‰META-INF/spring.factoriesçš„jaråŒ…ã€‚ spring-boot-autoconfigure-x.x.x.x.jaré‡Œå°±æœ‰ä¸€ä¸ªspring.factoriesæ–‡ä»¶ã€‚spring.factoriesæ–‡ä»¶ç”±ä¸€ç»„ä¸€ç»„çš„key=valueçš„å½¢å¼ï¼Œå…¶ä¸­ä¸€ä¸ªkeyæ˜¯EnableAutoConfigurationç±»çš„å…¨ç±»åï¼Œè€Œå®ƒçš„valueæ˜¯ä¸€ä¸ªxxxxAutoConfigurationçš„ç±»åçš„åˆ—è¡¨ï¼Œ è¿™äº›ç±»åä»¥é€—å·åˆ†éš”ã€‚spring-boot-autoconfigure-x.x.x.x.jar -&gt; META-INF/spring.factories -&gt; org.springframework.boot.autoconfigure.xxx.xxxAutoConfiguration ç±»åˆ—è¡¨å°†ä¼šè¢«å®žä¾‹åŒ–åˆ°Springå®¹å™¨ã€‚SpringBooté¡¹ç›®å¯åŠ¨æ—¶ï¼Œ@SpringBootApplicationç”¨åœ¨å¯åŠ¨ç±»SpringApplication.run()çš„å†…éƒ¨å°±ä¼šç½®é¡¶selectImports()æ–¹æ³•ï¼Œæ‰¾åˆ°æ‰€æœ‰JavaConfigè‡ªåŠ¨é…ç½®ç±»çš„å…¨é™å®šåå¯¹åº”çš„class,ç„¶åŽå°†æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»åŠ è½½åˆ°Springå®¹å™¨ä¸­ã€‚ ä»¥redisè‡ªåŠ¨é…ç½®ï¼Œè§£æžSpringè‡ªåŠ¨é…ç½®åŽŸç†å°†redis starterä¾èµ–åŠ å…¥&lt;!--redis jar--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; &lt;/dependency&gt; org.springframework.boot.autoconfigure.data.redis.RedisAutoConfigurationä¼šè¢«å®žä¾‹åŒ–åˆ°å®¹å™¨ã€‚è¯¥ç±»ä¸ºä»€ä¹ˆä¼šè¢«å®žä¾‹åŒ–ï¼Ÿ å› ä¸ºå®ƒåœ¨META-INF/spring.factoriesçš„Auto Configureåˆ—è¡¨ã€‚org.springframework.boot.autoconfigure.data.redis.RedisAutoConfigurationè¢«å®žä¾‹åŒ–ï¼Œç„¶è€Œredisä¹Ÿä¼šè¢«å®žä¾‹åŒ–å³åˆ›å»ºRedisTemplateåœ¨Springå®¹å™¨ã€‚ ç„¶è€Œå®žä¾‹åŒ–rediså¯¹è±¡æ˜¯æœ‰æ¡ä»¶çš„å³@ConditionalOnClass({RedisOperations.class})ï¼Œæ„æ€ï¼šå½“ç»™å®šçš„ç±»ååœ¨ç±»è·¯å¾„ä¸Šå­˜åœ¨ï¼Œåˆ™å®žä¾‹åŒ–å½“å‰Beanã€‚ ä¹Ÿå°±æ˜¯æƒ³Springåˆ›å»ºrediså®žä¾‹å¯¹è±¡ï¼Œå¿…é¡»éœ€è¦å°†redis starteråŒ…ï¼šspring-boot-starter-data-redisä¾èµ–å¼•å…¥ã€‚æœ‰äº†redis starterä¾èµ–springbootè‡ªåŠ¨é…ç½®å°±ä¼šæ£€æµ‹åˆ°classpathè·¯å¾„ä¸‹æœ‰ç›¸å…³çš„ç±»ï¼Œç„¶åŽå°±å¯ä»¥å®žä¾‹åŒ–å¯¹åº”çš„ç±»äº†ï¼Œè¿™å°±æ˜¯è‡ªåŠ¨é…ç½®çš„åŽŸç†ã€‚ çŸ¥è¯†ç‚¹ï¼šç±»ä¸Šæœ‰è¯¥æ³¨è§£@Configurationï¼Œç±»è¢«å®žä¾‹åŒ– æ—¶@beanä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œç”Ÿæˆå¯¹åº”çš„beanå®žä¾‹ï¼Œæ”¾å…¥Springå®¹å™¨ã€‚ org.springframework.boot.autoconfigure.data.redis.RedisAutoConfigurationä¼šå¯¼å…¥JedisConnectionConfiguration.class @Import({LettuceConnectionConfiguration.class, JedisConnectionConfiguration.class}) JedisConnectionConfiguration.classæœ‰æ³¨è§£ï¼š@ConditionalOnClass({GenericObjectPool.class, JedisConnection.class, Jedis.class}) springæ˜¯æ€Žæ ·è¯»å–redisé…ç½®å‚æ•°ï¼Ÿå…³é”®æ˜¯org.springframework.boot.autoconfigure.data.redis.RedisAutoConfigurationçš„æ³¨è§£ï¼š@EnableConfigurationProperties({RedisProperties.class}) çŸ¥è¯†ç‚¹ï¼š@EnableConfigurationPropertiesä¼šå°†é…ç½®æ–‡ä»¶çš„key-valueæ˜ å°„æˆJavaå¯¹è±¡ã€‚redisé…ç½®ç±»ï¼Œå¦‚æžœæ²¡redisé…ç½®ï¼Œä½¿ç”¨æœ¬åœ°çš„redisè¿™éœ€è¦æœ¬åœ°å®‰è£…redisæœåŠ¡ï¼Œå¦‚æžœæœ‰redisé…ç½®å°±è®¾ç½®redis hostã€portç­‰å±žæ€§ appliccation.yml redisé…ç½®ã€‚å¿…é¡»ä»¥spring.rediså¼€å¤´ spring-boot-starterSpringBoot å¯ä»¥çœç•¥ä¼—å¤šçš„ç¹çé…ç½®ï¼Œå®ƒçš„ä¼—å¤šstarterå¯ä»¥è¯´åŠŸä¸å¯æ²¡ã€‚ ä¾‹å¦‚é›†æˆredis,åªéœ€è¦pom.xmlä¸­å¼•å…¥spring-boot-starter-data-redis,é…ç½®æ–‡ä»¶application.ymlä¸­åŠ å…¥spring.redis.databaseç­‰å‡ ä¸ªå…³é”®é…ç½®é¡¹å³å¯ï¼Œå¸¸ç”¨çš„starterè¿˜æœ‰spring-boot-starter-webã€spring-boot-starter-testç­‰ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„xmlé…ç½®å¤§å¤§å‡å°‘äº†é›†æˆçš„å·¥ä½œé‡ã€‚ åŽŸç†åˆ©ç”¨starterå®žçŽ°è‡ªåŠ¨åŒ–é…ç½®åªéœ€è¦ä¸¤ä¸ªæ¡ä»¶â€“mavenä¾èµ–ã€é…ç½®æ–‡ä»¶ã€‚å¼•å…¥mavenå®žè´¨å°±æ˜¯å¯¼å…¥jaråŒ…ï¼Œspring-bootå¯åŠ¨çš„æ—¶å€™ä¼šæ‰¾åˆ°starter jaråŒ…ä¸­çš„resources/META-INF/spring.factoriesæ–‡ä»¶ï¼Œæ ¹æ®spring.factoriesæ–‡ä»¶ä¸­çš„é…ç½®ï¼Œæ‰¾åˆ°éœ€è¦è‡ªåŠ¨é…ç½®çš„ç±»ã€‚ æ³¨è§£ è¯´æ˜Ž @Configuration è¡¨æ˜Žæ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¢«æ³¨è§£çš„ç±»å°†æˆä¸ºä¸€ä¸ªbeané…ç½®ç±» @ConditionalOnClass å½“classpathä¸‹å‘çŽ°è¯¥ç±»çš„æƒ…å†µä¸‹è¿›è¡Œè‡ªåŠ¨é…ç½® @ConditionalOnBean å½“classpathä¸‹å‘çŽ°è¯¥ç±»çš„æƒ…å†µä¸‹è¿›è¡Œè‡ªåŠ¨é…ç½® @EnableConfigurationProperties ä½¿@ConfigurationPropertiesæ³¨è§£ç”Ÿæ•ˆ @AutoConfigureAfter å®Œæˆè‡ªåŠ¨é…ç½®åŽå®žä¾‹åŒ–è¿™ä¸ªbean å®žçŽ°pom.xml &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.1.4.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;groupId&gt;com.air&lt;/groupId&gt; &lt;artifactId&gt;starter-demo&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;starter-demo&lt;/name&gt; &lt;description&gt;spring-boot-starter demo&lt;/description&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;!-- Source --&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt; &lt;executions&gt; &lt;execution&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;jar-no-fork&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt; &lt;/project&gt; spring-boot-configuration-processor çš„ä½œç”¨æ˜¯ç¼–è¯‘æ—¶ç”Ÿæˆ spring-configuration-metadata.json ï¼Œåœ¨IDEä¸­ç¼–è¾‘é…ç½®æ–‡ä»¶æ—¶ï¼Œä¼šå‡ºçŽ°æç¤ºã€‚ æ‰“åŒ…é€‰æ‹©jar-no-forkï¼Œå› ä¸ºè¿™é‡Œä¸éœ€è¦mainå‡½æ•°ã€‚ EnableDemoConfiguration@Target({ElementType.TYPE}) @Retention(RetentionPolicy.RUNTIME) @Documented @Inherited public @interface EnableDemoConfiguration { } DemoProperties@Data @ConfigurationProperties(prefix = &quot;demo&quot;) public class DemoProperties { private String name; private Integer age; } nameå’Œageå¯¹åº”application.propertiesé‡Œé¢çš„demo.nameå’Œdemo.age DemoAutoConfiguration@Configuration @ConditionalOnBean(annotation = EnableDemoConfiguration.class) @EnableConfigurationProperties(DemoProperties.class) public class DemoAutoConfiguration { @Bean @ConditionalOnMissingBean DemoService demoService (){ return new DemoService(); } } è¿™é‡Œè®¾ç½®è‡ªåŠ¨é…ç½®çš„ç›¸å…³æ¡ä»¶ï¼Œå’Œç›¸å…³æ“ä½œï¼Œç”±äºŽè¿™é‡Œåªæƒ³å†™ä¸€ä¸ªæœ€ç®€å•çš„demoï¼Œæ‰€ä»¥è¿™é‡Œåªéœ€è¦ç®€å•æ³¨å…¥ä¸€ä¸ªbeanï¼Œæ²¡æœ‰å¤æ‚é€»è¾‘ï¼Œå®žé™…å¼€å‘ä¸­ï¼Œè¿™ä¸ªç±»æ˜¯æœ€å…³é”®çš„ã€‚ DemoServicepublic class DemoService { @Autowired private DemoProperties demoProperties; public void print() { System.out.println(demoProperties.getName()); System.out.println(demoProperties.getAge()); } } è¿™é‡Œä¸éœ€è¦@Serviceï¼Œå› ä¸ºå·²ç»é€šè¿‡DemoAutoConfigurationæ³¨å…¥springå®¹å™¨äº†ã€‚ spring.factoriesåœ¨resources/META-INF/ä¸‹åˆ›å»ºspring.factoriesæ–‡ä»¶:org.springframework.boot.autoconfigure.EnableAutoConfiguration=\com.air.starterdemo.config.DemoAutoConfigurationå‘Šè¯‰spring-bootï¼Œå¯åŠ¨æ—¶éœ€è¦æ‰«æçš„ç±»ã€‚ æµ‹è¯•pom.xml æœ¬åœ°mvn installä¹‹åŽï¼Œåœ¨æ–°çš„spring-booté¡¹ç›®é‡Œé¢å¼•å…¥ com.air starter-demo 0.0.1-SNAPSHOT é…ç½®æ–‡ä»¶demo.name = ooo demo.age = 11 å¦‚æžœä½¿ç”¨çš„æ˜¯IDEAï¼Œåœ¨ç¼–è¾‘æ—¶ä¼šå‡ºçŽ°æç¤ºã€‚ æµ‹è¯•@SpringBootApplication @EnableDemoConfiguration public class Demo1Application { @Autowired private DemoService demoService; public static void main(String[] args) { SpringApplication.run(Demo1Application.class, args); } @PostConstruct public void test() { demoService.print(); } } å¯åŠ¨mainå‡½æ•°ï¼ŒæŽ§åˆ¶å°ä¼šæ‰“å°å‡ºé…ç½®æ–‡ä»¶ä¸­çš„nameå’Œageï¼Œä¸€ä¸ªç®€å•çš„spring-boot-starterå°±å†™å¥½äº† spring.factories# Initializers org.springframework.context.ApplicationContextInitializer=\ org.springframework.boot.autoconfigure.SharedMetadataReaderFactoryContextInitializer,\ org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener # Application Listeners org.springframework.context.ApplicationListener=\ org.springframework.boot.autoconfigure.BackgroundPreinitializer # Auto Configuration Import Listeners org.springframework.boot.autoconfigure.AutoConfigurationImportListener=\ org.springframework.boot.autoconfigure.condition.ConditionEvaluationReportAutoConfigurationImportListener # Auto Configuration Import Filters org.springframework.boot.autoconfigure.AutoConfigurationImportFilter=\ org.springframework.boot.autoconfigure.condition.OnBeanCondition,\ org.springframework.boot.autoconfigure.condition.OnClassCondition,\ org.springframework.boot.autoconfigure.condition.OnWebApplicationCondition # Auto Configure org.springframework.boot.autoconfigure.EnableAutoConfiguration=\ org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\ org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\ org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\ org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\ org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\ org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\ org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\ org.springframework.boot.autoconfigure.context.LifecycleAutoConfiguration,\ org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\ org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\ org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\ org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\ org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\ org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveDataAutoConfiguration,\ org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,\ org.springframework.boot.autoconfigure.data.couchbase.CouchbaseReactiveDataAutoConfiguration,\ org.springframework.boot.autoconfigure.data.couchbase.CouchbaseReactiveRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,\ org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.elasticsearch.ReactiveElasticsearchRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.elasticsearch.ReactiveElasticsearchRestClientAutoConfiguration,\ org.springframework.boot.autoconfigure.data.jdbc.JdbcRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.ldap.LdapRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration,\ org.springframework.boot.autoconfigure.data.mongo.MongoReactiveDataAutoConfiguration,\ org.springframework.boot.autoconfigure.data.mongo.MongoReactiveRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.neo4j.Neo4jDataAutoConfiguration,\ org.springframework.boot.autoconfigure.data.neo4j.Neo4jRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.solr.SolrRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.r2dbc.R2dbcDataAutoConfiguration,\ org.springframework.boot.autoconfigure.data.r2dbc.R2dbcRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.r2dbc.R2dbcTransactionManagerAutoConfiguration,\ org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\ org.springframework.boot.autoconfigure.data.redis.RedisReactiveAutoConfiguration,\ org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\ org.springframework.boot.autoconfigure.data.rest.RepositoryRestMvcAutoConfiguration,\ org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,\ org.springframework.boot.autoconfigure.elasticsearch.ElasticsearchRestClientAutoConfiguration,\ org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\ org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\ org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\ org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\ org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,\ org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,\ org.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,\ org.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,\ org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration,\ org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration,\ org.springframework.boot.autoconfigure.influx.InfluxDbAutoConfiguration,\ org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,\ org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,\ org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,\ org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\ org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\ org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\ org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\ org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\ org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\ org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\ org.springframework.boot.autoconfigure.jms.JndiConnectionFactoryAutoConfiguration,\ org.springframework.boot.autoconfigure.jms.activemq.ActiveMQAutoConfiguration,\ org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\ org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration,\ org.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,\ org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration,\ org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\ org.springframework.boot.autoconfigure.availability.ApplicationAvailabilityAutoConfiguration,\ org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,\ org.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,\ org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,\ org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\ org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\ org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration,\ org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,\ org.springframework.boot.autoconfigure.mongo.MongoReactiveAutoConfiguration,\ org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,\ org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\ org.springframework.boot.autoconfigure.quartz.QuartzAutoConfiguration,\ org.springframework.boot.autoconfigure.r2dbc.R2dbcAutoConfiguration,\ org.springframework.boot.autoconfigure.rsocket.RSocketMessagingAutoConfiguration,\ org.springframework.boot.autoconfigure.rsocket.RSocketRequesterAutoConfiguration,\ org.springframework.boot.autoconfigure.rsocket.RSocketServerAutoConfiguration,\ org.springframework.boot.autoconfigure.rsocket.RSocketStrategiesAutoConfiguration,\ org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,\ org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration,\ org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration,\ org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration,\ org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration,\ org.springframework.boot.autoconfigure.security.rsocket.RSocketSecurityAutoConfiguration,\ org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration,\ org.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,\ org.springframework.boot.autoconfigure.session.SessionAutoConfiguration,\ org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration,\ org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration,\ org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration,\ org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration,\ org.springframework.boot.autoconfigure.solr.SolrAutoConfiguration,\ org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration,\ org.springframework.boot.autoconfigure.task.TaskSchedulingAutoConfiguration,\ org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration,\ org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,\ org.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,\ org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration,\ org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration,\ org.springframework.boot.autoconfigure.web.embedded.EmbeddedWebServerFactoryCustomizerAutoConfiguration,\ org.springframework.boot.autoconfigure.web.reactive.HttpHandlerAutoConfiguration,\ org.springframework.boot.autoconfigure.web.reactive.ReactiveWebServerFactoryAutoConfiguration,\ org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration,\ org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration,\ org.springframework.boot.autoconfigure.web.reactive.function.client.ClientHttpConnectorAutoConfiguration,\ org.springframework.boot.autoconfigure.web.reactive.function.client.WebClientAutoConfiguration,\ org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration,\ org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration,\ org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration,\ org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration,\ org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration,\ org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration,\ org.springframework.boot.autoconfigure.websocket.reactive.WebSocketReactiveAutoConfiguration,\ org.springframework.boot.autoconfigure.websocket.servlet.WebSocketServletAutoConfiguration,\ org.springframework.boot.autoconfigure.websocket.servlet.WebSocketMessagingAutoConfiguration,\ org.springframework.boot.autoconfigure.webservices.WebServicesAutoConfiguration,\ org.springframework.boot.autoconfigure.webservices.client.WebServiceTemplateAutoConfiguration # Failure analyzers org.springframework.boot.diagnostics.FailureAnalyzer=\ org.springframework.boot.autoconfigure.diagnostics.analyzer.NoSuchBeanDefinitionFailureAnalyzer,\ org.springframework.boot.autoconfigure.flyway.FlywayMigrationScriptMissingFailureAnalyzer,\ org.springframework.boot.autoconfigure.jdbc.DataSourceBeanCreationFailureAnalyzer,\ org.springframework.boot.autoconfigure.jdbc.HikariDriverConfigurationFailureAnalyzer,\ org.springframework.boot.autoconfigure.r2dbc.ConnectionFactoryBeanCreationFailureAnalyzer,\ org.springframework.boot.autoconfigure.session.NonUniqueSessionRepositoryFailureAnalyzer # Template availability providers org.springframework.boot.autoconfigure.template.TemplateAvailabilityProvider=\ org.springframework.boot.autoconfigure.freemarker.FreeMarkerTemplateAvailabilityProvider,\ org.springframework.boot.autoconfigure.mustache.MustacheTemplateAvailabilityProvider,\ org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAvailabilityProvider,\ org.springframework.boot.autoconfigure.thymeleaf.ThymeleafTemplateAvailabilityProvider,\ org.springframework.boot.autoconfigure.web.servlet.JspTemplateAvailabilityProvider æ¯ä¸€ä¸ªautoconfigureç±»éƒ½æ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼Œéƒ½åŠ å…¥åˆ°å®¹å™¨ä¸­ï¼Œç”¨ä»–ä»¬æ¥åšè‡ªåŠ¨é…ç½® æ¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»è¿›è¡Œè‡ªåŠ¨é…ç½®åŠŸèƒ½; ä»¥HttpEncodingAutoConfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŽŸç† @Configuration(//è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±» proxyBeanMethods = false ) @EnableConfigurationProperties({ServerProperties.class})//å¯ç”¨configurationPropertiesåŠŸèƒ½ï¼Œå°†é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼å’ŒxxxPropertiesç»‘å®šèµ·æ¥ @ConditionalOnWebApplication(//Springåº•å±‚@Conditionalæ³¨è§£ï¼Œæ ¹æ®ä¸åŒæ¡ä»¶ï¼Œå¦‚æžœæ»¡è¶³æŒ‡å®šæ¡ä»¶ï¼Œæ•´ä¸ªé…ç½®é‡Œé‡Œé¢çš„é…ç½®å°±ä¼šç”Ÿæ•ˆï¼Œåˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦æ˜¯webåº”ç”¨ï¼Œæ˜¯å°±ç”Ÿæ•ˆä¸æ˜¯å°±ä¸ç”Ÿæ•ˆ type = Type.SERVLET ) @ConditionalOnClass({CharacterEncodingFilter.class})//åˆ¤æ–­å½“å‰é¡¹ç›®æœ‰æ²¡æœ‰è¿™ä¸ªç±» CharacterEncodingFilterï¼šSpringMVCä¸­è¿›è¡Œä¹±ç è§£å†³çš„è¿‡æ»¤å™¨ @ConditionalOnProperty(//åˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé…ç½®server.servlet.encoding.enabledå¦‚æžœä¸å­˜åœ¨åˆ¤æ–­ä¹Ÿæ˜¯æˆç«‹çš„ï¼Œå³ä½¿æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ä¸­ä¸é…ç½®server.servlet.encoding.enabled=true,ä¹Ÿæ˜¯é»˜è®¤ç”Ÿæ•ˆçš„ prefix = &quot;server.servlet.encoding&quot;,//ä»Žé…ç½®æ–‡ä»¶ä¸­èŽ·å–æŒ‡å®šçš„å€¼å’Œbeançš„å±žæ€§è¿›è¡Œç»‘å®š value = {&quot;enabled&quot;}, matchIfMissing = true ) public class HttpEncodingAutoConfiguration { æ ¹æ®å½“å‰ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå†³å®šè¿™ä¸ªé…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆ å¦‚æžœç”Ÿæ•ˆï¼Œè¿™ä¸ªé…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­æ·»åŠ å„ç§ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶çš„å±žæ€§æ˜¯ä»Žå¯¹åº”çš„propertiesç±»ä¸­èŽ·å–çš„ï¼Œè¿™äº›ç±»é‡Œé¢çš„æ¯ä¸€ä¸ªåˆæ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šçš„ @Bean//ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªç»„ä»¶,è¿™ä¸ªç»„ä»¶çš„æŸäº›å€¼éœ€è¦ä»Žpropertiesä¸­èŽ·å– @ConditionalOnMissingBean public CharacterEncodingFilter characterEncodingFilter() { CharacterEncodingFilter filter = new OrderedCharacterEncodingFilter(); filter.setEncoding(this.properties.getCharset().name()); filter.setForceRequestEncoding(this.properties.shouldForce(org.springframework.boot.web.servlet.server.Encoding.Type.REQUEST)); filter.setForceResponseEncoding(this.properties.shouldForce(org.springframework.boot.web.servlet.server.Encoding.Type.RESPONSE)); return filter; } æ‰€æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­èƒ½é…ç½®çš„å±žæ€§éƒ½æ˜¯xxxPropertiesç±»ä¸­å°è£…ç€ï¼Œé…ç½®æ–‡ä»¶èƒ½é…ç½®ä»€ä¹ˆå°±å¯ä»¥å‚ç…§æŸä¸ªåŠŸèƒ½å¯¹åº”çš„è¿™ä¸ªå±žæ€§ç±» æ€»ç»“ 1ã€SpringBootå¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»ï¼› â€‹ 2ã€æˆ‘ä»¬çœ‹éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±» â€‹ 3ã€æˆ‘ä»¬å†æ¥çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­é…ç½®äº†å“ªäº›ç»„ä»¶ï¼Œåªè¦æˆ‘ä»¬è¦ç”¨çš„ç»„ä»¶æœ‰ï¼Œå°±ä¸éœ€è¦å†æ¥é…ç½®äº†ï¼Œ â€‹ 4ã€ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä»Žpropertiesç±»ä¸­èŽ·å–æŸäº›å±žæ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†é…ç½®æ–‡ä»¶æ€»æŒ‡å®šè¿™äº›å±žæ€§çš„å€¼ã€‚ xxxAutoConfiguration:è‡ªåŠ¨é…ç½®ç±» ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ xxxPropertiesï¼šå°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±žæ€§ è‡ªåŠ¨é…ç½®ç±»å“ªä¸ªç”Ÿæ•ˆäº† æˆ‘ä»¬å¯ä»¥é€šè¿‡debug=trueæ¥è®©æŽ§åˆ¶å°æ‰“å°è‡ªåŠ¨é…ç½®æŠ¥å‘Šï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆæ–¹ä¾¿çŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆäº† ============================ CONDITIONS EVALUATION REPORT ============================ Positive matches:ï¼ˆè‡ªåŠ¨é…ç½®ç±»å¯ç”¨çš„ï¼‰ ----------------- AopAutoConfiguration matched: - @ConditionalOnProperty (spring.aop.auto=true) matched (OnPropertyCondition) AopAutoConfiguration.ClassProxyingConfiguration matched: - @ConditionalOnMissingClass did not find unwanted class &apos;org.aspectj.weaver.Advice&apos; (OnClassCondition) - @ConditionalOnProperty (spring.aop.proxy-target-class=true) matched (OnPropertyCondition) DispatcherServletAutoConfiguration matched: - @ConditionalOnClass found required class &apos;org.springframework.web.servlet.DispatcherServlet&apos; (OnClassCondition) - found &apos;session&apos; scope (OnWebApplicationCondition) DispatcherServletAutoConfiguration.DispatcherServletConfiguration matched: - @ConditionalOnClass found required class &apos;javax.servlet.ServletRegistration&apos; (OnClassCondition) - Default DispatcherServlet did not find dispatcher servlet beans (DispatcherServletAutoConfiguration.DefaultDispatcherServletCondition) Negative matches:ï¼ˆæ²¡æœ‰å¯ç”¨çš„ï¼Œæ²¡åŒ¹é…æˆåŠŸçš„ï¼‰ ----------------- ActiveMQAutoConfiguration: Did not match: - @ConditionalOnClass did not find required class &apos;javax.jms.ConnectionFactory&apos; (OnClassCondition) AopAutoConfiguration.AspectJAutoProxyingConfiguration: Did not match: - @ConditionalOnClass did not find required class &apos;org.aspectj.weaver.Advice&apos; (OnClassCondition) ArtemisAutoConfiguration: Did not match: - @ConditionalOnClass did not find required class &apos;javax.jms.ConnectionFactory&apos; (OnClassCondition) SpringBootä¸Žæ—¥å¿—æ—¥å¿—é—¨é¢SLF4Jæ—¥å¿—å®žçŽ°Logback;SpringBoot:åº•å±‚æ˜¯Springæ¡†æž¶ï¼ŒSpringæ¡†æž¶é»˜è®¤ç”¨JCL; SpringBooté€‰ç”¨SLF4J(æ—¥å¿—çš„æŠ½è±¡å±‚)å’Œlogback; ä»¥åŽå¼€å‘çš„æ—¶å€™ï¼Œæ—¥å¿—è®°å½•æ–¹æ³•çš„è°ƒç”¨ï¼Œä¸åº”è¯¥æ¥ç›´æŽ¥è°ƒç”¨æ—¥å¿—çš„å®žçŽ°ç±»ï¼Œè€Œæ˜¯è°ƒç”¨æ—¥å¿—æŠ½è±¡æ›¾é‡Œé¢çš„æ–¹æ³•ã€‚ åº”è¯¥ç»™ç³»ç»Ÿå¯¼å…¥slf4jçš„jarå’Œlogbackçš„å®žçŽ°jar import org.slf4j.Logger; import org.slf4j.LoggerFactory; public class HelloWorld { public static void main(String[] args) { Logger logger = LoggerFactory.getLogger(HelloWorld.class); logger.info(&quot;Hello World&quot;); } } æ¯ä¸€ä¸ªæ—¥å¿—çš„å®žçŽ°æ¡†æž¶éƒ½æœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚ä½¿ç”¨slf4jåŽï¼Œé…ç½®æ–‡ä»¶è¿˜æ˜¯åšæˆæ—¥å¿—å®žçŽ°æ¡†æž¶è‡ªå·±æœ¬èº«çš„é…ç½®æ–‡ä»¶ï¼› é—ç•™é—®é¢˜ä¸åŒç³»ç»Ÿæœ‰ä¸åŒçš„æ—¥å¿—æ¡†æž¶ï¼Œéœ€è¦åšåˆ°ç»Ÿä¸€æ—¥å¿—è®°å½•ï¼Œå³ä½¿åˆ«çš„æ¡†æž¶å’Œæˆ‘ä¸€èµ·ä½¿ç”¨slf4jè¿›è¡Œè¾“å‡º å¦‚ä½•è®©ç³»ç»Ÿä¸­æ‰€æœ‰æ—¥å¿—éƒ½ç»Ÿä¸€åˆ°slf4j å°†ç³»ç»Ÿä¸­å…¶ä»–æ—¥å¿—æ¡†æž¶æŽ’é™¤ï¼Œç”¨ä¸­é—´åŒ…æ›¿æ¢åŽŸæœ‰çš„æ—¥å¿—æ¡†æž¶ï¼Œå†å¯¼å…¥slf4då…¶ä»–çš„å®žçŽ° &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;2.3.0.RELEASE&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;/dependency&gt; SpringBoot ä½¿ç”¨å®ƒæ¥åšæ—¥å¿— &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt; &lt;version&gt;2.3.0.RELEASE&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;/dependency&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-classic&lt;/artifactId&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; æ€»ç»“ï¼š1ã€SpringBootåº•å±‚ä¹Ÿæ˜¯ä½¿ç”¨slf4j+logbackçš„æ–¹å¼è¿›è¡Œæ—¥å¿—è®°å½• â€‹ 2ã€SpringBootä¹ŸæŠŠå…¶ä»–çš„æ—¥å¿—éƒ½æ›¿æ¢æˆäº†slf4j â€‹ 3ã€ä¸­é—´æ›¿æ¢åŒ… â€‹ 4ã€å¦‚æžœè¦å¼•å…¥å…¶ä»–æ¡†æž¶ï¼Œä¸€å®šè¦æŠŠè¿™ä¸ªæ¡†æž¶çš„é»˜è®¤æ—¥å¿—ç§»é™¤æŽ‰ â€‹ Springæ¡†æž¶ç”¨çš„commons-logging; &lt;dependency&gt; &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt; &lt;artifactId&gt;activemq-console&lt;/artifactId&gt; &lt;version&gt;${activemq.version}&lt;/version&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;commons-logging&lt;/groupId&gt; &lt;artifactId&gt;commons-logging&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; SpringBootèƒ½è‡ªåŠ¨é€‚é…æ‰€æœ‰çš„æ—¥å¿—ï¼Œè€Œä¸”åº•å±‚ä½¿ç”¨slf4j+logbackçš„æ–¹å¼è®°å½•æ—¥å¿—ï¼Œå¼•å…¥å…¶ä»–æ¡†æž¶çš„æ—¶å€™ï¼Œåªéœ€è¦æŠŠè¿™ä¸ªæ¡†æž¶ä¾èµ–çš„æ—¥å¿—æ¡†æž¶æŽ’é™¤æŽ‰ã€‚ private static Logger logger = LoggerFactory.getLogger(HelloApplication.class); public static void main(String[] args) { SpringApplication.run(HelloApplication.class, args); //æ—¥å¿—çº§åˆ«ç”±ä½Žåˆ°é«˜ //å¯ä»¥è°ƒæ•´è¾“å‡ºçš„æ—¥å¿—çº§åˆ« logger.trace(&quot;trace&quot;); logger.debug(&quot;debug&quot;); logger.info(&quot;HelloApplication is Success&quot;); logger.warn(&quot;warn&quot;); logger.error(&quot;error&quot;); } logging.pattern.console=%d{yyyy-MM-dd} [%thread] %-5level %logger{50} - %msg%n %dè¡¨ç¤ºæ—¥æœŸæ—¶é—´ %threadè¡¨ç¤ºçº¿ç¨‹å %-5level:çº§åˆ«ä»Žå·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦çš„å®½åº¦ %logger{50}è¡¨ç¤ºloggeråå­—æœ€é•¿50ä¸ªå­—ç¬¦ï¼Œå¦åˆ™æŒ‰ç…§å¥ç‚¹åˆ†å‰² %msg:æ—¥å¿—æ¶ˆæ¯ %næ¢è¡Œç¬¦ SpringBootä¿®æ”¹é»˜è®¤æ—¥å¿—é…ç½® logging.level.com.think=trace #å½“å‰é¡¹ç›®ä¸‹ç”Ÿæˆspringboot.logæ—¥å¿—ï¼Œå¯ä»¥æŒ‡å®šå®Œæ•´çš„è·¯å¾„D:/springboot.log #logging.file.name=springboot.log #åœ¨å½“å‰ç£ç›˜çš„æ ¹è·¯å¾„ä¸‹åˆ›å»ºspringæ–‡ä»¶å¤¹å’Œé‡Œé¢çš„logæ–‡ä»¶å¤¹ï¼›ä½¿ç”¨spring.logåšä¸ºé»˜è®¤æ–‡ä»¶ logging.file.path=/spring/log #åœ¨æŽ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—çš„æ ¼å¼ logging.pattern.console=%d{yyyy-MM-dd} [%thread] %-5level %logger{50} - %msg%n #æŒ‡å®šæ–‡ä»¶ä¸­æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ logging.pattern.file=%d{yyyy-MM-dd} [%thread] %-5level %logger{50} - %msg%n &lt;!-- æ—¥å¿—è®°å½•å™¨ï¼Œæ—¥æœŸæ»šåŠ¨è®°å½• --&gt; &lt;appender name=&quot;FILE_ERROR&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt; &lt;!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„åŠæ–‡ä»¶å --&gt; &lt;file&gt;${LOG_PATH}/log_error.log&lt;/file&gt; &lt;!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• --&gt; &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt; &lt;!-- å½’æ¡£çš„æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„ï¼Œ%d{yyyy-MM-dd}æŒ‡å®šæ—¥æœŸæ ¼å¼ï¼Œ%iæŒ‡å®šç´¢å¼• --&gt; &lt;fileNamePattern&gt;${LOG_PATH}/error/log-error-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt; &lt;!-- é™¤æŒ‰æ—¥å¿—è®°å½•ä¹‹å¤–ï¼Œè¿˜é…ç½®äº†æ—¥å¿—æ–‡ä»¶ä¸èƒ½è¶…è¿‡2Mï¼Œè‹¥è¶…è¿‡2Mï¼Œæ—¥å¿—æ–‡ä»¶ä¼šä»¥ç´¢å¼•0å¼€å§‹ï¼Œ å‘½åæ—¥å¿—æ–‡ä»¶ï¼Œä¾‹å¦‚log-error-2013-12-21.0.log --&gt; &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt; &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt; &lt;/timeBasedFileNamingAndTriggeringPolicy&gt; &lt;/rollingPolicy&gt; &lt;!-- è¿½åŠ æ–¹å¼è®°å½•æ—¥å¿— --&gt; &lt;append&gt;true&lt;/append&gt; &lt;!-- æ—¥å¿—æ–‡ä»¶çš„æ ¼å¼ --&gt; &lt;encoder class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt; &lt;pattern&gt;${FILE_LOG_PATTERN}&lt;/pattern&gt; &lt;charset&gt;utf-8&lt;/charset&gt; &lt;/encoder&gt; &lt;!-- æ­¤æ—¥å¿—æ–‡ä»¶åªè®°å½•errorçº§åˆ«çš„ --&gt; &lt;filter class=&quot;ch.qos.logback.classic.filter.LevelFilter&quot;&gt; &lt;level&gt;error&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; å¯ä»¥æŒ‰ç…§slfjçš„æ—¥å¿—é€‚é…å›¾ï¼Œè¿›è¡Œç›¸å…³çš„åˆ‡æ¢ ideaä¾èµ–åˆ†æž-pom.xml-å³é”®-Diagrams-Show Dependencies SpringBootä¸ŽWebå¼€å‘ä½¿ç”¨SpringBootåˆ›å»ºSpringBootåº”ç”¨ï¼Œé€‰ä¸­æˆ‘ä»¬éœ€è¦çš„æ¨¡å—ï¼›SpringBootå·²ç»é»˜è®¤å°†è¿™äº›åœºæ™¯é…ç½®å¥½äº†ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šå°‘é‡é…ç½®å°±å¯ä»¥è¿è¡Œèµ·æ¥ï¼›è‡ªå·±ç¼–å†™ä¸šåŠ¡é€»è¾‘ä»£ç ï¼›è‡ªåŠ¨é…ç½®åŽŸç†è¿™ä¸ªåœºæ™¯SpringBootå¸®æˆ‘ä»¬é…ç½®äº†ä»€ä¹ˆï¼Œèƒ½ä¸èƒ½ä¿®æ”¹ï¼Œèƒ½ä¿®æ”¹å“ªäº›é…ç½®ï¼Œèƒ½ä¸èƒ½æ‰©å±• xxxAutoConfiguration:å¸®æˆ‘ä»¬ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç»„ä»¶ xxxPropertiesï¼šé…ç½®ç±»æ¥å°è£…é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹ SpringBootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™ResourcePropertieså¯ä»¥è®¾ç½®é™æ€èµ„æºæœ‰å…³çš„å‚æ•°ï¼Œç¼“å­˜æ—¶é—´ç­‰ @ConfigurationProperties(prefix = &quot;spring.resources&quot;, ignoreUnknownFields = false) public class ResourceProperties { private static final String[] CLASSPATH_RESOURCE_LOCATIONS = { &quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot; }; /** * Locations of static resources. Defaults to classpath:[/META-INF/resources/, * /resources/, /static/, /public/]. @Override public void addResourceHandlers(ResourceHandlerRegistry registry) { if (!this.resourceProperties.isAddMappings()) { logger.debug(&quot;Default resource handling disabled&quot;); return; } Duration cachePeriod = this.resourceProperties.getCache().getPeriod(); CacheControl cacheControl = this.resourceProperties.getCache().getCachecontrol().toHttpCacheControl(); if (!registry.hasMappingForPattern(&quot;/webjars/**&quot;)) { customizeResourceHandlerRegistration(registry.addResourceHandler(&quot;/webjars/**&quot;) .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;) .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl)); } String staticPathPattern = this.mvcProperties.getStaticPathPattern(); if (!registry.hasMappingForPattern(staticPathPattern)) { customizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern) .addResourceLocations(getResourceLocations(this.resourceProperties.getStaticLocations())) .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl)); } } æ‰€æœ‰/webjars/**éƒ½åŽ»classpath:/META-INF/resources/webjars/æ‰¾èµ„æº webjars:ä»¥jaråŒ…çš„æ–¹å¼å¼•å…¥é™æ€èµ„æºï¼› https://www.webjars.org/ http://localhost:8080/webjars/jquery/3.5.1/jquery.js &lt;!--å¼•å…¥jquery-webjar--&gt; &lt;dependency&gt; &lt;groupId&gt;org.webjars&lt;/groupId&gt; &lt;artifactId&gt;jquery&lt;/artifactId&gt; &lt;version&gt;3.5.1&lt;/version&gt; &lt;/dependency&gt; /**è®¿é—®å½“å‰é¡¹ç›®çš„ä»»ä½•èµ„æºï¼ˆé™æ€èµ„æºæ–‡ä»¶å¤¹ï¼‰ &quot;/&quot;ï¼šå½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„ &quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/ ä»¥ä»€ä¹ˆæ ·çš„è·¯å¾„è®¿é—®é™æ€èµ„æºspring.mvc.static-path-pattern=/static/**Spring Boot 2.3è¦åœ¨é…ç½®æ–‡ä»¶é…ç½®é™æ€èµ„æºè®¿é—®è·¯å¾„ æ¬¢è¿Žé¡µï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„index.htmlé¡µé¢ï¼›è¢«â€/**â€œæ˜ å°„ æ‰€æœ‰çš„**/favicon.icoéƒ½æ˜¯åœ¨é™æ€èµ„æºæ–‡ä»¶ä¸‹æ‰¾ æ¨¡æ¿å¼•æ“ŽThymeleaf è¯­æ³•æ›´ç®€å•ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ å¼•å…¥Thymeleaf&lt;!--æ¨¡æ¿å¼•æ“Ž--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt; &lt;/dependency&gt; @ConfigurationProperties(prefix = &quot;spring.thymeleaf&quot;) public class ThymeleafProperties { private static final Charset DEFAULT_ENCODING = StandardCharsets.UTF_8; //åªè¦æˆ‘ä»¬æŠŠhtmlé¡µé¢æ”¾åœ¨classpath:/templates/ï¼Œthymeleafå°±èƒ½è‡ªåŠ¨æ¸²æŸ“ public static final String DEFAULT_PREFIX = &quot;classpath:/templates/&quot;; public static final String DEFAULT_SUFFIX = &quot;.html&quot;; /** * Whether to check that the template exists before rendering it. */ private boolean checkTemplate = true; å¯¼å…¥thymeleafçš„åç§°ç©ºé—´ &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt; è¯­æ³•å‚è€ƒthymeleafæ‰‹å†Œ SpringMVCè‡ªåŠ¨é…ç½®Spring Bootè‡ªåŠ¨é…ç½®å¥½äº†SpringMVCä»¥ä¸‹æ˜¯SpringBootå¯¹SpringMVCçš„é»˜è®¤ The auto-configuration adds the following features on top of Springâ€™s defaults: Inclusion of ContentNegotiatingViewResolver and BeanNameViewResolver beans. è‡ªåŠ¨é…ç½®äº†ViewResolverï¼ˆè§†å›¾è§£æžå™¨ï¼šæ ¹æ®æ–¹æ³•çš„è¿”å›žå€¼å¾—åˆ°è§†å›¾å¯¹è±¡ï¼ˆViewï¼‰è§†å›¾å¯¹è±¡å†³å®šå¦‚ä½•æ¸²æŸ“ï¼Œæ˜¯è½¬å‘è¿˜æ˜¯é‡å®šå‘ï¼‰ ContentNegotiatingViewResolverç¬¦åˆæ‰€æœ‰çš„è§†å›¾è§£æžå™¨çš„ å¦‚ä½•å®šåˆ¶ï¼šæˆ‘ä»¬å¯ä»¥ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªè§†å›¾è§£æžå™¨@Beanï¼›è‡ªåŠ¨å°†å…¶ç»„åˆè¿›æ¥ å¦‚ä½•éªŒè¯æ˜¯å¦æ·»åŠ è¿›æ¥äº†-æœç´¢DispatcherServlet-doDispatch-åœ¨è¿™æ‰“æ–­ç‚¹ï¼Œç”¨debugæ–¹å¼è¿è¡Œ éšä¾¿è¯·æ±‚ä¸€ä¸ªé¡µé¢å¯ä»¥çœ‹åˆ°DispatcherServletçš„viewResolversé‡Œé¢å·²ç»åŒ…å«äº†æˆ‘ä»¬è‡ªå®šä¹‰çš„è§†å›¾è§£æžå™¨ Support for serving static resources, including support for WebJars (covered later in this document)).é™æ€èµ„æºæ–‡ä»¶å¤¹è·¯å¾„ï¼Œwebjars Automatic registration of Converter, GenericConverter, and Formatter beans. Converter:è½¬æ¢å™¨ ç±»åž‹è½¬æ¢ä½¿ç”¨ Formatter:æ ¼å¼åŒ–å™¨æ—¥æœŸçš„è½¬æ¢ Support for HttpMessageConverters (covered later in this document). HttpMessageConverters:SpringMVCç”¨æ¥è½¬æ¢Httpè¯·æ±‚å’Œå“åº”çš„ï¼›Userâ€“Json Automatic registration of MessageCodesResolver (covered later in this document). å®šä¹‰é”™è¯¯ä»£ç ç”Ÿæˆè§„åˆ™çš„ Static index.html support.(é™æ€é¦–é¡µè®¿é—®) Custom Favicon support (covered later in this document).ï¼ˆfavicon.icoï¼‰ Automatic use of a ConfigurableWebBindingInitializer bean (covered later in this document). æˆ‘ä»¬å¯ä»¥é…ç½®ä¸€ä¸ªConfigurableWebBindingInitializeræ¥æ›¿æ¢é»˜è®¤çš„ åˆå§‹åŒ–WebDataBinder;è¯·æ±‚æ•°æ®===JavaBean If you want to keep those Spring Boot MVC customizations and make more MVC customizations (interceptors, formatters, view controllers, and other features), you can add your own @Configuration class of type WebMvcConfigurer but without @EnableWebMvc. ä½¿ç”¨WebMvcConfigurerAdapteræ‰©å±•SpringMVCçš„åŠŸèƒ½ç¼–å†™ä¸€ä¸ªé…ç½®ç±»ï¼ˆ@Configurationï¼‰,æ˜¯WebMvcConfigurerAdapterç±»åž‹ï¼›ä¸èƒ½æ ‡æ³¨@EnableWebMvcã€‚ æ—¢ä¿ç•™äº†æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ï¼Œä¹Ÿèƒ½ç”¨æˆ‘ä»¬æ‰©å±•çš„é…ç½® //ä½œç”¨ï¼šè¯·æ±‚meçš„æ—¶å€™ä¼šåˆ°successé¡µé¢ @Configuration public class MyConfig extends WebMvcConfigurerAdapter{ @Override public void addViewControllers(ViewControllerRegistry registry) { registry.addViewController(&quot;/me&quot;).setViewName(&quot;success&quot;); } } åŽŸç†ï¼š WebMvcAutoConfiguration æ˜¯SpringMVCçš„è‡ªåŠ¨é…ç½®ç±» åœ¨åšå…¶ä»–è‡ªåŠ¨é…ç½®æ—¶ä¼šå¯¼å…¥@Import(EnableWebMvcConfiguration.class) @Configuration(proxyBeanMethods = false) public static class EnableWebMvcConfiguration extends DelegatingWebMvcConfiguration implements ResourceLoaderAware { private final WebMvcConfigurerComposite configurers = new WebMvcConfigurerComposite(); //ä»Žå®¹å™¨ä¸­èŽ·å–æ‰€æœ‰WebMvcConfigurerçš„é…ç½® @Autowired(required = false) public void setConfigurers(List&lt;WebMvcConfigurer&gt; configurers) { if (!CollectionUtils.isEmpty(configurers)) { this.configurers.addWebMvcConfigurers(configurers); //ä¸€ä¸ªå‚è€ƒå®žçŽ°ï¼Œå°†æ‰€æœ‰çš„WebMvcConfigurerç›¸å…³é…ç½®éƒ½æ¥ä¸€èµ·è°ƒç”¨ @Override public void addViewControllers(ViewControllerRegistry registry) { for (WebMvcConfigurer delegate : this.delegates) { delegate.addViewControllers(registry); } } } } å®¹å™¨ä¸­æ‰€æœ‰çš„WebMvcConfigureréƒ½ä¼šä¸€èµ·èµ·ä½œç”¨ï¼ŒåŒ…æ‹¬è‡ªå·±å†™çš„é…ç½®ç±» å…¨é¢æŽ¥ç®¡SpringMVCSpringBootå¯¹SpringMVCçš„è‡ªåŠ¨é…ç½®ä¸éœ€è¦ï¼Œæ‰€æœ‰éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±é…ï¼Œåªéœ€è¦åœ¨é…ç½®ç±»ä¸­æ·»åŠ @EnableWebMvc åŽŸç†ï¼š @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.TYPE) @Documented @Import(DelegatingWebMvcConfiguration.class) public @interface EnableWebMvc {//è¿™ä¸ªæ³¨è§£ä¸Šå¯¼å…¥äº†DelegatingWebMvcConfiguration } @Configuration(proxyBeanMethods = false) public class DelegatingWebMvcConfiguration extends WebMvcConfigurationSupport {//DelegatingWebMvcConfiguration.classåˆç»§æ‰¿äº†WebMvcConfigurationSupport @Configuration(proxyBeanMethods = false) @ConditionalOnWebApplication(type = Type.SERVLET) @ConditionalOnClass({ Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class }) //å®¹å™¨ç§æ²¡æœ‰ï¼ˆWebMvcConfigurationSupportï¼‰è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆ @ConditionalOnMissingBean(WebMvcConfigurationSupport.class) @AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10) @AutoConfigureAfter({ DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class, ValidationAutoConfiguration.class }) public class WebMvcAutoConfiguration { @EnableWebMvcå°†WebMvcConfigurationSupportç»„ä»¶å¯¼å…¥è¿›æ¥ï¼› å¯¼å…¥çš„WebMvcConfigurationSupportåªæ˜¯SpringMVCæœ€åŸºæœ¬çš„åŠŸèƒ½ï¼› å¦‚ä½•ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½® SpringBootåœ¨è‡ªåŠ¨é…ç½®å¾ˆå¤šç»„ä»¶çš„æ—¶å€™ï¼Œå…ˆçœ‹å®¹å™¨ä¸­æœ‰æ²¡æœ‰ç”¨æˆ·è‡ªå·±é…ç½®çš„ï¼ˆ@Bean,@Componentï¼‰å¦‚æžœæœ‰å°±ç”¨ç”¨æˆ·é…ç½®çš„ï¼Œå¦‚æžœæ²¡æœ‰æ‰è‡ªåŠ¨é…ç½®ï¼›å¦‚æžœæœ‰äº›ç»„ä»¶å¯ä»¥æœ‰å¤šä¸ªï¼Œä»–æ˜¯å°†ç”¨æˆ·é…ç½®çš„å’Œè‡ªå·±é»˜è®¤çš„ç»„åˆèµ·æ¥ åœ¨SpringBootç§ä¼šæœ‰éžå¸¸å¤šçš„xxxConfigurerå¸®åŠ©æˆ‘ä»¬è¿›è¡Œæ‰©å±•é…ç½® ç™»é™†é¡µé¢ //æ‰€æœ‰çš„WebMvcConfigurerAdapterç»„ä»¶éƒ½ä¼šä¸€èµ·èµ·ä½œç”¨ @Bean//å°†ç»„ä»¶æ³¨å†Œåˆ°å®¹å™¨ä¸­ public WebMvcConfigurerAdapter webMvcConfigurerAdapter(){ WebMvcConfigurerAdapter adapter = new WebMvcConfigurerAdapter() { @Override public void addViewControllers(ViewControllerRegistry registry) { registry.addViewController(&quot;/&quot;).setViewName(&quot;login&quot;); registry.addViewController(&quot;/login.html&quot;).setViewName(&quot;login&quot;); } }; return adapter; } å›½é™…åŒ– ç¼–å†™å›½é™…åŒ–æ–‡ä»¶ï¼ŒæŠ½å–é¡µé¢éœ€è¦æ˜¾ç¤ºçš„å›½é™…åŒ–æ¶ˆæ¯ SpringBootè‡ªåŠ¨é…ç½®å¥½äº†ç®¡ç†å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„ç»„ä»¶ @Configuration(proxyBeanMethods = false)@ConditionalOnMissingBean(name = AbstractApplicationContext.MESSAGE_SOURCE_BEAN_NAME, search = SearchStrategy.CURRENT)@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)@Conditional(ResourceBundleCondition.class)@EnableConfigurationPropertiespublic class MessageSourceAutoConfiguration { private static final Resource[] NO_RESOURCES = {}; @Bean @ConfigurationProperties(prefix = â€œspring.messagesâ€) public MessageSourceProperties messageSourceProperties() { return new MessageSourceProperties(); } @Bean public MessageSource messageSource(MessageSourceProperties properties) { ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource(); if (StringUtils.hasText(properties.getBasename())) { //è®¾ç½®å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„åŸºç¡€å messageSource.setBasenames(StringUtils .commaDelimitedListToStringArray(StringUtils.trimAllWhitespace(properties.getBasename()))); } if (properties.getEncoding() != null) { messageSource.setDefaultEncoding(properties.getEncoding().name()); } messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale()); Duration cacheDuration = properties.getCacheDuration(); if (cacheDuration != null) { messageSource.setCacheMillis(cacheDuration.toMillis()); } messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat()); messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage()); return messageSource; } åŽ»é¡µé¢èŽ·å–å›½é™…åŒ–çš„å€¼ idea file-setting-FileEncodings-fileEncodeingå°†propertiesç¼–ç æ”¹æˆUTF-8ï¼Œè®©ä»–è‡ªåŠ¨è½¬æˆasciiç ï¼ˆåªå¯¹å½“å‰é¡¹ç›®ç”Ÿæ•ˆï¼‰è¦æ”¹é»˜è®¤çš„åœ¨file-Other Setting-DefaultSettingæ¥ä¿®æ”¹å…¨å±€é»˜è®¤è®¾ç½®]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>springboot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mongo]]></title>
    <url>%2F2020%2F05%2F23%2Fmongo%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯MongoDB ?MongoDB æ˜¯ç”±C++è¯­è¨€ç¼–å†™çš„ï¼Œæ˜¯ä¸€ä¸ªåŸºäºŽåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„å¼€æºæ•°æ®åº“ç³»ç»Ÿã€‚åœ¨é«˜è´Ÿè½½çš„æƒ…å†µä¸‹ï¼Œæ·»åŠ æ›´å¤šçš„èŠ‚ç‚¹ï¼Œå¯ä»¥ä¿è¯æœåŠ¡å™¨æ€§èƒ½ã€‚MongoDB æ—¨åœ¨ä¸ºWEBåº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚MongoDB å°†æ•°æ®å­˜å‚¨ä¸ºä¸€ä¸ªæ–‡æ¡£ï¼Œæ•°æ®ç»“æž„ç”±é”®å€¼(key=&gt;value)å¯¹ç»„æˆã€‚MongoDB æ–‡æ¡£ç±»ä¼¼äºŽ JSON å¯¹è±¡ã€‚å­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ï¼Œæ•°ç»„åŠæ–‡æ¡£æ•°ç»„ã€‚ NoSQLï¼ŒæŒ‡çš„æ˜¯éžå…³ç³»åž‹çš„æ•°æ®åº“ã€‚NoSQLæœ‰æ—¶ä¹Ÿç§°ä½œNot Only SQLçš„ç¼©å†™ï¼Œæ˜¯å¯¹ä¸åŒäºŽä¼ ç»Ÿçš„å…³ç³»åž‹æ•°æ®åº“çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ç»Ÿç§°ã€‚NoSQLç”¨äºŽè¶…å¤§è§„æ¨¡æ•°æ®çš„å­˜å‚¨ã€‚ï¼ˆä¾‹å¦‚è°·æ­Œæˆ–Facebookæ¯å¤©ä¸ºä»–ä»¬çš„ç”¨æˆ·æ”¶é›†ä¸‡äº¿æ¯”ç‰¹çš„æ•°æ®ï¼‰ã€‚è¿™äº›ç±»åž‹çš„æ•°æ®å­˜å‚¨ä¸éœ€è¦å›ºå®šçš„æ¨¡å¼ï¼Œæ— éœ€å¤šä½™æ“ä½œå°±å¯ä»¥æ¨ªå‘æ‰©å±•ã€‚ ä¸»è¦ç‰¹ç‚¹ MongoDB æ˜¯ä¸€ä¸ªé¢å‘æ–‡æ¡£å­˜å‚¨çš„æ•°æ®åº“ï¼Œæ“ä½œèµ·æ¥æ¯”è¾ƒç®€å•å’Œå®¹æ˜“ã€‚ ä½ å¯ä»¥åœ¨MongoDBè®°å½•ä¸­è®¾ç½®ä»»ä½•å±žæ€§çš„ç´¢å¼• (å¦‚ï¼šFirstName=â€Sameerâ€,Address=â€8 Gandhi Roadâ€)æ¥å®žçŽ°æ›´å¿«çš„æŽ’åºã€‚ ä½ å¯ä»¥é€šè¿‡æœ¬åœ°æˆ–è€…ç½‘ç»œåˆ›å»ºæ•°æ®é•œåƒï¼Œè¿™ä½¿å¾—MongoDBæœ‰æ›´å¼ºçš„æ‰©å±•æ€§ã€‚ å¦‚æžœè´Ÿè½½çš„å¢žåŠ ï¼ˆéœ€è¦æ›´å¤šçš„å­˜å‚¨ç©ºé—´å’Œæ›´å¼ºçš„å¤„ç†èƒ½åŠ›ï¼‰ ï¼Œå®ƒå¯ä»¥åˆ†å¸ƒåœ¨è®¡ç®—æœºç½‘ç»œä¸­çš„å…¶ä»–èŠ‚ç‚¹ä¸Šè¿™å°±æ˜¯æ‰€è°“çš„åˆ†ç‰‡ã€‚ Mongoæ”¯æŒä¸°å¯Œçš„æŸ¥è¯¢è¡¨è¾¾å¼ã€‚æŸ¥è¯¢æŒ‡ä»¤ä½¿ç”¨JSONå½¢å¼çš„æ ‡è®°ï¼Œå¯è½»æ˜“æŸ¥è¯¢æ–‡æ¡£ä¸­å†…åµŒçš„å¯¹è±¡åŠæ•°ç»„ã€‚ MongoDb ä½¿ç”¨update()å‘½ä»¤å¯ä»¥å®žçŽ°æ›¿æ¢å®Œæˆçš„æ–‡æ¡£ï¼ˆæ•°æ®ï¼‰æˆ–è€…ä¸€äº›æŒ‡å®šçš„æ•°æ®å­—æ®µ ã€‚ Mongodbä¸­çš„Map/reduceä¸»è¦æ˜¯ç”¨æ¥å¯¹æ•°æ®è¿›è¡Œæ‰¹é‡å¤„ç†å’Œèšåˆæ“ä½œã€‚ Mapå’ŒReduceã€‚Mapå‡½æ•°è°ƒç”¨emit(key,value)éåŽ†é›†åˆä¸­æ‰€æœ‰çš„è®°å½•ï¼Œå°†keyä¸Žvalueä¼ ç»™Reduceå‡½æ•°è¿›è¡Œå¤„ç†ã€‚ Mapå‡½æ•°å’ŒReduceå‡½æ•°æ˜¯ä½¿ç”¨Javascriptç¼–å†™çš„ï¼Œå¹¶å¯ä»¥é€šè¿‡db.runCommandæˆ–mapreduceå‘½ä»¤æ¥æ‰§è¡ŒMapReduceæ“ä½œã€‚ GridFSæ˜¯MongoDBä¸­çš„ä¸€ä¸ªå†…ç½®åŠŸèƒ½ï¼Œå¯ä»¥ç”¨äºŽå­˜æ”¾å¤§é‡å°æ–‡ä»¶ã€‚ MongoDBå…è®¸åœ¨æœåŠ¡ç«¯æ‰§è¡Œè„šæœ¬ï¼Œå¯ä»¥ç”¨Javascriptç¼–å†™æŸä¸ªå‡½æ•°ï¼Œç›´æŽ¥åœ¨æœåŠ¡ç«¯æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥æŠŠå‡½æ•°çš„å®šä¹‰å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œä¸‹æ¬¡ç›´æŽ¥è°ƒç”¨å³å¯ã€‚ MongoDBæ”¯æŒå„ç§ç¼–ç¨‹è¯­è¨€:RUBYï¼ŒPYTHONï¼ŒJAVAï¼ŒC++ï¼ŒPHPï¼ŒC#ç­‰å¤šç§è¯­è¨€ã€‚ MongoDBå®‰è£…ç®€å•ã€‚ å®‰è£… ä¸‹è½½mongodb-linux-x86_64-3.6.3.tar.gz è§£åŽ‹tar -zxvf mongodb-linux-x86_64-3.0.6.tgz åœ¨ä¸ŽbinåŒçº§çš„ç›®å½•ä¸‹å»ºç«‹dataæ–‡ä»¶å¤¹ mongo.configæ–‡ä»¶å†…å®¹ 12345678port=27017logpath=/airthink/mongodb-linux-x86_64-3.6.3/mongod.logpidfilepath=/airthink/mongodb-linux-x86_64-3.6.3/mongod.pidlogappend=truefork=truemaxConns=3000dbpath=/airthink/mongodb-linux-x86_64-3.6.3/dataauth=true å¯åŠ¨./mongodb-linux-x86_64-3.6.3/bin/mongo 1234567var schema = db.system.version.findOne(&#123;_id:&quot;authSchema&quot;&#125;);//é©±åŠ¨ç‰ˆæœ¬5--SCRAM-SHA-1éœ€è¦ä¿®æ”¹æˆï¼š3--Mongodb-CRschema. currentVersion = 3;db.system.version.save(schema);db.createUser(&#123;user:&quot;admin&quot;,pwd:&quot;mypass&quot;,roles:[&quot;readWriteAnyDatabase&quot;, &quot;userAdminAnyDatabase&quot;, &quot;dbAdminAnyDatabase&quot;]&#125;);windowsä¸‹çš„å¯åŠ¨å‘½ä»¤åˆ°binç›®å½•ä¸‹ start mongod MongoDBç”¨æˆ·è§’è‰²é…ç½® åŸºæœ¬çŸ¥è¯†ä»‹ç»MongoDBåŸºæœ¬çš„è§’è‰² æ•°æ®åº“ç”¨æˆ·è§’è‰²ï¼šreadã€readWrite; æ•°æ®åº“ç®¡ç†è§’è‰²ï¼šdbAdminã€dbOwnerã€userAdminï¼› é›†ç¾¤ç®¡ç†è§’è‰²ï¼šclusterAdminã€clusterManagerã€clusterMonitorã€hostManagerï¼› å¤‡ä»½æ¢å¤è§’è‰²ï¼šbackupã€restoreï¼› æ‰€æœ‰æ•°æ®åº“è§’è‰²ï¼šreadAnyDatabaseã€readWriteAnyDatabaseã€userAdminAnyDatabaseã€dbAdminAnyDatabase è¶…çº§ç”¨æˆ·è§’è‰²ï¼šroot (è¿™é‡Œè¿˜æœ‰å‡ ä¸ªè§’è‰²é—´æŽ¥æˆ–ç›´æŽ¥æä¾›äº†ç³»ç»Ÿè¶…çº§ç”¨æˆ·çš„è®¿é—®ï¼ˆdbOwner ã€userAdminã€userAdminAnyDatabase,å…¶ä¸­MongoDBé»˜è®¤æ˜¯æ²¡æœ‰å¼€å¯ç”¨æˆ·è®¤è¯çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ¸¸å®¢ä¹Ÿæ‹¥æœ‰è¶…çº§ç®¡ç†å‘˜çš„æƒé™ã€‚userAdminAnyDatabaseï¼šæœ‰åˆ†é…è§’è‰²å’Œç”¨æˆ·çš„æƒé™ï¼Œä½†æ²¡æœ‰æŸ¥å†™çš„æƒé™) è¿žæŽ¥åˆ°MongoDBæœåŠ¡å™¨12345678910111213141516171819202122232425262728293031å»ºåº“æ“ä½œå¼€å§‹./mongodb-linux-x86_64-3.6.3/bin/mongo è¿›å…¥mongo shelluse admin(ä½¿ç”¨)db.createUser(&#123;user:&quot;root&quot;,pwd:&quot;password&quot;,roles:[&quot;root&quot;]&#125;)//åˆ›å»ºrootç”¨æˆ·db.createUser(&#123;user:&quot;admin&quot;,pwd:&quot;admin&quot;,roles:[&#123;role:&quot;userAdminAnyDatabase&quot;,db:&quot;admin&quot;&#125;]&#125;)ï¼ˆåˆ›å»ºadminç”¨æˆ·ï¼‰db.auth(&apos;admin&apos;, &apos;admin&apos;);ï¼ˆæŽˆæƒï¼‰ä¿®æ”¹mongod.confæ–‡ä»¶security:authorization: enabled//å¯ç”¨æŽˆæƒé‡å¯MongoDBæœåŠ¡å™¨service mongod restartåˆ›å»ºæ•°æ®åº“è¯»å†™æƒé™ç”¨æˆ·use admindb.auth(&quot;admin&quot;,&quot;password&quot;);use ballmatchdb.createUser(&#123; user: &quot;baidu&quot;, pwd: &quot;password&quot;, roles: [&#123;role: &quot;readWrite&quot;,db: &quot;baidu&quot;&#125;]&#125;) Javaç¨‹åºè¿žæŽ¥MongoDB1234567891011MongoCredential credential = MongoCredential.createCredential(&quot;username&quot;, &quot;dbName&quot;, &quot;password&quot;.toCharArray());ServerAddress serverAddress = new ServerAddress(&quot;192.168.10.242&quot;, 27017);MongoClient mongoClient = new MongoClient(serverAddress, Arrays.asList(credential));DB db = mongoClient.getDB(&quot;dbName&quot;);returndb;//æ–¹å¼äºŒString sURI = String.format(&quot;mongodb://%s:%s@%s:%d/%s&quot;, &quot;username&quot;, &quot;password&quot;, &quot;192.168.10.242&quot;, 27017, &quot;dbName&quot;); MongoClientURI uri = new MongoClientURI(sURI); MongoClient mongoClient = new MongoClient(uri); DB db = mongoClient.getDB(&quot;dbName&quot;); å‘½ä»¤ä»‹ç»12345678910111213141516171819ä¿®æ”¹ç”¨æˆ·å¯†ç db.updateUser( &quot;admin&quot;,&#123;pwd:&quot;password&quot;&#125;);å¯†ç è®¤è¯db.auth(&quot;admin&quot;,&quot;password&quot;);MongoDBè¿žæŽ¥ä¿¡æ¯æŸ¥è¯¢db.serverStatus().connections;å…³é—­MongoDBæœåŠ¡use admin;db.shutdownServer();åˆ é™¤ç”¨æˆ·åˆ é™¤ç”¨æˆ·(éœ€è¦rootæƒé™ï¼Œä¼šå°†æ‰€æœ‰æ•°æ®åº“ä¸­çš„footballç”¨æˆ·åˆ é™¤)db.system.users.remove(&#123;user:&quot;baidu&quot;&#125;);åˆ é™¤ç”¨æˆ·(æƒé™è¦æ±‚æ²¡æœ‰é‚£ä¹ˆé«˜ï¼Œåªåˆ é™¤æœ¬æ•°æ®ä¸­çš„footballç”¨æˆ·)db.dropUser(&quot;baidu&quot;); mongoTemplateä½¿ç”¨ç¤ºä¾‹å¯¹åŒ¹é…åˆ°çš„æ•°æ®è¿›è¡Œæ›´æ–°(inc)12345678910111213141516Query query = new Query();query.addCriteria(Criteria.where(&quot;accountName&quot;).is(username));if (null != password)&#123; query.addCriteria(Criteria.where(&quot;accountPwd&quot;).is(password));&#125;Account account = this.mongoTemplate.findOne(query, Account.class);if (account != null) &#123; Update update = new Update(); update.inc(&quot;loginTimes&quot;, 1); this.mongoTemplate.updateFirst(query, update, Account.class);//æŸ¥æ‰¾å¹¶æ›´æ–°&#125;mongoTemplate.updateFirst(Query.query(Criteria.where(&quot;_id&quot;).is(favor.getTypeId())),new Update().inc(&quot;favorTimes&quot;, 1), News.class);mongoTemplate.updateFirst(Query.query(Criteria.where(&quot;_id&quot;).is(favor.getTypeId())),new Update().inc(&quot;favorTimes&quot;, -1), News.class); æŸ¥è¯¢ä¸€æ¡è®°å½•å’Œä¿å­˜ï¼ˆfindOne/saveï¼‰12345Account account = mongoTemplate.findOne(Query.query(Criteria.where(&quot;accountName&quot;).is(accountName)),Account.class);account.setAccountPwd(passwd);mongoTemplate.save(account); å¤šæ¡ä»¶åŒ¹é…ï¼ˆå¹¶çš„å…³ç³»ï¼‰123456789Criteria criteria = new Criteria();criteria.andOperator(Criteria.where(&quot;phone&quot;).is(phone), Criteria.where(&quot;status&quot;).is(0));List&lt;VerifyCode&gt; codes = mongoTemplate.find(Query.query(criteria), VerifyCode.class);Criteria criteria = new Criteria();criteria.andOperator(Criteria.where(&quot;entityID&quot;).is(entityID), Criteria.where(&quot;accountType&quot;).is(accountType), Criteria.where(&quot;weUnionId&quot;).ne(&quot;&quot;).ne(null));Account Account = mongoTemplate.findOne(Query.query(criteria), Account.class);Boolean isFavor = mongoTemplate.exists(Query.query(Criteria.where(&quot;typeId&quot;).is(favor.getTypeId()).and(&quot;type&quot;).is(favor.getType()).and(&quot;userId&quot;).is(favor.getUserId())), Favor.class); å¤šæ¡ä»¶åŒ¹é…ï¼ˆæˆ–çš„å…³ç³»ï¼‰123Criteria criteria = new Criteria();criteria.orOperator(Criteria.where(&quot;status&quot;).is(1), Criteria.where(&quot;status&quot;).is(0));List&lt;VerifyCode&gt; codes = mongoTemplate.find(Query.query(criteria), VerifyCode.class); æ ¹æ®idæŸ¥æ‰¾å¹¶åˆ é™¤12Account account = mongoTemplate.findById(id, Account.class); mongoTemplate.remove(account); è®¡æ•°1long count = mongoTemplate.count(Query.query(Criteria.where(&quot;accountName&quot;).is(accountName)), Account.class); æ¨¡ç³ŠåŒ¹é…å¹¶æŽ’åº123Criteria criteria = new Criteria();criteria.andOperator(Criteria.where(&quot;province&quot;).regex(province));//æ­£åˆ™mongoTemplate.find(Query.query(criteria).with(new Sort(Direction.ASC, &quot;order&quot;)), Bbatch.class); distinctæŸ¥è¯¢1234 DBObject dbObject = new BasicDBObject(&quot;schoolId&quot;, bschool.get_id());List&lt;String&gt; provinces = mongoTemplate.getCollection(mongoTemplate.getCollectionName(BschoolScoreline.class)) .distinct(&quot;province&quot;, dbObject);bschool.setProvinces(provinces); æŸ¥æ‰¾å¹¶æ‰€æœ‰æŽ’åº1mongoTemplate.find(new Query().with(new Sort(Direction.ASC, &quot;order&quot;,&quot;createTime&quot;)), Bschool.class); inæŸ¥è¯¢1List&lt;MpropValue&gt; mpropValueList = mongoTemplate.find(Query.query(Criteria.where(&quot;propId&quot;).in(mprop1.get_id())), MpropValue.class); è®¾ç½®å”¯ä¸€å­—æ®µ12345678//used æ˜¯1 å°†å…¶ä»–æ‰€æœ‰æ˜¯1çš„æ›´æ–°ä¸º0 if(address.getUsed()==1)&#123; Query q = new Query(Criteria.where(&quot;userId&quot;).is(user.get_id()));//æŸ¥è¯¢ Update u = new Update().set(&quot;used&quot;,0); BulkOperations ops = mongoTemplate.bulkOps(BulkOperations.BulkMode.UNORDERED, &quot;address&quot;); ops.updateMulti(q,u);//å…¨éƒ¨æ›´æ–° ops.execute();&#125; æ’å…¥å¤šæ¡æ•°æ®123456public ReturnStatus upsert(List&lt;BspecialLink&gt; specialLinks) &#123; ReturnStatus status; mongoTemplate.insertAll(specialLinks); status = new ReturnStatus(true); return status;&#125; èŽ·å–æ•°æ®åº“æ‰€æœ‰é›†åˆåç§°1Set&lt;String&gt; sets = mongoTemplage.getDb().getCollectionNames(); æŸ¥è¯¢å½“å¤©æ•°æ®private static Date getStartTime() { Calendar todayStart = Calendar.getInstance(); todayStart.set(Calendar.HOUR_OF_DAY, 0); todayStart.set(Calendar.MINUTE, 0); todayStart.set(Calendar.SECOND, 0); todayStart.set(Calendar.MILLISECOND, 0); return todayStart.getTime(); } private static Date getEndTime() { Calendar todayEnd = Calendar.getInstance(); todayEnd.set(Calendar.HOUR_OF_DAY, 23); todayEnd.set(Calendar.MINUTE, 59); todayEnd.set(Calendar.SECOND, 59); todayEnd.set(Calendar.MILLISECOND, 999); return todayEnd.getTime(); } Criteria criteria = new Criteria(); criteria.andOperator( Criteria.where(&quot;type&quot;).is(type), Criteria.where(&quot;typeId&quot;).is(typeId), Criteria.where(&quot;userId&quot;).is(user.get_id()), Criteria.where(&quot;createTime&quot;).gte(getStartTime()) .lte(getEndTime())); return mongoTemplate.exists(Query.query(criteria), Zan.class); å…¶ä»– åˆ é™¤å­—æ®µ 1db.yourcollection.update(&#123;&#125;,&#123;$unset:&#123;&quot;éœ€è¦åˆ é™¤çš„å­—æ®µ&quot;:&quot;&quot;&#125;&#125;,false,true) å°†åŒ¹é…åˆ°çš„å€¼å…¨éƒ¨æ›´æ–° 1db.getCollection(&quot;bschool&quot;).update(&#123;&quot;state&quot;:0&#125;,&#123;$set:&#123;&quot;state&quot;:&quot;1&quot;&#125;&#125;,&#123;&apos;multi&apos;:true&#125;) db.getCollection(â€œpdfChapterItemâ€).update({}, {$rename : {â€œremarkâ€ : â€œabbrâ€}}, false, true)//æ›´æ–°æ‰€æœ‰å­—æ®µå å»ºç«‹ç´¢å¼• 1db.bschoolScorelineDetail.ensureIndex(&#123;&quot;schoolId&quot;:1,&quot;type&quot;:1,&quot;batch&quot;:1,&quot;province&quot;:1&#125;,&#123;&quot;name&quot;ï¼š&quot;schoolScorelineDetail&quot;&#125;) mongoä¸­å»ºç«‹ç´¢å¼•ç”¨ensureIndex({â€œå­—æ®µ1â€:1,â€å­—æ®µ2â€:â€-1â€},{â€œnameâ€:â€ç´¢å¼•åâ€}) 1å’Œ-1ä»£è¡¨æ­£åºå’Œå€’åº mongoæ•°æ®åº“å¤‡ä»½æ“ä½œ(åœ¨mongoçš„å®‰è£…ç›®å½•çš„binä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤) 123456789101112131415ä¸å¸¦éªŒè¯çš„æ•°æ®åº“å¤‡ä»½ï¼šmongodump -d mrmf -o /tools/test mrmfæ•°æ®åº“å /tools/testè¦å¤‡ä»½åˆ°çš„åœ°æ–¹ä¸å¸¦éªŒè¯çš„æ•°æ®åº“æ¢å¤mongorestore --db mrmf /tools/test/mrmf mrmfæ•°æ®åº“å /tools/testè¦æ¢å¤çš„æ•°æ®å¸¦éªŒè¯çš„æ•°æ®åº“å¤‡ä»½ï¼šmongodump -d mrmf -u admin -p &quot;ie8*kskIkd123&quot; --authenticationDatabase=admin -o /tools/test å¸¦éªŒè¯çš„æ•°æ®åº“æ¢å¤ï¼šmongorestore --db mrmf -u admin -p &quot;ie8*kskIkd123&quot; --authenticationDatabase=admin /tools/test/red å¼€å¯æ…¢æ—¥å¿— 12345678910111213141516171819202122232425262728293031323334353637åœ¨å®¢æˆ·ç«¯è°ƒç”¨db.setProfilingLevel(çº§åˆ«) å‘½ä»¤æ¥å®žæ—¶é…ç½®ã€‚å¯ä»¥é€šè¿‡db.getProfilingLevel()å‘½ä»¤æ¥èŽ·å–å½“å‰çš„Profileçº§åˆ«ã€‚&gt; db.setProfilingLevel(2); &gt; &#123;&quot;was&quot; : 0 , &quot;ok&quot; : 1&#125; &gt; db.getProfilingLevel()ä¸Šé¢æ–œä½“çš„çº§åˆ«å¯ä»¥å–0ï¼Œ1ï¼Œ2 ä¸‰ä¸ªå€¼ï¼Œä»–ä»¬è¡¨ç¤ºçš„æ„ä¹‰å¦‚ä¸‹ï¼š0 â€“ ä¸å¼€å¯1 â€“ è®°å½•æ…¢å‘½ä»¤ (é»˜è®¤ä¸º&gt;100ms)2 â€“ è®°å½•æ‰€æœ‰å‘½ä»¤Profile è®°å½•åœ¨çº§åˆ«1æ—¶ä¼šè®°å½•æ…¢å‘½ä»¤ï¼Œé‚£ä¹ˆè¿™ä¸ªæ…¢çš„å®šä¹‰æ˜¯ä»€ä¹ˆ?ä¸Šé¢æˆ‘ä»¬è¯´åˆ°å…¶é»˜è®¤ä¸º100msï¼Œå½“ç„¶æœ‰é»˜è®¤å°±æœ‰è®¾ç½®ï¼Œå…¶è®¾ç½®æ–¹æ³•å’Œçº§åˆ«ä¸€æ ·æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯é€šè¿‡æ·»åŠ â€“slowmså¯åŠ¨å‚æ•°é…ç½®ã€‚ç¬¬äºŒç§æ˜¯è°ƒç”¨db.setProfilingLevelæ—¶åŠ ä¸Šç¬¬äºŒä¸ªå‚æ•°ï¼šdb.setProfilingLevel( level , slowms ) db.setProfilingLevel( 1 , 10 );Mongo Profile è®°å½•æ˜¯ç›´æŽ¥å­˜åœ¨ç³»ç»Ÿdbé‡Œçš„ï¼Œè®°å½•ä½ç½® system.profile ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åªè¦æŸ¥è¯¢è¿™ä¸ªCollectionçš„è®°å½•å°±å¯ä»¥èŽ·å–åˆ°æˆ‘ä»¬çš„ Profile è®°å½•äº†ã€‚Profile ä¿¡æ¯å†…å®¹è¯¦è§£ï¼šts-è¯¥å‘½ä»¤åœ¨ä½•æ—¶æ‰§è¡Œ.millis Time-è¯¥å‘½ä»¤æ‰§è¡Œè€—æ—¶ï¼Œä»¥æ¯«ç§’è®°.info-æœ¬å‘½ä»¤çš„è¯¦ç»†ä¿¡æ¯.query-è¡¨æ˜Žè¿™æ˜¯ä¸€ä¸ªqueryæŸ¥è¯¢æ“ä½œ.ntoreturn-æœ¬æ¬¡æŸ¥è¯¢å®¢æˆ·ç«¯è¦æ±‚è¿”å›žçš„è®°å½•æ•°.æ¯”å¦‚, findOne()å‘½ä»¤æ‰§è¡Œæ—¶ ntoreturn ä¸º 1.æœ‰limit(n) æ¡ä»¶æ—¶ntoreturnä¸ºn.query-å…·ä½“çš„æŸ¥è¯¢æ¡ä»¶(å¦‚x&gt;3).nscanned-æœ¬æ¬¡æŸ¥è¯¢æ‰«æçš„è®°å½•æ•°.reslen-è¿”å›žç»“æžœé›†çš„å¤§å°.nreturned-æœ¬æ¬¡æŸ¥è¯¢å®žé™…è¿”å›žçš„ç»“æžœé›†.update-è¡¨æ˜Žè¿™æ˜¯ä¸€ä¸ªupdateæ›´æ–°æ“ä½œ.upsert-è¡¨æ˜Župdateçš„upsertå‚æ•°ä¸ºtrue.æ­¤å‚æ•°çš„åŠŸèƒ½æ˜¯å¦‚æžœupdateçš„è®°å½•ä¸å­˜åœ¨ï¼Œåˆ™ç”¨updateçš„æ¡ä»¶insertä¸€æ¡è®°å½•. moved-è¡¨æ˜Žæœ¬æ¬¡updateæ˜¯å¦ç§»åŠ¨äº†ç¡¬ç›˜ä¸Šçš„æ•°æ®ï¼Œå¦‚æžœæ–°è®°å½•æ¯”åŽŸè®°å½•çŸ­ï¼Œé€šå¸¸ä¸ä¼šç§»åŠ¨å½“å‰è®°å½•ï¼Œå¦‚æžœæ–°è®°å½•æ¯”åŽŸè®°å½•é•¿ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šç§»åŠ¨è®°å½•åˆ°å…¶å®ƒä½ç½®ï¼Œè¿™æ—¶å€™ä¼šå¯¼è‡´ç›¸å…³ç´¢å¼•çš„æ›´æ–°.ç£ç›˜æ“ä½œæ›´å¤šï¼ŒåŠ ä¸Šç´¢å¼•æ›´æ–°ï¼Œä¼šä½¿å¾—è¿™æ ·çš„æ“ä½œæ¯”è¾ƒæ…¢. insert-è¿™æ˜¯ä¸€ä¸ªinsertæ’å…¥æ“ä½œ. getmore-è¿™æ˜¯ä¸€ä¸ªgetmore æ“ä½œï¼Œgetmoreé€šå¸¸å‘ç”Ÿåœ¨ç»“æžœé›†æ¯”è¾ƒå¤§çš„æŸ¥è¯¢æ—¶ï¼Œç¬¬ä¸€ä¸ªqueryè¿”å›žäº†éƒ¨åˆ†ç»“æžœï¼ŒåŽç»­çš„ç»“æžœæ˜¯é€šè¿‡getmoreæ¥èŽ·å–çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#ä¸‹é¢æ˜¯ä¸€ä¸ªè¶…è¿‡200msçš„æŸ¥è¯¢è¯­å¥&#123; &quot;op&quot; : &quot;query&quot;, #æ“ä½œç±»åž‹ï¼Œæœ‰insertã€queryã€updateã€removeã€getmoreã€command &quot;ns&quot; : &quot;F10data3.f10_2_8_3_jgcc&quot;, &quot;query&quot; : &#123; #å…·ä½“çš„æŸ¥è¯¢è¯­å¥ åŒ…æ‹¬è¿‡æ»¤æ¡ä»¶ï¼Œlimitè¡Œæ•° æŽ’åºå­—æ®µ filter&quot; : &#123; &quot;jzrq&quot; : &#123; &quot;$gte&quot; : ISODate(&quot;2017-03-31T16:00:00.000+0000&quot;), &quot;$lte&quot; : ISODate(&quot;2017-06-30T15:59:59.000+0000&quot;) &#125;, &quot;jglxfldm&quot; : 10.0 &#125;, &quot;ntoreturn&quot; : 200.0, &quot;sort&quot; : &#123; #å¦‚æžœæœ‰æŽ’åº åˆ™æ˜¾ç¤ºæŽ’åºçš„å­—æ®µ è¿™é‡Œæ˜¯ RsId &quot;RsId&quot; : 1.0 &#125;&#125;, &quot;keysExamined&quot; : 0.0, #ç´¢å¼•æ‰«ææ•°é‡ è¿™é‡Œæ˜¯å…¨è¡¨æ‰«æï¼Œæ²¡æœ‰ç”¨ç´¢å¼• æ‰€ä»¥æ˜¯ 0&quot;docsExamined&quot; : 69608.0, #æµè§ˆçš„æ–‡æ¡£æ•° è¿™é‡Œæ˜¯å…¨è¡¨æ‰«æ æ‰€ä»¥æ˜¯æ•´ä¸ªcollectionä¸­çš„å…¨éƒ¨æ–‡æ¡£æ•°&quot;numYield&quot; : 546.0, #è¯¥æ“ä½œä¸ºäº†ä½¿å…¶ä»–æ“ä½œå®Œæˆè€Œæ”¾å¼ƒçš„æ¬¡æ•°ã€‚é€šå¸¸æ¥è¯´ï¼Œå½“ä»–ä»¬éœ€è¦è®¿é—® è¿˜æ²¡æœ‰å®Œå…¨è¯»å…¥å†…å­˜ä¸­çš„æ•°æ®æ—¶ï¼Œæ“ä½œå°†æ”¾å¼ƒã€‚è¿™ä½¿å¾—åœ¨MongoDBä¸ºäº† æ”¾å¼ƒæ“ä½œè¿›è¡Œæ•°æ®è¯»å–çš„åŒæ—¶ï¼Œè¿˜æœ‰æ•°æ®åœ¨å†…å­˜ä¸­çš„å…¶ä»–æ“ä½œå¯ä»¥å®Œæˆã€‚&quot;locks&quot; : &#123; #é”ä¿¡æ¯ï¼ŒRï¼šå…¨å±€è¯»é”ï¼›Wï¼šå…¨å±€å†™é”ï¼›rï¼šç‰¹å®šæ•°æ®åº“çš„è¯»é”ï¼›wï¼šç‰¹å®šæ•°æ®åº“çš„å†™é” &quot;Global&quot; : &#123; &quot;acquireCount&quot; : &#123; &quot;r&quot; : NumberLong(1094) #è¯¥æ“ä½œèŽ·å–ä¸€ä¸ªå…¨å±€çº§é”èŠ±è´¹çš„æ—¶é—´ã€‚ &#125; &#125;, &quot;Database&quot; : &#123; &quot;acquireCount&quot; : &#123; &quot;r&quot; : NumberLong(547) &#125; &#125;, &quot;Collection&quot; : &#123; &quot;acquireCount&quot; : &#123; &quot;r&quot; : NumberLong(547) &#125; &#125;&#125;, &quot;nreturned&quot; : 200.0, #è¿”å›žçš„æ–‡æ¡£æ•°é‡&quot;responseLength&quot; : 57695.0, #è¿”å›žå­—èŠ‚é•¿åº¦ï¼Œå¦‚æžœè¿™ä¸ªæ•°å­—å¾ˆå¤§ï¼Œè€ƒè™‘å€¼è¿”å›žæ‰€éœ€å­—æ®µ&quot;millis&quot; : 264.0, #æ¶ˆè€—çš„æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰&quot;planSummary&quot; : &quot;COLLSCAN, COLLSCAN&quot;, #æ‰§è¡Œæ¦‚è§ˆ ä»Žè¿™é‡Œçœ‹æ¥ æ˜¯å…¨è¡¨æ‰«æ &quot;execStats&quot; : &#123; #è¯¦ç»†çš„æ‰§è¡Œè®¡åˆ’ è¿™é‡Œå…ˆç•¥è¿‡ åŽç»­å¯ä»¥ç”¨ explainæ¥å…·ä½“åˆ†æž&#125;, &quot;ts&quot; : ISODate(&quot;2017-08-24T02:32:49.768+0000&quot;), #å‘½ä»¤æ‰§è¡Œçš„æ—¶é—´&quot;client&quot; : &quot;10.3.131.96&quot;, #è®¿é—®çš„ipæˆ–è€…ä¸»æœº&quot;allUsers&quot; : [], &quot;user&quot; : &quot;&quot;&#125; MongoDB æŸ¥è¯¢ä¼˜åŒ– å¦‚æžœå‘çŽ° millis å€¼æ¯”è¾ƒå¤§ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½œä¼˜åŒ–ã€‚ å¦‚æžœdocsExaminedæ•°å¾ˆå¤§ï¼Œæˆ–è€…æŽ¥è¿‘è®°å½•æ€»æ•°ï¼ˆæ–‡æ¡£æ•°ï¼‰ï¼Œé‚£ä¹ˆå¯èƒ½æ²¡æœ‰ç”¨åˆ°ç´¢å¼•æŸ¥è¯¢ï¼Œè€Œæ˜¯å…¨è¡¨æ‰«æã€‚ å¦‚æžœkeysExaminedæ•°ä¸º0ï¼Œä¹Ÿå¯èƒ½æ˜¯æ²¡ç”¨ç´¢å¼•ã€‚ ç»“åˆ planSummary ä¸­çš„æ˜¾ç¤ºï¼Œä¸Šä¾‹ä¸­æ˜¯ â€œCOLLSCAN, COLLSCANâ€ ç¡®è®¤æ˜¯å…¨è¡¨æ‰«æ å¦‚æžœ keysExamined å€¼é«˜äºŽ nreturned çš„å€¼ï¼Œè¯´æ˜Žæ•°æ®åº“ä¸ºäº†æ‰¾åˆ°ç›®æ ‡æ–‡æ¡£æ‰«æäº†å¾ˆå¤šæ–‡æ¡£ã€‚è¿™æ—¶å¯ä»¥è€ƒè™‘åˆ›å»ºç´¢å¼•æ¥æé«˜æ•ˆçŽ‡ã€‚ ç´¢å¼•çš„é”®å€¼é€‰æ‹©å¯ä»¥æ ¹æ® query ä¸­çš„è¾“å‡ºå‚è€ƒï¼Œä¸Šä¾‹ä¸­ filter:åŒ…å«äº† jzrqå’Œjglxfldm å¹¶ä¸”æŒ‰ç…§RsIdæŽ’åºï¼Œæ‰€ä»¥ æˆ‘ä»¬çš„ç´¢å¼•ç´¢å¼•å¯ä»¥è¿™ä¹ˆå»º: db.f10_2_8_3_jgcc.ensureindex({jzrq:1,jglxfldm:1,RsId:1}) èšåˆæ“ä½œ12345678910111213141516171819ç¤ºä¾‹ä¸€Criteria criteria = new Criteria();criteria.andOperator(Criteria.where(&quot;userId&quot;).is(uid), Criteria.where(&quot;type&quot;).is(2));//æŸ¥è¯¢æ¡ä»¶Aggregation aggregation = Aggregation.newAggregation(Aggregation.match(criteria),Aggregation.group(&quot;content&quot;).count().as(&quot;count&quot;),Aggregation.sort(Sort.Direction.ASC,&quot;count&quot;));AggregationResults&lt;SearchKeyWords&gt; ar = mongoTemplate.aggregate(aggregation,Searched.class, SearchKeyWords.class);//Searchedä¸ºè¦æŸ¥è¯¢çš„ç±»ï¼ŒSearchKeyWordsä¸ºæŸ¥è¯¢ç»“æžœçš„voå¯¹è±¡List&lt;SearchKeyWords&gt; list = ar.getMappedResults();public class SearchKeyWords &#123; public String _id;//_id: &quot;ä¸­åŽ&quot; é‡å¤çš„å­—æ®µ public int count;//count: 57 é‡å¤æ¬¡æ•° public int getCount() &#123; return count; &#125; public void setCount(int count) &#123; this.count = count; &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113ç¤ºä¾‹äºŒ//åˆ†ç»„groupã€æŽ’åºsortç»Ÿè®¡æ¯ä¸ªåˆ†ç±»ä¸‹å•†å“ä¸ªæ•°Criteria criteria = new Criteria();Aggregation aggregation = Aggregation.newAggregation(Aggregation.match(criteria), Aggregation.group(&quot;categoryId&quot;).count().as(&quot;count&quot;),Aggregation.sort(Sort.Direction.ASC,&quot;count&quot;));AggregationResults&lt;BasicDBObject&gt; ar = mongoTemplate.aggregate(aggregation, Goods.class, BasicDBObject.class);for (BasicDBObject basicDBObject : ar) &#123; logger.info(JsonUtils.toJson(basicDBObject));&#125;//è¾“å‡ºç»“æžœ2019-05-06 11:13:11 [com.badou.service.basic.goods.GoodsService]-[INFO] &#123;&quot;_id&quot;:&quot;6430379335205566832&quot;,&quot;count&quot;:1&#125;//åˆ†ç±»idå’Œå½“å‰åˆ†ç±»ä¸‹å•†å“ä¸ªæ•°2019-05-06 11:13:11 [com.badou.service.basic.goods.GoodsService]-[INFO] &#123;&quot;_id&quot;:&quot;8732390723817262538&quot;,&quot;count&quot;:2&#125;2019-05-06 11:13:11 [com.badou.service.basic.goods.GoodsService]-[INFO] &#123;&quot;_id&quot;:&quot;4479460853249390323&quot;,&quot;count&quot;:2&#125;2019-05-06 11:13:11 [com.badou.service.basic.goods.GoodsService]-[INFO] &#123;&quot;_id&quot;:&quot;6571438787886532072&quot;,&quot;count&quot;:16&#125;ç¤ºä¾‹ä¸‰//ä¸¤ä¸ªé›†åˆå…³è”æŸ¥è¯¢ Aggregation.lookup//è‹¥ Aé›†åˆå…³è”Bé›†åˆ//å‚æ•°ï¼š from Bé›†åˆå//localField Aé›†åˆå­˜å¤–é”®çš„å­—æ®µ//foreignField Bé›†åˆä¸ŽAé›†åˆå…³è”çš„å­—æ®µ//as é‡æ–°ç»„åˆæˆCé›†åˆåç§°è¯­æ³•db.collection.aggregate([&#123; $lookup: &#123; from: &lt;collection to join&gt;, localField: &lt;field from the input documents&gt;, foreignField: &lt;field from the documents of the &quot;from&quot; collection&gt;, as: &lt;output array field&gt; &#125;&#125;])Criteria criteria = new Criteria();criteria.andOperator(Criteria.where(&quot;_id&quot;).is(&quot;6118446118773213048&quot;));Aggregation aggregation = Aggregation.newAggregation( Aggregation.match(criteria), Aggregation.lookup(&quot;goodsCategory&quot;, &quot;categoryId&quot;, &quot;_id&quot;, &quot;goodsCategory&quot;), Aggregation.unwind(&quot;goodsCategory&quot;), Aggregation.project(&quot;title&quot;,&quot;price&quot;).and(&quot;goodsCategory.name&quot;).as(&quot;categoryName&quot;).and(&quot;goodsCategory.order&quot;).as(&quot;categoryOrder&quot;) );AggregationResults&lt;BasicDBObject&gt; ar = mongoTemplate.aggregate( aggregation, Goods.class, BasicDBObject.class);for (BasicDBObject basicDBObject : ar) &#123; logger.info(JsonUtils.toJson(basicDBObject));&#125;//è¾“å‡ºç»“æžœ2019-05-06 21:17:26 [com.badou.service.basic.goods.GoodsService]-[INFO] &#123;&quot;_id&quot;:&quot;6118446118773213048&quot;,&quot;title&quot;:&quot;å°å­¦ç”Ÿå¿…å¤‡å›½å­¦å¸¸è¯†&amp;å°å­¦ç”Ÿå¿…è¯»å›½å­¦ç»å…¸&quot;,&quot;price&quot;:&quot;10.0&quot;,&quot;categoryName&quot;:&quot;å°å­¦ç”Ÿ&quot;,&quot;categoryOrder&quot;:&quot;1&quot;&#125;ç¤ºä¾‹å››(æœªæ›¾éªŒè¯)//å…¨æ–‡æœç´¢æŸ¥è¯¢//è®¾ç½®ç´¢å¼•ï¼šdb.logInfo.ensureIndex(msg:&quot;text&quot;)Query query = TextQuery.query(new TextCriteria().matching(&quot;coffee&quot;).matching(&quot;-cake&quot;));//-cakeè¡¨ç¤ºä¸åŒ¹é…ä¸åŒ…å«cakeä¸ŽnotMatchingç±»ä¼¼//Query query = TextQuery.searching((new TextCriteria().matching(&quot;coffee&quot;).notMatching(&quot;-cake&quot;))List&lt;LogInfoCol&gt; lfs = mongoTemplate.find(query,LogInfoCol.class);if(lfs!=null)&#123; for(LogInfoCol logInfoCol:lfs)&#123; logger.info(JSON.toString(logInfoCol)); &#125;&#125;ç¤ºä¾‹äº”(æœªæ›¾éªŒè¯)//å¾—åˆ°èŒƒå›´å†…æ•°æ®ï¼šä»¥Circleæž„é€ å‡½æ•°ï¼Œç¬¬ä¸€ç¬¬äºŒä¸ªå‚æ•°ä¸ºåæ ‡ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºè·ç¦»åŠå¾„æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„Circle circle = new Circle(4.2341111,63.00001,0.01);List&lt;PositionCol&gt; positionCols = mongoTemplate.find(new Query(Criteria.where(&quot;location&quot;).within(circle)),PositionCol.class);if(positionCols!=null)&#123; for(PositionCol positionCol:positionCols)&#123; logger.info(JSON.toJSONString(positionCol)) &#125;&#125;ç¤ºä¾‹å…­(æœªæ›¾éªŒè¯)//æŸ¥æ‰¾åæ ‡å‘¨å›´10KMå†…çš„æ‰€æœ‰å•†åº—Point location = new Point(116.425253,39.925338);NearQuery query = NearQuery.near(location).maxDistance(new Distance(10,Metrice.KILOMETERS));GeoResults&lt;PositionCol&gt; positions = mongoTemplate.geoNear(query,PositionCol.class);if(positionCols!=null)&#123; for(GeoResults&lt;PositionCol&gt;geoResult :positions)&#123; logger.info(geoResult.getContent().getBuissName()+&quot;-&quot;+geoResult.getDistance().getValue()); &#125;&#125;ç¤ºä¾‹ä¸ƒmongoæ”¯æŒçš„æŸ¥è¯¢å‚æ•°å®žä¾‹fpi.getParams().put(&quot;state|integer&quot;, &quot;1&quot;); ç›¸å½“äºŽis ä¸€å¯¹ä¸€fpi.getParams().put(&quot;ne:state|integer&quot;, &quot;1&quot;); ç›¸å½“äºŽnot is ä¸€å¯¹ä¸€fpi.getParams().put(&quot;all:keywords&quot;, keyword); keywordsä¸ºlist å¤šå¯¹ä¸€fpi.getParams().put(&quot;in:_id|array&quot;, &quot;0,1&quot;); åŒ…å« ä¸€å¯¹å¤šfpi.getParams().put(&quot;nin:_id|array&quot;, &quot;0,1&quot;); æŽ’é™¤id ä¸€å¯¹å¤šfpi.getParams().put(&quot;gte:serialNum&quot;, start); fpi.getParams().put(&quot;lte:serialNum&quot;, end); //æ—¥æœŸæŸ¥è¯¢Date currentDate = DateUtil.currentDate();String d = DateUtil.format(currentDate,&quot;yyyy-MM-dd HH:mm:ss&quot;);fpi.getParams().put(&quot;gte:endDate|datetime&quot;, d); å¤§äºŽå½“å‰æ—¥æœŸçš„ç¿»é¡µæŸ¥è¯¢èšåˆæŸ¥è¯¢1ã€Criteria idcardCriteria = new Criteria(); idcardCriteria.orOperator(Criteria.where(&quot;idcard&quot;).regex(studentIdcard.toLowerCase()), Criteria.where(&quot;idcard&quot;).regex(studentIdcard.toUpperCase())); criteria.andOperator(idcardCriteria);Mongodb: Sort operation used more than the maximum 33554432 bytes of RAMmongoä¸­æ‰€æœ‰æŽ’åºå­—æ®µåŠ ä¸Šç´¢å¼•æ¯”è¾ƒå¥½Criteria criteria = new Criteria();criteria.andOperator(Criteria.where(&quot;shakyId&quot;).in(gshakyIds), Criteria.where(&quot;userId&quot;).in(userIds));//ç­›é€‰æ¡ä»¶ï¼ˆé™å®šæ•°æ®èŒƒå›´ï¼‰Aggregation aggregation = Aggregation.newAggregation(Aggregation.match(criteria), Aggregation.group(&quot;userId&quot;, &quot;shakyId&quot;).count().as(&quot;count&quot;),Aggregation.sort(Sort.Direction.ASC, &quot;count&quot;));//åˆ†ç»„ å•ä¸ªå­—æ®µåˆ†ç»„ï¼Œç›´æŽ¥å–count;ä¸¤ä¸ªå­—æ®µkey ç¡®å®šå”¯ä¸€ä¸€æ¡è®°å½•,åŽç»­éœ€è¦æ‰‹åŠ¨ç»Ÿè®¡ AggregationResults ar = mongoTemplate.aggregate(aggregation,Ugclock.class, BasicDBObject.class); 123456789101112131415161718192021222324252627for (BasicDBObject basicDBObject : ar) &#123; String id = basicDBObject.getString(&quot;shakyId&quot;); int count = 1; if (shakyCount.containsKey(id)) &#123; count = shakyCount.get(id); count++; shakyCount.put(id, count); &#125; else &#123; shakyCount.put(id, count); &#125;&#125;2ã€ä»¥idä¸ºgroup byè®¡ç®—numçš„æ€»å€¼sumï¼ˆï¼‰Aggregation agg = Aggregation.newAggregation( Aggregation.group(new String[] &#123;&quot;_id&quot;&#125;).sum(&quot;num&quot;).as(&quot;num&quot;) );3ã€ä»¥idä¸ºgroup byæ‰¾å‡ºnumçš„æœ€å¤§å€¼max() Aggregation agg = Aggregation.newAggregation( Aggregation.group(new String[] &#123;&quot;_id&quot;&#125;).max(&quot;num&quot;).as(&quot;num&quot;) ); Aggregation agg = Aggregation.newAggregation( Aggregation.group(new String[] &#123;&quot;_id&quot;&#125;).min(&quot;num&quot;).as(&quot;num&quot;) );4ã€ä»¥idä¸ºgroup byè®¡ç®—numçš„å¹³å‡å€¼avg(ï¼‰Aggregation agg = Aggregation.newAggregation( Aggregation.group(new String[] &#123;&quot;_id&quot;&#125;).avg(&quot;num&quot;).as(&quot;num&quot;) ); ç¿»é¡µé¡¹ç›®å½“ä¸­æ¨¡æ‹Ÿæ’å…¥äº†120Wæ¡æ•°æ®ï¼Œåœ¨åŒä¸€ä¸ªæ–‡æ¡£å½“ä¸­å•çº¯æŸ¥è¯¢æ•°æ®çš„é€Ÿåº¦è¿˜ä¸é”™ï¼Œä¸»è¦æ˜¯å¯¹æŸ¥è¯¢çš„æ–‡æ¡£å­—æ®µæ·»åŠ äº†ç´¢å¼•ï¼Œä½†æ˜¯å¯¹æŸ¥è¯¢ç»“æžœçš„å‰å°åˆ†é¡µç¡®æœ‰é—®é¢˜ã€‚å…·ä½“æ¥è¯´æ˜¯ä¸è®¾ç½®ä»»ä½•æŸ¥è¯¢æ¡ä»¶çš„æ—¶å€™ï¼Œä¼šæŸ¥è¯¢å‡ºæ¥å°†è¿‘120Wæ¡æ»¡è¶³æ¡ä»¶çš„ç»“æžœï¼Œä½¿ç”¨mongodbçš„limit()å’Œskip() æ¥å–å‡ºæ¥ ç¬¬ä¸€é¡µå‰20æ¡æ•°æ®ï¼Œè¿™æ ·åœ¨åŽå°çš„javaç¨‹åºå½“ä¸­åªæ˜¯è¿™20æ¡æ•°æ®å ç”¨å†…å­˜ã€‚ä»£ç å…·ä½“å½¢å¼ç±»ä¼¼äºŽç”¨mongodbå®¢æˆ·ç«¯æ‰§è¡Œdb.feedbackInfo.find(criteria).skip(0).limit(20) èŽ·å¾—ç¬¬ä¸€é¡µ0-20æ¡æ•°æ®db.feedbackInfo.find(criteria).skip(20).limit(20) èŽ·å¾—ç¬¬äºŒé¡µ20-40æ¡æ•°æ®â€¦â€¦db.feedbackInfo.find(criteria).skip(N).limit(20) èŽ·å¾—ç¬¬äºŒé¡µN-N+20æ¡æ•°æ®ä½†é—®é¢˜åœ¨äºŽéšç€ä¸æ–­ç¿»é¡µï¼Œskipçš„å€¼Nä¼šè¶Šæ¥è¶Šå¤§ï¼Œå‰å°çš„ååº”è¶Šæ¥è¶Šæ…¢ã€‚å¾ˆç›´æŽ¥çš„ä¸€ä¸ªè¡¨çŽ°å°±æ˜¯åœ¨å‰å°ä»Žç¬¬ä¸€é¡µç›´æŽ¥è·³è½¬è¿›å…¥æœ€åŽä¸€é¡µæ ¹æœ¬ååº”ä¸è¿‡æ¥ã€‚å¯¹äºŽè¿™ä¸ªå®žé™…é—®é¢˜ï¼ŒåŽŸå› å°±æ˜¯æœ¬ä¹¦è¿™é‡Œæ‰€è¨€çš„skipç•¥è¿‡å¤§é‡ç»“æžœä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œå†æ ¹æºåœ°è¯´æ˜¯mongodbè¿˜ä¸å¤Ÿå®Œå–„ï¼Œç´¢å¼•æœ¬èº«è¿˜æ¯”è¾ƒç®€å•ã€‚å…·ä½“çš„è¿™ä¸ªåˆ†é¡µæ•ˆçŽ‡çš„é—®é¢˜ï¼Œæœ‰ä¸¤ç§æ€è·¯ï¼šç¬¬ä¸€ï¼Œç­‰mongodbå‡çº§ï¼Œä¼˜åŒ–è¿™ä¸ªskipçš„æ‰§è¡Œæ•ˆçŽ‡ã€‚ç¬¬äºŒï¼Œä¸ç”¨skip()è€Œå®žçŽ°åˆ†é¡µæ•ˆæžœã€‚è¿™ä¸ªæ€è·¯çš„åŸºç¡€å°±æ˜¯mongodbæœ¬èº«å¯¹äºŽwhereæŸ¥è¯¢å’Œlimit()çš„æ•ˆçŽ‡è¿˜æ¯”è¾ƒä¸é”™ï¼Œä¹Ÿå°±æ˜¯æœ¬æ¥åˆ†é¡µçš„é‚£ä¸ªæŸ¥è¯¢ç”¨whereå’Œlimité€Ÿåº¦è¿˜å¯ä»¥çš„å‰æï¼ˆä¸€èˆ¬å°±æ˜¯éœ€è¦å»ºç«‹å¿…è¦çš„ç´¢å¼•ï¼‰ã€‚å‡å¦‚è¿™ä¸ªå‰æä¸æˆç«‹ï¼Œé‚£æ²¡æ³•è®¨è®ºã€‚æœ¬ä¹¦æŽ¥ä¸‹æ¥å…·ä½“è®¨è®ºäº†ä¸ä½¿ç”¨skipå¯¹ç»“æžœåˆ†é¡µçš„å®žçŽ°ä¾‹å­ï¼Œè¿™ä¸ªæœ¬è´¨æ˜¯å¯¹ä¿¡æ¯ç³»ç»Ÿå¢žåŠ ä¸€ä¸ªæŸ¥è¯¢ä¸­é—´é‡â€”â€”ä¸Šæ¬¡æŸ¥è¯¢çš„ä¸šåŠ¡æ•°å€¼ï¼Œåœ¨é€»è¾‘ä¸Šæ‰¿æ‹…èµ·è·Ÿskipç›¸å¯¹ç­‰ä»·çš„åŠŸèƒ½ã€‚æ¯”å¦‚è¯´æ˜¯ç¬¬ä¸€é¡µæŸ¥è¯¢æ˜¯æŒ‰ç…§ä¸€ä¸ªæ—¥æœŸdateå€¼æŸ¥è¯¢ï¼Œç¬¬ä¸€æ¬¡ç”¨db.foo.find().sort({â€œdateâ€,-1}).limit(20)è€Œç‚¹å‡»ä¸‹ä¸€é¡µçš„æ—¶å€™ï¼Œäº‹å…ˆå°†ä¸Šæ¬¡æŸ¥è¯¢çš„dateçš„è¾¹ç•Œå€¼ç»™ä¼ é€’è¿‡åŽ»ï¼Œç¬¬äºŒé¡µæŸ¥è¯¢çš„æ—¶å€™å°±ä½¿ç”¨æ–°çš„findæ¡ä»¶æŸ¥è¯¢db.foo.find({â€œdateâ€:{â€œ$gtâ€:latest.date}}); è€ŒåŽå†å¯¹æŸ¥è¯¢ç»“æžœæŽ’åºå³å¯è¿™ç§ç»•è¿‡skipçš„æ–¹å¼è¯„ä»·ï¼šç¬¬ä¸€ï¼Œå¾ˆéš¾æ¯”è¾ƒæ–¹ä¾¿åœ°è§£å†³æ‰€æœ‰çš„åˆ†é¡µé—®é¢˜ï¼Œç®€å•æ¥è¯´ å¯¹äºŽä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æŸ¥è¯¢ï¼Œæ ¹æœ¬æ— æ³•é€šè¿‡è®°å½•è¾¹ç•Œæ¡ä»¶æ¥å®žçŽ°ã€‚ç¬¬äºŒï¼Œä¸å¾—ä¸å¤šä¼ é€’ä¸Šæ¬¡æŸ¥è¯¢çš„é‚£ä¸ªè¾¹ç•Œæ¡ä»¶ï¼Œå¢žåŠ äº†å·¥ä½œé‡ï¼Œä¸å¤Ÿä¼˜é›…ã€‚ç¬¬ä¸‰ï¼Œåªèƒ½å¤Ÿè§£å†³ä¸€é¡µä¸€é¡µå¾€ä¸‹ç¿»é¡µçš„é—®é¢˜ï¼Œå¦‚æžœæˆ‘è¦ä»Žç¬¬1é¡µç›´æŽ¥è·³åˆ°100é¡µï¼Œå°±æŸæ‰‹æ— ç­– ç¿»é¡µçš„å®žçŽ°ä¸€skipå®žçŽ°è·³é¡µï¼ˆæ¯”è¾ƒç®€å•ï¼Œæ•°æ®é‡å¤§äº†ä¸è¡Œï¼‰ /** *db.getCollection(&apos;user&apos;).find({})æ˜¯æŒ‡æŸ¥è¯¢å…¨éƒ¨ã€‚ *sort()è®¾ç½®æŽ’åºï¼Œæœ¬ç¤ºä¾‹æ˜¯æŒ‡ä»¥_idä½œä¸ºæ¡ä»¶ï¼Œæ­£åºæŽ’åºã€‚è‹¥å°†æ•°å­—1æ”¹ä¸º-1ï¼Œåˆ™ä¸ºå€’åºã€‚ *skip()è®¾ç½®è·³é¡µï¼Œæœ¬ç¤ºä¾‹æ˜¯æŒ‡è·³è¿‡å‰10æ¡ï¼Œä»Žç¬¬11æ¡å¼€å§‹æ˜¾ç¤ºã€‚ *limit()è®¾ç½®æ¯é¡µçš„æ˜¾ç¤ºæ•°é‡ï¼Œæœ¬ä¾‹æ˜¯æŒ‡æ¯é¡µé™åˆ¶æ˜¾ç¤º10æ¡ã€‚ */ db.getCollection(&apos;user&apos;).find({}).sort({&quot;ID&quot;:1}).skip(10).limit(10) éžskipå®žçŽ°è·³é¡µåŽŸç†ï¼šä»¥è‡ªå¢ž_idä½œä¸ºä¸»æ¡ä»¶ï¼ŒèŽ·å–å‰ä¸€é¡µçš„æœ€åŽä¸€æ¡è®°å½•ï¼ŒæŸ¥è¯¢ä¹‹åŽçš„æŒ‡å®šæ¡è®°å½• //æ ¹æ®_idï¼ŒæŸ¥è¯¢å‰10æ¡ var a = db. getCollection(&apos;user&apos;).find({}).sort(&quot;_id&quot;,1).limit(10) //å®šä¹‰å˜é‡last var last = null //å¾ªçŽ¯éåŽ† while(a.hasNext()){ last=a.next;//å¾ªçŽ¯åˆ°æœ€åŽï¼ŒlastæŽ¥æ”¶çš„æ˜¯æœ€åŽä¸€æ¡çš„ä¿¡æ¯ } //æ ¸å¿ƒæ˜¯&quot;_id&quot;:{&quot;$gt&quot;:last._id}ï¼Œå³æŸ¥è¯¢å¤§äºŽæœ€åŽä¸€æ¡çš„_idçš„åŽ10æ¡ä¿¡æ¯ db.getCollection(&apos;slt&apos;).find({&quot;_id&quot;:{&quot;$gt&quot;:last._id}}).sort({_id:1}).limit(10) ç¿»é¡µçš„å®žçŽ°äºŒï¼ˆéžskipå®žçŽ°è·³é¡µï¼Œä»¥è‡ªå¢ž_idä½œä¸ºä¸»æ¡ä»¶ï¼‰private List&lt;JSONObject&gt; findOrderList(Map&lt;String,Object&gt; paramOptions,int page,int size,String sidx,String sord) throws Exception { //è¿žæŽ¥æ•°æ®åº“ MongoCollection&lt;Document&gt; mongoCollection = getMdbCollection(); //è¿›è¡Œç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œæ¡ä»¶ä¸­æ²¡æœ‰skip MongoCursor&lt;Document&gt; iterable = mongoCollection.find().limit(size).sort(new BasicDBObject(&quot;_id&quot;, 1)).iterator(); //å®šä¹‰orderItemsï¼Œç”¨ä»¥æŽ¥æ”¶æŸ¥è¯¢çš„ä¿¡æ¯ List&lt;JSONObject&gt; orderItems = new ArrayList&lt;JSONObject&gt;(); //å¦‚æžœåªæœ‰ä¸€é¡µæˆ–ç¬¬ä¸€é¡µï¼Œåˆ™èµ°æ­¤æ¡ä»¶ï¼Œå¦ï¼Œåˆ™èµ°else if(page == 1){ //éåŽ† while (iterable.hasNext()) { Document next = iterable.next(); JSONObject a =JSONObject.parseObject(next.toJson()); orderItems.add(a); } }else{ MongoCursor&lt;Document&gt; iterable2 = mongoCollection.find().limit(size*(page-1)).sort(new BasicDBObject(&quot;_id&quot;, 1)).iterator(); //å®šä¹‰å˜é‡lastï¼Œç”¨ä»¥å­˜å‚¨æ¯é¡µçš„æœ€åŽä¸€æ¡è®°å½• Document last = null; while (iterable2.hasNext()) { last = iterable2.next(); } //å®šä¹‰conditionï¼Œç”¨ä»¥æ·»åŠ ã€$gt:æ¯é¡µæœ€åŽä¸€æ¡è®°å½•çš„_idå€¼ã€‘ï¼Œä½œä¸ºæŸ¥è¯¢æ¡ä»¶ Map&lt;String, Object&gt; condition = new HashMap&lt;&gt;(); if (null != last.get(&quot;_id&quot;)) { condition.put(&quot;$gt&quot;,last.get(&quot;_id&quot;)); } MongoCursor&lt;Document&gt; iterable3 = mongoCollection.find(condition).limit(size).sort(new BasicDBObject(&quot;_id&quot;, 1)).iterator(); //éåŽ† while (iterable.hasNext()) { Document next = iterable.next(); JSONObject a =JSONObject.parseObject(next.toJson()); orderItems.add(a); } return orderItems; } æ³¨ï¼šä¸Šé¢æ˜¯æŒ‰_idæ­£åºæŽ’åˆ—çš„ï¼Œå¦‚æžœæƒ³è¦æŒ‰ç…§å€’åºæŽ’åˆ—ï¼Œåˆ™éœ€è¦å°†condition.put(&quot;$gt&quot;,last.get(&quot;_id&quot;))æ”¹ä¸ºcondition.put(&quot;$lt&quot;,last.get(&quot;_id&quot;))ï¼Œå°†sort(new BasicDBObject(&quot;_id&quot;, 1)æ”¹ä¸ºsort(new BasicDBObject(&quot;_id&quot;, -1)ã€‚ mongoé«˜çº§æœ¬åœ°æ­å»ºå‰¯æœ¬é›†mongoçš„ç‰ˆæœ¬ version 3.6.5 å‰¯æœ¬é›†æ–‡ä»¶å¤¹å‡†å¤‡mongodb3.6 åŒç›®å½•ä¸‹å»ºç«‹æ–‡ä»¶å¤¹ï¼Œå­˜æ”¾æ•°æ® data/mongo/27017,data/mongo/27018,data/mongo/27019 åŒç›®å½•ä¸‹å»ºç«‹æ–‡ä»¶å¤¹å­˜æ”¾æ—¥å¿—æ•°æ® data/mongo/27017log,data/mongo/27018log,data/mongo/27019log å¯åŠ¨mongod --port 27017 --dbpath /data/mongo/27017 --logpath /data/mongo/27017log/27017.log --replSet rs-local-test --logappend mongod --port 27018 --dbpath /data/mongo/27018 --logpath /data/mongo/27018log/27018.log --replSet rs-local-test --logappend mongod --port 27019 --dbpath /data/mongo/27019 --logpath /data/mongo/27019log/27019.log --replSet rs-local-test --logappend ä¸‰ä¸ªæœåŠ¡å™¨å¯åŠ¨å®Œæ¯•ä¹‹åŽï¼Œä¸è¦å…³é—­ã€‚å¦å¼€ä¸€ä¸ªcmdçª—å£ï¼Œè¿žæŽ¥åˆ°27017ç«¯å£çš„æœåŠ¡å™¨ï¼ˆè¿žæŽ¥å…¶ä»–ç«¯å£ä¹Ÿå¯ä»¥ï¼‰ï¼Œæ¯æ¬¡å¯åŠ¨ï¼Œä¸»æœåŠ¡å™¨å¯èƒ½ä¼šä¸ä¸€æ ·ï¼Œå¦‚æžœè¿žæŽ¥çš„æ˜¯ä¸»æœåŠ¡å™¨ï¼Œå‰ç¼€ä¼šå˜æˆå¦‚ä¸‹PRIMARYï¼Œå¦‚æžœæ˜¯ä»ŽæœåŠ¡å™¨ï¼Œå‰ç¼€ä¼šå˜æˆSECONDARY åˆ›å»ºé…ç½®æ–‡ä»¶åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­åˆ—å‡ºæ¯ä¸€ä¸ªæˆå‘˜ï¼ŒçŸ¥é“å½¼æ­¤çš„å­˜åœ¨(ç¬¬äºŒæ¬¡å¯åŠ¨å°±ä¸éœ€è¦å†é…ç½®) use test witched to db test rs.initiate({ &quot;_id&quot;:&quot;rs-local-test01&quot;, &quot;members&quot;:[ {&quot;_id&quot;:0,&quot;host&quot;:&quot;127.0.0.1:27017&quot;}, {&quot;_id&quot;:1,&quot;host&quot;:&quot;127.0.0.1:27018&quot;}, {&quot;_id&quot;:2,&quot;host&quot;:&quot;127.0.0.1:27019&quot;} ] }) { &quot;ok&quot; : 1, &quot;operationTime&quot; : Timestamp(1596076771, 1), &quot;$clusterTime&quot; : { &quot;clusterTime&quot; : Timestamp(1596076771, 1), &quot;signature&quot; : { &quot;hash&quot; : BinData(0,&quot;AAAAAAAAAAAAAAAAAAAAAAAAAAA=&quot; &quot;keyId&quot; : NumberLong(0) } } } æŸ¥çœ‹çŠ¶æ€ä¿¡æ¯ rs-local-test:OTHER&gt; rs.status() { &quot;set&quot; : &quot;rs-local-test&quot;, &quot;date&quot; : ISODate(&quot;2020-07-30T02:40:29.243Z&quot;), &quot;myState&quot; : 1, &quot;term&quot; : NumberLong(1), &quot;heartbeatIntervalMillis&quot; : NumberLong(2000), &quot;optimes&quot; : { &quot;lastCommittedOpTime&quot; : { &quot;ts&quot; : Timestamp(1596076823, 1), &quot;t&quot; : NumberLong(1) }, &quot;readConcernMajorityOpTime&quot; : { &quot;ts&quot; : Timestamp(1596076823, 1), &quot;t&quot; : NumberLong(1) }, &quot;appliedOpTime&quot; : { &quot;ts&quot; : Timestamp(1596076823, 1), &quot;t&quot; : NumberLong(1) }, &quot;durableOpTime&quot; : { &quot;ts&quot; : Timestamp(1596076823, 1), &quot;t&quot; : NumberLong(1) } }, &quot;members&quot; : [ { &quot;_id&quot; : 0, &quot;name&quot; : &quot;127.0.0.1:27017&quot;, &quot;health&quot; : 1, &quot;state&quot; : 1, &quot;stateStr&quot; : &quot;PRIMARY&quot;, &quot;uptime&quot; : 286, &quot;optime&quot; : { &quot;ts&quot; : Timestamp(1596076823, 1), &quot;t&quot; : NumberLong(1) }, &quot;optimeDate&quot; : ISODate(&quot;2020-07-30T02:40:23Z&quot;), &quot;infoMessage&quot; : &quot;could not find member to sync fr &quot;electionTime&quot; : Timestamp(1596076782, 1), &quot;electionDate&quot; : ISODate(&quot;2020-07-30T02:39:42Z&quot;), &quot;configVersion&quot; : 1, &quot;self&quot; : true }, { &quot;_id&quot; : 1, &quot;name&quot; : &quot;127.0.0.1:27018&quot;, &quot;health&quot; : 1, &quot;state&quot; : 2, &quot;stateStr&quot; : &quot;SECONDARY&quot;, &quot;uptime&quot; : 57, &quot;optime&quot; : { &quot;ts&quot; : Timestamp(1596076823, 1), &quot;t&quot; : NumberLong(1) }, &quot;optimeDurable&quot; : { &quot;ts&quot; : Timestamp(1596076823, 1), &quot;t&quot; : NumberLong(1) }, &quot;optimeDate&quot; : ISODate(&quot;2020-07-30T02:40:23Z&quot;), &quot;optimeDurableDate&quot; : ISODate(&quot;2020-07-30T02:40:2 &quot;lastHeartbeat&quot; : ISODate(&quot;2020-07-30T02:40:28.47 &quot;lastHeartbeatRecv&quot; : ISODate(&quot;2020-07-30T02:40:2 ), &quot;pingMs&quot; : NumberLong(0), &quot;syncingTo&quot; : &quot;127.0.0.1:27017&quot;, &quot;configVersion&quot; : 1 }, { &quot;_id&quot; : 2, &quot;name&quot; : &quot;127.0.0.1:27019&quot;, &quot;health&quot; : 1, &quot;state&quot; : 2, &quot;stateStr&quot; : &quot;SECONDARY&quot;, &quot;uptime&quot; : 57, &quot;optime&quot; : { &quot;ts&quot; : Timestamp(1596076823, 1), &quot;t&quot; : NumberLong(1) }, &quot;optimeDurable&quot; : { &quot;ts&quot; : Timestamp(1596076823, 1), &quot;t&quot; : NumberLong(1) }, &quot;optimeDate&quot; : ISODate(&quot;2020-07-30T02:40:23Z&quot;), &quot;optimeDurableDate&quot; : ISODate(&quot;2020-07-30T02:40:2 &quot;lastHeartbeat&quot; : ISODate(&quot;2020-07-30T02:40:28.47 &quot;lastHeartbeatRecv&quot; : ISODate(&quot;2020-07-30T02:40:2 ), &quot;pingMs&quot; : NumberLong(0), &quot;syncingTo&quot; : &quot;127.0.0.1:27018&quot;, &quot;configVersion&quot; : 1 } ], &quot;ok&quot; : 1, &quot;operationTime&quot; : Timestamp(1596076823, 1), &quot;$clusterTime&quot; : { &quot;clusterTime&quot; : Timestamp(1596076823, 1), &quot;signature&quot; : { &quot;hash&quot; : BinData(0,&quot;AAAAAAAAAAAAAAAAAAAAAAAAAAA=&quot; &quot;keyId&quot; : NumberLong(0) } } } å¦‚æžœæ˜¯ç¬¬äºŒæ¬¡å¯åŠ¨ï¼Œå¯ä»¥ç›´æŽ¥æŸ¥çœ‹çŠ¶æ€ä¿¡æ¯ï¼Œä¸éœ€è¦åœ¨è®¾ç½®é…ç½®æ–‡ä»¶ã€‚æŸ¥çœ‹çŠ¶æ€ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ä¸»æœåŠ¡å™¨å’Œå¤‡ä»½æœåŠ¡å™¨ï¼š rs-local-test:SECONDARY&gt;use test switched to db test rs-local-test:SECONDARY&gt; db.isMaster() { &quot;hosts&quot; : [ &quot;127.0.0.1:27017&quot;, &quot;127.0.0.1:27018&quot;, &quot;127.0.0.1:27019&quot; ], &quot;setName&quot; : &quot;rs-local-test&quot;, &quot;setVersion&quot; : 1, &quot;ismaster&quot; : false, &quot;secondary&quot; : true, &quot;primary&quot; : &quot;127.0.0.1:27019&quot;, &quot;me&quot; : &quot;127.0.0.1:27017&quot;, &quot;lastWrite&quot; : { &quot;opTime&quot; : { &quot;ts&quot; : Timestamp(1596079583, 1), &quot;t&quot; : NumberLong(5) }, &quot;lastWriteDate&quot; : ISODate(&quot;2020-07-30T03:26:23Z&quot;), &quot;majorityOpTime&quot; : { &quot;ts&quot; : Timestamp(1596079583, 1), &quot;t&quot; : NumberLong(5) }, &quot;majorityWriteDate&quot; : ISODate(&quot;2020-07-30T03:26:23Z&quot;) }, &quot;maxBsonObjectSize&quot; : 16777216, &quot;maxMessageSizeBytes&quot; : 48000000, &quot;maxWriteBatchSize&quot; : 100000, &quot;localTime&quot; : ISODate(&quot;2020-07-30T03:26:25.289Z&quot;), &quot;logicalSessionTimeoutMinutes&quot; : 30, &quot;minWireVersion&quot; : 0, &quot;maxWireVersion&quot; : 6, &quot;readOnly&quot; : false, &quot;ok&quot; : 1, &quot;operationTime&quot; : Timestamp(1596079583, 1), &quot;$clusterTime&quot; : { &quot;clusterTime&quot; : Timestamp(1596079583, 1), &quot;signature&quot; : { &quot;hash&quot; : BinData(0,&quot;AAAAAAAAAAAAAAAAAAAAAAAAAAA=&quot;), &quot;keyId&quot; : NumberLong(0) } } } è¯»å†™æµ‹è¯•è¿žæŽ¥ä¸»æœåŠ¡å™¨åŽï¼Œå¯ä»¥å†™å…¥æ•°æ®ï¼šé‡æ–°å¯åŠ¨ä¸€ä¸ªcmd,è¿žæŽ¥ä¸€ä¸ªå¤‡ä»½æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹æ˜¯å¦æ•°æ®è¢«å¤åˆ¶ï¼šå¤‡ä»½èŠ‚ç‚¹å¯èƒ½ä¼šè½åŽäºŽä¸»èŠ‚ç‚¹ï¼Œå¯èƒ½æ²¡æœ‰æœ€æ–°å†™å…¥æ•°æ®ï¼Œæ‰€ä»¥å¤‡ä»½èŠ‚ç‚¹é»˜è®¤æƒ…å†µä¸‹ä¼šæ‹’ç»è¯»å–è¯·æ±‚ï¼Œè¿™æ˜¯ä¸ºäº†ä¿æŠ¤åº”ç”¨ç¨‹åºï¼Œä»¥å…æ„å¤–è¿žæŽ¥åˆ°å¤‡ä»½èŠ‚ç‚¹ï¼Œè¯»å–åˆ°è¿‡æœŸæ•°æ®ï¼š rs-local-test:SECONDARY&gt; db.foo.find() Error: error: { &quot;operationTime&quot; : Timestamp(1596079503, 1), &quot;ok&quot; : 0, &quot;errmsg&quot; : &quot;not master and slaveOk=false&quot;, &quot;code&quot; : 13435, &quot;codeName&quot; : &quot;NotMasterNoSlaveOk&quot;, &quot;$clusterTime&quot; : { &quot;clusterTime&quot; : Timestamp(1596079503, 1), &quot;signature&quot; : { &quot;hash&quot; : BinData(0,&quot;AAAAAAAAAAAAAAAAAAAAAAAAAAA=&quot;), &quot;keyId&quot; : NumberLong(0) } } } ä»Žå¤‡ä»½èŠ‚ç‚¹è¯»å–æ•°æ®ï¼Œéœ€è¦è®¾ç½®æ ‡è¯†ï¼š db.getMongo().setSlaveOk(); èŠ‚ç‚¹å˜æ›´åœ¨ä¸»èŠ‚ç‚¹æ’å…¥æ•°æ®åŽï¼Œå¦‚æžœæœ‰å¤‡ä»½èŠ‚ç‚¹æœåŠ¡å™¨æ²¡æœ‰å¯åŠ¨ï¼Œå½“åœ¨è¯¥å¤‡ä»½å¯åŠ¨åŽï¼Œä¹Ÿå¯ä»¥æŸ¥è¯¢åˆ°å†™å…¥çš„æ•°æ®ï¼šä¸èƒ½å¯¹å¤‡ä»½èŠ‚ç‚¹æ‰§è¡Œå†™å…¥æ“ä½œï¼Œå¤‡ä»½èŠ‚ç‚¹åªèƒ½é€šè¿‡å¤åˆ¶åŠŸèƒ½å†™å…¥æ•°æ®ï¼Œä¸æŽ¥å—å®¢æˆ·ç«¯çš„å†™å…¥è¯·æ±‚ï¼šrs-local-test:SECONDARY&gt; å¯ä»¥éšæ—¶æ·»åŠ æˆ–åˆ é™¤æˆå‘˜,å…ˆæŒ‰ä¹‹å‰çš„æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¤‡ç”¨æœåŠ¡å™¨ï¼Œå†æ·»åŠ è¿›åŽ»ï¼šrs.add(â€˜127.0.0.1â€™:4444)rsæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå…¶ä¸­åŒ…å«ä¸Žå¤åˆ¶ç›¸å…³çš„è¾…åŠ©å‡½æ•°ã€‚åˆ é™¤æˆå‘˜ï¼šrs.remove(â€˜127.0.0.1â€™:4444) æ·»åŠ æˆ–åˆ é™¤å®Œå¯é€šè¿‡ db.isMaster()æŸ¥çœ‹ä¿®æ”¹ç»“æžœä¹Ÿå¯rs.config(); rs-local-test:SECONDARY&gt; rs.config() { &quot;_id&quot; : &quot;rs-local-test&quot;, &quot;version&quot; : 1, &quot;protocolVersion&quot; : NumberLong(1), &quot;members&quot; : [ { &quot;_id&quot; : 0, &quot;host&quot; : &quot;127.0.0.1:27017&quot;, &quot;arbiterOnly&quot; : false, &quot;buildIndexes&quot; : true, &quot;hidden&quot; : false, &quot;priority&quot; : 1, &quot;tags&quot; : { }, &quot;slaveDelay&quot; : NumberLong(0), &quot;votes&quot; : 1 }, { &quot;_id&quot; : 1, &quot;host&quot; : &quot;127.0.0.1:27018&quot;, &quot;arbiterOnly&quot; : false, &quot;buildIndexes&quot; : true, &quot;hidden&quot; : false, &quot;priority&quot; : 1, &quot;tags&quot; : { }, &quot;slaveDelay&quot; : NumberLong(0), &quot;votes&quot; : 1 }, { &quot;_id&quot; : 2, &quot;host&quot; : &quot;127.0.0.1:27019&quot;, &quot;arbiterOnly&quot; : false, &quot;buildIndexes&quot; : true, &quot;hidden&quot; : false, &quot;priority&quot; : 1, &quot;tags&quot; : { }, &quot;slaveDelay&quot; : NumberLong(0), &quot;votes&quot; : 1 } ], &quot;settings&quot; : { &quot;chainingAllowed&quot; : true, &quot;heartbeatIntervalMillis&quot; : 2000, &quot;heartbeatTimeoutSecs&quot; : 10, &quot;electionTimeoutMillis&quot; : 10000, &quot;catchUpTimeoutMillis&quot; : -1, &quot;catchUpTakeoverDelayMillis&quot; : 30000, &quot;getLastErrorModes&quot; : { }, &quot;getLastErrorDefaults&quot; : { &quot;w&quot; : 1, &quot;wtimeout&quot; : 0 }, &quot;replicaSetId&quot; : ObjectId(&quot;5f2232e3b3ef9f7db4cb682d&quot;) } } ä»¥ä¸Šå‚è€ƒè‡ª https://www.cnblogs.com/a-horse-mosaic/p/9284297.html é—®é¢˜æ±‡æ€»å¦‚ä½•å¼€å¯è¯»å†™åˆ†ç¦»é»˜è®¤æƒ…å†µä¸‹é©±åŠ¨æ˜¯ä»ŽReplica Set é›†ç¾¤ä¸­çš„ Primary ä¸Šè¿›è¡Œè¯»å†™çš„ï¼Œåº”ç”¨å¯ä»¥åœ¨è¯»å¤šå†™å°‘çš„åœºæ™¯ä¸‹å¼€å¯è¯»å†™åˆ†ç¦»ï¼Œæé«˜æ•ˆçŽ‡ã€‚ è¯»å–åå¥½(Read Preference)å‚æ•° primary ä¸»èŠ‚ç‚¹ï¼Œé»˜è®¤æ¨¡å¼ï¼Œè¯»æ“ä½œåªåœ¨ä¸»èŠ‚ç‚¹ï¼Œå¦‚æžœä¸»èŠ‚ç‚¹ä¸å¯ç”¨ï¼ŒæŠ¥é”™æˆ–è€…æŠ›å¼‚å¸¸ã€‚ primaryPreferred é¦–é€‰ä¸»èŠ‚ç‚¹ï¼Œå¦‚æžœä¸»èŠ‚ç‚¹ä¸å¯ç”¨ï¼Œå¦‚æ•…éšœè½¬ç§»ï¼Œè¯»æ“ä½œåœ¨ä»ŽèŠ‚ç‚¹ã€‚ secondary ä»ŽèŠ‚ç‚¹ï¼Œè¯»æ“ä½œåªåœ¨ä»ŽèŠ‚ç‚¹ï¼Œå¦‚æžœä»ŽèŠ‚ç‚¹ä¸å¯ç”¨ï¼ŒæŠ¥é”™æˆ–è€…æŠ›å¼‚å¸¸ã€‚ secondaryPreferred é¦–é€‰ä»ŽèŠ‚ç‚¹ï¼Œå¤§å¤šæƒ…å†µä¸‹è¯»æ“ä½œåœ¨ä»ŽèŠ‚ç‚¹ï¼Œç‰¹æ®Šæƒ…å†µï¼ˆå¦‚å•ä¸»èŠ‚ç‚¹æž¶æž„ï¼‰è¯»æ“ä½œåœ¨ä¸»èŠ‚ç‚¹ã€‚ nearest æœ€é‚»è¿‘èŠ‚ç‚¹ï¼Œè¯»æ“ä½œåœ¨æœ€é‚»è¿‘çš„æˆå‘˜ï¼Œå¯èƒ½æ˜¯ä¸»èŠ‚ç‚¹æˆ–è€…ä»ŽèŠ‚ç‚¹ åœ¨Mongodbä¸­æœ€å¤šèƒ½åˆ›å»ºå¤šå°‘é›†åˆï¼Ÿé»˜è®¤æƒ…å†µä¸‹ï¼ŒMongoDB çš„æ¯ä¸ªæ•°æ®åº“çš„å‘½åç©ºé—´ä¿å­˜åœ¨ä¸€ä¸ª 16MB çš„ .ns æ–‡ä»¶ä¸­ï¼Œå¹³å‡æ¯ä¸ªå‘½åå ç”¨çº¦ 628 å­—èŠ‚ï¼Œä¹Ÿå³æ•´ä¸ªæ•°æ®åº“çš„å‘½åç©ºé—´çš„ä¸Šé™çº¦ä¸º 24000ã€‚æ¯ä¸€ä¸ªé›†åˆã€ç´¢å¼•éƒ½å°†å ç”¨ä¸€ä¸ªå‘½åç©ºé—´ã€‚æ‰€ä»¥ï¼Œå¦‚æžœæ¯ä¸ªé›†åˆæœ‰ä¸€ä¸ªç´¢å¼•ï¼ˆæ¯”å¦‚é»˜è®¤çš„ _id ç´¢å¼•ï¼‰ï¼Œé‚£ä¹ˆæœ€å¤šå¯ä»¥åˆ›å»º 12000 ä¸ªé›†åˆã€‚å¦‚æžœç´¢å¼•æ•°æ›´å¤šï¼Œåˆ™å¯åˆ›å»ºçš„é›†åˆæ•°å°±æ›´å°‘äº†ã€‚åŒæ—¶ï¼Œå¦‚æžœé›†åˆæ•°å¤ªå¤šï¼Œä¸€äº›æ“ä½œä¹Ÿä¼šå˜æ…¢ã€‚ç”šè‡³ä½¿å¾—MongoDBé›†ç¾¤æ— æ³•æœåŠ¡çš„æƒ…å†µå‘ç”Ÿï¼ MongoDBæœ‰ä¼ ç»Ÿæ•°æ®åº“çš„äº‹åŠ¡å’Œäº‹åŠ¡å›žæ»šä¹ˆï¼Ÿæ²¡æœ‰ï¼Œè¯·ä¸è¦æŠŠå®ƒå½“æˆå…³ç³»åž‹æ•°æ®åº“æ¥ä½¿ç”¨ï¼Œå¯¹äºŽMongoDBé›†ç¾¤æ¥è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹æ•°æ®ä¹Ÿä¸æ˜¯å¼ºä¸€è‡´æ€§çš„ï¼Œè€Œæ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚å¦‚æžœå¯¹æ•°æ®ä¸€è‡´æ€§æ¯”è¾ƒæ•æ„Ÿå»ºè®®æ›´æ”¹WriteConcernçº§åˆ«ï¼Œä½†åŽæžœæ˜¯é™ä½Žäº†æ€§èƒ½ï¼Œè¯·é…Œæƒ…è€ƒè™‘ã€‚ MongoDBæœ‰å‘½åè§„èŒƒä¹ˆï¼Ÿ ä¸èƒ½æ˜¯ç©ºå­—ç¬¦ä¸² ä¸èƒ½å«æœ‰.ã€â€™â€™ã€*ã€/ã€\ã€&lt;ã€&gt;ã€:ã€?ã€$ã€\0ã€‚å»ºè®®åªä½¿ç”¨ASCIIç ä¸­å­—æ¯å’Œæ•°å­— æ•°æ®åº“ååŒºåˆ†å¤§å°å†™ æ•°æ®åº“åé•¿åº¦æœ€å¤šä¸º64å­—èŠ‚ é›†åˆåä¸èƒ½åŒ…å«\0å­—ç¬¦ï¼Œè¿™ä¸ªå­—ç¬¦è¡¨ç¤ºé›†åˆåçš„ç»“æŸ é›†åˆåä¸èƒ½æ˜¯ç©ºå­—ç¬¦ä¸²â€â€ é›†åˆåä¸èƒ½ä½¿ç”¨ç³»ç»Ÿé›†åˆçš„ä¿ç•™å‰ç¼€â€system.â€ é›†ååä¸­ä¸å»ºè®®åŒ…å«å­—ç¬¦â€™$â€™ï¼Œè™½ç„¶å¾ˆå¤šé©±åŠ¨ç¨‹åºå¯ä»¥æ”¯æŒåŒ…å«æ­¤å­—ç¬¦çš„é›†åˆå MongoDBæœ‰ç³»ç»Ÿä¿ç•™åº“åä¹ˆï¼Ÿ admin local config MongoDBæœ‰è¿žæŽ¥æ± ä¹ˆï¼ŸMongoDBé©±åŠ¨ä¸­å…¶å®žå·²ç»æ˜¯ä¸€ä¸ªçŽ°æˆçš„è¿žæŽ¥æ± äº†ï¼Œè€Œä¸”çº¿ç¨‹å®‰å…¨ã€‚è¿™ä¸ªå†…ç½®çš„è¿žæŽ¥æ± é»˜è®¤åˆå§‹äº†100ä¸ªè¿žæŽ¥ï¼Œæ¯ä¸€ä¸ªæ“ä½œï¼ˆå¢žåˆ æ”¹æŸ¥ç­‰ï¼‰éƒ½ä¼šèŽ·å–ä¸€ä¸ªè¿žæŽ¥ï¼Œæ‰§è¡Œæ“ä½œåŽé‡Šæ”¾è¿žæŽ¥ã€‚ã€é¢˜å¤–è¯ã€‘è¯·åŠ¡å¿…è®°å¾—å…³é—­èµ„æºï¼Œå¹¶ä¸”è®¾ç½®åˆç†çš„æ± å­è¿žæŽ¥æ•°å’Œè¶…æ—¶æ—¶é—´ã€‚ å†…ç½®è¿žæŽ¥æ± æœ‰å¤šä¸ªé‡è¦å‚æ•°ï¼Œåˆ†åˆ«æ˜¯ connectionsPerHostï¼šæ¯ä¸ªä¸»æœºç­”åº”çš„è¿žæŽ¥æ•°ï¼ˆæ¯ä¸ªä¸»æœºçš„è¿žæŽ¥æ± å¤§å°ï¼‰ï¼Œå½“è¿žæŽ¥æ± è¢«ç”¨å…‰æ—¶ï¼Œä¼šè¢«é˜»å¡žä½ï¼Œé»˜è®¤å€¼ä¸º100 threadsAllowedToBlockForConnectionMultiplierï¼šçº¿ç¨‹é˜Ÿåˆ—æ•°ï¼Œå®ƒå’Œä¸Šé¢connectionsPerHostå€¼ç›¸ä¹˜çš„ç»“æžœå°±æ˜¯çº¿ç¨‹é˜Ÿåˆ—æœ€å¤§å€¼ã€‚å¦‚æžœè¿žæŽ¥çº¿ç¨‹æŽ’æ»¡äº†é˜Ÿåˆ—å°±ä¼šæŠ›å‡ºâ€œOut of semaphores to get dbâ€é”™è¯¯ï¼Œé»˜è®¤å€¼ä¸º5ï¼Œåˆ™æœ€å¤šæœ‰500ä¸ªçº¿ç¨‹å¯ä»¥ç­‰å¾…èŽ·å–è¿žæŽ¥ maxWaitTime: è¢«é˜»å¡žçº¿ç¨‹ä»Žè¿žæŽ¥æ± èŽ·å–è¿žæŽ¥çš„æœ€é•¿ç­‰å¾…æ—¶é—´(ms)ã€‚é»˜è®¤å€¼ä¸º120,000 connectTimeoutï¼šåœ¨å»ºç«‹ï¼ˆæ‰“å¼€ï¼‰å¥—æŽ¥å­—è¿žæŽ¥æ—¶çš„è¶…æ—¶æ—¶é—´ï¼ˆmsï¼‰ã€‚é»˜è®¤å€¼ä¸º10,000 socketTimeoutï¼šå¥—æŽ¥å­—è¶…æ—¶æ—¶é—´ï¼ˆmsï¼‰ã€‚é»˜è®¤å€¼ä¸º0ï¼Œæ— é™åˆ¶ï¼ˆinfiniteï¼‰ autoConnectRetryï¼šè¿™ä¸ªæŽ§åˆ¶æ˜¯å¦åœ¨è¿žæŽ¥æ—¶ï¼Œä¼šè‡ªåŠ¨é‡è¯•ï¼Œ2.13é©±åŠ¨å·²ç»ã€åºŸå¼ƒã€‘ï¼Œè¯·ä½¿ç”¨connectTimeoutä»£æ›¿å®ƒ è¿žæŽ¥æ± çš„MaximumPoolSizeè¦æœ‰ä¸ªåˆç†å€¼ï¼Œå¦åˆ™è¿™ä¸ªå€¼æ•°æ®é‡çš„è¿žæŽ¥éƒ½è¢«å ç”¨ï¼ŒåŽé¢å†æœ‰æ–°çš„è¿žæŽ¥åˆ›å»ºæ—¶å°±è¦ç­‰å¾…äº†ï¼Œè€Œä¸èƒ½è¶…å‡ºæ± ä¸Šé™æ–°å»ºè¿žæŽ¥ã€‚é™¤æ­¤ä¹‹å¤–è¿˜è¦è®¾ç½®åˆç†çš„è¿žæŽ¥ç­‰å¾…ï¼Œè¿žæŽ¥è¶…æ—¶æ—¶é—´ï¼Œä»¥é˜²æ­¢ä¸€ä¸ªè¿žæŽ¥å ç”¨æ—¶é—´è¿‡é•¿ï¼Œå½±å“å…¶å®ƒè¿žæŽ¥è¯·æ±‚ã€‚ connectTimeout å’Œ socketTimeout çš„åŒºåˆ«ä¸€æ¬¡å®Œæ•´çš„è¯·æ±‚åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼š å»ºç«‹è¿žæŽ¥ æ•°æ®ä¼ è¾“ æ–­å¼€è¿žæŽ¥ å¦‚æžœä¸ŽæœåŠ¡å™¨(è¿™é‡ŒæŒ‡æ•°æ®åº“)è¯·æ±‚å»ºç«‹è¿žæŽ¥çš„æ—¶é—´è¶…è¿‡ConnectTimeoutï¼Œå°±ä¼šæŠ› ConnectionTimeOutExceptionï¼Œå³æœåŠ¡å™¨è¿žæŽ¥è¶…æ—¶ï¼Œæ²¡æœ‰åœ¨è§„å®šçš„æ—¶é—´å†…å»ºç«‹è¿žæŽ¥ã€‚å¦‚æžœä¸ŽæœåŠ¡å™¨è¿žæŽ¥æˆåŠŸï¼Œå°±å¼€å§‹æ•°æ®ä¼ è¾“äº†ã€‚å¦‚æžœæœåŠ¡å™¨å¤„ç†æ•°æ®ç”¨æ—¶è¿‡é•¿ï¼Œè¶…è¿‡äº†SocketTimeOutï¼Œå°±ä¼šæŠ›å‡ºSocketTimeOutExceptinï¼Œå³æœåŠ¡å™¨å“åº”è¶…æ—¶ï¼ŒæœåŠ¡å™¨æ²¡æœ‰åœ¨è§„å®šçš„æ—¶é—´å†…è¿”å›žç»™å®¢æˆ·ç«¯æ•°æ®ã€‚ æ‰€ä»¥è¿™è¯¥æ­»çš„è¶…æ—¶è¯¥æ€Žä¹ˆé…ï¼Ÿè¿™é‡Œæœ‰ä¸€ä»½å›½å¤–å†™çš„å…³äºŽè¶…æ—¶çš„å»ºè®®ï¼šhttp://blog.mongolab.com/2013/10/do-you-want-a-timeout/ä¸Šæ–‡ç»™å‡ºçš„é€šå¸¸æƒ…å†µä¸‹ï¼šconnectTimeout=5000ï¼ŒsocketTimeout=0 å…³äºŽWriteConcernMongoDBæä¾›äº†ä¸€ä¸ªé…ç½®å‚æ•°ï¼šwrite concern æ¥è®©ç”¨æˆ·è‡ªå·±è¡¡é‡æ€§èƒ½å’Œå†™å®‰å…¨ã€‚åˆ†å¸ƒå¼æ•°æ®åº“ä¸­è¿™æ ·çš„å‚æ•°æ¯”è¾ƒå¸¸è§ï¼Œè®°å¾—Cassandraä¸­ä¹Ÿæœ‰ä¸€ä¸ªç±»ä¼¼å‚æ•°ï¼Œä¸è¿‡é‚£ä¸ªå¥½åƒæ˜¯è¦å†™å…¥å‡ ä¸ªèŠ‚ç‚¹è¿”å›žæˆåŠŸã€‚å…¶å®žé“ç†éƒ½ä¸€æ ·åˆ†å¸ƒå¼çš„é›†ç¾¤çŽ¯å¢ƒè€ƒè™‘åˆ°æ€§èƒ½å› ç´ ä¸èƒ½ç¡®ä¿æ¯ä¸ªæˆå‘˜éƒ½å†™å…¥åŽåœ¨è¿”å›žæˆåŠŸï¼Œæ‰€ä»¥åªèƒ½äº¤ç»™ç”¨æˆ·æ ¹æ®å®žé™…åœºæ™¯è¡¡é‡ã€‚ Unacknowledged è¿™ä¸ªçº§åˆ«ä¹Ÿå±žäºŽæ¯”è¾ƒä½Žçš„çº§åˆ«ï¼Œä»¥å‰è¿™ä¸ªçº§åˆ«æ˜¯é©±åŠ¨é…ç½®çš„é»˜è®¤çº§åˆ«ï¼Œä¸è¿‡åŽæ¥è°ƒæ•´æˆAcknowledgedçº§åˆ«ã€‚åœ¨è¿™ä¸ªçº§åˆ«ä¸‹ï¼Œè¿™ä¸ªé©±åŠ¨ä¼šæ ¹æ®å½“å‰ç³»ç»Ÿçš„ç½‘ç»œé…ç½®è¿›è¡Œç½‘ç»œé—®é¢˜çš„æ£€æµ‹ï¼Œä¸ç­‰å¾…Mongdçš„è¿”å›žã€‚ä»£ç æµ‹è¯•ï¼šæœ¬åœ°ç½‘ç»œé—®é¢˜æ˜¯å¦æœ‰å¼‚å¸¸ï¼Ÿæœ¬åœ°ç½‘ç»œæ— é—®é¢˜æ˜¯è¿œç¨‹serveré—®é¢˜æ˜¯å¦å¼‚å¸¸ï¼Ÿ Acknowledged è¿™ä¸ªçº§åˆ«ç®—æ˜¯ä¸­ç­‰çº§åˆ«çš„é…ç½®ï¼Œè¿™ä¸ªçº§åˆ«èƒ½å¤Ÿæ‹¿åˆ°mongodçš„è¿”å›žä¿¡æ¯ï¼šdupkey Errorï¼Œä»¥åŠä¸€äº›å…¶ä»–çš„é—®é¢˜ã€‚çŽ°åœ¨è¿™ä¸ªçº§åˆ«æ˜¯é©±åŠ¨çš„é»˜è®¤çº§åˆ«ï¼Œä¼°è®¡æ˜¯10genå…¬å¸å‘çŽ°å¥½å¤šäººè¯„ä»·Mongodbä¸é è°±åŽæ”¹çš„ã€‚ä¸€èˆ¬ç³»ç»Ÿè¿™ä¸ªçº§åˆ«ä¹Ÿå°±å¤Ÿç”¨äº†ã€‚ç”±äºŽé»˜è®¤çº§åˆ«æ˜¯Acknowledgedï¼Œå†…éƒ¨ç”¨getLastErroræ–¹æ³•æ£€æŸ¥æ˜¯å¦å†™å…¥æˆåŠŸçš„æ—¶å€™æ˜¯ä¹Ÿä¸ç”¨è®¾ç½®ä»»ä½•å‚æ•°ï¼Œå¯¹ä¸ŽReplsetæ¥è¯´å¯ä»¥åœ¨é…ç½®ä¸­è¿›è¡ŒgetLastErrorDefaultsçš„é…ç½®ï¼Œå¦‚æžœæ²¡æœ‰çš„è¯é»˜è®¤åˆ™æ˜¯Masteræ”¶åˆ°å°±okã€‚ Journaled ç­‰åˆ°æ“ä½œè®°å½•åˆ°Journal Logä¸­æ‰è¿”å›žæ“ä½œç»“æžœï¼Œä¹Ÿå°±æ˜¯ä¸‹ä¸€æ¬¡JournaledLogæäº¤ã€‚è¿™ç§æƒ…å†µå¯ä»¥å®¹å¿æœåŠ¡å™¨çªç„¶å®•æœºï¼Œæ–­ç”µç­‰æ„å¤–çš„æ¢å¤ã€‚å‡ºåŽ»ä¸Šè¾¹çš„é…ç½®è¿˜è¦åœ¨å¯åŠ¨mongodçš„æ—¶å€™åŠ ä¸Šjournaling å‚æ•°ç¡®ä¿å¯ä»¥ä½¿ç”¨ã€‚commitlogæäº¤é—´éš”æ—¶é—´æ˜¯å¯ä»¥é…ç½®çš„ï¼Œå•ç£ç›˜è®¾å¤‡ï¼ˆphysical volume, RAID device, or LVM volumeï¼‰æ¯100msæäº¤ä¸€æ¬¡ï¼Œå’Œæ•°æ®æ–‡ä»¶åˆ·å‡ºç›¸åŒé¢‘çŽ‡ï¼Œæ—¥å¿—å’Œæ•°æ®åˆ†å¼€ç£ç›˜è®¾å¤‡çš„30msæäº¤ä¸€æ¬¡ã€‚åœ¨æ’å…¥æ•°æ®æ˜¯å¦‚æžœä½¿ç”¨{j:true}åˆ™ä¼šç¼©çŸ­åˆ°å·²é…ç½®çš„é»˜è®¤è®¾ç½®1/3çš„æ—¶é—´ã€‚ Replica Acknowledged åœ¨å‰¯æœ¬é›†ä¸­å¦‚æžœwè®¾ç½®ä¸º2çš„è¯åˆ™è‡³å°‘å·²ç»å¸å…¥åˆ°ä¸€ä¸ªsecondaryä¸­ï¼Œæˆ‘çŒœæµ‹å†™å…¥secondaryè¿™ä¸ªçº§åˆ«æ˜¯Acknowledgedçº§åˆ«ï¼Œmajorityæ˜¯å¤šä¸ªsecondaryå·²ç»å†™å…¥ã€‚å¦‚æžœæ‰‹è´±è®¾ç½®wå‚æ•°å¤§äºŽreplsetä¸­éœ€è¦å¤åˆ¶çš„secondarysçš„è¯ï¼Œæ“ä½œå°±ä¸€ç›´ç­‰å¾…ç›´åˆ°è¾¾åˆ°å·²å†™å…¥æ•°æ®çš„æœåŠ¡å™¨æ•°é‡ç¬¦åˆè¦æ±‚ï¼Œä¹Ÿå¯ä»¥è®¾ç½®timeoutå€¼æ¥æŒ‡æ˜Žæœ€é•¿ç­‰å¾…æ—¶é—´ã€‚{ getLastError: 1, w: 2, wtimeout:5000 } MongoDBçš„é”æœºåˆ¶MongoDBçš„é”æœºåˆ¶å’Œä¸€èˆ¬å…³ç³»æ•°æ®åº“å¦‚ MySQLï¼ˆInnoDBï¼‰, Oracle æœ‰å¾ˆå¤§çš„å·®å¼‚ï¼ŒInnoDB å’Œ Oracle èƒ½æä¾›è¡Œçº§ç²’åº¦é”ï¼Œè€Œ MongoDB v2 åªèƒ½æä¾›åº“çº§ç²’åº¦é”ï¼Œè¿™æ„å‘³ç€å½“ MongoDB ä¸€ä¸ªå†™é”å¤„äºŽå ç”¨çŠ¶æ€æ—¶ï¼Œå…¶å®ƒçš„è¯»å†™æ“ä½œéƒ½å¾—å¹²ç­‰ã€‚ åˆçœ‹èµ·æ¥åº“çº§é”åœ¨å¤§å¹¶å‘çŽ¯å¢ƒä¸‹æœ‰ä¸¥é‡çš„é—®é¢˜ï¼Œä½†æ˜¯ MongoDB ä¾ç„¶èƒ½å¤Ÿä¿æŒå¤§å¹¶å‘é‡å’Œé«˜æ€§èƒ½ï¼Œè¿™æ˜¯å› ä¸º MongoDB çš„é”ç²’åº¦è™½ç„¶å¾ˆç²—æ”¾ï¼Œä½†æ˜¯åœ¨é”å¤„ç†æœºåˆ¶å’Œå…³ç³»æ•°æ®åº“é”æœ‰å¾ˆå¤§å·®å¼‚ï¼Œä¸»è¦è¡¨çŽ°åœ¨ MongoDB æ²¡æœ‰å®Œæ•´äº‹åŠ¡æ”¯æŒï¼Œæ“ä½œåŽŸå­æ€§åªåˆ°å•ä¸ª document çº§åˆ«ï¼Œæ‰€ä»¥é€šå¸¸æ“ä½œç²’åº¦æ¯”è¾ƒå°ï¼› MongoDB é”å®žé™…å ç”¨æ—¶é—´æ˜¯å†…å­˜æ•°æ®è®¡ç®—å’Œå˜æ›´æ—¶é—´ï¼Œé€šå¸¸å¾ˆå¿«ï¼› MongoDB é”æœ‰ä¸€ç§ä¸´æ—¶æ”¾å¼ƒæœºåˆ¶ï¼Œå½“å‡ºçŽ°éœ€è¦ç­‰å¾…æ…¢é€Ÿ IO è¯»å†™æ•°æ®æ—¶ï¼Œå¯ä»¥å…ˆä¸´æ—¶æ”¾å¼ƒï¼Œç­‰ IO å®Œæˆä¹‹åŽå†é‡æ–°èŽ·å–é”ã€‚ é€šå¸¸ä¸å‡ºé—®é¢˜ä¸ç­‰äºŽæ²¡æœ‰é—®é¢˜ï¼Œå¦‚æžœæ•°æ®æ“ä½œä¸å½“ï¼Œä¾ç„¶ä¼šå¯¼è‡´é•¿æ—¶é—´å ç”¨å†™é”ï¼Œæ¯”å¦‚ä¸‹é¢æåˆ°çš„å‰å°å»ºç´¢å¼•æ“ä½œï¼Œå½“å‡ºçŽ°è¿™ç§æƒ…å†µçš„æ—¶å€™ï¼Œæ•´ä¸ªæ•°æ®åº“å°±å¤„äºŽå®Œå…¨é˜»å¡žçŠ¶æ€ï¼Œæ— æ³•è¿›è¡Œä»»ä½•è¯»å†™æ“ä½œï¼Œæƒ…å†µååˆ†ä¸¥é‡ã€‚ è§£å†³é—®é¢˜çš„æ–¹æ³•ï¼Œå°½é‡é¿å…é•¿æ—¶é—´å ç”¨å†™é”æ“ä½œï¼Œå¦‚æžœæœ‰ä¸€äº›é›†åˆæ“ä½œå®žåœ¨éš¾ä»¥é¿å…ï¼Œå¯ä»¥è€ƒè™‘æŠŠè¿™ä¸ªé›†åˆæ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„ MongoDB åº“é‡Œï¼Œå› ä¸º MongoDB ä¸åŒåº“é”æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œåˆ†ç¦»é›†åˆå¯ä»¥é¿å…æŸä¸€ä¸ªé›†åˆæ“ä½œå¼•å‘å…¨å±€é˜»å¡žé—®é¢˜ã€‚ å»ºç´¢å¼•å¯¼è‡´æ•°æ®åº“é˜»å¡žä¸Šé¢æåˆ°äº† MongoDB åº“çº§é”çš„é—®é¢˜ï¼Œå»ºç´¢å¼•å°±æ˜¯ä¸€ä¸ªå®¹æ˜“å¼•èµ·é•¿æ—¶é—´å†™é”çš„é—®é¢˜ï¼ŒMongoDB åœ¨å‰å°å»ºç´¢å¼•æ—¶éœ€è¦å ç”¨ä¸€ä¸ªå†™é”ï¼ˆè€Œä¸”ä¸ä¼šä¸´æ—¶æ”¾å¼ƒï¼‰ï¼Œå¦‚æžœé›†åˆçš„æ•°æ®é‡å¾ˆå¤§ï¼Œå»ºç´¢å¼•é€šå¸¸è¦èŠ±æ¯”è¾ƒé•¿æ—¶é—´ï¼Œç‰¹åˆ«å®¹æ˜“å¼•èµ·é—®é¢˜ã€‚ è§£å†³çš„æ–¹æ³•å¾ˆç®€å•ï¼ŒMongoDB æä¾›äº†ä¸¤ç§å»ºç´¢å¼•çš„è®¿é—®ï¼Œä¸€ç§æ˜¯ background æ–¹å¼ï¼Œä¸éœ€è¦é•¿æ—¶é—´å ç”¨å†™é”ï¼Œå¦ä¸€ç§æ˜¯éž background æ–¹å¼ï¼Œéœ€è¦é•¿æ—¶é—´å ç”¨é”ã€‚ä½¿ç”¨ background æ–¹å¼å°±å¯ä»¥è§£å†³é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œä¸ºè¶…å¤§è¡¨ posts å»ºç«‹ç´¢å¼• //åƒä¸‡ä¸ç”¨ä½¿ç”¨ db.posts.ensureIndex({user_id: 1}) //è€Œåº”è¯¥ä½¿ç”¨ db.posts.ensureIndex({user_id: 1}, {background: 1}) http://www.111com.net/database/165981.htm]]></content>
      <categories>
        <category>mongo</category>
      </categories>
      <tags>
        <tag>mongo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ffmpegçš„ä½¿ç”¨]]></title>
    <url>%2F2020%2F04%2F04%2Fffmpeg%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[è§†é¢‘æ ¼å¼å°ç§‘æ™®åœ¨å¼€å§‹ä¸‹é¢çš„æ•™ç¨‹ä¹‹å‰æœ‰å¿…è¦å…ˆç®€å•ç§‘æ™®ä¸€ä¸‹è§†é¢‘æ ¼å¼çš„çŸ¥è¯†ã€‚ è§†é¢‘æ ¼å¼æ˜¯ä¸€ç§éžå¸¸ä¸ä¸“ä¸šçš„å«æ³•ï¼Œäº‹å®žä¸Šï¼Œè§†é¢‘æœ‰ç¼–ç æ ¼å¼å’Œå®¹å™¨æ ¼å¼ä¸¤ç§ã€‚ç¼–ç æ ¼å¼ä¹‹äºŽå®¹å™¨æ ¼å¼å°±åƒç‰›å¥¶ä¹‹äºŽæ¯å­ä¸€æ ·ã€‚ å¸¸è§çš„è§†é¢‘æ–‡ä»¶æœ‰mp4(mpeg4 part 14)ï¼Œmkvï¼Œflvç­‰ï¼Œè¿™äº›æ˜¯è§†é¢‘çš„å®¹å™¨æ ¼å¼/å°è£…æ ¼å¼(Container format)ã€‚å®ƒä»¬åŒ…å«è§†é¢‘æµå’ŒéŸ³é¢‘æµï¼Œmkvæ”¯æŒå¤šæ¡éŸ³è½¨å’Œå­—å¹•ï¼Œå› æ­¤æ˜¯ç›®å‰æœ€å—æ¬¢è¿Žçš„å®¹å™¨æ ¼å¼ã€‚æ¯”å¦‚åœ¨æ’­æ”¾mkvè§†é¢‘çš„æ—¶å€™ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒè¯­è¨€çš„éŸ³è½¨/å­—å¹•ã€‚ è‡³äºŽè§†é¢‘ç¼–ç æ ¼å¼(Encoding format)ï¼Œåˆ™æ˜¯è¿™äº›å®¹å™¨æ‰€åŒ…å«çš„è§†é¢‘æµ/éŸ³é¢‘æµæ‰€é‡‡ç”¨çš„åŽ‹ç¼©æ–¹å¼ï¼Œæ¯”å¦‚æœ€å¸¸ç”¨çš„h.264/aacï¼Œmpeg4/mpeg3ç­‰ã€‚ å®‰è£…ffmpegåœ¨mac osä¸Šå®‰è£…ffmpegï¼š brew install ffmpeg â€“with-fdk-aac â€“with-libass â€“with-sdl2ä¸Žé»˜è®¤å®‰è£…ç›¸æ¯”ï¼Œè¿™é‡Œå¢žåŠ äº†å¯¹fdk-aacéŸ³é¢‘åº“å’Œasså­—å¹•åº“çš„æ”¯æŒï¼ŒåŒæ—¶å®‰è£…äº†ffplayæ’­æ”¾å™¨ã€‚ åœ¨linuxä¸Šå®‰è£…ffmpegæœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨å®˜æ–¹æä¾›çš„é™æ€ç¼–è¯‘å®‰è£…åŒ…ï¼Œè§£åŽ‹åŽå³å¯ä½¿ç”¨ã€‚ ffmpegå‘½ä»¤é€šç”¨æ ¼å¼å…ˆæ¥è®¤è¯†ä¸€ä¸‹ffmpegå‘½ä»¤è¡Œå·¥å…·çš„æ ¼å¼ï¼š ffmpeg -global_options -input_1_options -i input_1 -input_2_options -i input_2 -output_1_options output_1 â€¦ä¸ç®¡ä½ çœ‹åˆ°çš„ffmpegå‘½ä»¤å¤šä¹ˆå¤æ‚ï¼Œä¸‡å˜ä¸ç¦»å…¶å®—ï¼Œéƒ½å¯ä»¥æŒ‰ç…§è¿™ä¸ªæ ¼å¼æ‹†åˆ†æˆå‡ ä¸ªå•ç‹¬çš„éƒ¨åˆ†ï¼Œå„ä¸ªé€‰é¡¹çš„å«ä¹‰å¯ä»¥æŸ¥é˜…ffmpegçš„documentationã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼š è¾“å…¥è¾“å‡º è‡³å°‘æœ‰ä¸€ä¸ªè¾“å…¥å’Œè¾“å‡º å¯ä»¥åŒæ—¶æœ‰å¤šä¸ªè¾“å…¥å’Œè¾“å‡º è¾“å…¥ã€è¾“å‡ºä¸ä¸€å®šæ˜¯æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯rtmpæµçš„åœ°å€ã€æ‘„åƒå¤´å¯¹åº”çš„è®¾å¤‡æ–‡ä»¶ç­‰ é¡ºåºå¾ˆé‡è¦ æ‰€æœ‰çš„è¾“å…¥å®Œäº†ç„¶åŽæ˜¯è¾“å‡º * æŸä¸ªé€‰é¡¹åªå¯¹å®ƒåŽé¢çš„è¾“å…¥æˆ–è¾“å‡ºèµ·ä½œç”¨ 1ã€æŸ¥çœ‹è§†é¢‘çš„ä¿¡æ¯ffmpeg -hide_banner -i input.mkv æˆ–è€… ffprobe -hide_banner input.mkv é€šè¿‡ffmpegå¯ä»¥æŸ¥çœ‹ä¸€ä¸ªè§†é¢‘æ–‡ä»¶çš„ä»¥ä¸‹åŸºæœ¬ä¿¡æ¯ï¼š è§†é¢‘/éŸ³é¢‘çš„ç¼–ç æ ¼å¼åˆ†è¾¨çŽ‡(1080p or 1080i, Progressive Interlaced)æ—¶é•¿(duration)/ç çŽ‡(bitrate)/å¸§çŽ‡(fps,frames per second)éŸ³è½¨(Audio)/å­—å¹•(Subtitle) 2ã€è½¬ç (transcode)è½¬ç æ˜¯æŒ‡å¯¹æµ(è§†é¢‘ã€éŸ³é¢‘å’Œå­—å¹•)è¿›è¡Œè§£ç ç„¶åŽå†ç¼–ç ï¼Œè¿™ä¸ªè¿‡ç¨‹éžå¸¸è€—CPUã€‚è¾“å‡ºçš„ç¼–ç æ ¼å¼é€šè¿‡-codecæŒ‡å®šï¼Œå¦‚æžœä¸æŒ‡å®šï¼Œffmpegå¹¶ä¸ä¼šç›´æŽ¥copyï¼Œè€Œæ˜¯é‡‡ç”¨æ ¹æ®å®¹å™¨æ ¼å¼é‡‡ç”¨ç›¸åº”çš„é»˜è®¤ç¼–ç æ ¼å¼è¿›è¡Œé‡æ–°ç¼–ç ã€‚ ä¸ºäº†ç®€å•èµ·è§ï¼ŒæŠŠè½¬æ¢å®¹å™¨æ ¼å¼ä¹Ÿå½’ä¸ºè½¬ç ï¼Œffmpegä¼šé€šè¿‡è¾“å‡ºæ–‡ä»¶çš„åŽç¼€åˆ¤æ–­è¾“å‡ºçš„å®¹å™¨æ ¼å¼ï¼Œå› æ­¤ä¸éœ€è¦æŒ‡å®š(-f)ã€‚ è§†é¢‘å°†mkvè½¬æ¢æˆmp4 æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å°†mkvè½¬æ¢æˆmp4ï¼š å¾ˆå¤šè§†é¢‘ç½‘ç«™ä¸æ”¯æŒä¸Šä¼ mkvæ ¼å¼å¤§éƒ¨åˆ†è§†é¢‘å‰ªè¾‘è½¯ä»¶ï¼Œæ¯”å¦‚premiereç­‰ä¸æ”¯æŒå¯¼å…¥mkvæ ¼å¼çš„è§†é¢‘ä¸‹é¢çš„å‘½ä»¤å°†mkvçš„è§†é¢‘å’ŒéŸ³é¢‘æµé‡æ–°å°è£…æˆmp4æ–‡ä»¶ï¼Œä¸è¿›è¡Œé‡æ–°ç¼–ç (æ— æŸ) ffmpeg -i input.mkv -codec copy output.mp4åˆ¶ä½œmkv mkvæ ¼å¼èƒ½å¤Ÿå°è£…å¤šä¸ªéŸ³é¢‘ã€å­—å¹•è½¨ï¼Œæ˜¯ç›®å‰æœ€ä¸ºæµè¡Œçš„è§†é¢‘åˆ†å‘æ ¼å¼ï¼Œé€šå¸¸ä½¿ç”¨mkvtoolnixå·¥å…·æ¥ç¼–è¾‘åˆ¶ä½œmkvè§†é¢‘ï¼Œé€šè¿‡ffmpegä¹Ÿèƒ½å®Œæˆä¸€äº›ç®€å•çš„ä»»åŠ¡ã€‚ å°†mpeg4/mp3ç¼–ç çš„è§†é¢‘é‡æ–°ç¼–ç ä¸ºh.264/aacï¼Œå¹¶å’Œå­—å¹•ä¸€èµ·å°è£…æˆmkvæ–‡ä»¶ï¼š ffmpeg -i input.avi -i input.srt -map 0:0 -map 0:1 -map 1:0 -c:v libx264 -c:a aac -c:s srt output.mkvè¿™é‡Œä½¿ç”¨ffmpegè‡ªå¸¦çš„aacéŸ³é¢‘ç¼–ç å™¨ï¼Œè€Œä¸æ˜¯fdkaacã€‚ éŸ³é¢‘ffmpegä¸ä»…èƒ½å¤„ç†è§†é¢‘ï¼ŒéŸ³é¢‘æ–‡ä»¶ä¹Ÿä¸åœ¨è¯ä¸‹ï¼Œå› æ­¤ï¼ŒåŒæ ·å¯ä»¥ç”¨ffmpegè½¬æ¢éŸ³é¢‘æ ¼å¼ã€‚ å°†flacæ— æŸçš„éŸ³ä¹è½¬æ¢æˆé«˜è´¨é‡(High Qualityï¼Œå³320Kb)çš„mp3æ ¼å¼ï¼š ffmpeg -i &quot;Michael Jackson - Billie Jean.flac&quot; -ab 320k &quot;Michael Jackson - Billie Jean.mp3&quot; 3ã€æˆªå–(cut)ä»Žè§†é¢‘ä¸­æˆªå–å‡ºç²¾å½©ç‰‡æ®µæ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„åŠŸèƒ½ã€‚ ä»Žç¬¬2åˆ†é’Ÿå¼€å§‹ï¼Œæˆªå–30ç§’ã€‚æ‰€æœ‰æµéƒ½ç›´æŽ¥æ‹·è´ã€‚ ffmpeg -ss 00:02:00.0 -i input.mkv -t 30 -c copy output.mkv-ssè®¾ç½®å¼€å§‹æ—¶é—´ç‚¹ï¼Œæ ¼å¼æ˜¯HH:MM:SS.xxxæˆ–sec.msecã€‚å½“ä½œä¸ºè¾“å…¥é€‰é¡¹æ—¶ï¼Œå¯ä»¥å¿«é€Ÿseekåˆ°æŒ‡å®šæ—¶é—´ç‚¹ï¼› -tä½œä¸ºè¾“å‡ºé€‰é¡¹ï¼Œè®¾ç½®æ—¶é•¿ã€‚ æˆªå–æœ€å¤§çš„é—®é¢˜æ˜¯éš¾ä»¥åšåˆ°ç²¾ç¡®æŽ§åˆ¶æ—¶é—´ç‚¹ï¼Œå¤§éƒ¨åˆ†çš„è§†é¢‘å‰ªè¾‘è½¯ä»¶éƒ½å­˜åœ¨è¿™æ ·çš„é—®é¢˜ï¼š è§†é¢‘å¼€å¤´å¡é¡¿/ä¸æµç•…ï¼Œç”»é¢ä¸Žå£°éŸ³ä¸åŒæ­¥æ—¶é—´è¯¯å·®ç”šè‡³èƒ½è¾¾åˆ°ç§’çº§ï¼Œæ¯”å¦‚æˆªå–10ç§’çš„ç‰‡æ®µï¼Œå¯èƒ½ä¼šå¾—åˆ°12ç§’çš„è¾“å‡ºåŽŸå› æ˜¯ffmpegä¼šseekåˆ°æŒ‡å®šæ—¶é—´ç‚¹å‰çš„ä¸€ä¸ªå…³é”®å¸§ï¼Œå¦‚æžœæ˜¯copyè§†é¢‘æµï¼Œseekç‚¹å’Œèµ·ç‚¹ä¹‹é—´çš„é¢å¤–éƒ¨åˆ†å°†ä¼šè¢«ä¿ç•™ï¼Œå› æ­¤å°±äº§ç”Ÿäº†è¯¯å·®ã€‚è§£å†³åŠžæ³•æ˜¯å°†-ssä½œä¸ºè¾“å‡ºé€‰é¡¹æˆ–è¿›è¡Œé‡æ–°ç¼–ç ï¼š ffmpeg -i input.mkv -ss 00:02:00.0 -t 30 -c copy output.mkv-ssä½œä¸ºè¾“å‡ºé€‰é¡¹æ—¶ï¼Œè§£ç åˆ°æŒ‡å®šçš„æ—¶é—´ç‚¹ï¼Œç„¶åŽå¼€å§‹è¾“å‡ºï¼Œç›¸å½“äºŽè¦æ‰«æå‰é¢çš„æ‰€æœ‰å¸§ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼èƒ½èŽ·å¾—æ›´ç²¾ç¡®çš„è¾“å‡ºã€‚ å¦‚æžœè¿˜æ˜¯å‡ºçŽ°ä¸Šè¿°é—®é¢˜ï¼Œä½¿ç”¨ä¸‹é¢çš„ç»ˆæžè§£å†³æ–¹æ¡ˆ(ä½¿ç”¨ä¸¤æ¬¡seek)ï¼š ffmpeg -ss 00:01:30.0 -i input.mkv -ss 00:00:30.0 -t 30 output.mkv 4ã€æˆªå›¾(screenshot)æˆªå›¾å°±æ˜¯å°†æŸä¸ªè§†é¢‘å¸§ä¿å­˜ä¸ºå›¾ç‰‡ï¼Œä¾‹å¦‚ï¼š åœ¨æŒ‡å®šæ—¶é—´ç‚¹æˆªå›¾ ffmpeg -ss 00:30:14.435 -i input.mkv -vframes 1 out.png -ssä½œä¸ºè¾“å…¥é€‰é¡¹ï¼Œå¯ä»¥å¿«é€Ÿå®šä½åˆ°æŒ‡å®šæ—¶é—´ç‚¹ï¼›å¦‚æžœä½œä¸ºè¾“å‡ºé€‰é¡¹ï¼Œéœ€è¦è¯»å–æŒ‡å®šæ—¶é—´ç‚¹å‰é¢æ‰€æœ‰çš„å¸§ï¼Œä½†å¯ä»¥èŽ·å¾—æ›´ç²¾ç¡®çš„ä½ç½®ã€‚ * -vframesè®¾ç½®è¾“å‡ºçš„å¸§æ•°ã€‚ ç»“åˆfpsè§†é¢‘æ»¤é•œï¼Œå¯ä»¥ä»Žè§†é¢‘ä¸­æˆªå–å¤šå¼ å›¾ç‰‡ã€‚ä¾‹å¦‚ï¼š æ¯1åˆ†é’Ÿæˆªä¸€å¼ å›¾ï¼Œåœ¨æˆªå›¾æ–‡ä»¶åä¸­æ·»åŠ å½“å‰çš„æ—¶é—´ ffmpeg -i input.mkv -vf fps=1/60 -strftime 1 out_%Y%m%d%H%M%S.jpg 5ã€åŽ‹ç¼©(compress)ä¸€å¼ è“å…‰åŽŸç›˜æŽ¥è¿‘50Gï¼Œè€Œ720pçš„ç”µå½±å¯èƒ½åªæœ‰2Gï¼Œè¿™æ˜¯é€šè¿‡åŽ‹ç¼©å®žçŽ°çš„ã€‚åœ¨ä¿è¯ç”»è´¨çš„å‰æä¸‹ä½¿ç”¨æ›´å°çš„æ–‡ä»¶å­˜å‚¨ï¼Œä¸€ç›´æ˜¯åŽ‹ç¼©çš„ç›®æ ‡ã€‚ç„¶è€ŒåŽ‹ç¼©å¹¶éžé‚£ä¹ˆç®€å•ï¼Œæ¯”å¦‚åŒæ ·æ˜¯720pçš„ç”µå½±ï¼Œæœ‰çš„åªæœ‰2ä¸ªGï¼Œæœ‰çš„å´æœ‰5ä¸ªGï¼Œç„¶è€Œä»Žè§†è§‰ä¸Šå‡ ä¹Žçœ‹ä¸å‡ºåŒºåˆ«æ¥ã€‚ è¿™é‡Œåªä»‹ç»åŽ‹ç¼©çš„ä¸€ä¸ªç®€å•ç”¨é€”ï¼šresizeã€‚ å°†1080pè½¬æˆ720pï¼Œå®½åº¦è‡ªé€‚åº” ffmpeg -i input.mkv -c copy -c:v libx264 -vf scale=-2:720 output.mkv-vfæ˜¯-filter:vçš„ç®€å†™ï¼Œ-filteræŒ‡å®šæ»¤é•œï¼Œ:væ˜¯æµé€‰æ‹©å™¨ï¼Œè¡¨ç¤ºå¯¹è§†é¢‘æµåº”ç”¨æ»¤é•œã€‚scaleæ»¤é•œåŽé¢çš„å‚æ•°æ˜¯w:hï¼Œwå’Œhå¯ä»¥åŒ…å«ä¸€äº›å˜é‡ï¼Œæ¯”å¦‚åŽŸå§‹çš„å®½é«˜åˆ†åˆ«ä¸ºiwå’Œihã€‚å½“å…¶ä¸­ä¸€ä¸ªæ˜¯è´Ÿæ•°æ—¶ï¼Œå‡è®¾ä¸º-nï¼Œffmpegè‡ªåŠ¨ä½¿ç”¨å¦ä¸€ä¸ªå€¼æŒ‰ç…§åŽŸå§‹çš„å®½é«˜æ¯”(aspect ratio)è®¡ç®—å‡ºè¯¥å€¼ï¼Œå¹¶ä¸”ä¿è¯è®¡ç®—å‡ºæ¥çš„å€¼èƒ½è¢«næ•´é™¤ã€‚ å› ä¸ºscaleæ»¤é•œæ˜¯é’ˆå¯¹æœªç¼–ç çš„åŽŸå§‹æ•°æ®ï¼Œæ‰€ä»¥è§†é¢‘æµä¸èƒ½ç”¨copyï¼Œéœ€è¦è¿›è¡Œé‡æ–°ç¼–ç ã€‚-c copy -c:v libx264è¡¨ç¤ºè§†é¢‘æµä½¿ç”¨h.264é‡æ–°ç¼–ç ï¼Œå…¶ä»–æµç›´æŽ¥copyï¼Œé¡ºåºä¸èƒ½é¢ å€’ã€‚ 6ã€å­—å¹•(subtitle)å¯¹äºŽè§†é¢‘å‘å¸ƒè€…ï¼Œç»™è§†é¢‘æ·»åŠ å­—å¹•å¾ˆæœ‰å¿…è¦ã€‚å¦‚æžœæ˜¯mkvï¼Œå¯ä»¥é‡‡ç”¨åˆ¶ä½œmkvçš„æ–¹æ³•å°†å­—å¹•æ–‡ä»¶å°è£…åˆ°mkvæ–‡ä»¶é‡Œã€‚å¦‚æžœæ˜¯mp4è§†é¢‘ï¼Œåˆ™éœ€è¦è¿›è¡Œçƒ§å½•(draw)ï¼Œå³å¯¹è§†é¢‘é‡æ–°ç¼–ç çš„è¿‡ç¨‹ä¸­å°†å­—å¹•èžå…¥è§†é¢‘æµã€‚ ffmpeg -i input.mkv -vf subtitles=input.srt output.mp4è¯¥è¿‡ç¨‹æ˜¯é€šè¿‡subtitlesæ»¤é•œå®Œæˆçš„ï¼Œå®‰è£…ffmpegçš„æ—¶å€™éœ€è¦å¯ç”¨libassåº“ã€‚subtitlesçš„å‚æ•°æ˜¯å­—å¹•æ–‡ä»¶ï¼Œå¦‚æžœæ˜¯mkvæ–‡ä»¶åˆ™è¡¨ç¤ºä½¿ç”¨mkvçš„é»˜è®¤å­—å¹•æµã€‚ å¦‚æžœæ˜¯assæ ¼å¼çš„å­—å¹•æ–‡ä»¶ï¼Œåˆ™ä½¿ç”¨assæ»¤é•œï¼š ffmpeg -i input.mkv -vf ass=input.ass output.mp4æ®æˆ‘æ‰€çŸ¥ï¼Œé€šå¸¸asså­—å¹•å…·æœ‰æ›´ä¸°å¯Œçš„æ ·å¼ã€‚ å¦ä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨-c:s mov_textå°†å­—å¹•æµå°è£…è¿›mp4é‡Œï¼Œå®ƒä¸éœ€è¦é‡æ–°ç¼–ç ï¼Œä½†æ˜¯ç›®å‰å¤§éƒ¨åˆ†æ’­æ”¾å™¨å¯¹mp4çš„è½¯å­—å¹•æ”¯æŒä¸å¥½ã€‚ 7ã€æå–(extract)æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä»Žç”µå½±ä¸­æå–æ’æ›²æˆ–ä»Žè§†é¢‘ä¸­æå–èƒŒæ™¯éŸ³ä¹ï¼Œé€šè¿‡ffmpegå¯ä»¥å¾ˆå®¹æ˜“ä»Žè§†é¢‘æ–‡ä»¶ä¸­æå–éŸ³é¢‘ï¼š ffmpeg -i cut.mp4 -vn output.mp3-vnè¡¨ç¤ºä¸è¾“å‡ºè§†é¢‘æµã€‚ è¾“å‡ºçš„mp3é»˜è®¤çš„ç çŽ‡æ˜¯128kbï¼Œå¯ä»¥ä½¿ç”¨abæŽ§åˆ¶ã€‚ç»“åˆæˆªå–ä¸­çš„-sså’Œ-tè¿˜å¯ä»¥åªæå–ä¸€ä¸ªéƒ¨åˆ†çš„éŸ³é¢‘ã€‚ ä»Žmkvæ–‡ä»¶ä¸­æå–å­—å¹•ä¹Ÿæ˜¯åŒæ ·çš„æ–¹æ³•ã€‚ 8ã€æ°´å°(watermark)ç»™è§†é¢‘æ·»åŠ æ°´å°æ˜¯é€šè¿‡overlayæ»¤é•œå®žçŽ°çš„ï¼Œoverlayæ»¤é•œçš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªè§†é¢‘è¦†ç›–å¦ä¸€ä¸ªè§†é¢‘ä¸Šé¢ï¼Œå®ƒæœ‰ä¸¤ä¸ªè¾“å…¥ï¼Œå‰ä¸€ä¸ªæ˜¯ä¸‹å±‚(main)ï¼ŒåŽä¸€ä¸ªæ˜¯ä¸Šå±‚(overlaid)ã€‚ overlayçš„å‚æ•°x:yæ˜¯ä¸Šå±‚å·¦ä¸Šè§’çš„åæ ‡ï¼Œ0:0è¡¨ç¤ºä½äºŽä¸‹å±‚çš„å·¦ä¸Šè§’ã€‚å®ƒå¯ä»¥åŒ…å«ä»¥ä¸‹å‚æ•°ï¼š W(w):ä¸‹(ä¸Š)å±‚çš„å®½H(h):ä¸‹(ä¸Š)å±‚çš„é«˜å°†æ°´å°/logoæ·»åŠ åˆ°è§†é¢‘çš„å³ä¸Šè§’ï¼Œå¹¶ä¸”å’Œè¾¹ç¼˜ä¿æŒ5åƒç´ çš„è·ç¦»ï¼š ffmpeg -i input.mkv -i input.png -filter_complex &quot;overlay=W-w-5:5&quot; -c copy -c:v libx264 output.mkvinput.pngæ˜¯å¸¦é€æ˜ŽèƒŒæ™¯çš„logoï¼Œä½œä¸ºä¸Šå±‚ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè§†é¢‘éœ€è¦é‡æ–°ç¼–ç ï¼Œå…¶ä»–æµ(éŸ³é¢‘ã€å­—å¹•)åˆ™ç›´æŽ¥copyï¼Œé¡ºåºä¸èƒ½é¢ å€’ã€‚ 9ã€æ··æµ(Muxing)å¦‚æžœæˆ‘ä»¬æ‹æ‘„äº†ä¸€æ®µè§†é¢‘ï¼Œæƒ³ç»™å®ƒæ·»åŠ èƒŒæ™¯éŸ³ä¹ï¼Œæœ€å¥½è¿˜æ˜¯å€ŸåŠ©è§†é¢‘ç¼–è¾‘è½¯ä»¶ï¼Œå®ƒèƒ½å¯¹éŸ³ä¹çš„å¼€å¤´å’Œç»“å°¾åˆ†åˆ«è¿›è¡Œå¢žå¼ºå’Œå‡å¼±çš„å¤„ç†ï¼Œå¦‚æžœä¸åœ¨æ„è¿™äº›ç»†èŠ‚ï¼Œå®Œå…¨å¯ä»¥ç”¨ffmpegæ¥ä»£æ›¿ã€‚ æ›¿æ¢éŸ³é¢‘ffmpeg -i input.mkv -i input.mp3 -map 0:v -map 1:a -c copy -shortest output.mp4-mapçš„ä½œç”¨æ˜¯æ‰‹åŠ¨é€‰æ‹©è¾“å‡ºçš„æµï¼š -map 0:v â€“ ä»Žè¾“å…¥0(ç¬¬1ä¸ªè¾“å…¥ï¼Œå³input.mkv) é€‰æ‹©è§†é¢‘æµ-map 1:a â€“ ä»Žè¾“å…¥1(ç¬¬2ä¸ªè¾“å…¥ï¼Œå³input.mp3) é€‰æ‹©éŸ³é¢‘æµç¬¬1ä¸ªmapå¯¹åº”è¾“å‡ºçš„ç¬¬1ä¸ªæµï¼Œç¬¬2ä¸ªmapå¯¹åº”è¾“å‡ºçš„ç¬¬2ä¸ªæµï¼Œä»¥æ­¤ç±»æŽ¨ã€‚ åˆå¹¶éŸ³é¢‘å¦ä¸€ä¸ªå¸¸è§çš„å½¢å¼æ˜¯å°†ä¸¤ä¸ªéŸ³é¢‘åˆå¹¶æˆä¸€ä¸ªï¼Œéœ€è¦ä½¿ç”¨amergeæ»¤é•œï¼š ffmpeg -i input.mkv -i output.aac -filter_complex &quot;[0:a][1:a]amerge=inputs=2[a]&quot; -map 0:v -map &quot;[a]&quot; -c:v copy -c:a aac -ac 2 -shortest output.mp4 10ã€åˆ¶ä½œgifç»“åˆå‰é¢è®²åˆ°çš„æˆªå–å’ŒåŽ‹ç¼©ï¼Œå°†è¾“å‡ºæ–‡ä»¶çš„åŽç¼€æ”¹ä¸ºgifå°±å¯ä»¥å¾—åˆ°åŠ¨æ€å›¾ ffmpeg -ss 30 -t 5 -i input.mp4 -r 10 -vf scale=-1:144 -y output.gif-ræŒ‡å®šå¸§çŽ‡ï¼ŒåŽŸå§‹çš„å¸§çŽ‡æ˜¯25ï¼Œé™ä½Žå¸§çŽ‡èƒ½å‡å°gifå›¾ç‰‡çš„å¤§å°ã€‚ ä½†æ˜¯è¿™ç§æ–¹å¼çš„æ•ˆæžœå¾ˆå·®ï¼Œæœ‰ä¸€ç§ç²—ç³™çš„å¸ƒæ–™çš„æ„Ÿè§‰ã€‚ åŽŸå› åœ¨äºŽgifé™åˆ¶åªèƒ½åŒ…å«256ç§é¢œè‰²ï¼Œè€ŒåŽŸå§‹è§†é¢‘å¯èƒ½åŒ…å«æ•°ä»¥ç™¾ä¸‡çš„é¢œè‰²ï¼Œffmpegé»˜è®¤ä¼šä½¿ç”¨ä¸€ç§é€šç”¨çš„è°ƒè‰²æ¿(palettep)ï¼Œå› æ­¤å¯¼è‡´é¢œè‰²å¤±çœŸã€‚2015å¹´ï¼Œffmpegé€šè¿‡å¼•å…¥palettegenå’Œpaletteuseä¸¤ä¸ªæ»¤é•œæ¥æ”¹è¿›è¿™ä¸ªé—®é¢˜ï¼Œå®ƒé€šè¿‡æ‰«ææ•´ä¸ªè§†é¢‘ï¼Œè¾“å‡ºä¸€ä¸ªæœ€ä½³çš„è°ƒè‰²æ¿ï¼Œç„¶åŽå†è½¬æ¢æˆgifçš„è¿‡ç¨‹ä¸­åº”ç”¨è¿™ä¸ªè°ƒè‰²æ¿ä»Žè€Œé¿å…é¢œè‰²å¤±çœŸã€‚ ä¸‹é¢çš„å‘½ä»¤ä»Žinput.mp4çš„ç¬¬30ç§’å¼€å§‹æˆªå–5ç§’ï¼Œç”Ÿæˆé«˜144åƒç´ çš„gifåŠ¨æ€å›¾ï¼š palette=&quot;/tmp/palette.png&quot;filters=&quot;fps=10,scale=-1:144:flags=lanczos&quot; ffmpeg -ss 30 -t 5 -i input.mp4 -vf &quot;$filters,palettegen&quot; -y $paletteffmpeg -ss 30 -t 5 -i input.mp4 -i $palette -filter_complex &quot;$filters [x]; [x][1:v] paletteuse&quot; -y output.gif ä¸Žå‰ä¸€ä¸ªè¾“å‡ºç›¸æ¯”ï¼Œè´¨é‡æå‡äº†å¾ˆå¤šã€‚ å¦ä¸€ä¸ªæœ‰å¾…ç ”ç©¶çš„éš¾é¢˜æ˜¯å¦‚ä½•æŽ§åˆ¶è¾“å‡ºgifçš„å¤§å°ã€‚åœ¨ä¸å½±å“ç”»è´¨çš„å‰æä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›ä½“ç§¯è¶Šå°è¶Šå¥½ã€‚æ¯”å¦‚ç½‘ä¸Šæœ‰çš„gifå›¾å¾ˆæ¸…æ™°ï¼Œå´ä¸è¶…è¿‡1Mã€‚è€Œä¸€æ®µ500Kçš„è§†é¢‘æ–‡ä»¶ï¼Œä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•è½¬æˆgifåŽè¾“å‡ºçš„gifå´æœ‰1.6Mã€‚]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ†å¸ƒå¼çŽ¯å¢ƒä¸‹redisçš„ä½¿ç”¨ä¼˜åŒ–]]></title>
    <url>%2F2020%2F03%2F10%2F%E5%88%86%E5%B8%83%E5%BC%8F%E7%8E%AF%E5%A2%83%E4%B8%8Bredis%E7%9A%84%E4%BD%BF%E7%94%A8%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[åˆ†å¸ƒå¼ä¸Žé›†ç¾¤å•æœºå¤„ç†åˆ°è¾¾ç“¶é¢ˆçš„æ—¶å€™ï¼Œä½ å°±æŠŠå•æœºå¤åˆ¶å‡ ä»½ï¼Œè¿™æ ·å°±æž„æˆäº†ä¸€ä¸ªâ€œé›†ç¾¤â€ã€‚é›†ç¾¤ä¸­æ¯å°æœåŠ¡å™¨å°±å«åšè¿™ä¸ªé›†ç¾¤çš„ä¸€ä¸ªâ€œèŠ‚ç‚¹â€ï¼Œæ‰€æœ‰èŠ‚ç‚¹æž„æˆäº†ä¸€ä¸ªé›†ç¾¤ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æä¾›ç›¸åŒçš„æœåŠ¡ï¼Œé‚£ä¹ˆè¿™æ ·ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›å°±ç›¸å½“äºŽæå‡äº†å¥½å‡ å€ï¼ˆæœ‰å‡ ä¸ªèŠ‚ç‚¹å°±ç›¸å½“äºŽæå‡äº†è¿™ä¹ˆå¤šå€ï¼‰ã€‚ä½†é—®é¢˜æ˜¯ç”¨æˆ·çš„è¯·æ±‚ç©¶ç«Ÿç”±å“ªä¸ªèŠ‚ç‚¹æ¥å¤„ç†å‘¢ï¼Ÿæœ€å¥½èƒ½å¤Ÿè®©æ­¤æ—¶æ­¤åˆ»è´Ÿè½½è¾ƒå°çš„èŠ‚ç‚¹æ¥å¤„ç†ï¼Œè¿™æ ·ä½¿å¾—æ¯ä¸ªèŠ‚ç‚¹çš„åŽ‹åŠ›éƒ½æ¯”è¾ƒå¹³å‡ã€‚è¦å®žçŽ°è¿™ä¸ªåŠŸèƒ½ï¼Œå°±éœ€è¦åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¹‹å‰å¢žåŠ ä¸€ä¸ªâ€œè°ƒåº¦è€…â€çš„è§’è‰²ï¼Œç”¨æˆ·çš„æ‰€æœ‰è¯·æ±‚éƒ½å…ˆäº¤ç»™å®ƒï¼Œç„¶åŽå®ƒæ ¹æ®å½“å‰æ‰€æœ‰èŠ‚ç‚¹çš„è´Ÿè½½æƒ…å†µï¼Œå†³å®šå°†è¿™ä¸ªè¯·æ±‚äº¤ç»™å“ªä¸ªèŠ‚ç‚¹å¤„ç†ã€‚è¿™ä¸ªâ€œè°ƒåº¦è€…â€æœ‰ä¸ªç‰›é€¼äº†åå­—â€”â€”è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ã€‚é›†ç¾¤ç»“æž„çš„å¥½å¤„å°±æ˜¯ç³»ç»Ÿæ‰©å±•éžå¸¸å®¹æ˜“ã€‚å¦‚æžœéšç€ä½ ä»¬ç³»ç»Ÿä¸šåŠ¡çš„å‘å±•ï¼Œå½“å‰çš„ç³»ç»Ÿåˆæ”¯æ’‘ä¸ä½äº†ï¼Œé‚£ä¹ˆç»™è¿™ä¸ªé›†ç¾¤å†å¢žåŠ èŠ‚ç‚¹å°±è¡Œäº†ã€‚ä½†æ˜¯ï¼Œå½“ä½ çš„ä¸šåŠ¡å‘å±•åˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™ï¼Œä½ ä¼šå‘çŽ°ä¸€ä¸ªé—®é¢˜â€”â€”æ— è®ºæ€Žä¹ˆå¢žåŠ èŠ‚ç‚¹ï¼Œè²Œä¼¼æ•´ä¸ªé›†ç¾¤æ€§èƒ½çš„æå‡æ•ˆæžœå¹¶ä¸æ˜Žæ˜¾äº†ã€‚è¿™æ—¶å€™ï¼Œä½ å°±éœ€è¦ä½¿ç”¨å¾®æœåŠ¡ç»“æž„äº†ã€‚ ä»Žå•æœºç»“æž„åˆ°é›†ç¾¤ç»“æž„ï¼Œä½ çš„ä»£ç åŸºæœ¬æ— éœ€è¦ä½œä»»ä½•ä¿®æ”¹ï¼Œä½ è¦åšçš„ä»…ä»…æ˜¯å¤šéƒ¨ç½²å‡ å°æœåŠ¡å™¨ï¼Œæ¯å°æœåŠ¡å™¨ä¸Šè¿è¡Œç›¸åŒçš„ä»£ç å°±è¡Œäº†ã€‚ä½†æ˜¯ï¼Œå½“ä½ è¦ä»Žé›†ç¾¤ç»“æž„æ¼”è¿›åˆ°å¾®æœåŠ¡ç»“æž„çš„æ—¶å€™ï¼Œä¹‹å‰çš„é‚£å¥—ä»£ç å°±éœ€è¦å‘ç”Ÿè¾ƒå¤§çš„æ”¹åŠ¨äº†ã€‚æ‰€ä»¥å¯¹äºŽæ–°ç³»ç»Ÿæˆ‘ä»¬å»ºè®®ï¼Œç³»ç»Ÿè®¾è®¡ä¹‹åˆå°±é‡‡ç”¨å¾®æœåŠ¡æž¶æž„ï¼Œè¿™æ ·åŽæœŸè¿ç»´çš„æˆæœ¬æ›´ä½Žã€‚ä½†å¦‚æžœä¸€å¥—è€ç³»ç»Ÿéœ€è¦å‡çº§æˆå¾®æœåŠ¡ç»“æž„çš„è¯ï¼Œé‚£å°±å¾—å¯¹ä»£ç å¤§åŠ¨å¹²æˆˆäº†ã€‚æ‰€ä»¥ï¼Œå¯¹äºŽè€ç³»ç»Ÿè€Œè¨€ï¼Œç©¶ç«Ÿæ˜¯ç»§ç»­ä¿æŒé›†ç¾¤æ¨¡å¼ï¼Œè¿˜æ˜¯å‡çº§æˆå¾®æœåŠ¡æž¶æž„ï¼Œè¿™éœ€è¦ä½ ä»¬çš„æž¶æž„å¸ˆæ·±æ€ç†Ÿè™‘ã€æƒè¡¡æŠ•å…¥äº§å‡ºæ¯”ã€‚OKï¼Œä¸‹é¢å¼€å§‹ä»‹ç»æ‰€è°“çš„åˆ†å¸ƒå¼ç»“æž„ã€‚åˆ†å¸ƒå¼ç»“æž„å°±æ˜¯å°†ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿï¼ŒæŒ‰ç…§ä¸šåŠ¡åŠŸèƒ½ï¼Œæ‹†åˆ†æˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„å­ç³»ç»Ÿï¼Œåœ¨åˆ†å¸ƒå¼ç»“æž„ä¸­ï¼Œæ¯ä¸ªå­ç³»ç»Ÿå°±è¢«ç§°ä¸ºâ€œæœåŠ¡â€ã€‚è¿™äº›å­ç³»ç»Ÿèƒ½å¤Ÿç‹¬ç«‹è¿è¡Œåœ¨webå®¹å™¨ä¸­ï¼Œå®ƒä»¬ä¹‹é—´é€šè¿‡RPCæ–¹å¼é€šä¿¡ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾éœ€è¦å¼€å‘ä¸€ä¸ªåœ¨çº¿å•†åŸŽã€‚æŒ‰ç…§å¾®æœåŠ¡çš„æ€æƒ³ï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ç…§åŠŸèƒ½æ¨¡å—æ‹†åˆ†æˆå¤šä¸ªç‹¬ç«‹çš„æœåŠ¡ï¼Œå¦‚ï¼šç”¨æˆ·æœåŠ¡ã€äº§å“æœåŠ¡ã€è®¢å•æœåŠ¡ã€åŽå°ç®¡ç†æœåŠ¡ã€æ•°æ®åˆ†æžæœåŠ¡ç­‰ç­‰ã€‚è¿™ä¸€ä¸ªä¸ªæœåŠ¡éƒ½æ˜¯ä¸€ä¸ªä¸ªç‹¬ç«‹çš„é¡¹ç›®ï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œã€‚å¦‚æžœæœåŠ¡ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼Œé‚£ä¹ˆé€šè¿‡RPCæ–¹å¼è°ƒç”¨ã€‚è¿™æ ·çš„å¥½å¤„æœ‰å¾ˆå¤šï¼šç³»ç»Ÿä¹‹é—´çš„è€¦åˆåº¦å¤§å¤§é™ä½Žï¼Œå¯ä»¥ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²ã€ç‹¬ç«‹æµ‹è¯•ï¼Œç³»ç»Ÿä¸Žç³»ç»Ÿä¹‹é—´çš„è¾¹ç•Œéžå¸¸æ˜Žç¡®ï¼ŒæŽ’é”™ä¹Ÿå˜å¾—ç›¸å½“å®¹æ˜“ï¼Œå¼€å‘æ•ˆçŽ‡å¤§å¤§æå‡ã€‚ç³»ç»Ÿä¹‹é—´çš„è€¦åˆåº¦é™ä½Žï¼Œä»Žè€Œç³»ç»Ÿæ›´æ˜“äºŽæ‰©å±•ã€‚æˆ‘ä»¬å¯ä»¥é’ˆå¯¹æ€§åœ°æ‰©å±•æŸäº›æœåŠ¡ã€‚å‡è®¾è¿™ä¸ªå•†åŸŽè¦æžä¸€æ¬¡å¤§ä¿ƒï¼Œä¸‹å•é‡å¯èƒ½ä¼šå¤§å¤§æå‡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é’ˆå¯¹æ€§åœ°æå‡è®¢å•ç³»ç»Ÿã€äº§å“ç³»ç»Ÿçš„èŠ‚ç‚¹æ•°é‡ï¼Œè€Œå¯¹äºŽåŽå°ç®¡ç†ç³»ç»Ÿã€æ•°æ®åˆ†æžç³»ç»Ÿè€Œè¨€ï¼ŒèŠ‚ç‚¹æ•°é‡ç»´æŒåŽŸæœ‰æ°´å¹³å³å¯ã€‚æœåŠ¡çš„å¤ç”¨æ€§æ›´é«˜ã€‚æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬å°†ç”¨æˆ·ç³»ç»Ÿä½œä¸ºå•ç‹¬çš„æœåŠ¡åŽï¼Œè¯¥å…¬å¸æ‰€æœ‰çš„äº§å“éƒ½å¯ä»¥ä½¿ç”¨è¯¥ç³»ç»Ÿä½œä¸ºç”¨æˆ·ç³»ç»Ÿï¼Œæ— éœ€é‡å¤å¼€å‘ã€‚ é›†ç¾¤çŽ¯å¢ƒä¸‹redisé”çš„è¿›ä¸€æ­¥ä¼˜åŒ–æ­»é”çš„é—®é¢˜ è§£å†³ï¼š å‡å¦‚ç¨‹åºè¢«killäº†ï¼Œåˆ é™¤é”åŒæ ·æ— æ³•æ‰§è¡Œå¾—åˆ° è§£å†³ï¼šç»™é”å¢žåŠ è¿‡æœŸæ—¶é—´ è¿‡æœŸæ—¶é—´çš„ç¡®å®š å‡å¦‚ç¨‹åº1æ‰§è¡Œåˆ°åˆ é™¤é”çš„æ—¶é—´å¤§äºŽäº†è¿‡æœŸæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯ç¨‹åº1è¿˜æ²¡æ‰§è¡Œå®Œé”å°±è¢«åˆ æŽ‰äº†ï¼Œæ­¤æ—¶å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¹Ÿå¯ä»¥æ‹¿åˆ°é”ã€‚å½“çº¿ç¨‹1æ‰§è¡Œå®ŒåŽ»åˆ é™¤é”çš„æ—¶å€™åˆ æŽ‰çš„å°±æ˜¯çº¿ç¨‹2çš„é”äº†ï¼Œç¨‹åºå°±ä¹±äº†ã€‚ è§£å†³ï¼šä¿è¯å½“å‰çº¿ç¨‹åªåˆ é™¤å½“å‰çº¿ç¨‹åŠ çš„é” redisson.orgçš„ä½¿ç”¨&lt;dependency&gt; &lt;groupId&gt;org.redisson&lt;/groupId&gt; &lt;artifactId&gt;redisson&lt;/artifactId&gt; &lt;version&gt;3.6.5&lt;/version&gt; &lt;/dependency&gt; @Bean @ConditionalOnProperty(name=&quot;redisson.address&quot;) RedissonClient redissonSingle() { Config config = new Config(); SingleServerConfig serverConfig = config.useSingleServer() .setAddress(redssionProperties.getAddress()) .setTimeout(redssionProperties.getTimeout()) .setConnectionPoolSize(redssionProperties.getConnectionPoolSize()) .setConnectionMinimumIdleSize(redssionProperties.getConnectionMinimumIdleSize()); if(StringUtils.isNotBlank(redssionProperties.getPassword())) { serverConfig.setPassword(redssionProperties.getPassword()); } return Redisson.create(config); }]]></content>
      <categories>
        <category>redis</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤šæ ¸å¹¶å‘ç¼“å­˜æž¶æž„]]></title>
    <url>%2F2020%2F03%2F04%2F%E5%A4%9A%E6%A0%B8%E5%B9%B6%E5%8F%91%E7%BC%93%E5%AD%98%E6%9E%B6%E6%9E%84%2F</url>
    <content type="text"><![CDATA[è®¡ç®—æœºæž¶æž„çŽ°ä»£è®¡ç®—æœºæ¨¡åž‹æ˜¯åŸºäºŽ-å†¯è¯ºä¾æ›¼è®¡ç®—æœºæ¨¡åž‹ï¼Œä¸»è¦åŒ…æ‹¬äº”å¤§æ ¸å¿ƒéƒ¨åˆ†ï¼Œ1.æŽ§åˆ¶å™¨ï¼Œ2.è¿ç®—å™¨ï¼Œ3.å­˜å‚¨å™¨ï¼Œ4.è¾“å…¥ï¼Œ5.è¾“å‡ºã€‚å›¾å¦‚ä¸‹ï¼š CPUçš„åŸºæœ¬ç»“æž„åŠå…¶å·¥ä½œåŽŸç†ä¸­å¤®å¤„ç†å™¨ï¼ˆCPUï¼ŒCentral Processing Unitï¼‰æ˜¯ä¸€å—è¶…å¤§è§„æ¨¡çš„é›†æˆç”µè·¯ï¼Œæ˜¯ä¸€å°è®¡ç®—æœºçš„è¿ç®—æ ¸å¿ƒï¼ˆCoreï¼‰å’ŒæŽ§åˆ¶æ ¸å¿ƒï¼ˆ Control Unitï¼‰ã€‚å®ƒçš„åŠŸèƒ½ä¸»è¦æ˜¯è§£é‡Šè®¡ç®—æœºæŒ‡ä»¤ä»¥åŠå¤„ç†è®¡ç®—æœºè½¯ä»¶ä¸­çš„æ•°æ®ã€‚ä¸­å¤®å¤„ç†å™¨ä¸»è¦åŒ…æ‹¬è¿ç®—å™¨ï¼ˆç®—æœ¯é€»è¾‘è¿ç®—å•å…ƒï¼ŒALUï¼ŒArithmeTIc Logic Unitï¼‰å’Œé«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ï¼ˆCacheï¼‰åŠå®žçŽ°å®ƒä»¬ä¹‹é—´è”ç³»çš„æ•°æ®ï¼ˆDataï¼‰ã€æŽ§åˆ¶åŠçŠ¶æ€çš„æ€»çº¿ï¼ˆBusï¼‰ã€‚å®ƒä¸Žå†…éƒ¨å­˜å‚¨å™¨ï¼ˆMemoryï¼‰å’Œè¾“å…¥/è¾“å‡ºï¼ˆI/Oï¼‰è®¾å¤‡åˆç§°ä¸ºç”µå­è®¡ç®—æœºä¸‰å¤§æ ¸å¿ƒéƒ¨ä»¶ã€‚ CPUçš„åŸºæœ¬ç»“æž„ä»ŽåŠŸèƒ½ä¸Šçœ‹ï¼Œä¸€èˆ¬CPUçš„å†…éƒ¨ç»“æž„å¯åˆ†ä¸ºï¼šæŽ§åˆ¶å•å…ƒã€é€»è¾‘è¿ç®—å•å…ƒã€å­˜å‚¨å•å…ƒï¼ˆåŒ…æ‹¬å†…éƒ¨æ€»çº¿å’Œç¼“å†²å™¨ï¼‰ä¸‰å¤§éƒ¨åˆ†ã€‚å…¶ä¸­æŽ§åˆ¶å•å…ƒå®Œæˆæ•°æ®å¤„ç†æ•´ä¸ªè¿‡ç¨‹ä¸­çš„è°ƒé…å·¥ä½œï¼Œé€»è¾‘å•å…ƒåˆ™å®Œæˆå„ä¸ªæŒ‡ä»¤ä»¥ä¾¿å¾—åˆ°ç¨‹åºæœ€ç»ˆæƒ³è¦çš„ç»“æžœï¼Œå­˜å‚¨å•å…ƒå°±è´Ÿè´£å­˜å‚¨åŽŸå§‹æ•°æ®ä»¥åŠè¿ç®—ç»“æžœã€‚æµ‘ç„¶ä¸€ä½“çš„é…åˆä½¿å¾—CPUæ‹¥æœ‰äº†å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¯ä»¥å®ŒæˆåŒ…æ‹¬æµ®ç‚¹ã€å¤šåª’ä½“ç­‰æŒ‡ä»¤åœ¨å†…çš„ä¼—å¤šå¤æ‚è¿ç®—ï¼Œä¹Ÿä¸ºæ•°å­—æ—¶ä»£åŠ å…¥äº†æ›´å¤šçš„æ´»åŠ›ã€‚ é€»è¾‘éƒ¨ä»¶ è‹±æ–‡Logic componentsï¼›è¿ç®—é€»è¾‘éƒ¨ä»¶ã€‚å¯ä»¥æ‰§è¡Œå®šç‚¹æˆ–æµ®ç‚¹ç®—æœ¯è¿ç®—æ“ä½œã€ç§»ä½æ“ä½œä»¥åŠé€»è¾‘æ“ä½œï¼Œä¹Ÿå¯æ‰§è¡Œåœ°å€è¿ç®—å’Œè½¬æ¢ã€‚ å¯„å­˜å™¨ å¯„å­˜å™¨éƒ¨ä»¶ï¼ŒåŒ…æ‹¬å¯„å­˜å™¨ã€ä¸“ç”¨å¯„å­˜å™¨å’ŒæŽ§åˆ¶å¯„å­˜å™¨ã€‚ é€šç”¨å¯„å­˜å™¨åˆå¯åˆ†å®šç‚¹æ•°å’Œæµ®ç‚¹æ•°ä¸¤ç±»ï¼Œå®ƒä»¬ç”¨æ¥ä¿å­˜æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å­˜æ”¾çš„å¯„å­˜å™¨æ“ä½œæ•°å’Œä¸­é—´ï¼ˆæˆ–æœ€ç»ˆï¼‰çš„æ“ä½œç»“æžœã€‚ é€šç”¨å¯„å­˜å™¨æ˜¯ä¸­å¤®å¤„ç†å™¨çš„é‡è¦éƒ¨ä»¶ä¹‹ä¸€ã€‚ æŽ§åˆ¶éƒ¨ä»¶ è‹±æ–‡Control unitï¼›æŽ§åˆ¶éƒ¨ä»¶ï¼Œä¸»è¦æ˜¯è´Ÿè´£å¯¹æŒ‡ä»¤è¯‘ç ï¼Œå¹¶ä¸”å‘å‡ºä¸ºå®Œæˆæ¯æ¡æŒ‡ä»¤æ‰€è¦æ‰§è¡Œçš„å„ä¸ªæ“ä½œçš„æŽ§åˆ¶ä¿¡å·ã€‚ å…¶ç»“æž„æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯ä»¥å¾®å­˜å‚¨ä¸ºæ ¸å¿ƒçš„å¾®ç¨‹åºæŽ§åˆ¶æ–¹å¼ï¼›ä¸€ç§æ˜¯ä»¥é€»è¾‘ç¡¬å¸ƒçº¿ç»“æž„ä¸ºä¸»çš„æŽ§åˆ¶æ–¹å¼ã€‚ å¾®å­˜å‚¨ä¸­ä¿æŒå¾®ç ï¼Œæ¯ä¸€ä¸ªå¾®ç å¯¹åº”äºŽä¸€ä¸ªæœ€åŸºæœ¬çš„å¾®æ“ä½œï¼Œåˆç§°å¾®æŒ‡ä»¤ï¼›å„æ¡æŒ‡ä»¤æ˜¯ç”±ä¸åŒåºåˆ—çš„å¾®ç ç»„æˆï¼Œè¿™ç§å¾®ç åºåˆ—æž„æˆå¾®ç¨‹åºã€‚ä¸­å¤®å¤„ç†å™¨åœ¨å¯¹æŒ‡ä»¤è¯‘ç ä»¥åŽï¼Œå³å‘å‡ºä¸€å®šæ—¶åºçš„æŽ§åˆ¶ä¿¡å·ï¼ŒæŒ‰ç»™å®šåºåˆ—çš„é¡ºåºä»¥å¾®å‘¨æœŸä¸ºèŠ‚æ‹æ‰§è¡Œç”±è¿™äº›å¾®ç ç¡®å®šçš„è‹¥å¹²ä¸ªå¾®æ“ä½œï¼Œå³å¯å®ŒæˆæŸæ¡æŒ‡ä»¤çš„æ‰§è¡Œã€‚ ç®€å•æŒ‡ä»¤æ˜¯ç”±ï¼ˆ3ï½ž5ï¼‰ä¸ªå¾®æ“ä½œç»„æˆï¼Œå¤æ‚æŒ‡ä»¤åˆ™è¦ç”±å‡ åä¸ªå¾®æ“ä½œç”šè‡³å‡ ç™¾ä¸ªå¾®æ“ä½œç»„æˆã€‚ CPUçš„é€»è¾‘å•å…ƒCPUå¤§è‡´å¯åˆ†ä¸ºå¦‚ä¸‹å…«ä¸ªé€»è¾‘å•å…ƒï¼š æŒ‡ä»¤é«˜é€Ÿç¼“å­˜ï¼Œä¿—ç§°æŒ‡ä»¤å¯„å­˜å™¨ ï¼š å®ƒæ˜¯èŠ¯ç‰‡ä¸Šçš„æŒ‡ä»¤ä»“åº“ï¼Œæœ‰äº†å®ƒCPUå°±ä¸å¿…åœä¸‹æ¥æŸ¥æ‰¾è®¡ç®—æœºå†…å­˜ä¸­çš„æŒ‡ä»¤ï¼Œä»Žè€Œå¤§å¹…æé«˜äº†CPUçš„è¿ç®—é€Ÿåº¦ã€‚ è¯‘ç å•å…ƒï¼Œä¿—ç§°æŒ‡ä»¤è¯‘ç å™¨ ï¼š å®ƒè´Ÿè´£å°†å¤æ‚çš„æœºå™¨è¯­è¨€æŒ‡ä»¤è§£è¯‘æˆè¿ç®—é€»è¾‘å•å…ƒï¼ˆALUï¼‰å’Œå¯„å­˜å™¨èƒ½å¤Ÿç†è§£çš„ç®€å•æ ¼å¼ï¼Œå°±åƒä¸€ä½å¤–äº¤å®˜ã€‚ æŽ§åˆ¶å•å…ƒ ï¼š æ—¢ç„¶æŒ‡ä»¤å¯ä»¥å­˜å…¥CPUï¼Œè€Œä¸”æœ‰ç›¸åº”æŒ‡ä»¤æ¥å®Œæˆè¿ç®—å‰çš„å‡†å¤‡å·¥ä½œï¼ŒèƒŒåŽè‡ªç„¶æœ‰ä¸€ä¸ªæ‰®æ¼”æŽ¨åŠ¨ä½œç”¨çš„è§’è‰²â€”â€”å®ƒä¾¿æ˜¯è´Ÿè´£æ•´ä¸ªå¤„ç†è¿‡ç¨‹çš„æ“ä½œæŽ§åˆ¶å™¨ã€‚æ ¹æ®æ¥è‡ªè¯‘ç å•å…ƒçš„æŒ‡ä»¤ï¼Œå®ƒä¼šç”ŸæˆæŽ§åˆ¶ä¿¡å·ï¼Œå‘Šè¯‰è¿ç®—é€»è¾‘å•å…ƒï¼ˆALUï¼‰å’Œå¯„å­˜å™¨å¦‚ä½•è¿ç®—ã€å¯¹ä»€ä¹ˆè¿›è¡Œè¿ç®—ä»¥åŠå¯¹ç»“æžœè¿›è¡Œæ€Žæ ·çš„å¤„ç†ã€‚ å¯„å­˜å™¨ ï¼š å®ƒå¯¹äºŽCPUæ¥è¯´éžå¸¸çš„é‡è¦ï¼Œé™¤äº†å­˜æ”¾ç¨‹åºçš„éƒ¨åˆ†æŒ‡ä»¤ï¼Œå®ƒè¿˜è´Ÿè´£å­˜å‚¨æŒ‡é’ˆè·³è½¬ä¿¡æ¯ä»¥åŠå¾ªçŽ¯æ“ä½œå‘½ä»¤ï¼Œæ˜¯è¿ç®—é€»è¾‘å•å…ƒï¼ˆALUï¼‰ä¸ºå®ŒæˆæŽ§åˆ¶å•å…ƒè¯·æ±‚çš„ä»»åŠ¡æ‰€ä½¿ç”¨çš„æ•°æ®çš„å°åž‹å­˜å‚¨åŒºåŸŸï¼Œå…¶æ•°æ®æ¥æºå¯ä»¥æ˜¯é«˜é€Ÿç¼“å­˜ã€å†…å­˜ã€æŽ§åˆ¶å•å…ƒä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚ é€»è¾‘è¿ç®—å•å…ƒï¼ˆALUï¼‰ ï¼š å®ƒæ˜¯CPUèŠ¯ç‰‡çš„æ™ºèƒ½éƒ¨ä»¶ï¼Œèƒ½å¤Ÿæ‰§è¡ŒåŠ ã€å‡ã€ä¹˜ã€é™¤ç­‰å„ç§å‘½ä»¤ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜çŸ¥é“å¦‚ä½•è¯»å–é€»è¾‘å‘½ä»¤ï¼Œå¦‚æˆ–ã€ä¸Žã€éžã€‚æ¥è‡ªæŽ§åˆ¶å•å…ƒçš„è®¯æ¯å°†å‘Šè¯‰è¿ç®—é€»è¾‘å•å…ƒåº”è¯¥åšäº›ä»€ä¹ˆï¼Œç„¶åŽè¿ç®—å•å…ƒä¼šä»Žå¯„å­˜å™¨ä¸­é—´æ–­æˆ–è¿žç»­æå–æ•°æ®ï¼Œå®Œæˆæœ€ç»ˆçš„ä»»åŠ¡ã€‚ é¢„å–å•å…ƒ ï¼š CPUæ•ˆèƒ½å‘æŒ¥å¯¹å…¶ä¾èµ–éžå¸¸æ˜Žæ˜¾ï¼Œé¢„å–å‘½ä¸­çŽ‡çš„é«˜ä½Žç›´æŽ¥å…³ç³»åˆ°CPUæ ¸å¿ƒåˆ©ç”¨çŽ‡çš„é«˜ä½Žï¼Œè¿›è€Œå¸¦æ¥æŒ‡ä»¤æ‰§è¡Œé€Ÿåº¦ä¸Šçš„ä¸åŒã€‚æ ¹æ®å‘½ä»¤æˆ–è¦æ‰§è¡Œä»»åŠ¡æ‰€æå‡ºçš„è¦æ±‚ï¼Œä½•æ—¶æ—¶å€™ï¼Œé¢„å–å•å…ƒéƒ½æœ‰å¯èƒ½ä»ŽæŒ‡ä»¤é«˜é€Ÿç¼“å­˜æˆ–è®¡ç®—æœºå†…å­˜ä¸­èŽ·å–æ•°æ®å’ŒæŒ‡ä»¤ã€‚å½“æŒ‡ä»¤åˆ°è¾¾æ—¶ï¼Œé¢„å–å•å…ƒæœ€é‡è¦çš„ä»»åŠ¡å°±æ˜¯ç¡®ä¿æ‰€æœ‰æŒ‡ä»¤å‡æŽ’åˆ—æ­£ç¡®ï¼Œç„¶åŽå‘é€ç»™è¯‘ç å•å…ƒã€‚ æ€»çº¿å•å…ƒ ï¼š å®ƒå°±åƒä¸€æ¡é«˜é€Ÿå…¬è·¯ï¼Œå¿«é€Ÿå®Œæˆå„ä¸ªå•å…ƒé—´çš„æ•°æ®äº¤æ¢ï¼Œä¹Ÿæ˜¯æ•°æ®ä»Žå†…å­˜æµè¿›å’Œæµå‡ºCPUçš„åœ°æ–¹ã€‚ æ•°æ®é«˜é€Ÿç¼“å­˜ ï¼š å­˜å‚¨æ¥è‡ªè¯‘ç å•å…ƒä¸“é—¨æ ‡è®°çš„æ•°æ®ï¼Œä»¥å¤‡é€»è¾‘è¿ç®—å•å…ƒä½¿ç”¨ï¼ŒåŒæ—¶è¿˜å‡†å¤‡äº†åˆ†é…åˆ°è®¡ç®—æœºä¸åŒéƒ¨åˆ†çš„æœ€ç»ˆç»“æžœã€‚ é€šè¿‡ä»¥ä¸Šä»‹ç»å¯ä»¥çœ‹å‡ºCPUè™½å°ï¼Œæ–¹å¯¸ä¹‹åœ°å´èƒ½å®¹çº³å¤§ä¸–ç•Œï¼Œå†…éƒ¨æ›´åƒä¸€ä¸ªå‘è¾¾çš„è£…é…å·¥åŽ‚ï¼ŒçŽ¯çŽ¯ç›¸æ‰£ï¼Œå±‚å±‚ç›¸å¥—ã€‚æ­£å› ä¸ºæœ‰äº†ç›¸äº’é—´çš„åä½œé…åˆï¼Œæ‰ä½¿å¾—æŒ‡ä»¤æœ€ç»ˆå¾—ä»¥æ‰§è¡Œï¼Œæ‰æž„æˆäº†å›¾æ–‡å¹¶èŒ‚ã€å½±åƒç»“åˆçš„ç¥žå¥‡æ•°å­—ä¸–ç•Œã€‚ CPUçš„å·¥ä½œåŽŸç†CPUçš„æ ¹æœ¬ä»»åŠ¡å°±æ˜¯æ‰§è¡ŒæŒ‡ä»¤ï¼Œå¯¹è®¡ç®—æœºæ¥è¯´æœ€ç»ˆéƒ½æ˜¯ä¸€ä¸²ç”±â€œ0â€å’Œâ€œ1â€ç»„æˆçš„åºåˆ—ã€‚CPUä»Žé€»è¾‘ä¸Šå¯ä»¥åˆ’åˆ†æˆ3ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«æ˜¯æŽ§åˆ¶å•å…ƒã€è¿ç®—å•å…ƒå’Œå­˜å‚¨å•å…ƒï¼Œè¿™ä¸‰éƒ¨åˆ†ç”±CPUå†…éƒ¨æ€»çº¿è¿žæŽ¥èµ·æ¥ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š æŽ§åˆ¶å•å…ƒï¼šæŽ§åˆ¶å•å…ƒæ˜¯æ•´ä¸ªCPUçš„æŒ‡æŒ¥æŽ§åˆ¶ä¸­å¿ƒï¼Œç”±æŒ‡ä»¤å¯„å­˜å™¨IRï¼ˆInstrucTIon Registerï¼‰ã€æŒ‡ä»¤è¯‘ç å™¨IDï¼ˆInstrucTIon Decoderï¼‰å’Œæ“ä½œæŽ§åˆ¶å™¨OCï¼ˆOperaTIon Controllerï¼‰ç­‰ï¼Œå¯¹åè°ƒæ•´ä¸ªç”µè„‘æœ‰åºå·¥ä½œæžä¸ºé‡è¦ã€‚å®ƒæ ¹æ®ç”¨æˆ·é¢„å…ˆç¼–å¥½çš„ç¨‹åºï¼Œä¾æ¬¡ä»Žå­˜å‚¨å™¨ä¸­å–å‡ºå„æ¡æŒ‡ä»¤ï¼Œæ”¾åœ¨æŒ‡ä»¤å¯„å­˜å™¨IRä¸­ï¼Œé€šè¿‡æŒ‡ä»¤è¯‘ç ï¼ˆåˆ†æžï¼‰ç¡®å®šåº”è¯¥è¿›è¡Œä»€ä¹ˆæ“ä½œï¼Œç„¶åŽé€šè¿‡æ“ä½œæŽ§åˆ¶å™¨OCï¼ŒæŒ‰ç¡®å®šçš„æ—¶åºï¼Œå‘ç›¸åº”çš„éƒ¨ä»¶å‘å‡ºå¾®æ“ä½œæŽ§åˆ¶ä¿¡å·ã€‚æ“ä½œæŽ§åˆ¶å™¨OCä¸­ä¸»è¦åŒ…æ‹¬èŠ‚æ‹è„‰å†²å‘ç”Ÿå™¨ã€æŽ§åˆ¶çŸ©é˜µã€æ—¶é’Ÿè„‰å†²å‘ç”Ÿå™¨ã€å¤ä½ç”µè·¯å’Œå¯åœç”µè·¯ç­‰æŽ§åˆ¶é€»è¾‘ã€‚ è¿ç®—å•å…ƒï¼šæ˜¯è¿ç®—å™¨çš„æ ¸å¿ƒã€‚å¯ä»¥æ‰§è¡Œç®—æœ¯è¿ç®—ï¼ˆåŒ…æ‹¬åŠ å‡ä¹˜æ•°ç­‰åŸºæœ¬è¿ç®—åŠå…¶é™„åŠ è¿ç®—ï¼‰å’Œé€»è¾‘è¿ç®—ï¼ˆåŒ…æ‹¬ç§»ä½ã€é€»è¾‘æµ‹è¯•æˆ–ä¸¤ä¸ªå€¼æ¯”è¾ƒï¼‰ã€‚ç›¸å¯¹æŽ§åˆ¶å•å…ƒè€Œè¨€ï¼Œè¿ç®—å™¨æŽ¥å—æŽ§åˆ¶å•å…ƒçš„å‘½ä»¤è€Œè¿›è¡ŒåŠ¨ä½œï¼Œå³è¿ç®—å•å…ƒæ‰€è¿›è¡Œçš„å…¨éƒ¨æ“ä½œéƒ½æ˜¯ç”±æŽ§åˆ¶å•å…ƒå‘å‡ºçš„æŽ§åˆ¶ä¿¡å·æ¥æŒ‡æŒ¥çš„ï¼Œæ‰€ä»¥å®ƒæ˜¯æ‰§è¡Œéƒ¨ä»¶ã€‚ å­˜å‚¨å•å…ƒï¼šåŒ…æ‹¬CPUç‰‡å†…ç¼“å­˜å’Œå¯„å­˜å™¨ç»„ï¼Œæ˜¯CPUä¸­æš‚æ—¶å­˜æ”¾æ•°æ®çš„åœ°æ–¹ï¼Œé‡Œé¢ä¿å­˜ç€é‚£äº›ç­‰å¾…å¤„ç†çš„æ•°æ®ï¼Œæˆ–å·²ç»å¤„ç†è¿‡çš„æ•°æ®ï¼ŒCPUè®¿é—®å¯„å­˜å™¨æ‰€ç”¨çš„æ—¶é—´è¦æ¯”è®¿é—®å†…å­˜çš„æ—¶é—´çŸ­ã€‚é‡‡ç”¨å¯„å­˜å™¨ï¼Œå¯ä»¥å‡å°‘CPUè®¿é—®å†…å­˜çš„æ¬¡æ•°ï¼Œä»Žè€Œæé«˜äº†CPUçš„å·¥ä½œé€Ÿåº¦ã€‚ä½†å› ä¸ºå—åˆ°èŠ¯ç‰‡é¢ç§¯å’Œé›†æˆåº¦æ‰€é™ï¼Œå¯„å­˜å™¨ç»„çš„å®¹é‡ä¸å¯èƒ½å¾ˆå¤§ã€‚å¯„å­˜å™¨ç»„å¯åˆ†ä¸ºä¸“ç”¨å¯„å­˜å™¨å’Œé€šç”¨å¯„å­˜å™¨ã€‚ä¸“ç”¨å¯„å­˜å™¨çš„ä½œç”¨æ˜¯å›ºå®šçš„ï¼Œåˆ†åˆ«å¯„å­˜ç›¸åº”çš„æ•°æ®ã€‚è€Œé€šç”¨å¯„å­˜å™¨ç”¨é€”å¹¿æ³›å¹¶å¯ç”±ç¨‹åºå‘˜è§„å®šå…¶ç”¨é€”ï¼Œé€šç”¨å¯„å­˜å™¨çš„æ•°ç›®å› å¾®å¤„ç†å™¨è€Œå¼‚ã€‚è¿™ä¸ªæ˜¯æˆ‘ä»¬ä»¥åŽè¦ä»‹ç»è¿™ä¸ªé‡ç‚¹ï¼Œè¿™é‡Œå…ˆæä¸€ä¸‹ã€‚ æˆ‘ä»¬å°†ä¸Šå›¾ç»†åŒ–ä¸€ä¸‹ï¼Œå¯ä»¥å¾—å‡ºCPUçš„å·¥ä½œåŽŸç†æ¦‚æ‹¬å¦‚ä¸‹ï¼š 1ã€å–æŒ‡ä»¤ï¼šCPUçš„æŽ§åˆ¶å™¨ä»Žå†…å­˜è¯»å–ä¸€æ¡æŒ‡ä»¤å¹¶æ”¾å…¥æŒ‡ä»¤å¯„å­˜å™¨ã€‚ æ“ä½œç å°±æ˜¯æ±‡ç¼–è¯­è¨€é‡Œçš„movï¼Œaddï¼Œjmpç­‰ç¬¦å·ç ï¼›æ“ä½œæ•°åœ°å€è¯´æ˜Žè¯¥æŒ‡ä»¤éœ€è¦çš„æ“ä½œæ•°æ‰€åœ¨çš„åœ°æ–¹ï¼Œæ˜¯åœ¨å†…å­˜é‡Œè¿˜æ˜¯åœ¨CPUçš„å†…éƒ¨å¯„å­˜å™¨é‡Œã€‚ 2ã€æŒ‡ä»¤è¯‘ç ï¼šæŒ‡ä»¤å¯„å­˜å™¨ä¸­çš„æŒ‡ä»¤ç»è¿‡è¯‘ç ï¼Œå†³å®šè¯¥æŒ‡ä»¤åº”è¿›è¡Œä½•ç§æ“ä½œï¼ˆå°±æ˜¯æŒ‡ä»¤é‡Œçš„æ“ä½œç ï¼‰ã€æ“ä½œæ•°åœ¨å“ªé‡Œï¼ˆæ“ä½œæ•°çš„åœ°å€ï¼‰ã€‚ 3ã€ æ‰§è¡ŒæŒ‡ä»¤ï¼Œåˆ†ä¸¤ä¸ªé˜¶æ®µâ€œå–æ“ä½œæ•°â€å’Œâ€œè¿›è¡Œè¿ç®—â€ã€‚ 4ã€ ä¿®æ”¹æŒ‡ä»¤è®¡æ•°å™¨ï¼Œå†³å®šä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ã€‚ CPUåœ¨è¿ç®—æ•°æ®çš„æ—¶å€™ï¼ˆæ¯”å¦‚ 1+1ï¼2ï¼‰ï¼Œä¼šé¦–å…ˆä»ŽCUPå¯„å­˜å™¨è¯»å–æ•°æ®ï¼ˆé€Ÿåº¦æœ€å¿«ï¼Œå› ä¸ºå†…ç½®åœ¨CPUé‡Œé¢ï¼‰ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œå°±ä»Žä¸‰çº§ç¼“å­˜é‡Œè¯»å–ï¼Œå¦‚æžœä¸‰çº§ç¼“å­˜ä¹Ÿæ²¡æœ‰ï¼Œåˆ™ä¼šç»è¿‡ç³»ç»Ÿæ€»çº¿åŠå†…å­˜æ€»çº¿ï¼Œä»Žæ€»å­˜å‚¨å™¨ä¸­è¯»å–ï¼ˆæ­¤å¤„çš„æ€»å­˜å‚¨å™¨ä¸»è¦æ˜¯æŒ‡ä¸»å†…å­˜ï¼‰ã€‚ é¦–å…ˆCPUå·¥ä½œçš„æ—¶å€™ï¼Œç”±æŽ§åˆ¶å•å…ƒå……å½“å¤§è„‘ï¼Œè´Ÿè´£åè°ƒã€‚è®©è¿ç®—å•å…ƒåšè¿ç®—çš„æ—¶å€™ï¼Œä¼šé¦–å…ˆä»Žæœ€é è¿‘CPUçš„å¯„å­˜å™¨ï¼ˆå…¶å®žæ˜¯å’ŒCPUä¸€ä½“çš„ï¼‰ä¸Šè¯»å–æ•°æ®ï¼Œåœ¨å¯„å­˜å™¨ä¸Šæœ‰CPUè¿è¡Œçš„å¸¸ç”¨æŒ‡ä»¤ï¼Œå¦‚æžœå¯„å­˜å™¨ä¸Šæ²¡æœ‰æƒ³è¦çš„æ•°æ®ï¼Œåˆ™å°±ä»Žä¸‰çº§ç¼“å­˜çš„L1çº§ç¼“å­˜ä¸­èŽ·å–ï¼Œå¦‚æžœL1å–åˆ°æ•°æ®äº†ï¼Œä¼šåŠ è½½åˆ°å¯„å­˜å™¨ä¸­ï¼Œå†è½¬è¾“ç»™CPUè¿ç®—å•å…ƒã€‚å¦‚æžœL1ä¸­æ²¡æœ‰ï¼Œåˆ™ä»ŽL2çº§ç¼“å­˜ä¸­è¯»å–ï¼ŒåŒç†ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ™ä»ŽL3ä¸­å–ã€‚å¦‚æžœL3ä¸­ä¹Ÿæ²¡æœ‰ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±æ¯”è¾ƒéº»çƒ¦äº†ã€‚è¦ä»Žä¸»å†…å­˜ä¸­å–ã€‚è€Œä»Žä¸»å†…å­˜ä¸­å–çš„æ—¶å€™ï¼Œä¼šç»è¿‡ç³»ç»Ÿæ€»çº¿åŠå†…å­˜æ€»çº¿ã€‚è¿™æ—¶å› å—åˆ°æ€»çº¿çš„é™åˆ¶ï¼Œé€Ÿåº¦ä¼šå¤§å¤§é™ä½Žã€‚ ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜åœ¨å¤šå¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªå¤„ç†å™¨éƒ½æœ‰è‡ªå·±çš„é«˜é€Ÿç¼“å­˜ï¼Œè€Œå®ƒä»¬åˆå…±äº«åŒä¸€ä¸»å†…å­˜ï¼ˆMainMemoryï¼‰ã€‚åŸºäºŽé«˜é€Ÿç¼“å­˜çš„å­˜å‚¨äº¤äº’å¾ˆå¥½åœ°è§£å†³äº†å¤„ç†å™¨ä¸Žå†…å­˜çš„é€Ÿåº¦çŸ›ç›¾ï¼Œä½†æ˜¯ä¹Ÿå¼•å…¥äº†æ–°çš„é—®é¢˜ï¼šç¼“å­˜ä¸€è‡´æ€§ï¼ˆCacheCoherenceï¼‰ã€‚å½“å¤šä¸ªå¤„ç†å™¨çš„è¿ç®—ä»»åŠ¡éƒ½æ¶‰åŠåŒä¸€å—ä¸»å†…å­˜åŒºåŸŸæ—¶ï¼Œå°†å¯èƒ½å¯¼è‡´å„è‡ªçš„ç¼“å­˜æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå¦‚æžœçœŸçš„å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œé‚£åŒæ­¥å›žåˆ°ä¸»å†…å­˜æ—¶ä»¥è°çš„ç¼“å­˜æ•°æ®ä¸ºå‡†å‘¢ï¼Ÿä¸ºäº†è§£å†³ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œéœ€è¦å„ä¸ªå¤„ç†å™¨è®¿é—®ç¼“å­˜æ—¶éƒ½ éµå¾ªä¸€äº›åè®®ï¼Œåœ¨è¯»å†™æ—¶è¦æ ¹æ®åè®®æ¥è¿›è¡Œæ“ä½œã€‚å¸¸ç”¨çš„æ–¹æ³•æ˜¯æ€»çº¿åŠ é”æˆ–æ˜¯ç¼“å­˜ä¸€è‡´æ€§åè®®-MESI è¿™é‡Œé‡ç‚¹è¯´ä¸€ä¸ªä»€ä¹ˆæ˜¯ç¼“å­˜ä¸€è‡´æ€§åè®®mesi:æ¦‚å¿µï¼šCPUæœ€å°å­˜å‚¨å•å…ƒï¼šç¼“å­˜è¡ŒMESIä»£è¡¨çš„å››ç§çŠ¶æ€ï¼šMï¼šä¿®æ”¹Eï¼šç‹¬äº«ã€‚äº’æ–¥Sï¼šå…±äº«Iï¼šæ— æ•ˆMESIç¼“å­˜ä¸€è‡´æ€§åè®®åŽŸç†ï¼šå‡å¦‚çŽ°åœ¨æœ‰CPU1å’ŒCPU2ï¼Œä¸»å†…å­˜æœ‰å˜é‡Xï¼ 1 ã€‚çŽ°åœ¨è¦åš x+1çš„æ“ä½œã€‚å¦‚æžœåœ¨å˜é‡ x = 1 ä¸ŠåŠ ä¸Švolatileï¼Œåˆ™å°±ä¼šè§¦å‘MESIå½“CPU1ä»Žä¸»å†…å­˜ä¸­è¯»å–åˆ°Xï¼1æ—¶ï¼ŒCPU1ä¼šæŠŠæ­¤å˜é‡æ ‡è®°æˆç‹¬äº«çŠ¶æ€å¹¶ç›‘å¬æ€»çº¿ï¼Œæ˜¯å¦æœ‰å…¶å®ƒCPUåŽ»è¯»å–æ­¤å˜é‡å½“CPU2ä»Žä¸»å†…å­˜ä¸­è¯»å–Xï¼1å˜é‡æ—¶ï¼ŒCPU1ä¼šé€šè¿‡å—…æŽ¢æœºåˆ¶ç›‘å¬åˆ°ã€‚æ­¤æ—¶CPU1çš„Xå˜é‡ä¼šå˜æˆå…±äº«çŠ¶æ€ã€‚ç»§ç»­è¿›è¡Œè®¡ç®—ï¼Œè®¡ç®—å®Œå˜æˆXï¼2ã€‚æ­¤æ—¶è¦å›žå†™åˆ°ä¸»å†…å­˜ä¹‹å‰ã€‚å…ˆé”ä½ç¼“å­˜è¡Œã€‚å¹¶æ ‡è®°Xå˜é‡ä¸ºä¿®æ”¹çŠ¶æ€ã€‚å¹¶å‘æ€»çº¿å‘æ¶ˆæ¯ã€‚å…¶å®ƒCPU2ç›‘å¬æ€»çº¿æ—¶ï¼Œä¼šç›‘å¬åˆ°ï¼Œå¹¶æŠŠXæ ‡è®°æˆæ— æ•ˆçŠ¶æ€ã€‚CPU1æŠŠå˜é‡Xï¼2å›žå†™åˆ°ä¸»å†…å­˜åŽï¼Œä¼šç”±ä¿®æ”¹çŠ¶æ€å˜æˆç‹¬äº«çŠ¶æ€ã€‚æ­¤æ—¶ï¼Œå¦‚æžœCPU2å¦‚æžœæƒ³ä¿®æ”¹Xå˜é‡æ—¶ï¼Œè¦é‡å¯ä»Žä¸»å†…å­˜ä¸­è¯»å–ã€‚ç„¶åŽå¼€å§‹æ–°çš„è½®å›žã€‚ æŒ‡ä»¤é‡æŽ’åºé—®é¢˜ä¸ºäº†ä½¿å¾—å¤„ç†å™¨å†…éƒ¨çš„è¿ç®—å•å…ƒèƒ½å°½é‡è¢«å……åˆ†åˆ©ç”¨ï¼Œå¤„ç†å™¨å¯èƒ½ä¼šå¯¹è¾“å…¥ä»£ç è¿›è¡Œä¹±åºæ‰§ è¡Œï¼ˆOut-Of-Order Executionï¼‰ä¼˜åŒ–ï¼Œå¤„ç†å™¨ä¼šåœ¨è®¡ç®—ä¹‹åŽå°†ä¹±åºæ‰§è¡Œçš„ç»“æžœé‡ç»„ï¼Œä¿è¯è¯¥ ç»“æžœä¸Žé¡ºåºæ‰§è¡Œçš„ç»“æžœæ˜¯ä¸€è‡´çš„ï¼Œä½†å¹¶ä¸ä¿è¯ç¨‹åºä¸­å„ä¸ªè¯­å¥è®¡ç®—çš„å…ˆåŽé¡ºåºä¸Žè¾“å…¥ä»£ç ä¸­çš„ é¡ºåºä¸€è‡´ã€‚å› æ­¤ï¼Œå¦‚æžœå­˜åœ¨ä¸€ä¸ªè®¡ç®—ä»»åŠ¡ä¾èµ–å¦ä¸€ä¸ªè®¡ç®—ä»»åŠ¡çš„ä¸­é—´ç»“æžœï¼Œé‚£ä¹ˆå…¶é¡ºåºæ€§å¹¶ä¸ èƒ½é ä»£ç çš„å…ˆåŽé¡ºåºæ¥ä¿è¯ã€‚ä¸Žå¤„ç†å™¨çš„ä¹±åºæ‰§è¡Œä¼˜åŒ–ç±»ä¼¼ï¼ŒJavaè™šæ‹Ÿæœºçš„å³æ—¶ç¼–è¯‘å™¨ä¸­ä¹Ÿæœ‰ ç±»ä¼¼çš„æŒ‡ä»¤é‡æŽ’åºï¼ˆInstruction Reorderï¼‰ä¼˜åŒ– JMMå†…å­˜æ¨¡åž‹javaçº¿ç¨‹å†…å­˜æ¨¡åž‹è·Ÿcpuç¼“å­˜æ¨¡åž‹ç±»ä¼¼ï¼Œæ˜¯åŸºäºŽcpuç¼“å­˜æ¨¡åž‹æ¥å»ºç«‹çš„ï¼Œjavaçº¿ç¨‹å†…å­˜æ¨¡åž‹æ˜¯æ ‡å‡†åŒ–çš„ï¼Œå±è”½æŽ‰äº†åº•å±‚ä¸åŒè®¡ç®—æœºçš„åŒºåˆ«ã€‚]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JVM]]></title>
    <url>%2F2020%2F02%2F27%2FJVM%2F</url>
    <content type="text"><![CDATA[Javaå†…å­˜åŒºåŸŸå‰ææœ¬æ–‡è®²çš„åŸºæœ¬éƒ½æ˜¯ä»¥Sun HotSpotè™šæ‹Ÿæœºä¸ºåŸºç¡€çš„ï¼ŒOracleæ”¶è´­äº†SunåŽç›®å‰å¾—åˆ°äº†ä¸¤ä¸ªã€Sunçš„HotSpotå’ŒJRockit(ä»¥åŽå¯èƒ½åˆå¹¶è¿™ä¸¤ä¸ª),è¿˜æœ‰ä¸€ä¸ªæ˜¯IBMçš„IBMJVMã€‘ Javaå†…å­˜æ¨¡åž‹Javaç¨‹åºå†…å­˜çš„åˆ†é…æ˜¯åœ¨JVMè™šæ‹Ÿæœºå†…å­˜åˆ†é…æœºåˆ¶ä¸‹å®Œæˆã€‚ Javaå†…å­˜æ¨¡åž‹ï¼ˆJava Memory Model,JMMï¼‰å°±æ˜¯ä¸€ç§ç¬¦åˆå†…å­˜æ¨¡åž‹è§„èŒƒçš„ï¼Œå±è”½äº†å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„è®¿é—®å·®å¼‚çš„ï¼Œä¿è¯äº†Javaç¨‹åºåœ¨å„ç§å¹³å°ä¸‹å¯¹å†…å­˜çš„è®¿é—®éƒ½èƒ½ä¿è¯æ•ˆæžœä¸€è‡´çš„æœºåˆ¶åŠè§„èŒƒã€‚ ç®€è€Œè¨€ä¹‹ï¼ŒJMMæ˜¯jvmçš„ä¸€ç§è§„èŒƒï¼Œå®šä¹‰äº†JVMçš„å†…å­˜æ¨¡åž‹ã€‚å¥¹å±è”½äº†å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„è®¿é—®å·®å¼‚ï¼Œä¸æ˜¯ç›´æŽ¥è®¿é—®ç¡¬ä»¶å†…å­˜ï¼Œç›¸å¯¹å®‰å…¨å¾ˆå¤šï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯è§£å†³ç”±äºŽå¤šçº¿ç¨‹é€šè¿‡å…±äº«å†…å­˜è¿›è¡Œé€šä¿¡æ—¶ï¼Œå­˜åœ¨çš„æœ¬åœ°å†…å­˜æ•°æ®ä¸ä¸€è‡´ï¼Œç¼–è¯‘å™¨ä¼šå¯¹ä»£ç æŒ‡ä»¤é‡æŽ’åºï¼Œå¤„ç†å™¨ä¼šå¯¹ä»£ç ä¹±åºæ‰§è¡Œç­‰å¸¦æ¥çš„é—®é¢˜ã€‚å¯ä»¥ä¿è¯å¹¶å‘ç¼–ç¨‹åœºæ™¯ä¸­çš„åŽŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§ã€‚ Javaæ•°æ®åŒºåŸŸåˆ†ä¸ºä¸ºäº”å¤§æ•°æ®åŒºåŸŸã€‚è¿™äº›åŒºåŸŸå„æœ‰å„çš„ç”¨é€”ï¼Œåˆ›å»ºåŠé”€æ¯æ—¶é—´ã€‚ äº”å¤§å†…å­˜åŒºåŸŸè¯¦è§£ç¨‹åºè®¡æ•°å™¨ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—å¾ˆå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå¯ä»¥è®¤ä½œä¸ºå½“å‰çº¿ç¨‹çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚ ä¸ºä»€ä¹ˆéœ€è¦ç¨‹åºè®¡æ•°å™¨ï¼Ÿ æˆ‘ä»¬çŸ¥é“å¯¹äºŽä¸€ä¸ªå¤„ç†å™¨ï¼ˆå¦‚æžœæ˜¯å¤šæ ¸cpué‚£å°±æ˜¯ä¸€æ ¸ï¼‰ï¼Œåœ¨ä¸€ä¸ªç¡®å®šçš„æ—¶åˆ»éƒ½åªä¼šæ‰§è¡Œä¸€æ¡çº¿ç¨‹ä¸­çš„æŒ‡ä»¤ï¼Œä¸€æ¡çº¿ç¨‹ä¸­æœ‰å¤šä¸ªæŒ‡ä»¤ï¼Œä¸ºäº†çº¿ç¨‹åˆ‡æ¢å¯ä»¥æ¢å¤åˆ°æ­£ç¡®æ‰§è¡Œä½ç½®ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½éœ€è¦æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œä¸åŒçº¿ç¨‹ä¹‹é—´çš„ç¨‹åºè®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç‹¬ç«‹å­˜å‚¨ã€‚ å¦‚æžœçº¿ç¨‹æ‰§è¡Œçš„æ˜¯ä¸ªjavaæ–¹æ³•ï¼Œé‚£ä¹ˆè®¡æ•°å™¨è®°å½•è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ã€‚å¦‚æžœä¸ºnativeæ–¹æ³•ï¼Œé‚£ä¹ˆè®¡æ•°å™¨ä¸ºç©ºã€‚è¿™å—å†…å­˜åŒºåŸŸæ˜¯è™šæ‹Ÿæœºè§„èŒƒä¸­å”¯ä¸€æ²¡æœ‰OutOfMemoryErrorçš„åŒºåŸŸã€‚ Javaæ ˆï¼ˆè™šæ‹Ÿæœºæ ˆï¼‰åŒè®¡æ•°å™¨ä¸€æ ·ä¹Ÿä¸ºçº¿ç¨‹ç§æœ‰ï¼Œç”Ÿå‘½å‘¨æœŸä¸Žä¹‹ç›¸åŒï¼Œå°±æ˜¯æˆ‘ä»¬å¹³æ—¶è¯´çš„æ ˆï¼Œæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡åž‹ã€‚ æ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ç”¨äºŽå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ï¼Œæ“ä½œæ ˆï¼ŒåŠ¨æ€é“¾æŽ¥ï¼Œæ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨çš„è¿‡ç¨‹å°±å¯¹åº”ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»Žå…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚æ ˆéµå¾ªå…ˆè¿›åŽå‡ºçš„åŽŸåˆ™ã€‚ æ ˆå¸§ï¼šæ˜¯ç”¨æ¥å­˜å‚¨æ•°æ®å’Œéƒ¨åˆ†è¿‡ç¨‹ç»“æžœçš„æ•°æ®ç»“æž„ã€‚ æ ˆå¸§çš„ä½ç½®ï¼šå†…å­˜-&gt;è¿è¡Œæ—¶æ•°æ®åŒº-&gt;æŸä¸ªçº¿ç¨‹å¯¹åº”çš„è™šæ‹Ÿæœºæ ˆ-&gt;here æ ˆå¸§å¤§å°ç¡®å®šæ—¶é—´ï¼šç¼–è¯‘æœŸç¡®å®šï¼Œä¸å—è¿è¡ŒæœŸæ•°æ®å½±å“ã€‚ å¹³æ—¶è¯´çš„æ ˆä¸€èˆ¬æŒ‡å±€éƒ¨å˜é‡è¡¨éƒ¨åˆ†ã€‚ å±€éƒ¨å˜é‡è¡¨ï¼šä¸€ç‰‡è¿žç»­çš„å†…å­˜ç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾æ–¹æ³•å‚æ•°ï¼Œä»¥åŠæ–¹æ³•å†…å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œå­˜æ”¾ç€ç¼–è¯‘æœŸé—´å·²çŸ¥çš„æ•°æ®ç±»åž‹ï¼ˆå…«å¤§åŸºæœ¬ç±»åž‹å’Œå¯¹è±¡å¼•ç”¨referenceï¼‰,returnAddressç±»åž‹ã€‚å®ƒçš„æœ€å°çš„å±€éƒ¨å˜é‡è¡¨ç©ºé—´å•ä½ä¸ºSlot,è™šæ‹Ÿæœºæ²¡æœ‰æŒ‡æ˜ŽSlotçš„å¤§å°ï¼Œä½†åœ¨jvâ€™mä¸­ï¼Œlongå’Œdoubleç±»åž‹æ•°æ®æ˜Žç¡®è§„å®šä¸º64ä½ï¼Œè¿™ä¸¤ä¸ªç±»åž‹å 2ä¸ªSlot,å…¶ä»–åŸºæœ¬ç±»åž‹å›ºå®šå ç”¨ä¸€ä¸ªSlot. referenceç±»åž‹ï¼šä¸ŽåŸºæœ¬ç±»åž‹ä¸åŒçš„æ˜¯å®ƒä¸ç­‰åŒæœ¬èº«ï¼Œå³ä½¿æ˜¯Stringï¼Œå†…éƒ¨ä¹Ÿæ˜¯charæ•°ç»„ç»„æˆï¼Œå®ƒå¯èƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡èµ·å§‹ä½ç½®æŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½æŒ‡å‘ä¸€ä¸ªä»£è¡¨å¯¹è±¡çš„å¥æŸ„æˆ–å…¶ä»–ä¸Žè¯¥å¯¹è±¡æœ‰å…³çš„ä½ç½®ã€‚ returnAddress:æŒ‡ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå±€éƒ¨å˜é‡è¡¨æ‰€éœ€è¦çš„å†…å­˜ç©ºé—´åœ¨ç¼–è¯‘æœŸå®Œæˆåˆ†é…ï¼Œå½“è¿›å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨æ ˆä¸­éœ€è¦åˆ†é…å¤šå¤§çš„å±€éƒ¨å˜é‡ç©ºé—´æ˜¯å®Œå…¨ç¡®å®šçš„ï¼Œåœ¨æ–¹æ³•è¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡è¡¨å¤§å°ã€‚ javaè™šæ‹Ÿæœºæ ˆå¯èƒ½å‡ºçŽ°çš„ä¸¤ç§ç±»åž‹çš„å¼‚å¸¸ï¼š 1ã€çº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºŽè™šæ‹Ÿæœºå…è®¸çš„æ ˆæ·±åº¦ï¼Œå°†æŠ›å‡ºStackOverflowError 2ã€è™šæ‹Ÿæœºæ ˆç©ºé—´å¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œå½“åŠ¨æ€æ‰©å±•æ˜¯æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„ç©ºé—´æ—¶ï¼ŒæŠ›å‡ºOutOfMemory æœ¬åœ°æ–¹æ³•æ ˆæœ¬åœ°æ–¹æ³•æ ˆæ˜¯ä¸Žè™šæ‹Ÿæœºæ ˆå‘æŒ¥çš„ä½œç”¨ååˆ†ç›¸ä¼¼ï¼ŒåŒºåˆ«æ˜¯è™šæ‹Ÿæœºæ ˆæ‰§è¡Œçš„æ˜¯javaæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„nativeæ–¹æ³•æœåŠ¡ï¼Œå¯èƒ½åº•å±‚è°ƒç”¨çš„cæˆ–c++,æˆ‘ä»¬æ‰“å¼€jdkå®‰è£…ç›®å½•å¯ä»¥çœ‹åˆ°ä¹Ÿæœ‰å¾ˆå¤šcç¼–å†™çš„æ–‡ä»¶ï¼Œå¯èƒ½å°±æ˜¯nativeæ–¹æ³•æ‰€è°ƒç”¨çš„cä»£ç  å †å¯¹äºŽå¤§å¤šæ•°åº”ç”¨æ¥è¯´ï¼Œå †æ˜¯javaè™šæ‹Ÿæœºç®¡ç†å†…å­˜æœ€å¤§çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œå› ä¸ºå †å­˜æ”¾çš„å¯¹è±¡æ˜¯çº¿ç¨‹å…±äº«çš„ï¼Œæ‰€ä»¥å¤šçº¿ç¨‹çš„æ—¶å€™ä¹Ÿéœ€è¦åŒæ­¥æœºåˆ¶ã€‚ æ³¨æ„:å®ƒæ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ï¼Œå®ƒçš„ç›®çš„æ˜¯å­˜æ”¾å¯¹è±¡å®žä¾‹ã€‚åŒæ—¶å®ƒä¹Ÿæ˜¯GCæ‰€ç®¡ç†çš„ä¸»è¦åŒºåŸŸï¼Œå› æ­¤å¸¸è¢«ç§°ä¸ºGCå †ï¼Œåˆç”±äºŽçŽ°åœ¨æ”¶é›†å™¨å¸¸ä½¿ç”¨åˆ†ä»£ç®—æ³•ï¼ŒJavaå †ä¸­è¿˜å¯ä»¥ç»†åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œå†ç»†è‡´ç‚¹è¿˜æœ‰Eden(ä¼Šç”¸å›­)ç©ºé—´ä¹‹ç±»çš„ä¸åšæ·±ç©¶ã€‚ æ ¹æ®è™šæ‹Ÿæœºè§„èŒƒï¼ŒJavaå †å¯ä»¥å­˜åœ¨ç‰©ç†ä¸Šä¸è¿žç»­çš„å†…å­˜ç©ºé—´ï¼Œå°±åƒç£ç›˜ç©ºé—´åªè¦é€»è¾‘æ˜¯è¿žç»­çš„å³å¯ã€‚å®ƒçš„å†…å­˜å¤§å°å¯ä»¥è®¾ä¸ºå›ºå®šå¤§å°ï¼Œä¹Ÿå¯ä»¥æ‰©å±•ã€‚ å½“å‰ä¸»æµçš„è™šæ‹Ÿæœºå¦‚HotPotéƒ½èƒ½æŒ‰æ‰©å±•å®žçŽ°(é€šè¿‡è®¾ç½® -Xmxå’Œ-Xms)ï¼Œå¦‚æžœå †ä¸­æ²¡æœ‰å†…å­˜å®Œæˆå®žä¾‹åˆ†é…ï¼Œè€Œä¸”å †æ— æ³•æ‰©å±•å°†æŠ¥OOMé”™è¯¯(OutOfMemoryError) webåº”ç”¨ç¨‹åºnewå‡ºçš„å¯¹è±¡æ”¾åœ¨EdenåŒºï¼ˆ8/10ï¼‰ï¼Œå½“æ”¾æ»¡äº†åŽä¼šè‡ªåŠ¨å¼€å¯ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œminor gc æ–¹æ³•åŒºæ–¹æ³•åŒºåŒå †ä¸€æ ·ï¼Œæ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œä¸ºäº†åŒºåˆ†å †ï¼Œåˆè¢«ç§°ä¸ºéžå †ã€‚ ç”¨äºŽå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ï¼Œå¦‚staticä¿®é¥°çš„å˜é‡åŠ è½½ç±»çš„æ—¶å€™å°±è¢«åŠ è½½åˆ°æ–¹æ³•åŒºä¸­ã€‚ è¿è¡Œæ—¶å¸¸é‡æ±  æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œclassæ–‡ä»¶é™¤äº†æœ‰ç±»çš„å­—æ®µã€æŽ¥å£ã€æ–¹æ³•ç­‰æè¿°ä¿¡æ¯ä¹‹å¤–ï¼Œè¿˜æœ‰å¸¸é‡æ± ç”¨äºŽå­˜æ”¾ç¼–è¯‘æœŸé—´ç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚ åœ¨è€ç‰ˆjdkï¼Œæ–¹æ³•åŒºä¹Ÿè¢«ç§°ä¸ºæ°¸ä¹…ä»£ã€å› ä¸ºæ²¡æœ‰å¼ºåˆ¶è¦æ±‚æ–¹æ³•åŒºå¿…é¡»å®žçŽ°åžƒåœ¾å›žæ”¶ï¼ŒHotSpotè™šæ‹Ÿæœºä»¥æ°¸ä¹…ä»£æ¥å®žçŽ°æ–¹æ³•åŒºï¼Œä»Žè€ŒJVMçš„åžƒåœ¾æ”¶é›†å™¨å¯ä»¥åƒç®¡ç†å †åŒºä¸€æ ·ç®¡ç†è¿™éƒ¨åˆ†åŒºåŸŸï¼Œä»Žè€Œä¸éœ€è¦ä¸“é—¨ä¸ºè¿™éƒ¨åˆ†è®¾è®¡åžƒåœ¾å›žæ”¶æœºåˆ¶ã€‚ä¸è¿‡è‡ªä»ŽJDK7ä¹‹åŽï¼ŒHotspotè™šæ‹Ÿæœºä¾¿å°†è¿è¡Œæ—¶å¸¸é‡æ± ä»Žæ°¸ä¹…ä»£ç§»é™¤äº†ã€‚ã€‘ jdk8çœŸæ­£å¼€å§‹åºŸå¼ƒæ°¸ä¹…ä»£ï¼Œè€Œä½¿ç”¨å…ƒç©ºé—´(Metaspace) GCGCç®€ä»‹GC(Garbage Collection)ï¼šå³åžƒåœ¾å›žæ”¶å™¨ï¼Œè¯žç”ŸäºŽ1960å¹´MITçš„Lispè¯­è¨€ï¼Œä¸»è¦æ˜¯ç”¨æ¥å›žæ”¶ï¼Œé‡Šæ”¾åžƒåœ¾å ç”¨çš„ç©ºé—´ã€‚ java GCæ³›æŒ‡javaçš„åžƒåœ¾å›žæ”¶æœºåˆ¶ï¼Œè¯¥æœºåˆ¶æ˜¯javaä¸ŽC/C++çš„ä¸»è¦åŒºåˆ«ä¹‹ä¸€ï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸å†™javaä»£ç çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¸éœ€è¦ç¼–å†™å†…å­˜å›žæ”¶æˆ–è€…åžƒåœ¾æ¸…ç†çš„ä»£ç ï¼Œä¹Ÿä¸éœ€è¦åƒC/C++é‚£æ ·åšç±»ä¼¼delete/freeçš„æ“ä½œã€‚ ä¸ºä»€ä¹ˆéœ€è¦å­¦ä¹ GCå¯¹è±¡çš„å†…å­˜åˆ†é…åœ¨javaè™šæ‹Ÿæœºçš„è‡ªåŠ¨å†…å­˜åˆ†é…æœºåˆ¶ä¸‹ï¼Œä¸€èˆ¬ä¸å®¹æ˜“å‡ºçŽ°å†…å­˜æ³„æ¼é—®é¢˜ã€‚ä½†æ˜¯å†™ä»£ç éš¾å…ä¼šé‡åˆ°ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚OOMç¥žé©¬çš„ã€‚ã€‚å°½ç®¡è™šæ‹Ÿæœºå†…å­˜çš„åŠ¨æ€åˆ†é…ä¸Žå†…å­˜å›žæ”¶æŠ€æœ¯å¾ˆæˆç†Ÿï¼Œå¯ä¸‡ä¸€å‡ºçŽ°äº†è¿™æ ·é‚£æ ·çš„å†…å­˜æº¢å‡ºé—®é¢˜ï¼Œé‚£ä¹ˆå°†éš¾ä»¥å®šä½é”™è¯¯çš„åŽŸå› æ‰€åœ¨ã€‚ å“ªäº›å†…å­˜è¦å›žæ”¶javaå†…å­˜æ¨¡åž‹ä¸­åˆ†ä¸ºäº”å¤§åŒºåŸŸå·²ç»æœ‰æ‰€äº†è§£ã€‚æˆ‘ä»¬çŸ¥é“ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆï¼Œç”±çº¿ç¨‹è€Œç”Ÿï¼Œéšçº¿ç¨‹è€Œç­ï¼Œå…¶ä¸­æ ˆä¸­çš„æ ˆå¸§éšç€æ–¹æ³•çš„è¿›å…¥é¡ºåºçš„æ‰§è¡Œçš„å…¥æ ˆå’Œå‡ºæ ˆçš„æ“ä½œï¼Œä¸€ä¸ªæ ˆå¸§éœ€è¦åˆ†é…å¤šå°‘å†…å­˜å–å†³äºŽå…·ä½“çš„è™šæ‹Ÿæœºå®žçŽ°å¹¶ä¸”åœ¨ç¼–è¯‘æœŸé—´å³ç¡®å®šä¸‹æ¥ã€å¿½ç•¥JITç¼–è¯‘å™¨åšçš„ä¼˜åŒ–ï¼ŒåŸºæœ¬å½“æˆç¼–è¯‘æœŸé—´å¯çŸ¥ã€‘ï¼Œå½“æ–¹æ³•æˆ–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åŽï¼Œå†…å­˜å°±éšç€å›žæ”¶ï¼Œå› æ­¤æ— éœ€å…³å¿ƒã€‚ è€ŒJavaå †ã€æ–¹æ³•åŒºåˆ™ä¸ä¸€æ ·ã€‚æ–¹æ³•åŒºå­˜æ”¾ç€ç±»åŠ è½½ä¿¡æ¯ï¼Œä½†æ˜¯ä¸€ä¸ªæŽ¥å£ä¸­å¤šä¸ªå®žçŽ°ç±»éœ€è¦çš„å†…å­˜å¯èƒ½ä¸å¤ªä¸€æ ·ï¼Œä¸€ä¸ªæ–¹æ³•ä¸­å¤šä¸ªåˆ†æ”¯éœ€è¦çš„å†…å­˜ä¹Ÿå¯èƒ½ä¸ä¸€æ ·ã€åªæœ‰åœ¨è¿è¡ŒæœŸé—´æ‰å¯çŸ¥é“è¿™ä¸ªæ–¹æ³•åˆ›å»ºäº†å“ªäº›å¯¹è±¡éœ€è¦å¤šå°‘å†…å­˜ã€‘ï¼Œè¿™éƒ¨åˆ†å†…å­˜çš„åˆ†é…å’Œå›žæ”¶éƒ½æ˜¯åŠ¨æ€çš„ï¼Œgcå…³æ³¨çš„ä¹Ÿæ­£æ˜¯è¿™éƒ¨åˆ†çš„å†…å­˜ã€‚ Javaå †æ˜¯GCå›žæ”¶çš„â€œé‡ç‚¹åŒºåŸŸâ€ã€‚å †ä¸­åŸºæœ¬å­˜æ”¾ç€æ‰€æœ‰å¯¹è±¡å®žä¾‹ï¼Œgcè¿›è¡Œå›žæ”¶å‰ï¼Œç¬¬ä¸€ä»¶äº‹å°±æ˜¯ç¡®è®¤å“ªäº›å¯¹è±¡å­˜æ´»ï¼Œå“ªäº›æ­»åŽ»[å³ä¸å¯èƒ½å†è¢«å¼•ç”¨] å †çš„å›žæ”¶åŒºåŸŸä¸ºäº†é«˜æ•ˆçš„å›žæ”¶ï¼Œjvmå°†å †åˆ†ä¸ºä¸‰ä¸ªåŒºåŸŸ 1.æ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰NewSizeå’ŒMaxNewSizeåˆ†åˆ«å¯ä»¥æŽ§åˆ¶å¹´è½»ä»£çš„åˆå§‹å¤§å°å’Œæœ€å¤§çš„å¤§å° 2.è€å¹´ä»£ï¼ˆOld Generationï¼‰ 3.æ°¸ä¹…ä»£ï¼ˆPermanent Generationï¼‰ã€1.8ä»¥åŽé‡‡ç”¨å…ƒç©ºé—´ï¼Œå°±ä¸åœ¨å †ä¸­äº†ã€‘ åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»ç®—æ³•1.å¼•ç”¨è®¡æ•°ç®—æ³•æ—©æœŸåˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»å¤§å¤šéƒ½æ˜¯ä»¥è¿™ç§ç®—æ³•ï¼Œè¿™ç§ç®—æ³•åˆ¤æ–­å¾ˆç®€å•ï¼Œç®€å•æ¥è¯´å°±æ˜¯ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“å¯¹è±¡è¢«å¼•ç”¨ä¸€æ¬¡å°±åŠ 1ï¼Œå¼•ç”¨å¤±æ•ˆæ—¶å°±å‡1ã€‚å½“ä¸º0çš„æ—¶å€™å°±åˆ¤æ–­å¯¹è±¡ä¸ä¼šå†è¢«å¼•ç”¨ã€‚ä¼˜ç‚¹:å®žçŽ°ç®€å•æ•ˆçŽ‡é«˜ï¼Œè¢«å¹¿æ³›ä½¿ç”¨ä¸Žå¦‚pythonä½•æ¸¸æˆè„šæœ¬è¯­è¨€ä¸Šã€‚ç¼ºç‚¹:éš¾ä»¥è§£å†³å¾ªçŽ¯å¼•ç”¨çš„é—®é¢˜ï¼Œå°±æ˜¯å‡å¦‚ä¸¤ä¸ªå¯¹è±¡äº’ç›¸å¼•ç”¨å·²ç»ä¸ä¼šå†è¢«å…¶å®ƒå…¶å®ƒå¼•ç”¨ï¼Œå¯¼è‡´ä¸€ç›´ä¸ä¼šä¸º0å°±æ— æ³•è¿›è¡Œå›žæ”¶ã€‚ 2.å¯è¾¾æ€§åˆ†æžç®—æ³•ç›®å‰ä¸»æµçš„å•†ç”¨è¯­è¨€[å¦‚javaã€c#]é‡‡ç”¨çš„æ˜¯å¯è¾¾æ€§åˆ†æžç®—æ³•åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»ã€‚è¿™ä¸ªç®—æ³•æœ‰æ•ˆè§£å†³äº†å¾ªçŽ¯åˆ©ç”¨çš„å¼Šç«¯ã€‚å®ƒçš„åŸºæœ¬æ€è·¯æ˜¯é€šè¿‡ä¸€ä¸ªç§°ä¸ºâ€œGC Rootsâ€çš„å¯¹è±¡ä¸ºèµ·å§‹ç‚¹ï¼Œæœç´¢æ‰€ç»è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°GC Rootsæ²¡æœ‰ä»»ä½•å¼•ç”¨è·Ÿå®ƒè¿žæŽ¥åˆ™è¯æ˜Žå¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ã€‚ å¯ä½œä¸ºGC Rootsçš„å¯¹è±¡æœ‰å››ç§ â‘ è™šæ‹Ÿæœºæ ˆ(æ ˆæ¡¢ä¸­çš„æœ¬åœ°å˜é‡è¡¨)ä¸­çš„å¼•ç”¨çš„å¯¹è±¡ï¼Œå°±æ˜¯å¹³æ—¶æ‰€æŒ‡çš„javaå¯¹è±¡ï¼Œå­˜æ”¾åœ¨å †ä¸­ â‘¡æ–¹æ³•åŒºä¸­çš„ç±»é™æ€å±žæ€§å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸€èˆ¬æŒ‡è¢«staticä¿®é¥°å¼•ç”¨çš„å¯¹è±¡ï¼ŒåŠ è½½ç±»çš„æ—¶å€™å°±åŠ è½½åˆ°å†…å­˜ä¸­ â‘¢æ–¹æ³•åŒºä¸­çš„å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ â‘£æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIï¼ˆnativeæ–¹æ³•)å¼•ç”¨çš„å¯¹è±¡ è¦çœŸæ­£å®£å‘Šå¯¹è±¡æ­»äº¡éœ€ç»è¿‡ä¸¤ä¸ªè¿‡ç¨‹ã€‚ 1.å¯è¾¾æ€§åˆ†æžåŽæ²¡æœ‰å‘çŽ°å¼•ç”¨é“¾ 2.æŸ¥çœ‹å¯¹è±¡æ˜¯å¦æœ‰finalizeæ–¹æ³•ï¼Œå¦‚æžœæœ‰é‡å†™ä¸”åœ¨æ–¹æ³•å†…å®Œæˆè‡ªæ•‘[æ¯”å¦‚å†å»ºç«‹å¼•ç”¨]ï¼Œè¿˜æ˜¯å¯ä»¥æŠ¢æ•‘ä¸€ä¸‹ï¼Œæ³¨æ„è¿™è¾¹ä¸€ä¸ªç±»çš„finalizeåªæ‰§è¡Œä¸€æ¬¡ï¼Œè¿™å°±ä¼šå‡ºçŽ°ä¸€æ ·çš„ä»£ç ç¬¬ä¸€æ¬¡è‡ªæ•‘æˆåŠŸç¬¬äºŒæ¬¡å¤±è´¥çš„æƒ…å†µã€‚[å¦‚æžœç±»é‡å†™finalizeä¸”è¿˜æ²¡è°ƒç”¨è¿‡ï¼Œä¼šå°†è¿™ä¸ªå¯¹è±¡æ”¾åˆ°ä¸€ä¸ªå«åšF-Queueçš„åºåˆ—é‡Œï¼Œè¿™è¾¹finalizeä¸æ‰¿è¯ºä¸€å®šä¼šæ‰§è¡Œï¼Œè¿™ä¹ˆåšæ˜¯å› ä¸ºå¦‚æžœé‡Œé¢æ­»å¾ªçŽ¯çš„è¯å¯èƒ½ä¼šä½¿F-Queueé˜Ÿåˆ—å¤„äºŽç­‰å¾…ï¼Œä¸¥é‡ä¼šå¯¼è‡´å†…å­˜å´©æºƒï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„ã€‚] åžƒåœ¾æ”¶é›†ç®—æ³•1.æ ‡è®°/æ¸…é™¤ç®—æ³•ã€æœ€åŸºç¡€ã€‘ 2.å¤åˆ¶ç®—æ³• 3.æ ‡è®°/æ•´ç†ç®—æ³• jvmé‡‡ç”¨åˆ†ä»£æ”¶é›†ç®—æ³•å¯¹ä¸åŒåŒºåŸŸé‡‡ç”¨ä¸åŒçš„å›žæ”¶ç®—æ³•ã€‚ æ–°ç”Ÿä»£é‡‡ç”¨å¤åˆ¶ç®—æ³•æ–°ç”Ÿä»£ä¸­å› ä¸ºå¯¹è±¡éƒ½æ˜¯â€æœç”Ÿå¤•æ­»çš„â€ï¼Œã€æ·±å…¥ç†è§£JVMè™šæ‹Ÿæœºä¸Šè¯´98%çš„å¯¹è±¡,ä¸çŸ¥é“æ˜¯ä¸æ˜¯è¿™ä¹ˆå¤šï¼Œæ€»ä¹‹å°±æ˜¯å­˜æ´»çŽ‡å¾ˆä½Žã€‘ï¼Œé€‚ç”¨äºŽå¤åˆ¶ç®—æ³•ã€å¤åˆ¶ç®—æ³•æ¯”è¾ƒé€‚åˆç”¨äºŽå­˜æ´»çŽ‡ä½Žçš„å†…å­˜åŒºåŸŸã€‘ã€‚å®ƒä¼˜åŒ–äº†æ ‡è®°/æ¸…é™¤ç®—æ³•çš„æ•ˆçŽ‡å’Œå†…å­˜ç¢Žç‰‡é—®é¢˜ï¼Œä¸”JVMä¸ä»¥5:5åˆ†é…å†…å­˜ã€ç”±äºŽå­˜æ´»çŽ‡ä½Žï¼Œä¸éœ€è¦å¤åˆ¶ä¿ç•™é‚£ä¹ˆå¤§çš„åŒºåŸŸé€ æˆç©ºé—´ä¸Šçš„æµªè´¹ï¼Œå› æ­¤ä¸éœ€è¦æŒ‰1:1ã€åŽŸæœ‰åŒºåŸŸ:ä¿ç•™ç©ºé—´ã€‘åˆ’åˆ†å†…å­˜åŒºåŸŸï¼Œè€Œæ˜¯å°†å†…å­˜åˆ†ä¸ºä¸€å—Edenç©ºé—´å’ŒFrom Survivorã€To Survivorã€ä¿ç•™ç©ºé—´ã€‘ï¼Œä¸‰è€…é»˜è®¤æ¯”ä¾‹ä¸º8:1:1ï¼Œä¼˜å…ˆä½¿ç”¨EdenåŒºï¼Œè‹¥EdenåŒºæ»¡ï¼Œåˆ™å°†å¯¹è±¡å¤åˆ¶åˆ°ç¬¬äºŒå—å†…å­˜åŒºä¸Šã€‚ä½†æ˜¯ä¸èƒ½ä¿è¯æ¯æ¬¡å›žæ”¶éƒ½åªæœ‰ä¸å¤šäºŽ10%çš„å¯¹è±¡å­˜è´§ï¼Œæ‰€ä»¥SurvivoråŒºä¸å¤Ÿçš„è¯ï¼Œåˆ™ä¼šä¾èµ–è€å¹´ä»£å¹´è¿›è¡Œåˆ†é…ã€‘ã€‚ GCå¼€å§‹æ—¶ï¼Œå¯¹è±¡åªä¼šå­˜äºŽEdenå’ŒFrom SurvivoråŒºåŸŸï¼ŒTo Survivorã€ä¿ç•™ç©ºé—´ã€‘ä¸ºç©ºã€‚ GCè¿›è¡Œæ—¶ï¼ŒEdenåŒºæ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½è¢«å¤åˆ¶åˆ°To SurvivoråŒºï¼Œè€ŒFrom SurvivoråŒºä¸­ï¼Œä»å­˜æ´»çš„å¯¹è±¡ä¼šæ ¹æ®å®ƒä»¬çš„å¹´é¾„å€¼å†³å®šåŽ»å‘ï¼Œå¹´é¾„å€¼è¾¾åˆ°å¹´é¾„é˜ˆå€¼(é»˜è®¤15æ˜¯å› ä¸ºå¯¹è±¡å¤´ä¸­å¹´é¾„å 4bitï¼Œæ–°ç”Ÿä»£æ¯ç†¬è¿‡ä¸€æ¬¡åžƒåœ¾å›žæ”¶ï¼Œå¹´é¾„+1)ï¼Œåˆ™ç§»åˆ°è€å¹´ä»£ï¼Œæ²¡æœ‰è¾¾åˆ°åˆ™å¤åˆ¶åˆ°To Survivorã€‚ è€å¹´ä»£é‡‡ç”¨æ ‡è®°/æ¸…é™¤ç®—æ³•æˆ–æ ‡è®°/æ•´ç†ç®—æ³•ç”±äºŽè€å¹´ä»£å­˜æ´»çŽ‡é«˜ï¼Œæ²¡æœ‰é¢å¤–ç©ºé—´ç»™ä»–åšæ‹…ä¿ï¼Œå¿…é¡»ä½¿ç”¨è¿™ä¸¤ç§ç®—æ³•ã€‚ æžšä¸¾æ ¹èŠ‚ç‚¹ç®—æ³•GC Roots è¢«è™šæ‹Ÿæœºç”¨æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´» å¯è¾¾æ€§åˆ†æžç®—æ³•éœ€è€ƒè™‘ 1.å¦‚æžœæ–¹æ³•åŒºå‡ ç™¾å…†ï¼Œä¸€ä¸ªä¸ªæ£€æŸ¥é‡Œé¢çš„å¼•ç”¨ï¼Œå°†è€—è´¹å¤§é‡èµ„æºã€‚ 2.åœ¨åˆ†æžæ—¶ï¼Œéœ€ä¿è¯è¿™ä¸ªå¯¹è±¡å¼•ç”¨å…³ç³»ä¸å†å˜åŒ–ï¼Œå¦åˆ™ç»“æžœå°†ä¸å‡†ç¡®ã€‚ã€å› æ­¤GCè¿›è¡Œæ—¶éœ€åœæŽ‰å…¶å®ƒæ‰€æœ‰javaæ‰§è¡Œçº¿ç¨‹(SunæŠŠè¿™ç§è¡Œä¸ºç§°ä¸ºâ€˜Stop the Worldâ€™)ï¼Œå³ä½¿æ˜¯å·ç§°å‡ ä¹Žä¸ä¼šåœé¡¿çš„CMSæ”¶é›†å™¨ï¼Œæžšä¸¾æ ¹èŠ‚ç‚¹æ—¶ä¹Ÿéœ€åœæŽ‰çº¿ç¨‹ã€‘ è§£å†³åŠžæ³•:å®žé™…ä¸Šå½“ç³»ç»Ÿåœä¸‹æ¥åŽJVMä¸éœ€è¦ä¸€ä¸ªä¸ªæ£€æŸ¥å¼•ç”¨ï¼Œè€Œæ˜¯é€šè¿‡OopMapæ•°æ®ç»“æž„ã€HotSpotçš„å«æ³•ã€‘æ¥æ ‡è®°å¯¹è±¡å¼•ç”¨ã€‚ è™šæ‹Ÿæœºå…ˆå¾—çŸ¥å“ªäº›åœ°æ–¹å­˜æ”¾å¯¹è±¡çš„å¼•ç”¨ï¼Œåœ¨ç±»åŠ è½½å®Œæ—¶ã€‚HotSpotæŠŠå¯¹è±¡å†…ä»€ä¹ˆåç§»é‡ä»€ä¹ˆç±»åž‹çš„æ•°æ®ç®—å‡ºæ¥ï¼Œåœ¨jitç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¼šåœ¨ç‰¹å®šä½ç½®è®°å½•ä¸‹æ ˆå’Œå¯„å­˜å™¨å“ªäº›ä½ç½®æ˜¯å¼•ç”¨ï¼Œè¿™æ ·GCåœ¨æ‰«ææ—¶å°±å¯ä»¥çŸ¥é“è¿™äº›ä¿¡æ¯ã€‚ã€ç›®å‰ä¸»æµJVMä½¿ç”¨å‡†ç¡®å¼GCã€‘ OopMapå¯ä»¥å¸®åŠ©HotSpotå¿«é€Ÿä¸”å‡†ç¡®å®ŒæˆGC Rootsæžšä¸¾ä»¥åŠç¡®å®šç›¸å…³ä¿¡æ¯ã€‚ä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¯èƒ½å¯¼è‡´å¼•ç”¨å…³ç³»å˜åŒ–ã€‚ è¿™ä¸ªæ—¶å€™æœ‰ä¸ªsafepoint(å®‰å…¨ç‚¹)çš„æ¦‚å¿µã€‚ HotSpotä¸­GCä¸æ˜¯åœ¨ä»»æ„ä½ç½®éƒ½å¯ä»¥è¿›å…¥ï¼Œè€Œåªèƒ½åœ¨safepointå¤„è¿›å…¥ã€‚ GCæ—¶å¯¹ä¸€ä¸ªJavaçº¿ç¨‹æ¥è¯´ï¼Œå®ƒè¦ä¹ˆå¤„åœ¨safepoint,è¦ä¹ˆä¸åœ¨safepointã€‚ safepointä¸èƒ½å¤ªå°‘ï¼Œå¦åˆ™GCç­‰å¾…çš„æ—¶é—´ä¼šå¾ˆä¹… safepointä¸èƒ½å¤ªå¤šï¼Œå¦åˆ™å°†å¢žåŠ è¿è¡ŒGCçš„è´Ÿæ‹… å®‰å…¨ç‚¹ä¸»è¦å­˜æ”¾çš„ä½ç½® 1:å¾ªçŽ¯çš„æœ«å°¾ 2:æ–¹æ³•ä¸´è¿”å›žå‰/è°ƒç”¨æ–¹æ³•çš„callæŒ‡ä»¤åŽ 3:å¯èƒ½æŠ›å¼‚å¸¸çš„ä½ç½® Minor GCã€Major GCã€FULL GCMinor GC:åœ¨å¹´è½»ä»£Young space(åŒ…æ‹¬EdenåŒºå’ŒSurvivoråŒº)ä¸­çš„åžƒåœ¾å›žæ”¶ç§°ä¹‹ä¸º Minor GC,Minor GCåªä¼šæ¸…ç†å¹´è½»ä»£. Major GC:Major GCæ¸…ç†è€å¹´ä»£(old GC)ï¼Œä½†æ˜¯é€šå¸¸ä¹Ÿå¯ä»¥æŒ‡å’ŒFull GCæ˜¯ç­‰ä»·ï¼Œå› ä¸ºæ”¶é›†è€å¹´ä»£çš„æ—¶å€™å¾€å¾€ä¹Ÿä¼šä¼´éšç€å‡çº§å¹´è½»ä»£ï¼Œæ”¶é›†æ•´ä¸ªJavaå †ã€‚æ‰€ä»¥æœ‰äººé—®çš„æ—¶å€™éœ€é—®æ¸…æ¥šå®ƒæŒ‡çš„æ˜¯full GCè¿˜æ˜¯old GCã€‚ Full GC:full gcæ˜¯å¯¹æ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ°¸ä¹…ä»£ã€jdk1.8åŽæ²¡æœ‰è¿™ä¸ªæ¦‚å¿µäº†ã€‘ç»Ÿä¸€çš„å›žæ”¶ã€‚jvmè°ƒä¼˜ ç›®çš„å‡å°‘full gcæ¬¡æ•°ï¼Œfull gcçš„æ—¶å€™ä¼šstw,åœæŽ‰æ‰€æœ‰çº¿ç¨‹ï¼Œå½±å“ç”¨æˆ·ä½“éªŒçš„ LinuxæŸ¥çœ‹æŸä¸ªæœåŠ¡JVMçš„GCå’Œå †å†…å­˜ä½¿ç”¨æƒ…å†µä½¿ç”¨ jps å‘½ä»¤æŸ¥çœ‹é…ç½®äº†JVMçš„æœåŠ¡Jps(Java Virtual Machine Process Status Tool)æ˜¯JDK 1.5æä¾›çš„ä¸€ä¸ªæ˜¾ç¤ºå½“å‰æ‰€æœ‰javaè¿›ç¨‹pidçš„å‘½ä»¤ï¼Œç®€å•å®žç”¨ï¼Œéžå¸¸é€‚åˆåœ¨linux/unixå¹³å°ä¸Šç®€å•å¯Ÿçœ‹å½“å‰java JVMè¿›ç¨‹çš„ä¸€äº›ç®€å•æƒ…å†µã€‚ jps åˆ—å‡ºpidå’Œjavaä¸»ç±»å jps -l åˆ—å‡ºpidå’Œjavaä¸»ç±»å…¨ç§° [root@airthink ~]# jps 23393 jar 5401 jenkins.war 29675 Bootstrap 31692 Bootstrap [root@airthink ~]# jps -l 23393 bubu-0.0.1-SNAPSHOT.jar 5401 /usr/lib/jenkins/jenkins.war 24746 sun.tools.jps.Jps 29675 org.apache.catalina.startup.Bootstrap 31692 org.apache.catalina.startup.Bootstrap jps -lm åˆ—å‡ºçš®å¸¦ã€ä¸»ç±»å…¨ç§°å’Œåº”ç”¨ç¨‹åºå‚æ•° [root@airthink ~]# jps -lm 23393 bubu-0.0.1-SNAPSHOT.jar --server.port=7070 5401 /usr/lib/jenkins/jenkins.war --logfile=/var/log/jenkins/jenkins.log --webroot=/var/cache/jenkins/war --daemon --httpPort=9090 --debug=5 --handlerCountMax=100 --handlerCountMaxIdle=20 29675 org.apache.catalina.startup.Bootstrap start 24908 sun.tools.jps.Jps -lm 31692 org.apache.catalina.startup.Bootstrap start jps -v åˆ—å‡ºpidå’ŒJVMå‚æ•° [root@airthink ~]# jps -v 23393 jar 24964 Jps -Denv.class.path=.:/usr/local/jdk1.8.0_162/lib:/usr/local/jdk1.8.0_162/jre/lib: -Dapplication.home=/usr/local/jdk1.8.0_162 -Xms8m 5401 jenkins.war -Dcom.sun.akuma.Daemon=daemonized -Djava.awt.headless=true -DJENKINS_HOME=/var/lib/jenkins 29675 Bootstrap -Djava.util.logging.config.file=/airthink/oauth-apache-tomcat-8.5.46/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK=0027 -Dignore.endorsed.dirs= -Dcatalina.base=/airthink/oauth-apache-tomcat-8.5.46 -Dcatalina.home=/airthink/oauth-apache-tomcat-8.5.46 -Djava.io.tmpdir=/airthink/oauth-apache-tomcat-8.5.46/temp 31692 Bootstrap -Djava.util.logging.config.file=/airthink/apache-tomcat-8.0.50/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dignore.endorsed.dirs= -Dcatalina.base=/airthink/apache-tomcat-8.0.50 -Dcatalina.home=/airthink/apache-tomcat-8.0.50 -Djava.io.tmpdir=/airthink/apache-tomcat-8.0.50/temp æŸ¥çœ‹æŸä¸ªè¿›ç¨‹JVMçš„GCä½¿ç”¨æƒ…å†µjstat -gc 71614 5000 jstat -gc è¿›ç¨‹å· åˆ·æ–°æ—¶é—´ S0Cï¼šå¹´è½»ä»£ä¸­ç¬¬ä¸€ä¸ªsurvivorï¼ˆå¹¸å­˜åŒºï¼‰çš„å®¹é‡ (å­—èŠ‚) S1Cï¼šå¹´è½»ä»£ä¸­ç¬¬äºŒä¸ªsurvivorï¼ˆå¹¸å­˜åŒºï¼‰çš„å®¹é‡ (å­—èŠ‚) S0Uï¼šå¹´è½»ä»£ä¸­ç¬¬ä¸€ä¸ªsurvivorï¼ˆå¹¸å­˜åŒºï¼‰ç›®å‰å·²ä½¿ç”¨ç©ºé—´ (å­—èŠ‚) S1Uï¼šå¹´è½»ä»£ä¸­ç¬¬äºŒä¸ªsurvivorï¼ˆå¹¸å­˜åŒºï¼‰ç›®å‰å·²ä½¿ç”¨ç©ºé—´ (å­—èŠ‚) ECï¼šå¹´è½»ä»£ä¸­Edenï¼ˆä¼Šç”¸å›­ï¼‰çš„å®¹é‡ (å­—èŠ‚) EUï¼šå¹´è½»ä»£ä¸­Edenï¼ˆä¼Šç”¸å›­ï¼‰ç›®å‰å·²ä½¿ç”¨ç©ºé—´ (å­—èŠ‚) OCï¼šOldä»£çš„å®¹é‡ (å­—èŠ‚) OUï¼šOldä»£ç›®å‰å·²ä½¿ç”¨ç©ºé—´ (å­—èŠ‚) YGCï¼šä»Žåº”ç”¨ç¨‹åºå¯åŠ¨åˆ°é‡‡æ ·æ—¶å¹´è½»ä»£ä¸­gcæ¬¡æ•° YGCTï¼šä»Žåº”ç”¨ç¨‹åºå¯åŠ¨åˆ°é‡‡æ ·æ—¶å¹´è½»ä»£ä¸­gcæ‰€ç”¨æ—¶é—´(s) FGCï¼šä»Žåº”ç”¨ç¨‹åºå¯åŠ¨åˆ°é‡‡æ ·æ—¶oldä»£(å…¨gc)gcæ¬¡æ•° FGCTï¼šä»Žåº”ç”¨ç¨‹åºå¯åŠ¨åˆ°é‡‡æ ·æ—¶oldä»£(å…¨gc)gcæ‰€ç”¨æ—¶é—´(s) GCTï¼šä»Žåº”ç”¨ç¨‹åºå¯åŠ¨åˆ°é‡‡æ ·æ—¶gcç”¨çš„æ€»æ—¶é—´(s) æŸ¥çœ‹å †å†…å­˜ä½¿ç”¨æƒ…å†µjmap -heap è¿›ç¨‹å· Heap Configuration: #å †é…ç½®æƒ…å†µ MinHeapFreeRatio = 40 #å †æœ€å°ä½¿ç”¨æ¯”ä¾‹ MaxHeapFreeRatio = 70 #å †æœ€å¤§ä½¿ç”¨æ¯”ä¾‹ MaxHeapSize = 482344960 (460.0MB) #å †æœ€å¤§ç©ºé—´ NewSize = 10485760 (10.0MB) #æ–°ç”Ÿä»£åˆå§‹åŒ–å¤§å° MaxNewSize = 160759808 (153.3125MB) #æ–°ç”Ÿä»£å¯ä½¿ç”¨æœ€å¤§å®¹é‡å¤§å° OldSize = 20971520 (20.0MB) #è€ç”Ÿä»£å¤§å° NewRatio = 2 #æ–°ç”Ÿä»£æ¯”ä¾‹ SurvivorRatio = 8 #æ–°ç”Ÿä»£ä¸Žsuvivorçš„å æ¯” MetaspaceSize = 21807104 (20.796875MB) #å…ƒæ•°æ®ç©ºé—´åˆå§‹å¤§å° CompressedClassSpaceSize = 1073741824 (1024.0MB) #ç±»æŒ‡é’ˆåŽ‹ç¼©ç©ºé—´å¤§å°, é»˜è®¤ä¸º1G MaxMetaspaceSize = 17592186044415 MB #å…ƒæ•°æ®ç©ºé—´çš„æœ€å¤§å€¼, è¶…è¿‡æ­¤å€¼å°±ä¼šè§¦å‘ GCæº¢å‡º( JVMä¼šåŠ¨æ€åœ°æ”¹å˜æ­¤å€¼) G1HeapRegionSize = 0 (0.0MB) #åŒºå—çš„å¤§å° Heap Usage: New Generation (Eden + 1 Survivor Space): #æ–°ç”Ÿä»£å¤§å° capacity = 14876672 (14.1875MB) #åŒºå—æœ€å¤§å¯ä½¿ç”¨å¤§å° used = 2722520 (2.5963973999023438MB) #åŒºå—å·²ä½¿ç”¨å†…å­˜ free = 12154152 (11.591102600097656MB) #åŒºå—ç©ºé—²å†…å­˜ 18.30059841340859% used #åŒºå—ä½¿ç”¨æ¯”ä¾‹ Eden Space: # EdenåŒºç©ºé—´ capacity = 13238272 (12.625MB) used = 2630736 (2.5088653564453125MB) free = 10607536 (10.116134643554688MB) 19.87220084313119% used From Space: #Survivor0åŒº capacity = 1638400 (1.5625MB) used = 91784 (0.08753204345703125MB) free = 1546616 (1.4749679565429688MB) 5.60205078125% used To Space: #Survivor1åŒº capacity = 1638400 (1.5625MB) used = 0 (0.0MB) free = 1638400 (1.5625MB) 0.0% used tenured generation: #è€å¹´ä»£ capacity = 33013760 (31.484375MB) used = 26392512 (25.16986083984375MB) free = 6621248 (6.31451416015625MB) 79.94397487593052% used linuxæœåŠ¡å™¨æˆ–tomcaté¡¹ç›®å¯åŠ¨ï¼Œè¿›è¡Œjvmå‚æ•°è°ƒä¼˜è®¾ç½®é¦–å…ˆæ‰§è¡Œå‘½ä»¤ï¼šfree -hï¼ŒæŸ¥è¯¢å½“å‰çš„å†…å­˜å ç”¨æƒ…å†µ [root@airthink ~]# free -h total used free shared buff/cache available Mem: 1.8G 1.1G 111M 680K 553M 498M Swap: 0B 0B 0B å¼€å§‹è¿›è¡Œä¼˜åŒ–ï¼Œæ‰§è¡Œå‘½ä»¤ï¼štopï¼ŒæŸ¥çœ‹å„ä¸ªåº”ç”¨çš„å†…å­˜å ç”¨æƒ…å†µï¼Œé€‰å–å†…å­˜å ç”¨è¿‡é«˜çš„pidè¿›ç¨‹ï¼› ç„¶åŽèŽ·å–pidå·31692ï¼Œæ ¹æ®pidæŸ¥è¯¢å¯¹åº”çš„è¿›ç¨‹ä»¥åŠé¡¹ç›®è·¯å¾„ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š ps -aux |grep -v grep|grep 31692 [root@airthink ~]# ps -aux |grep -v grep|grep 31692 root 31692 0.1 17.2 2575436 324396 ? Sl Feb24 16:53 /usr/local/jdk1.8.0_162/jre/bin/java -Djava.util.logging.config.file=/airthink/apache-tomcat-8.0.50/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dignore.endorsed.dirs= -classpath /airthink/apache-tomcat-8.0.50/bin/bootstrap.jar:/airthink/apache-tomcat-8.0.50/bin/tomcat-juli.jar -Dcatalina.base=/airthink/apache-tomcat-8.0.50 -Dcatalina.home=/airthink/apache-tomcat-8.0.50 -Djava.io.tmpdir=/airthink/apache-tomcat-8.0.50/temp org.apache.catalina.startup.Bootstrap start å®šä½åˆ°é¡¹ç›®è·Ÿè·¯å¾„ä¹‹åŽï¼Œå¼€å§‹è®¾ç½®é¡¹ç›®å¯åŠ¨jvmå†…å­˜å ç”¨ï¼Œä¸åŒé¡¹ç›®å¯åˆ†é…ä¸åŒçš„å†…å­˜ å¦‚æžœæ˜¯springbooté¡¹ç›®jarå¯åŠ¨ï¼Œåˆ™åœ¨å¯åŠ¨çš„æ—¶å€™æŒ‡å®šjvmçš„å†…å­˜åˆ†é…ï¼š java -Xms128m -Xmx256m -jar xxx.jar --server.port =8080 å¦‚æžœæ˜¯tomcaté¡¹ç›®å¯åŠ¨ï¼Œåˆ™åœ¨binç›®å½•ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤ï¼švim catalina.shï¼Œç„¶åŽåœ¨é¡¶éƒ¨åŠ ä¸Šï¼š JAVA_OPTS=&quot;-Xms128m -Xmx256m&quot;]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[uni-app]]></title>
    <url>%2F2020%2F02%2F18%2Funi-app%2F</url>
    <content type="text"><![CDATA[uni-appçš„åŸºæœ¬ä½¿ç”¨è¯¾ç¨‹ä»‹ç»ï¼š åŸºç¡€éƒ¨åˆ†ï¼š çŽ¯å¢ƒæ­å»º é¡µé¢å¤–è§‚é…ç½® æ•°æ®ç»‘å®š uni-appçš„ç”Ÿå‘½å‘¨æœŸ ç»„ä»¶çš„ä½¿ç”¨ uni-appä¸­æ ·å¼å­¦ä¹  åœ¨uni-appä¸­ä½¿ç”¨å­—ä½“å›¾æ ‡å’Œå¼€å¯scss æ¡ä»¶æ³¨é‡Šè·¨ç«¯å…¼å®¹ uniä¸­çš„äº‹ä»¶ å¯¼èˆªè·³è½¬ ç»„ä»¶åˆ›å»ºå’Œé€šè®¯ï¼ŒåŠç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ uni-appä¸­ä½¿ç”¨uni-uiåº“ é¡¹ç›®ï¼šé»‘é©¬å•†åŸŽé¡¹ç›® uni-appä»‹ç» å®˜æ–¹ç½‘é¡µuni-app æ˜¯ä¸€ä¸ªä½¿ç”¨ Vue.js å¼€å‘æ‰€æœ‰å‰ç«¯åº”ç”¨çš„æ¡†æž¶ï¼Œå¼€å‘è€…ç¼–å†™ä¸€å¥—ä»£ç ï¼Œå¯å‘å¸ƒåˆ°iOSã€Androidã€H5ã€ä»¥åŠå„ç§å°ç¨‹åºï¼ˆå¾®ä¿¡/æ”¯ä»˜å®/ç™¾åº¦/å¤´æ¡/QQ/é’‰é’‰ï¼‰ç­‰å¤šä¸ªå¹³å°ã€‚ å³ä½¿ä¸è·¨ç«¯ï¼Œuni-appåŒæ—¶ä¹Ÿæ˜¯æ›´å¥½çš„å°ç¨‹åºå¼€å‘æ¡†æž¶ã€‚ å…·æœ‰vueå’Œå¾®ä¿¡å°ç¨‹åºçš„å¼€å‘ç»éªŒï¼Œå¯å¿«é€Ÿä¸Šæ‰‹uni-app ä¸ºä»€ä¹ˆè¦åŽ»å­¦ä¹ uni-appï¼Ÿ ç›¸å¯¹å¼€å‘è€…æ¥è¯´ï¼Œå‡å°‘äº†å­¦ä¹ æˆæœ¬ï¼Œå› ä¸ºåªå­¦ä¼šuni-appä¹‹åŽï¼Œå³å¯å¼€å‘å‡ºiOSã€Androidã€H5ã€ä»¥åŠå„ç§å°ç¨‹åºçš„åº”ç”¨ï¼Œä¸éœ€è¦å†åŽ»å­¦ä¹ å¼€å‘å…¶ä»–åº”ç”¨çš„æ¡†æž¶ï¼Œç›¸å¯¹å…¬å¸è€Œè¨€ï¼Œä¹Ÿå¤§å¤§å‡å°‘äº†å¼€å‘æˆæœ¬ã€‚ çŽ¯å¢ƒæ­å»ºå®‰è£…ç¼–è¾‘å™¨HbuilderX ä¸‹è½½åœ°å€ HBuilderXæ˜¯é€šç”¨çš„å‰ç«¯å¼€å‘å·¥å…·ï¼Œä½†ä¸ºuni-appåšäº†ç‰¹åˆ«å¼ºåŒ–ã€‚ ä¸‹è½½Appå¼€å‘ç‰ˆï¼Œå¯å¼€ç®±å³ç”¨ å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…· ä¸‹è½½åœ°å€ åˆ©ç”¨HbuilderXåˆå§‹åŒ–é¡¹ç›® ç‚¹å‡»HbuilderXèœå•æ æ–‡ä»¶&gt;é¡¹ç›®&gt;æ–°å»º é€‰æ‹©uni-app,å¡«å†™é¡¹ç›®åç§°ï¼Œé¡¹ç›®åˆ›å»ºçš„ç›®å½• è¿è¡Œé¡¹ç›®åœ¨èœå•æ ä¸­ç‚¹å‡»è¿è¡Œï¼Œè¿è¡Œåˆ°æµè§ˆå™¨ï¼Œé€‰æ‹©æµè§ˆå™¨å³å¯è¿è¡Œ åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·é‡Œè¿è¡Œï¼šè¿›å…¥hello-uniappé¡¹ç›®ï¼Œç‚¹å‡»å·¥å…·æ çš„è¿è¡Œ -&gt; è¿è¡Œåˆ°å°ç¨‹åºæ¨¡æ‹Ÿå™¨ -&gt; å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œå³å¯åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·é‡Œé¢ä½“éªŒuni-app åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·é‡Œè¿è¡Œï¼šè¿›å…¥hello-uniappé¡¹ç›®ï¼Œç‚¹å‡»å·¥å…·æ çš„è¿è¡Œ -&gt; è¿è¡Œåˆ°æ‰‹æœºæˆ–æ¨¡æ‹Ÿå™¨ -&gt; é€‰æ‹©è°ƒå¼çš„æ‰‹æœº æ³¨æ„ï¼š å¦‚æžœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œéœ€è¦å…ˆé…ç½®å°ç¨‹åºideçš„ç›¸å…³è·¯å¾„ï¼Œæ‰èƒ½è¿è¡ŒæˆåŠŸ å¾®ä¿¡å¼€å‘è€…å·¥å…·åœ¨è®¾ç½®ä¸­å®‰å…¨è®¾ç½®ï¼ŒæœåŠ¡ç«¯å£å¼€å¯ ä»‹ç»é¡¹ç›®ç›®å½•å’Œæ–‡ä»¶ä½œç”¨pages.json æ–‡ä»¶ç”¨æ¥å¯¹ uni-app è¿›è¡Œå…¨å±€é…ç½®ï¼Œå†³å®šé¡µé¢æ–‡ä»¶çš„è·¯å¾„ã€çª—å£æ ·å¼ã€åŽŸç”Ÿçš„å¯¼èˆªæ ã€åº•éƒ¨çš„åŽŸç”Ÿtabbar ç­‰ manifest.json æ–‡ä»¶æ˜¯åº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºŽæŒ‡å®šåº”ç”¨çš„åç§°ã€å›¾æ ‡ã€æƒé™ç­‰ã€‚ App.vueæ˜¯æˆ‘ä»¬çš„è·Ÿç»„ä»¶ï¼Œæ‰€æœ‰é¡µé¢éƒ½æ˜¯åœ¨App.vueä¸‹è¿›è¡Œåˆ‡æ¢çš„ï¼Œæ˜¯é¡µé¢å…¥å£æ–‡ä»¶ï¼Œå¯ä»¥è°ƒç”¨åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚ main.jsæ˜¯æˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶ï¼Œä¸»è¦ä½œç”¨æ˜¯åˆå§‹åŒ–vueå®žä¾‹å¹¶ä½¿ç”¨éœ€è¦çš„æ’ä»¶ã€‚ uni.scssæ–‡ä»¶çš„ç”¨é€”æ˜¯ä¸ºäº†æ–¹ä¾¿æ•´ä½“æŽ§åˆ¶åº”ç”¨çš„é£Žæ ¼ã€‚æ¯”å¦‚æŒ‰é’®é¢œè‰²ã€è¾¹æ¡†é£Žæ ¼ï¼Œuni.scssæ–‡ä»¶é‡Œé¢„ç½®äº†ä¸€æ‰¹scsså˜é‡é¢„ç½®ã€‚ å°±æ˜¯æ‰“åŒ…ç›®å½•ï¼Œåœ¨è¿™é‡Œæœ‰å„ä¸ªå¹³å°çš„æ‰“åŒ…æ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647```pages``` æ‰€æœ‰çš„é¡µé¢å­˜æ”¾ç›®å½•```static``` é™æ€èµ„æºç›®å½•ï¼Œä¾‹å¦‚å›¾ç‰‡ç­‰```components``` ç»„ä»¶å­˜æ”¾ç›®å½•ä¸ºäº†å®žçŽ°å¤šç«¯å…¼å®¹ï¼Œç»¼åˆè€ƒè™‘ç¼–è¯‘é€Ÿåº¦ã€è¿è¡Œæ€§èƒ½ç­‰å› ç´ ï¼Œ`uni-app` çº¦å®šäº†å¦‚ä¸‹å¼€å‘è§„èŒƒï¼š- é¡µé¢æ–‡ä»¶éµå¾ª [Vue å•æ–‡ä»¶ç»„ä»¶ (SFC) è§„èŒƒ](https://vue-loader.vuejs.org/zh/spec.html)- ç»„ä»¶æ ‡ç­¾é è¿‘å°ç¨‹åºè§„èŒƒï¼Œè¯¦è§[uni-app ç»„ä»¶è§„èŒƒ](https://uniapp.dcloud.io/component/README)- æŽ¥å£èƒ½åŠ›ï¼ˆJS APIï¼‰é è¿‘å¾®ä¿¡å°ç¨‹åºè§„èŒƒï¼Œä½†éœ€å°†å‰ç¼€ `wx` æ›¿æ¢ä¸º `uni`ï¼Œè¯¦è§[uni-appæŽ¥å£è§„èŒƒ](https://uniapp.dcloud.io/api/README)- æ•°æ®ç»‘å®šåŠäº‹ä»¶å¤„ç†åŒ `Vue.js` è§„èŒƒï¼ŒåŒæ—¶è¡¥å……äº†AppåŠé¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ- ä¸ºå…¼å®¹å¤šç«¯è¿è¡Œï¼Œå»ºè®®ä½¿ç”¨flexå¸ƒå±€è¿›è¡Œå¼€å‘#### å…¨å±€é…ç½®å’Œé¡µé¢é…ç½®##### é€šè¿‡globalStyleè¿›è¡Œå…¨å±€é…ç½®ç”¨äºŽè®¾ç½®åº”ç”¨çš„çŠ¶æ€æ ã€å¯¼èˆªæ¡ã€æ ‡é¢˜ã€çª—å£èƒŒæ™¯è‰²ç­‰ã€‚[è¯¦ç»†æ–‡æ¡£](https://uniapp.dcloud.io/collocation/pages?id=globalstyle)| å±žæ€§ | ç±»åž‹ | é»˜è®¤å€¼ | æè¿° || ---------------------------- | -------- | ------- | ---------------------------------------- || navigationBarBackgroundColor | HexColor | #F7F7F7 | å¯¼èˆªæ èƒŒæ™¯é¢œè‰²ï¼ˆåŒçŠ¶æ€æ èƒŒæ™¯è‰²ï¼‰ || navigationBarTextStyle | String | white | å¯¼èˆªæ æ ‡é¢˜é¢œè‰²åŠçŠ¶æ€æ å‰æ™¯é¢œè‰²ï¼Œä»…æ”¯æŒ black/white || navigationBarTitleText | String | | å¯¼èˆªæ æ ‡é¢˜æ–‡å­—å†…å®¹ || backgroundColor | HexColor | #ffffff | çª—å£çš„èƒŒæ™¯è‰² || backgroundTextStyle | String | dark | ä¸‹æ‹‰ loading çš„æ ·å¼ï¼Œä»…æ”¯æŒ dark / light || enablePullDownRefresh | Boolean | false | æ˜¯å¦å¼€å¯ä¸‹æ‹‰åˆ·æ–°ï¼Œè¯¦è§[é¡µé¢ç”Ÿå‘½å‘¨æœŸ](https://uniapp.dcloud.io/use?id=%e9%a1%b5%e9%9d%a2%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f)ã€‚ || onReachBottomDistance | Number | 50 | é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶è§¦å‘æ—¶è·é¡µé¢åº•éƒ¨è·ç¦»ï¼Œå•ä½åªæ”¯æŒpxï¼Œè¯¦è§[é¡µé¢ç”Ÿå‘½å‘¨æœŸ](https://uniapp.dcloud.io/use?id=%e9%a1%b5%e9%9d%a2%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f) |##### åˆ›å»ºæ–°çš„messageé¡µé¢å³é”®pagesæ–°å»ºmessageç›®å½•ï¼Œåœ¨messageç›®å½•ä¸‹å³é”®æ–°å»º.vueæ–‡ä»¶,å¹¶é€‰æ‹©åŸºæœ¬æ¨¡æ¿```html&lt;template&gt; &lt;view&gt; è¿™æ˜¯ä¿¡æ¯é¡µé¢ &lt;/view&gt;&lt;/template&gt;&lt;script&gt;&lt;/script&gt;&lt;style&gt;&lt;/style&gt; é€šè¿‡pagesæ¥é…ç½®é¡µé¢ å±žæ€§ ç±»åž‹ é»˜è®¤å€¼ æè¿° path String é…ç½®é¡µé¢è·¯å¾„ style Object é…ç½®é¡µé¢çª—å£è¡¨çŽ°ï¼Œé…ç½®é¡¹å‚è€ƒ pageStyle pagesæ•°ç»„æ•°ç»„ä¸­ç¬¬ä¸€é¡¹è¡¨ç¤ºåº”ç”¨å¯åŠ¨é¡µ 1234567891011"pages": [ ã€ &#123; "path":"pages/message/message" &#125;, &#123; "path": "pages/index/index", "style": &#123; "navigationBarTitleText": "uni-app" &#125; &#125; ] é€šè¿‡styleä¿®æ”¹é¡µé¢çš„æ ‡é¢˜å’Œå¯¼èˆªæ èƒŒæ™¯è‰²ï¼Œå¹¶ä¸”è®¾ç½®h5ä¸‹æ‹‰åˆ·æ–°çš„ç‰¹æœ‰æ ·å¼ 12345678910111213141516"pages": [ //pagesæ•°ç»„ä¸­ç¬¬ä¸€é¡¹è¡¨ç¤ºåº”ç”¨å¯åŠ¨é¡µï¼Œå‚è€ƒï¼šhttps://uniapp.dcloud.io/collocation/pages &#123; "path":"pages/message/message", "style": &#123; "navigationBarBackgroundColor": "#007AFF", "navigationBarTextStyle": "white", "enablePullDownRefresh": true, "disableScroll": true, "h5": &#123; "pullToRefresh": &#123; "color": "#007AFF" &#125; &#125; &#125; &#125; ] é…ç½®tabbarå¦‚æžœåº”ç”¨æ˜¯ä¸€ä¸ªå¤š tab åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡ tabBar é…ç½®é¡¹æŒ‡å®š tab æ çš„è¡¨çŽ°ï¼Œä»¥åŠ tab åˆ‡æ¢æ—¶æ˜¾ç¤ºçš„å¯¹åº”é¡µã€‚ Tips å½“è®¾ç½® position ä¸º top æ—¶ï¼Œå°†ä¸ä¼šæ˜¾ç¤º icon tabBar ä¸­çš„ list æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåªèƒ½é…ç½®æœ€å°‘2ä¸ªã€æœ€å¤š5ä¸ª tabï¼Œtab æŒ‰æ•°ç»„çš„é¡ºåºæŽ’åºã€‚ å±žæ€§è¯´æ˜Žï¼š å±žæ€§ ç±»åž‹ å¿…å¡« é»˜è®¤å€¼ æè¿° å¹³å°å·®å¼‚è¯´æ˜Ž color HexColor æ˜¯ tab ä¸Šçš„æ–‡å­—é»˜è®¤é¢œè‰² selectedColor HexColor æ˜¯ tab ä¸Šçš„æ–‡å­—é€‰ä¸­æ—¶çš„é¢œè‰² backgroundColor HexColor æ˜¯ tab çš„èƒŒæ™¯è‰² borderStyle String å¦ black tabbar ä¸Šè¾¹æ¡†çš„é¢œè‰²ï¼Œä»…æ”¯æŒ black/white App 2.3.4+ æ”¯æŒå…¶ä»–é¢œè‰²å€¼ list Array æ˜¯ tab çš„åˆ—è¡¨ï¼Œè¯¦è§ list å±žæ€§è¯´æ˜Žï¼Œæœ€å°‘2ä¸ªã€æœ€å¤š5ä¸ª tab position String å¦ bottom å¯é€‰å€¼ bottomã€top top å€¼ä»…å¾®ä¿¡å°ç¨‹åºæ”¯æŒ å…¶ä¸­ list æŽ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±žæ€§å€¼å¦‚ä¸‹ï¼š å±žæ€§ ç±»åž‹ å¿…å¡« è¯´æ˜Ž pagePath String æ˜¯ é¡µé¢è·¯å¾„ï¼Œå¿…é¡»åœ¨ pages ä¸­å…ˆå®šä¹‰ text String æ˜¯ tab ä¸ŠæŒ‰é’®æ–‡å­—ï¼Œåœ¨ 5+APP å’Œ H5 å¹³å°ä¸ºéžå¿…å¡«ã€‚ä¾‹å¦‚ä¸­é—´å¯æ”¾ä¸€ä¸ªæ²¡æœ‰æ–‡å­—çš„+å·å›¾æ ‡ iconPath String å¦ å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º40kbï¼Œå»ºè®®å°ºå¯¸ä¸º 81px * 81pxï¼Œå½“ postion ä¸º top æ—¶ï¼Œæ­¤å‚æ•°æ— æ•ˆï¼Œä¸æ”¯æŒç½‘ç»œå›¾ç‰‡ï¼Œä¸æ”¯æŒå­—ä½“å›¾æ ‡ selectedIconPath String å¦ é€‰ä¸­æ—¶çš„å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º40kbï¼Œå»ºè®®å°ºå¯¸ä¸º 81px * 81px ï¼Œå½“ postion ä¸º top æ—¶ï¼Œæ­¤å‚æ•°æ— æ•ˆ æ¡ˆä¾‹ä»£ç ï¼š 12345678910111213141516171819202122"tabBar": &#123; "list": [ &#123; "text": "é¦–é¡µ", "pagePath":"pages/index/index", "iconPath":"static/tabs/home.png", "selectedIconPath":"static/tabs/home-active.png" &#125;, &#123; "text": "ä¿¡æ¯", "pagePath":"pages/message/message", "iconPath":"static/tabs/message.png", "selectedIconPath":"static/tabs/message-active.png" &#125;, &#123; "text": "æˆ‘ä»¬", "pagePath":"pages/contact/contact", "iconPath":"static/tabs/contact.png", "selectedIconPath":"static/tabs/contact-active.png" &#125; ] &#125; conditionå¯åŠ¨æ¨¡å¼é…ç½®å¯åŠ¨æ¨¡å¼é…ç½®ï¼Œä»…å¼€å‘æœŸé—´ç”Ÿæ•ˆï¼Œç”¨äºŽæ¨¡æ‹Ÿç›´è¾¾é¡µé¢çš„åœºæ™¯ï¼Œå¦‚ï¼šå°ç¨‹åºè½¬å‘åŽï¼Œç”¨æˆ·ç‚¹å‡»æ‰€æ‰“å¼€çš„é¡µé¢ã€‚ å±žæ€§è¯´æ˜Žï¼š å±žæ€§ ç±»åž‹ æ˜¯å¦å¿…å¡« æè¿° current Number æ˜¯ å½“å‰æ¿€æ´»çš„æ¨¡å¼ï¼ŒlistèŠ‚ç‚¹çš„ç´¢å¼•å€¼ list Array æ˜¯ å¯åŠ¨æ¨¡å¼åˆ—è¡¨ listè¯´æ˜Žï¼š å±žæ€§ ç±»åž‹ æ˜¯å¦å¿…å¡« æè¿° name String æ˜¯ å¯åŠ¨æ¨¡å¼åç§° path String æ˜¯ å¯åŠ¨é¡µé¢è·¯å¾„ query String å¦ å¯åŠ¨å‚æ•°ï¼Œå¯åœ¨é¡µé¢çš„ onLoad å‡½æ•°é‡ŒèŽ·å¾— ç»„ä»¶çš„åŸºæœ¬ä½¿ç”¨uni-appæä¾›äº†ä¸°å¯Œçš„åŸºç¡€ç»„ä»¶ç»™å¼€å‘è€…ï¼Œå¼€å‘è€…å¯ä»¥åƒæ­ç§¯æœ¨ä¸€æ ·ï¼Œç»„åˆå„ç§ç»„ä»¶æ‹¼æŽ¥ç§°è‡ªå·±çš„åº”ç”¨ uni-appä¸­çš„ç»„ä»¶ï¼Œå°±åƒ HTML ä¸­çš„ div ã€pã€span ç­‰æ ‡ç­¾çš„ä½œç”¨ä¸€æ ·ï¼Œç”¨äºŽæ­å»ºé¡µé¢çš„åŸºç¡€ç»“æž„ textæ–‡æœ¬ç»„ä»¶çš„ç”¨æ³•001 - text ç»„ä»¶çš„å±žæ€§ å±žæ€§ ç±»åž‹ é»˜è®¤å€¼ å¿…å¡« è¯´æ˜Ž selectable boolean false å¦ æ–‡æœ¬æ˜¯å¦å¯é€‰ space string . å¦ æ˜¾ç¤ºè¿žç»­ç©ºæ ¼ï¼Œå¯é€‰å‚æ•°ï¼šenspã€emspã€nbsp decode boolean false å¦ æ˜¯å¦è§£ç  text ç»„ä»¶ç›¸å½“äºŽè¡Œå†…æ ‡ç­¾ã€åœ¨åŒä¸€è¡Œæ˜¾ç¤º é™¤äº†æ–‡æœ¬èŠ‚ç‚¹ä»¥å¤–çš„å…¶ä»–èŠ‚ç‚¹éƒ½æ— æ³•é•¿æŒ‰é€‰ä¸­ 002 - ä»£ç æ¡ˆä¾‹1234567891011121314151617181920212223242526&lt;view&gt; &lt;!-- é•¿æŒ‰æ–‡æœ¬æ˜¯å¦å¯é€‰ --&gt; &lt;text selectable='true'&gt;æ¥äº†è€å¼Ÿ&lt;/text&gt;&lt;/view&gt;&lt;view&gt; &lt;!-- æ˜¾ç¤ºè¿žç»­ç©ºæ ¼çš„æ–¹å¼ --&gt; &lt;view&gt; &lt;text space='ensp'&gt;æ¥äº† è€å¼Ÿ&lt;/text&gt; &lt;/view&gt; &lt;view&gt; &lt;text space='emsp'&gt;æ¥äº† è€å¼Ÿ&lt;/text&gt; &lt;/view&gt; &lt;view&gt; &lt;text space='nbsp'&gt;æ¥äº† è€å¼Ÿ&lt;/text&gt; &lt;/view&gt;&lt;/view&gt;&lt;view&gt; &lt;text&gt;skyblue&lt;/text&gt;&lt;/view&gt;&lt;view&gt; &lt;!-- æ˜¯å¦è§£ç  --&gt; &lt;text decode='true'&gt;&amp;nbsp; &amp;lt; &amp;gt; &amp;amp; &amp;apos; &amp;ensp; &amp;emsp;&lt;/text&gt;&lt;/view&gt; viewè§†å›¾å®¹å™¨ç»„ä»¶çš„ç”¨æ³• View è§†å›¾å®¹å™¨ï¼Œ ç±»ä¼¼äºŽ HTML ä¸­çš„ div 001 - ç»„ä»¶çš„å±žæ€§ 002 - ä»£ç æ¡ˆä¾‹12345&lt;view class="box2" hover-class="box2_active"&gt; &lt;view class='box1' hover-class='active' hover-stop-propagation :hover-start-time="2000" :hover-stay-time='2000'&gt; &lt;/view&gt;&lt;/view&gt; buttonæŒ‰é’®ç»„ä»¶çš„ç”¨æ³•001 - ç»„ä»¶çš„å±žæ€§ å±žæ€§å ç±»åž‹ é»˜è®¤å€¼ è¯´æ˜Ž size String default æŒ‰é’®çš„å¤§å° type String default æŒ‰é’®çš„æ ·å¼ç±»åž‹ plain Boolean false æŒ‰é’®æ˜¯å¦é•‚ç©ºï¼ŒèƒŒæ™¯è‰²é€æ˜Ž disabled Boolean false æ˜¯å¦æŒ‰é’® loading Boolean false åç§°æ˜¯å¦å¸¦ loading tå›¾æ ‡ button ç»„ä»¶é»˜è®¤ç‹¬å ä¸€è¡Œï¼Œè®¾ç½® size ä¸º mini æ—¶å¯ä»¥åœ¨ä¸€è¡Œæ˜¾ç¤ºå¤šä¸ª 002 - æ¡ˆä¾‹ä»£ç 12345&lt;button size='mini' type='primary'&gt;å‰ç«¯&lt;/button&gt;&lt;button size='mini' type='default' disabled='true'&gt;å‰ç«¯&lt;/button&gt;&lt;button size='mini' type='warn' loading='true'&gt;å‰ç«¯&lt;/button&gt; imageç»„ä»¶çš„ä½¿ç”¨imageå›¾ç‰‡ã€‚ å±žæ€§å ç±»åž‹ é»˜è®¤å€¼ è¯´æ˜Ž å¹³å°å·®å¼‚è¯´æ˜Ž src String å›¾ç‰‡èµ„æºåœ°å€ mode String â€˜scaleToFillâ€™ å›¾ç‰‡è£å‰ªã€ç¼©æ”¾çš„æ¨¡å¼ Tips &lt;image&gt; ç»„ä»¶é»˜è®¤å®½åº¦ 300pxã€é«˜åº¦ 225pxï¼› src ä»…æ”¯æŒç›¸å¯¹è·¯å¾„ã€ç»å¯¹è·¯å¾„ï¼Œæ”¯æŒ base64 ç ï¼› é¡µé¢ç»“æž„å¤æ‚ï¼Œcssæ ·å¼å¤ªå¤šçš„æƒ…å†µï¼Œä½¿ç”¨ image å¯èƒ½å¯¼è‡´æ ·å¼ç”Ÿæ•ˆè¾ƒæ…¢ï¼Œå‡ºçŽ° â€œé—ªä¸€ä¸‹â€ çš„æƒ…å†µï¼Œæ­¤æ—¶è®¾ç½® image{will-change: transform} ,å¯ä¼˜åŒ–æ­¤é—®é¢˜ã€‚ uni-appä¸­çš„æ ·å¼ rpx å³å“åº”å¼pxï¼Œä¸€ç§æ ¹æ®å±å¹•å®½åº¦è‡ªé€‚åº”çš„åŠ¨æ€å•ä½ã€‚ä»¥750å®½çš„å±å¹•ä¸ºåŸºå‡†ï¼Œ750rpxæ°å¥½ä¸ºå±å¹•å®½åº¦ã€‚å±å¹•å˜å®½ï¼Œrpx å®žé™…æ˜¾ç¤ºæ•ˆæžœä¼šç­‰æ¯”æ”¾å¤§ã€‚ ä½¿ç”¨@importè¯­å¥å¯ä»¥å¯¼å…¥å¤–è”æ ·å¼è¡¨ï¼Œ@importåŽè·Ÿéœ€è¦å¯¼å…¥çš„å¤–è”æ ·å¼è¡¨çš„ç›¸å¯¹è·¯å¾„ï¼Œç”¨;è¡¨ç¤ºè¯­å¥ç»“æŸ æ”¯æŒåŸºæœ¬å¸¸ç”¨çš„é€‰æ‹©å™¨classã€idã€elementç­‰ åœ¨ uni-app ä¸­ä¸èƒ½ä½¿ç”¨ * é€‰æ‹©å™¨ã€‚ page ç›¸å½“äºŽ body èŠ‚ç‚¹ å®šä¹‰åœ¨ App.vue ä¸­çš„æ ·å¼ä¸ºå…¨å±€æ ·å¼ï¼Œä½œç”¨äºŽæ¯ä¸€ä¸ªé¡µé¢ã€‚åœ¨ pages ç›®å½•ä¸‹ çš„ vue æ–‡ä»¶ä¸­å®šä¹‰çš„æ ·å¼ä¸ºå±€éƒ¨æ ·å¼ï¼Œåªä½œç”¨åœ¨å¯¹åº”çš„é¡µé¢ï¼Œå¹¶ä¼šè¦†ç›– App.vue ä¸­ç›¸åŒçš„é€‰æ‹©å™¨ã€‚ uni-app æ”¯æŒä½¿ç”¨å­—ä½“å›¾æ ‡ï¼Œä½¿ç”¨æ–¹å¼ä¸Žæ™®é€š web é¡¹ç›®ç›¸åŒï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š å­—ä½“æ–‡ä»¶å°äºŽ 40kbï¼Œuni-app ä¼šè‡ªåŠ¨å°†å…¶è½¬åŒ–ä¸º base64 æ ¼å¼ï¼› å­—ä½“æ–‡ä»¶å¤§äºŽç­‰äºŽ 40kbï¼Œ éœ€å¼€å‘è€…è‡ªå·±è½¬æ¢ï¼Œå¦åˆ™ä½¿ç”¨å°†ä¸ç”Ÿæ•ˆï¼› å­—ä½“æ–‡ä»¶çš„å¼•ç”¨è·¯å¾„æŽ¨èä½¿ç”¨ä»¥ ~@ å¼€å¤´çš„ç»å¯¹è·¯å¾„ã€‚ 1234@font-face &#123; font-family: test1-icon; src: url(&apos;~@/static/iconfont.ttf&apos;);&#125; å¦‚ä½•ä½¿ç”¨scssæˆ–è€…less uni-appä¸­çš„æ•°æ®ç»‘å®šåœ¨é¡µé¢ä¸­éœ€è¦å®šä¹‰æ•°æ®ï¼Œå’Œæˆ‘ä»¬ä¹‹å‰çš„vueä¸€æ‘¸ä¸€æ ·ï¼Œç›´æŽ¥åœ¨dataä¸­å®šä¹‰æ•°æ®å³å¯ 1234567export default &#123; data () &#123; return &#123; msg: 'hello-uni' &#125; &#125;&#125; æ’å€¼è¡¨è¾¾å¼çš„ä½¿ç”¨ åˆ©ç”¨æ’å€¼è¡¨è¾¾å¼æ¸²æŸ“åŸºæœ¬æ•°æ® 1&lt;view&gt;&#123;&#123;msg&#125;&#125;&lt;/view&gt; åœ¨æ’å€¼è¡¨è¾¾å¼ä¸­ä½¿ç”¨ä¸‰å…ƒè¿ç®— 1&lt;view&gt;&#123;&#123; flag ? 'æˆ‘æ˜¯çœŸçš„':'æˆ‘æ˜¯å‡çš„' &#125;&#125;&lt;/view&gt; åŸºæœ¬è¿ç®— 1&lt;view&gt;&#123;&#123;1+1&#125;&#125;&lt;/view&gt; v-bindåŠ¨æ€ç»‘å®šå±žæ€§åœ¨dataä¸­å®šä¹‰äº†ä¸€å¼ å›¾ç‰‡ï¼Œæˆ‘ä»¬å¸Œæœ›æŠŠè¿™å¼ å›¾ç‰‡æ¸²æŸ“åˆ°é¡µé¢ä¸Š 1234567export default &#123; data () &#123; return &#123; img: 'http://destiny001.gitee.io/image/monkey_02.jpg' &#125; &#125;&#125; åˆ©ç”¨v-bindè¿›è¡Œæ¸²æŸ“ 1&lt;image v-bind:src="img"&gt;&lt;/image&gt; è¿˜å¯ä»¥ç¼©å†™æˆ: 1&lt;image :src="img"&gt;&lt;/image&gt; v-forçš„ä½¿ç”¨dataä¸­å®šä»¥ä¸€ä¸ªæ•°ç»„ï¼Œæœ€ç»ˆå°†æ•°ç»„æ¸²æŸ“åˆ°é¡µé¢ä¸Š 12345678910data () &#123; return &#123; arr: [ &#123; name: 'åˆ˜èƒ½', age: 29 &#125;, &#123; name: 'èµµå››', age: 39 &#125;, &#123; name: 'å®‹å°å®', age: 49 &#125;, &#123; name: 'å°æ²ˆé˜³', age: 59 &#125; ] &#125;&#125; åˆ©ç”¨v-forè¿›è¡Œå¾ªçŽ¯ 1&lt;view v-for="(item,i) in arr" :key="i"&gt;åå­—ï¼š&#123;&#123;item.name&#125;&#125;---å¹´é¾„ï¼š&#123;&#123;item.age&#125;&#125;&lt;/view&gt; uniä¸­çš„äº‹ä»¶äº‹ä»¶ç»‘å®šåœ¨uniä¸­äº‹ä»¶ç»‘å®šå’Œvueä¸­æ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡v-onè¿›è¡Œäº‹ä»¶çš„ç»‘å®šï¼Œä¹Ÿå¯ä»¥ç®€å†™ä¸º@ 1&lt;button @click="tapHandle"&gt;ç‚¹æˆ‘å•Š&lt;/button&gt; äº‹ä»¶å‡½æ•°å®šä¹‰åœ¨methodsä¸­ 12345methods: &#123; tapHandle () &#123; console.log('çœŸçš„ç‚¹æˆ‘äº†') &#125;&#125; äº‹ä»¶ä¼ å‚ é»˜è®¤å¦‚æžœæ²¡æœ‰ä¼ é€’å‚æ•°ï¼Œäº‹ä»¶å‡½æ•°ç¬¬ä¸€ä¸ªå½¢å‚ä¸ºäº‹ä»¶å¯¹è±¡ 12345678// template&lt;button @click=&quot;tapHandle&quot;&gt;ç‚¹æˆ‘å•Š&lt;/button&gt;// scriptmethods: &#123; tapHandle (e) &#123; console.log(e) &#125;&#125; å¦‚æžœç»™äº‹ä»¶å‡½æ•°ä¼ é€’å‚æ•°äº†ï¼Œåˆ™å¯¹åº”çš„äº‹ä»¶å‡½æ•°å½¢å‚æŽ¥æ”¶çš„åˆ™æ˜¯ä¼ é€’è¿‡æ¥çš„æ•°æ® 12345678// template&lt;button @click=&quot;tapHandle(1)&quot;&gt;ç‚¹æˆ‘å•Š&lt;/button&gt;// scriptmethods: &#123; tapHandle (num) &#123; console.log(num) &#125;&#125; å¦‚æžœèŽ·å–äº‹ä»¶å¯¹è±¡ä¹Ÿæƒ³ä¼ é€’å‚æ•° 12345678// template&lt;button @click=&quot;tapHandle(1,$event)&quot;&gt;ç‚¹æˆ‘å•Š&lt;/button&gt;// scriptmethods: &#123; tapHandle (num,e) &#123; console.log(num,e) &#125;&#125; uniçš„ç”Ÿå‘½å‘¨æœŸåº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼šä¸€ä¸ªå¯¹è±¡ä»Žåˆ›å»ºã€è¿è¡Œã€é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹è¢«æˆä¸ºç”Ÿå‘½å‘¨æœŸã€‚ ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼šåœ¨ç”Ÿå‘½å‘¨æœŸä¸­æ¯ä¸ªé˜¶æ®µä¼šä¼´éšç€æ¯ä¸€ä¸ªå‡½æ•°çš„è§¦å‘ï¼Œè¿™äº›å‡½æ•°è¢«ç§°ä¸ºç”Ÿå‘½å‘¨æœŸå‡½æ•° uni-app æ”¯æŒå¦‚ä¸‹åº”ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š å‡½æ•°å è¯´æ˜Ž onLaunch å½“uni-app åˆå§‹åŒ–å®Œæˆæ—¶è§¦å‘ï¼ˆå…¨å±€åªè§¦å‘ä¸€æ¬¡ï¼‰ onShow å½“ uni-app å¯åŠ¨ï¼Œæˆ–ä»ŽåŽå°è¿›å…¥å‰å°æ˜¾ç¤º onHide å½“ uni-app ä»Žå‰å°è¿›å…¥åŽå° onError å½“ uni-app æŠ¥é”™æ—¶è§¦å‘ é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸuni-app æ”¯æŒå¦‚ä¸‹é¡µé¢ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š å‡½æ•°å è¯´æ˜Ž å¹³å°å·®å¼‚è¯´æ˜Ž æœ€ä½Žç‰ˆæœ¬ onLoad ç›‘å¬é¡µé¢åŠ è½½ï¼Œå…¶å‚æ•°ä¸ºä¸Šä¸ªé¡µé¢ä¼ é€’çš„æ•°æ®ï¼Œå‚æ•°ç±»åž‹ä¸ºObjectï¼ˆç”¨äºŽé¡µé¢ä¼ å‚ï¼‰ï¼Œå‚è€ƒç¤ºä¾‹ onShow ç›‘å¬é¡µé¢æ˜¾ç¤ºã€‚é¡µé¢æ¯æ¬¡å‡ºçŽ°åœ¨å±å¹•ä¸Šéƒ½è§¦å‘ï¼ŒåŒ…æ‹¬ä»Žä¸‹çº§é¡µé¢ç‚¹è¿”å›žéœ²å‡ºå½“å‰é¡µé¢ onReady ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆã€‚ onHide ç›‘å¬é¡µé¢éšè— onUnload ç›‘å¬é¡µé¢å¸è½½ ä¸‹æ‹‰åˆ·æ–°å¼€å¯ä¸‹æ‹‰åˆ·æ–°åœ¨uni-appä¸­æœ‰ä¸¤ç§æ–¹å¼å¼€å¯ä¸‹æ‹‰åˆ·æ–° éœ€è¦åœ¨ pages.json é‡Œï¼Œæ‰¾åˆ°çš„å½“å‰é¡µé¢çš„pagesèŠ‚ç‚¹ï¼Œå¹¶åœ¨ style é€‰é¡¹ä¸­å¼€å¯ enablePullDownRefresh é€šè¿‡è°ƒç”¨uni.startPullDownRefreshæ–¹æ³•æ¥å¼€å¯ä¸‹æ‹‰åˆ·æ–° é€šè¿‡é…ç½®æ–‡ä»¶å¼€å¯åˆ›å»ºlisté¡µé¢è¿›è¡Œæ¼”ç¤º 123456789101112131415161718192021&lt;template&gt; &lt;view&gt; æ­å·žå­¦ç§‘ &lt;view v-for="(item,index) in arr" :key="index"&gt; &#123;&#123;item&#125;&#125; &lt;/view&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; export default &#123; data () &#123; return &#123; arr: ['å‰ç«¯','java','ui','å¤§æ•°æ®'] &#125; &#125; &#125;&lt;/script&gt;&lt;style&gt;&lt;/style&gt; é€šè¿‡pages.jsonæ–‡ä»¶ä¸­æ‰¾åˆ°å½“å‰é¡µé¢çš„pagesèŠ‚ç‚¹ï¼Œå¹¶åœ¨ style é€‰é¡¹ä¸­å¼€å¯ enablePullDownRefresh 123456&#123; "path":"pages/list/list", "style":&#123; "enablePullDownRefresh": true &#125;&#125; é€šè¿‡APIå¼€å¯apiæ–‡æ¡£ 1uni.startPullDownRefresh() ç›‘å¬ä¸‹æ‹‰åˆ·æ–°é€šè¿‡onPullDownRefreshå¯ä»¥ç›‘å¬åˆ°ä¸‹æ‹‰åˆ·æ–°çš„åŠ¨ä½œ 123456789101112131415export default &#123; data () &#123; return &#123; arr: ['å‰ç«¯','java','ui','å¤§æ•°æ®'] &#125; &#125;, methods: &#123; startPull () &#123; uni.startPullDownRefresh() &#125; &#125;, onPullDownRefresh () &#123; console.log('è§¦å‘ä¸‹æ‹‰åˆ·æ–°äº†') &#125;&#125; å…³é—­ä¸‹æ‹‰åˆ·æ–°uni.stopPullDownRefresh() åœæ­¢å½“å‰é¡µé¢ä¸‹æ‹‰åˆ·æ–°ã€‚ æ¡ˆä¾‹æ¼”ç¤º 12345678910111213141516171819202122232425262728293031&lt;template&gt; &lt;view&gt; &lt;button type="primary" @click="startPull"&gt;å¼€å¯ä¸‹æ‹‰åˆ·æ–°&lt;/button&gt; æ­å·žå­¦ç§‘ &lt;view v-for="(item,index) in arr" :key="index"&gt; &#123;&#123;item&#125;&#125; &lt;/view&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; export default &#123; data () &#123; return &#123; arr: ['å‰ç«¯','java','ui','å¤§æ•°æ®'] &#125; &#125;, methods: &#123; startPull () &#123; uni.startPullDownRefresh() &#125; &#125;, onPullDownRefresh () &#123; this.arr = [] setTimeout(()=&gt; &#123; this.arr = ['å‰ç«¯','java','ui','å¤§æ•°æ®'] uni.stopPullDownRefresh() &#125;, 1000); &#125; &#125;&lt;/script&gt; ä¸Šæ‹‰åŠ è½½é€šè¿‡åœ¨pages.jsonæ–‡ä»¶ä¸­æ‰¾åˆ°å½“å‰é¡µé¢çš„pagesèŠ‚ç‚¹ä¸‹styleä¸­é…ç½®onReachBottomDistanceå¯ä»¥è®¾ç½®è·ç¦»åº•éƒ¨å¼€å¯åŠ è½½çš„è·ç¦»ï¼Œé»˜è®¤ä¸º50px é€šè¿‡onReachBottomç›‘å¬åˆ°è§¦åº•çš„è¡Œä¸º 12345678910111213141516171819202122232425262728&lt;template&gt; &lt;view&gt; &lt;button type="primary" @click="startPull"&gt;å¼€å¯ä¸‹æ‹‰åˆ·æ–°&lt;/button&gt; æ­å·žå­¦ç§‘ &lt;view v-for="(item,index) in arr" :key="index"&gt; &#123;&#123;item&#125;&#125; &lt;/view&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; export default &#123; data () &#123; return &#123; arr: ['å‰ç«¯','java','ui','å¤§æ•°æ®','å‰ç«¯','java','ui','å¤§æ•°æ®'] &#125; &#125;, onReachBottom () &#123; console.log('è§¦åº•äº†') &#125; &#125;&lt;/script&gt;&lt;style&gt; view&#123; height: 100px; line-height: 100px; &#125;&lt;/style&gt; ç½‘ç»œè¯·æ±‚åœ¨uniä¸­å¯ä»¥è°ƒç”¨uni.requestæ–¹æ³•è¿›è¡Œè¯·æ±‚ç½‘ç»œè¯·æ±‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨å°ç¨‹åºä¸­ç½‘ç»œç›¸å…³çš„ API åœ¨ä½¿ç”¨å‰éœ€è¦é…ç½®åŸŸåç™½åå•ã€‚ å‘é€getè¯·æ±‚ 12345678910111213141516171819&lt;template&gt; &lt;view&gt; &lt;button @click="sendGet"&gt;å‘é€è¯·æ±‚&lt;/button&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; export default &#123; methods: &#123; sendGet () &#123; uni.request(&#123; url: 'http://localhost:8082/api/getlunbo', success(res) &#123; console.log(res) &#125; &#125;) &#125; &#125; &#125;&lt;/script&gt; å‘é€postè¯·æ±‚ æ•°æ®ç¼“å­˜uni.setStorageå®˜æ–¹æ–‡æ¡£ å°†æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ç¼“å­˜ä¸­æŒ‡å®šçš„ key ä¸­ï¼Œä¼šè¦†ç›–æŽ‰åŽŸæ¥è¯¥ key å¯¹åº”çš„å†…å®¹ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æŽ¥å£ã€‚ ä»£ç æ¼”ç¤º 123456789101112131415161718192021222324&lt;template&gt; &lt;view&gt; &lt;button type="primary" @click="setStor"&gt;å­˜å‚¨æ•°æ®&lt;/button&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; export default &#123; methods: &#123; setStor () &#123; uni.setStorage(&#123; key: 'id', data: 100, success () &#123; console.log('å­˜å‚¨æˆåŠŸ') &#125; &#125;) &#125; &#125; &#125;&lt;/script&gt;&lt;style&gt;&lt;/style&gt; uni.setStorageSyncå°† data å­˜å‚¨åœ¨æœ¬åœ°ç¼“å­˜ä¸­æŒ‡å®šçš„ key ä¸­ï¼Œä¼šè¦†ç›–æŽ‰åŽŸæ¥è¯¥ key å¯¹åº”çš„å†…å®¹ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒæ­¥æŽ¥å£ã€‚ ä»£ç æ¼”ç¤º 123456789101112131415161718&lt;template&gt; &lt;view&gt; &lt;button type="primary" @click="setStor"&gt;å­˜å‚¨æ•°æ®&lt;/button&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; export default &#123; methods: &#123; setStor () &#123; uni.setStorageSync('id',100) &#125; &#125; &#125;&lt;/script&gt;&lt;style&gt;&lt;/style&gt; uni.getStorageä»Žæœ¬åœ°ç¼“å­˜ä¸­å¼‚æ­¥èŽ·å–æŒ‡å®š key å¯¹åº”çš„å†…å®¹ã€‚ ä»£ç æ¼”ç¤º 123456789101112131415161718192021222324&lt;template&gt; &lt;view&gt; &lt;button type="primary" @click="getStorage"&gt;èŽ·å–æ•°æ®&lt;/button&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; export default &#123; data () &#123; return &#123; id: '' &#125; &#125;, methods: &#123; getStorage () &#123; uni.getStorage(&#123; key: 'id', success: res=&gt;&#123; this.id = res.data &#125; &#125;) &#125; &#125; &#125;&lt;/script&gt; uni.getStorageSyncä»Žæœ¬åœ°ç¼“å­˜ä¸­åŒæ­¥èŽ·å–æŒ‡å®š key å¯¹åº”çš„å†…å®¹ã€‚ ä»£ç æ¼”ç¤º 123456789101112131415&lt;template&gt; &lt;view&gt; &lt;button type="primary" @click="getStorage"&gt;èŽ·å–æ•°æ®&lt;/button&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; export default &#123; methods: &#123; getStorage () &#123; const id = uni.getStorageSync('id') console.log(id) &#125; &#125; &#125;&lt;/script&gt; uni.removeStorageä»Žæœ¬åœ°ç¼“å­˜ä¸­å¼‚æ­¥ç§»é™¤æŒ‡å®š keyã€‚ ä»£ç æ¼”ç¤º 12345678910111213141516171819&lt;template&gt; &lt;view&gt; &lt;button type="primary" @click="removeStorage"&gt;åˆ é™¤æ•°æ®&lt;/button&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; export default &#123; methods: &#123; removeStorage () &#123; uni.removeStorage(&#123; key: 'id', success: function () &#123; console.log('åˆ é™¤æˆåŠŸ') &#125; &#125;) &#125; &#125; &#125;&lt;/script&gt; uni.removeStorageSyncä»Žæœ¬åœ°ç¼“å­˜ä¸­åŒæ­¥ç§»é™¤æŒ‡å®š keyã€‚ ä»£ç æ¼”ç¤º 1234567891011121314&lt;template&gt; &lt;view&gt; &lt;button type="primary" @click="removeStorage"&gt;åˆ é™¤æ•°æ®&lt;/button&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; export default &#123; methods: &#123; removeStorage () &#123; uni.removeStorageSync('id') &#125; &#125; &#125;&lt;/script&gt; ä¸Šä¼ å›¾ç‰‡ã€é¢„è§ˆå›¾ç‰‡ä¸Šä¼ å›¾ç‰‡uni.chooseImageæ–¹æ³•ä»Žæœ¬åœ°ç›¸å†Œé€‰æ‹©å›¾ç‰‡æˆ–ä½¿ç”¨ç›¸æœºæ‹ç…§ã€‚ æ¡ˆä¾‹ä»£ç  12345678910111213141516171819202122232425262728&lt;template&gt; &lt;view&gt; &lt;button @click="chooseImg" type="primary"&gt;ä¸Šä¼ å›¾ç‰‡&lt;/button&gt; &lt;view&gt; &lt;image v-for="item in imgArr" :src="item" :key="index"&gt;&lt;/image&gt; &lt;/view&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; export default &#123; data () &#123; return &#123; imgArr: [] &#125; &#125;, methods: &#123; chooseImg () &#123; uni.chooseImage(&#123; count: 9, success: res=&gt;&#123; this.imgArr = res.tempFilePaths &#125; &#125;) &#125; &#125; &#125;&lt;/script&gt; é¢„è§ˆå›¾ç‰‡ç»“æž„ 123&lt;view&gt; &lt;image v-for="item in imgArr" :src="item" @click="previewImg(item)" :key="item"&gt;&lt;/image&gt;&lt;/view&gt; é¢„è§ˆå›¾ç‰‡çš„æ–¹æ³• 123456previewImg (current) &#123; uni.previewImage(&#123; urls: this.imgArr, current &#125;)&#125; æ¡ä»¶æ³¨é‡Šå®žçŽ°è·¨æ®µå…¼å®¹æ¡ä»¶ç¼–è¯‘æ˜¯ç”¨ç‰¹æ®Šçš„æ³¨é‡Šä½œä¸ºæ ‡è®°ï¼Œåœ¨ç¼–è¯‘æ—¶æ ¹æ®è¿™äº›ç‰¹æ®Šçš„æ³¨é‡Šï¼Œå°†æ³¨é‡Šé‡Œé¢çš„ä»£ç ç¼–è¯‘åˆ°ä¸åŒå¹³å°ã€‚ å†™æ³•ï¼šä»¥ #ifdef åŠ å¹³å°æ ‡è¯† å¼€å¤´ï¼Œä»¥ #endif ç»“å°¾ã€‚ å¹³å°æ ‡è¯† å€¼ å¹³å° å‚è€ƒæ–‡æ¡£ APP-PLUS 5+App HTML5+ è§„èŒƒ H5 H5 MP-WEIXIN å¾®ä¿¡å°ç¨‹åº å¾®ä¿¡å°ç¨‹åº MP-ALIPAY æ”¯ä»˜å®å°ç¨‹åº æ”¯ä»˜å®å°ç¨‹åº MP-BAIDU ç™¾åº¦å°ç¨‹åº ç™¾åº¦å°ç¨‹åº MP-TOUTIAO å¤´æ¡å°ç¨‹åº å¤´æ¡å°ç¨‹åº MP-QQ QQå°ç¨‹åº ï¼ˆç›®å‰ä»…cliç‰ˆæ”¯æŒï¼‰ MP å¾®ä¿¡å°ç¨‹åº/æ”¯ä»˜å®å°ç¨‹åº/ç™¾åº¦å°ç¨‹åº/å¤´æ¡å°ç¨‹åº/QQå°ç¨‹åº ç»„ä»¶çš„æ¡ä»¶æ³¨é‡Šä»£ç æ¼”ç¤º 123456789101112131415&lt;!-- #ifdef H5 --&gt;&lt;view&gt; h5é¡µé¢ä¼šæ˜¾ç¤º&lt;/view&gt;&lt;!-- #endif --&gt;&lt;!-- #ifdef MP-WEIXIN --&gt;&lt;view&gt; å¾®ä¿¡å°ç¨‹åºä¼šæ˜¾ç¤º&lt;/view&gt;&lt;!-- #endif --&gt;&lt;!-- #ifdef APP-PLUS --&gt;&lt;view&gt; appä¼šæ˜¾ç¤º&lt;/view&gt;&lt;!-- #endif --&gt; apiçš„æ¡ä»¶æ³¨é‡Šä»£ç æ¼”ç¤º 12345678onLoad () &#123; //#ifdef MP-WEIXIN console.log('å¾®ä¿¡å°ç¨‹åº') //#endif //#ifdef H5 console.log('h5é¡µé¢') //#endif&#125; æ ·å¼çš„æ¡ä»¶æ³¨é‡Š ä»£ç æ¼”ç¤º 1234567891011121314/* #ifdef H5 */view&#123; height: 100px; line-height: 100px; background: red;&#125;/* #endif *//* #ifdef MP-WEIXIN */view&#123; height: 100px; line-height: 100px; background: green;&#125;/* #endif */ uniä¸­çš„å¯¼èˆªè·³è½¬åˆ©ç”¨navigatorè¿›è¡Œè·³è½¬navigatorè¯¦ç»†æ–‡æ¡£ï¼šæ–‡æ¡£åœ°å€ è·³è½¬åˆ°æ™®é€šé¡µé¢ 123&lt;navigator url="/pages/about/about" hover-class="navigator-hover"&gt; &lt;button type="default"&gt;è·³è½¬åˆ°å…³äºŽé¡µé¢&lt;/button&gt;&lt;/navigator&gt; è·³è½¬åˆ°tabbaré¡µé¢ 123&lt;navigator url="/pages/message/message" open-type="switchTab"&gt; &lt;button type="default"&gt;è·³è½¬åˆ°messageé¡µé¢&lt;/button&gt;&lt;/navigator&gt; åˆ©ç”¨ç¼–ç¨‹å¼å¯¼èˆªè¿›è¡Œè·³è½¬å¯¼èˆªè·³è½¬æ–‡æ¡£) åˆ©ç”¨navigateToè¿›è¡Œå¯¼èˆªè·³è½¬ ä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ï¼Œä½¿ç”¨uni.navigateBackå¯ä»¥è¿”å›žåˆ°åŽŸé¡µé¢ã€‚ 1&lt;button type="primary" @click="goAbout"&gt;è·³è½¬åˆ°å…³äºŽé¡µé¢&lt;/button&gt; é€šè¿‡navigateToæ–¹æ³•è¿›è¡Œè·³è½¬åˆ°æ™®é€šé¡µé¢ 12345goAbout () &#123; uni.navigateTo(&#123; url: '/pages/about/about', &#125;)&#125; é€šè¿‡switchTabè·³è½¬åˆ°tabbaré¡µé¢ è·³è½¬åˆ°tabbaré¡µé¢ 1&lt;button type="primary" @click="goMessage"&gt;è·³è½¬åˆ°messageé¡µé¢&lt;/button&gt; é€šè¿‡switchTabæ–¹æ³•è¿›è¡Œè·³è½¬ 12345goMessage () &#123; uni.switchTab(&#123; url: '/pages/message/message' &#125;)&#125; redirectToè¿›è¡Œè·³è½¬ å…³é—­å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚ 12345678&lt;!-- template --&gt;&lt;button type="primary" @click="goMessage"&gt;è·³è½¬åˆ°messageé¡µé¢&lt;/button&gt;&lt;!-- js --&gt;goMessage () &#123; uni.switchTab(&#123; url: '/pages/message/message' &#125;)&#125; é€šè¿‡onUnloadæµ‹è¯•å½“å‰ç»„ä»¶ç¡®å®žå¸è½½ 123onUnload () &#123; console.log('ç»„ä»¶å¸è½½äº†')&#125; å¯¼èˆªè·³è½¬ä¼ é€’å‚æ•°åœ¨å¯¼èˆªè¿›è¡Œè·³è½¬åˆ°ä¸‹ä¸€ä¸ªé¡µé¢çš„åŒæ—¶ï¼Œå¯ä»¥ç»™ä¸‹ä¸€ä¸ªé¡µé¢ä¼ é€’ç›¸åº”çš„å‚æ•°ï¼ŒæŽ¥æ”¶å‚æ•°çš„é¡µé¢å¯ä»¥é€šè¿‡onLoadç”Ÿå‘½å‘¨æœŸè¿›è¡ŒæŽ¥æ”¶ ä¼ é€’å‚æ•°çš„é¡µé¢ 12345goAbout () &#123; uni.navigateTo(&#123; url: '/pages/about/about?id=80', &#125;);&#125; æŽ¥æ”¶å‚æ•°çš„é¡µé¢ 1234567&lt;script&gt; export default &#123; onLoad (options) &#123; console.log(options) &#125; &#125;&lt;/script&gt; #### uni-appä¸­ç»„ä»¶çš„åˆ›å»ºåœ¨uni-appä¸­ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªåŽç¼€åä¸ºvueçš„æ–‡ä»¶ï¼Œå³åˆ›å»ºä¸€ä¸ªç»„ä»¶æˆåŠŸï¼Œå…¶ä»–ç»„ä»¶å¯ä»¥å°†è¯¥ç»„ä»¶é€šè¿‡impotçš„æ–¹å¼å¯¼å…¥ï¼Œåœ¨é€šè¿‡componentsè¿›è¡Œæ³¨å†Œå³å¯ åˆ›å»ºloginç»„ä»¶ï¼Œåœ¨componentä¸­åˆ›å»ºloginç›®å½•ï¼Œç„¶åŽæ–°å»ºlogin.vueæ–‡ä»¶ 1234567891011&lt;template&gt; &lt;view&gt; è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ &lt;/view&gt;&lt;/template&gt;&lt;script&gt;&lt;/script&gt;&lt;style&gt;&lt;/style&gt; åœ¨å…¶ä»–ç»„ä»¶ä¸­å¯¼å…¥è¯¥ç»„ä»¶å¹¶æ³¨å†Œ 1import login from &quot;@/components/test/test.vue&quot; æ³¨å†Œç»„ä»¶ 1components: &#123;test&#125; ä½¿ç”¨ç»„ä»¶ 1&lt;test&gt;&lt;/test&gt; ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•° beforeCreate åœ¨å®žä¾‹åˆå§‹åŒ–ä¹‹åŽè¢«è°ƒç”¨ã€‚è¯¦è§ created åœ¨å®žä¾‹åˆ›å»ºå®ŒæˆåŽè¢«ç«‹å³è°ƒç”¨ã€‚è¯¦è§ beforeMount åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ã€‚è¯¦è§ mounted æŒ‚è½½åˆ°å®žä¾‹ä¸ŠåŽ»ä¹‹åŽè°ƒç”¨ã€‚è¯¦è§ æ³¨æ„ï¼šæ­¤å¤„å¹¶ä¸èƒ½ç¡®å®šå­ç»„ä»¶è¢«å…¨éƒ¨æŒ‚è½½ï¼Œå¦‚æžœéœ€è¦å­ç»„ä»¶å®Œå…¨æŒ‚è½½ä¹‹åŽåœ¨æ‰§è¡Œæ“ä½œå¯ä»¥ä½¿ç”¨$nextTickVueå®˜æ–¹æ–‡æ¡£ beforeUpdate æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹Ÿ DOM æ‰“è¡¥ä¸ä¹‹å‰ã€‚è¯¦è§ ä»…H5å¹³å°æ”¯æŒ updated ç”±äºŽæ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ï¼Œåœ¨è¿™ä¹‹åŽä¼šè°ƒç”¨è¯¥é’©å­ã€‚è¯¦è§ ä»…H5å¹³å°æ”¯æŒ beforeDestroy å®žä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®žä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ã€‚è¯¦è§ destroyed Vue å®žä¾‹é”€æ¯åŽè°ƒç”¨ã€‚è°ƒç”¨åŽï¼ŒVue å®žä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®žä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚è¯¦è§ ç»„ä»¶çš„é€šè®¯çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼é€šè¿‡propsæ¥æŽ¥å—å¤–ç•Œä¼ é€’åˆ°ç»„ä»¶å†…éƒ¨çš„å€¼ 1234567891011121314&lt;template&gt; &lt;view&gt; è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ &#123;&#123;msg&#125;&#125; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; export default &#123; props: [&apos;msg&apos;] &#125;&lt;/script&gt;&lt;style&gt;&lt;/style&gt; å…¶ä»–ç»„ä»¶åœ¨ä½¿ç”¨loginç»„ä»¶çš„æ—¶å€™ä¼ é€’å€¼ 123456789101112131415161718&lt;template&gt; &lt;view&gt; &lt;test :msg=&quot;msg&quot;&gt;&lt;/test&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; import test from &quot;@/components/test/test.vue&quot; export default &#123; data () &#123; return &#123; msg: &apos;hello&apos; &#125; &#125;, components: &#123;test&#125; &#125;&lt;/script&gt; å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ å€¼é€šè¿‡$emitè§¦å‘äº‹ä»¶è¿›è¡Œä¼ é€’å‚æ•° 123456789101112131415161718192021222324252627&lt;template&gt; &lt;view&gt; è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ &#123;&#123;msg&#125;&#125; &lt;button type="primary" @click="sendMsg"&gt;ç»™çˆ¶ç»„ä»¶ä¼ å€¼&lt;/button&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; export default &#123; data () &#123; return &#123; status: 'æ‰“ç¯®çƒ' &#125; &#125;, props: &#123; msg: &#123; type: String, value: '' &#125; &#125;, methods: &#123; sendMsg () &#123; this.$emit('myEvent',this.status) &#125; &#125; &#125;&lt;/script&gt; çˆ¶ç»„ä»¶å®šä¹‰è‡ªå®šä¹‰äº‹ä»¶å¹¶æŽ¥æ”¶å‚æ•° 12345678910111213141516171819202122&lt;template&gt; &lt;view&gt; &lt;test :msg="msg" @myEvent="getMsg"&gt;&lt;/test&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt; import test from "@/components/test/test.vue" export default &#123; data () &#123; return &#123; msg: 'hello' &#125; &#125;, methods: &#123; getMsg (res) &#123; console.log(res) &#125; &#125;, components: &#123;test&#125; &#125;&lt;/script&gt; å…„å¼Ÿç»„ä»¶é€šè®¯uni-uiçš„ä½¿ç”¨uni-uiæ–‡æ¡£ 1ã€è¿›å…¥Gridå®«æ ¼ç»„ä»¶ 2ã€ä½¿ç”¨HBuilderXå¯¼å…¥è¯¥ç»„ä»¶ 3ã€å¯¼å…¥è¯¥ç»„ä»¶ 12import uniGrid from "@/components/uni-grid/uni-grid.vue"import uniGridItem from "@/components/uni-grid-item/uni-grid-item.vue" 4ã€æ³¨å†Œç»„ä»¶ 1components: &#123;uniGrid,uniGridItem&#125; 5ã€ä½¿ç”¨ç»„ä»¶ 1234567891011&lt;uni-grid :column="3"&gt; &lt;uni-grid-item&gt; &lt;text class="text"&gt;æ–‡æœ¬&lt;/text&gt; &lt;/uni-grid-item&gt; &lt;uni-grid-item&gt; &lt;text class="text"&gt;æ–‡æœ¬&lt;/text&gt; &lt;/uni-grid-item&gt; &lt;uni-grid-item&gt; &lt;text class="text"&gt;æ–‡æœ¬&lt;/text&gt; &lt;/uni-grid-item&gt;&lt;/uni-grid&gt; æ¨¡æ‹Ÿå™¨ adb kill-server //ç»“æŸadbæœåŠ¡ adb start-server //å¯åŠ¨adbæœåŠ¡ adb devices //èŽ·å–adbè®¾å¤‡åˆ—è¡¨]]></content>
      <categories>
        <category>uni-app</category>
      </categories>
      <tags>
        <tag>uni-app</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[win10å­¦linux]]></title>
    <url>%2F2020%2F02%2F16%2Fwin10%E5%AD%A6linux%2F</url>
    <content type="text"><![CDATA[LinuxçŽ¯å¢ƒwin10å®¶åº­ç‰ˆè‡ªå¸¦è™šæ‹ŸæœºHyper-Vçš„è®¾ç½®ä¸€èˆ¬win10å®¶åº­ç‰ˆå¹¶ä¸å¸¦Hyper-Vè™šæ‹Ÿæœºï¼Œè§£å†³æ–¹æ³•ï¼š æ–°å»ºHyper-V.batæ–‡ä»¶ï¼Œå†…å®¹ä¸º pushd &quot;%~dp0&quot; dir /b %SystemRoot%\servicing\Packages\*Hyper-V*.mum &gt;hyper-v.txt for /f %%i in (&apos;findstr /i . hyper-v.txt 2^&gt;nul&apos;) do dism /online /norestart /add-package:&quot;%SystemRoot%\servicing\Packages\%%i&quot; del hyper-v.txt Dism /online /enable-feature /featurename:Microsoft-Hyper-V-All /LimitAccess /ALL å³é”®-ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼Œè¿™æ—¶å°±ä¼šè‡ªåŠ¨çš„å®‰è£…è™šæ‹ŸæœºåŠŸèƒ½ã€‚ ä¸‹è½½linuxé•œåƒä¸‹è½½linuxé•œåƒï¼Œè¿è¡ŒHyper-Vç®¡ç†å™¨ï¼Œå¹¶åŠ è½½linuxé•œåƒ]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nginx]]></title>
    <url>%2F2020%2F02%2F13%2Fnginx%2F</url>
    <content type="text"><![CDATA[nginxä»‹ç»Nginx(â€œengine xâ€)æ˜¯ä¸€æ¬¾æ˜¯ç”±ä¿„ç½—æ–¯çš„ç¨‹åºè®¾è®¡å¸ˆIgor Sysoevæ‰€å¼€å‘é«˜æ€§èƒ½çš„ Webå’Œ åå‘ä»£ç† æœåŠ¡å™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª IMAP/POP3/SMTP ä»£ç†æœåŠ¡å™¨ã€‚ åœ¨é«˜è¿žæŽ¥å¹¶å‘çš„æƒ…å†µä¸‹ï¼ŒNginxæ˜¯ApacheæœåŠ¡å™¨ä¸é”™çš„æ›¿ä»£å“ã€‚ Nginx å®‰è£…ä¸‹è½½nginxä¸‹è½½åœ°å€ï¼šhttp://nginx.org/download/nginx-1.6.2.tar.gz [root@bogon src]# cd /usr/local/src/ [root@bogon src]# wget http://nginx.org/download/nginx-1.6.2.tar.gz è§£åŽ‹å®‰è£…åŒ…[root@bogon src]# tar zxvf nginx-1.6.2.tar.gz ç¼–è¯‘å®‰è£…[root@bogon nginx-1.6.2]# ./configure --prefix=/usr/local/webserver/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/usr/local/src/pcre-8.35 [root@bogon nginx-1.6.2]# make [root@bogon nginx-1.6.2]# make install æŸ¥çœ‹nginxç‰ˆæœ¬[root@bogon nginx-1.6.2]# /usr/local/webserver/nginx/sbin/nginx -v Nginx é…ç½®åˆ›å»º Nginx è¿è¡Œä½¿ç”¨çš„ç”¨æˆ· www[root@bogon conf]# /usr/sbin/groupadd www [root@bogon conf]# /usr/sbin/useradd -g www www é…ç½®nginx.conf ï¼Œå°†/usr/local/webserver/nginx/conf/nginx.confæ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹[root@bogon conf]# cat /usr/local/webserver/nginx/conf/nginx.conf user www www; worker_processes 2; #è®¾ç½®å€¼å’ŒCPUæ ¸å¿ƒæ•°ä¸€è‡´ error_log /usr/local/webserver/nginx/logs/nginx_error.log crit; #æ—¥å¿—ä½ç½®å’Œæ—¥å¿—çº§åˆ« pid /usr/local/webserver/nginx/nginx.pid; #Specifies the value for maximum file descriptors that can be opened by this process. worker_rlimit_nofile 65535; events { use epoll; worker_connections 65535; } http { include mime.types; default_type application/octet-stream; log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos; &apos;&quot;$http_user_agent&quot; $http_x_forwarded_for&apos;; #charset gb2312; server_names_hash_bucket_size 128; client_header_buffer_size 32k; large_client_header_buffers 4 32k; client_max_body_size 8m; sendfile on; tcp_nopush on; keepalive_timeout 60; tcp_nodelay on; fastcgi_connect_timeout 300; fastcgi_send_timeout 300; fastcgi_read_timeout 300; fastcgi_buffer_size 64k; fastcgi_buffers 4 64k; fastcgi_busy_buffers_size 128k; fastcgi_temp_file_write_size 128k; gzip on; gzip_min_length 1k; gzip_buffers 4 16k; gzip_http_version 1.0; gzip_comp_level 2; gzip_types text/plain application/x-javascript text/css application/xml; gzip_vary on; #limit_zone crawler $binary_remote_addr 10m; #ä¸‹é¢æ˜¯serverè™šæ‹Ÿä¸»æœºçš„é…ç½® server { listen 80;#ç›‘å¬ç«¯å£ server_name localhost;#åŸŸå index index.html index.htm index.php; root /usr/local/webserver/nginx/html;#ç«™ç‚¹ç›®å½• location ~ .*\.(php|php5)?$ { #fastcgi_pass unix:/tmp/php-cgi.sock; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; include fastcgi.conf; } location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|ico)$ { expires 30d; # access_log off; } location ~ .*\.(js|css)?$ { expires 15d; # access_log off; } access_log off; } } æ£€æŸ¥é…ç½®æ–‡ä»¶nginx.confçš„æ­£ç¡®æ€§å‘½ä»¤[root@bogon conf]# /usr/local/webserver/nginx/sbin/nginx -t å¯åŠ¨ Nginx[root@bogon conf]# /usr/local/webserver/nginx/sbin/nginx Nginx å…¶ä»–å‘½ä»¤/usr/local/webserver/nginx/sbin/nginx -s reload # é‡æ–°è½½å…¥é…ç½®æ–‡ä»¶ /usr/local/webserver/nginx/sbin/nginx -s reopen # é‡å¯ Nginx /usr/local/webserver/nginx/sbin/nginx -s stop # åœæ­¢ Nginx è¯¦ç»†é…ç½®#user nobody; #é…ç½®ç”¨æˆ·æˆ–è€…ç»„ï¼Œé»˜è®¤ä¸ºnobody nobodyã€‚ worker_processes auto; #number | auto;é»˜è®¤ä¸º1ï¼Œæœ€å¥½é…ç½®æˆauto,è‡ªåŠ¨åŒ¹é…è¿›ç¨‹æ•° #åˆ¶å®šæ—¥å¿—è·¯å¾„ï¼Œçº§åˆ«ã€‚è¿™ä¸ªè®¾ç½®å¯ä»¥æ”¾å…¥å…¨å±€å—ï¼Œhttpå—ï¼Œserverå—ï¼Œçº§åˆ«ä»¥æ­¤ä¸ºï¼šdebug|info|notice|warn|error|crit|alert|emerg #error_log logs/error.log; #error_log logs/error.log notice; #error_log logs/error.log info; #pid logs/nginx.pid; #æŒ‡å®šnginxè¿›ç¨‹è¿è¡Œæ–‡ä»¶å­˜æ”¾åœ°å€ events { worker_connections 1024; #æœ€å¤§è¿žæŽ¥æ•°ï¼Œé»˜è®¤ä¸º512 } http { include mime.types; #æ–‡ä»¶æ‰©å±•åä¸Žæ–‡ä»¶ç±»åž‹æ˜ å°„è¡¨ default_type application/octet-stream; #é»˜è®¤æ–‡ä»¶ç±»åž‹ï¼Œé»˜è®¤ä¸ºtext/plain #log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; # &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos; # &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;; #access_log logs/access.log main; sendfile on; #å…è®¸sendfileæ–¹å¼ä¼ è¾“æ–‡ä»¶ï¼Œé»˜è®¤ä¸ºoff #tcp_nopush on; #keepalive_timeout 0; keepalive_timeout 65; #è¿žæŽ¥è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸º75s #gzip on; #å¯ç”¨GizpåŽ‹ç¼© #include /usr/local/nginx/conf/vhost/*; server { listen 80; server_name #ç›‘å¬åœ°å€; #charset koi8-r; #access_log logs/host.access.log main; location / { #è¯·æ±‚çš„urlè¿‡æ»¤ï¼Œæ­£åˆ™åŒ¹é…ï¼Œ~ä¸ºåŒºåˆ†å¤§å°å†™ï¼Œ~*ä¸ºä¸åŒºåˆ†å¤§å°å†™ã€‚ proxy_pass http://mysvr; #è¯·æ±‚è½¬å‘mysvr å®šä¹‰çš„æœåŠ¡å™¨åˆ—è¡¨ #è®¾ç½®ç¦æ­¢æµè§ˆå™¨ç¼“å­˜ï¼Œæ¯æ¬¡éƒ½ä»ŽæœåŠ¡å™¨è¯·æ±‚ add_header Cache-Control no-cache; add_header Cache-Control private;#è¡¨æ˜Žå“åº”åªèƒ½è¢«å•ä¸ªç”¨æˆ·ç¼“å­˜ï¼Œä¸èƒ½ä½œä¸ºå…±äº«ç¼“å­˜ï¼ˆå³ä»£ç†æœåŠ¡å™¨ä¸èƒ½ç¼“å­˜å®ƒï¼‰,å¯ä»¥ç¼“å­˜å“åº”å†…å®¹ã€‚å“åº”åªä½œä¸ºç§æœ‰çš„ç¼“å­˜ï¼Œä¸èƒ½åœ¨ç”¨æˆ·é—´å…±äº«ã€‚å¦‚æžœè¦æ±‚HTTPè®¤è¯ï¼Œå“åº”ä¼šè‡ªåŠ¨è®¾ç½®ä¸ºprivateã€‚ deny 127.0.0.1; #æ‹’ç»çš„ip allow 172.18.5.54; #å…è®¸çš„ip } location /material/ { proxy_pass http://mysvr; #è¯·æ±‚è½¬å‘mysvr å®šä¹‰çš„æœåŠ¡å™¨åˆ—è¡¨ #è®¾ç½®ç¦æ­¢æµè§ˆå™¨ç¼“å­˜ï¼Œæ¯æ¬¡éƒ½ä»ŽæœåŠ¡å™¨è¯·æ±‚ add_header Cache-Control no-cache; add_header Cache-Control private;#è¡¨æ˜Žå“åº”åªèƒ½è¢«å•ä¸ªç”¨æˆ·ç¼“å­˜ï¼Œä¸èƒ½ä½œä¸ºå…±äº«ç¼“å­˜ï¼ˆå³ä»£ç†æœåŠ¡å™¨ä¸èƒ½ç¼“å­˜å®ƒï¼‰,å¯ä»¥ç¼“å­˜å“åº”å†…å®¹ã€‚å“åº”åªä½œä¸ºç§æœ‰çš„ç¼“å­˜ï¼Œä¸èƒ½åœ¨ç”¨æˆ·é—´å…±äº«ã€‚å¦‚æžœè¦æ±‚HTTPè®¤è¯ï¼Œå“åº”ä¼šè‡ªåŠ¨è®¾ç½®ä¸ºprivateã€‚ } } server { listen 80; server_name #ç›‘å¬åœ°å€; #charset koi8-r; #access_log logs/host.access.log main; location / { #è¯·æ±‚çš„urlè¿‡æ»¤ï¼Œæ­£åˆ™åŒ¹é…ï¼Œ~ä¸ºåŒºåˆ†å¤§å°å†™ï¼Œ~*ä¸ºä¸åŒºåˆ†å¤§å°å†™ã€‚ proxy_pass http://mysvr; #è¯·æ±‚è½¬å‘mysvr å®šä¹‰çš„æœåŠ¡å™¨åˆ—è¡¨ #è®¾ç½®ç¦æ­¢æµè§ˆå™¨ç¼“å­˜ï¼Œæ¯æ¬¡éƒ½ä»ŽæœåŠ¡å™¨è¯·æ±‚ add_header Cache-Control no-cache; add_header Cache-Control private;#è¡¨æ˜Žå“åº”åªèƒ½è¢«å•ä¸ªç”¨æˆ·ç¼“å­˜ï¼Œä¸èƒ½ä½œä¸ºå…±äº«ç¼“å­˜ï¼ˆå³ä»£ç†æœåŠ¡å™¨ä¸èƒ½ç¼“å­˜å®ƒï¼‰,å¯ä»¥ç¼“å­˜å“åº”å†…å®¹ã€‚å“åº”åªä½œä¸ºç§æœ‰çš„ç¼“å­˜ï¼Œä¸èƒ½åœ¨ç”¨æˆ·é—´å…±äº«ã€‚å¦‚æžœè¦æ±‚HTTPè®¤è¯ï¼Œå“åº”ä¼šè‡ªåŠ¨è®¾ç½®ä¸ºprivateã€‚ deny 127.0.0.1; #æ‹’ç»çš„ip allow 172.18.5.54; #å…è®¸çš„ip } location /material/ { proxy_pass http://mysvr; #è¯·æ±‚è½¬å‘mysvr å®šä¹‰çš„æœåŠ¡å™¨åˆ—è¡¨ #è®¾ç½®ç¦æ­¢æµè§ˆå™¨ç¼“å­˜ï¼Œæ¯æ¬¡éƒ½ä»ŽæœåŠ¡å™¨è¯·æ±‚ add_header Cache-Control no-cache; add_header Cache-Control private;#è¡¨æ˜Žå“åº”åªèƒ½è¢«å•ä¸ªç”¨æˆ·ç¼“å­˜ï¼Œä¸èƒ½ä½œä¸ºå…±äº«ç¼“å­˜ï¼ˆå³ä»£ç†æœåŠ¡å™¨ä¸èƒ½ç¼“å­˜å®ƒï¼‰,å¯ä»¥ç¼“å­˜å“åº”å†…å®¹ã€‚å“åº”åªä½œä¸ºç§æœ‰çš„ç¼“å­˜ï¼Œä¸èƒ½åœ¨ç”¨æˆ·é—´å…±äº«ã€‚å¦‚æžœè¦æ±‚HTTPè®¤è¯ï¼Œå“åº”ä¼šè‡ªåŠ¨è®¾ç½®ä¸ºprivateã€‚ } } #server { # listen 80; # server_name xxx.com; # # #charset koi8-r; # # #access_log logs/host.access.log main; # # location / { # root html; # index index.html index.htm; # } # # #error_page 404 /404.html; # # # redirect server error pages to the static page /50x.html # # # error_page 500 502 503 504 /50x.html; # location = /50x.html { # root html; # } # # # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # # # #location ~ \.php$ { # # proxy_pass http://127.0.0.1; # #} # # # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # # # #location ~ \.php$ { # # root html; # # fastcgi_pass 127.0.0.1:9000; # # fastcgi_index index.php; # # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # # include fastcgi_params; # #} # # # deny access to .htaccess files, if Apache&apos;s document root # # concurs with nginx&apos;s one # # # #location ~ /\.ht { # # deny all; # #} #} # another virtual host using mix of IP-, name-, and port-based configuration # #server { # listen 8000; # listen somename:8080; # server_name somename alias another.alias; # location / { # root html; # index index.html index.htm; # } #} # HTTPS server # #server { # listen 443 ssl; # server_name localhost; # ssl_certificate cert.pem; # ssl_certificate_key cert.key; # ssl_session_cache shared:SSL:1m; # ssl_session_timeout 5m; # ssl_ciphers HIGH:!aNULL:!MD5; # ssl_prefer_server_ciphers on; # location / { # root html; # index index.html index.htm; # } #} } NGINXä¹‹åå‘ä»£ç†ä¸Žè´Ÿè½½å‡è¡¡åå‘ä»£ç†ï¼š ä»Žå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå¯¹äºŽæµè§ˆå™¨æ¥è¯´ï¼Œä»–ä¼šå‘ä¸€ä¸ªhttp://www.a.com/uriè¯·æ±‚åˆ°NginxæœåŠ¡å™¨ï¼Œå¯¹äºŽä»–æ¥è¯´ï¼Œä»–è®¤ä¸ºæ•°æ®å°±æ˜¯ä»Žhttp://www.a.com/uriåŸŸä¸­è¿”å›žçš„ï¼Œäº‹å®žä¸Šï¼Œå½“http://www.a.com/uriåˆ°è¾¾NginxæœåŠ¡å™¨åŽï¼ŒNginxæœåŠ¡å™¨ä¼šå°†å…¶è½¬å‘ç»™http://www.b.com/uri,ä»Žhttp://www.b.com/uriåŸŸä¸­å–å¾—æ•°æ®å¹¶å°†å…¶è¿”å›žç»™æµè§ˆå™¨ï¼Œè¿™ä¸ªæ­¥éª¤æµè§ˆå™¨æ˜¯ä¸çŸ¥é“çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæµè§ˆå™¨å¹¶ä¸çŸ¥é“http://www.b.com/uriè¯¥åŸŸçš„å­˜åœ¨ï¼ŒåŒç†ï¼Œhttp://www.b.com/uriæ‰€åœ¨çš„åŸŸï¼ˆå›¾ä¸­çš„Tomcatï¼‰ä¹Ÿå¹¶ä¸çŸ¥é“æµè§ˆå™¨çš„å­˜åœ¨ï¼Œä»–ä¹Ÿåªå¯¹Nginxè´Ÿè´£ã€‚Nginxçš„è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ä¾¿ç§°ä¸ºåå‘ä»£ç†ã€‚ é‚£ä¹ˆï¼ŒNginxæœåŠ¡å™¨æ˜¯å¦‚ä½•å®žçŽ°è¿™ä¸€æ­¥çš„å‘¢ï¼Œäº‹å®žä¸Šä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨locationä¸­åšä¸€ä¸‹ç®€å•çš„é…ç½®å³å¯ï¼Œå‘½ä»¤å¤§æ¦‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šï¼ˆé…ç½®å®Œå‘½ä»¤è®°å¾—reloadé‡æ–°åŠ è½½æ‰èƒ½ç”Ÿæ•ˆï¼‰ é‡ç‚¹åœ¨äºŽlocationå¤„ï¼Œè¿™æ ·çš„é…ç½®ä»£è¡¨çš„æ˜¯ï¼Œæ‰€æœ‰æ¥è‡ªæµè§ˆå™¨çš„è¯·æ±‚ï¼Œåœ¨Nginxæ”¶åˆ°ä¹‹åŽï¼Œéƒ½ä¼šä»£ç†åˆ°http://192.168.1.62:8080æ‰€åœ¨çš„åœ°æ–¹ æ¯”å¦‚ï¼Œæˆ‘æµè§ˆå™¨ä¸Šå‘èµ·http://192.168.1.61/a/index.htmlï¼›Nginxæ”¶åˆ°ä¹‹åŽï¼Œå°†ä¼šå‘å‡ºhttp:// 192.168.1.62:8080/a/index.htmlè¿™ä¹ˆä¸€ä¸ªè¯·æ±‚åˆ°æ‰€è¿žæŽ¥çš„æœåŠ¡å™¨ä¸Šï¼Œå¦‚ä¸Šå›¾çš„Tomcatã€‚ æŽ¥ä¸‹æ¥æˆ‘ä»¬åšè¿™æ ·ä¸€ä¸ªå‡è®¾ï¼Œå‡å¦‚åŽç«¯è¿žæŽ¥ç€å‡ å°ã€‚å‡ åå°æœåŠ¡å™¨å‘¢ï¼Œè¿™ä¸ªæ—¶å€™Nginxä¹Ÿæ˜¯åšåŒæ ·çš„ä»£ç†å—ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚å›¾ç¤ºå¦‚ä¸‹ï¼šé‚£ä¹ˆï¼Œåœ¨è¿™ä¹ˆå¤šå°æœåŠ¡å™¨ä¸Šï¼ŒNginxçš„è½¬å‘åˆæ˜¯åŸºäºŽæ€Žæ ·çš„ç­–ç•¥å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±æ¶‰åŠåœ¨è´Ÿè½½å‡è¡¡äº†ï¼Œè¯´ç™½äº†å°±æ˜¯ï¼Œåº”è¯¥æ€Žæ ·çš„åˆ†å‘ï¼Œæ‰èƒ½åšåˆ°èµ„æºçš„æœ€å¤§é™åº¦çš„åˆ©ç”¨ï¼Ÿ è´Ÿè½½å‡è¡¡ç­–ç•¥ ï¼ˆ æˆ‘ä»¬è¿™é‡Œå‡è®¾ä¸‰å°æœåŠ¡å™¨çš„IPåœ°å€åˆ†åˆ«ä¸º http:// 192.168.1.62:8080 http:// 192.168.1.63:8080 http:// 192.168.1.64:8080 ï¼‰ è¿™é‡Œæˆ‘ä»¬æŠŠåŽå°æ‰€æœ‰çš„æœåŠ¡å™¨æ”¾å…¥upstreamä¸­ï¼Œå¹¶åœ¨ä»£ç†ä¸­è¿›è¡Œå¼•ç”¨ã€‚ å…¶ä»–çš„é…ç½®å¤‡ä»½ä¸ŽåœæœºçŠ¶æ€ï¼šserver 192.168.1.64 backup;//å¤‡ä»½ï¼Œä¸å‚ä¸Žè½¬å‘ï¼Œåªæœ‰å½“æ‰€æœ‰æœåŠ¡å™¨éƒ½æŒ‚æŽ‰æ—¶æ‰å‚ä¸Žè½¬å‘ï¼› server 192.168.1.65 down;//ä¸´æ—¶åœæœºç»´æŠ¤ï¼Œä¸å‚ä¸Žä»»ä½•è½¬å‘ï¼Œæ˜¯å…³é—­çŠ¶æ€ï¼Œ downå­˜åœ¨çš„æ„ä¹‰åœ¨äºŽï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦å¯¹æœåŠ¡å™¨åšä¸´æ—¶åœæœºæ›´æ–°ç»´æŠ¤ï¼Œå‡å¦‚æˆ‘ä»¬ç›´æŽ¥å…³é—­æœåŠ¡å™¨çš„è¯ï¼Œé‚£ä¹ˆå¯¹äºŽNginxæ¥è¯´ï¼Œä»–è¿˜æ˜¯ä¼šæŠŠè¯·æ±‚å‘åˆ°è¯¥æœåŠ¡å™¨ä¸Šçš„ï¼Œå› ä¸ºä»–å¹¶ä¸çŸ¥é“æœåŠ¡å™¨å·²å…³ï¼Œè€Œè®¾ç½®downåŽï¼ŒNginxåˆ™ä¸ä¼šå†å‘åˆ°è¯¥æœåŠ¡å™¨ä¸Šäº†ï¼Œé¿å…é€ æˆæ— ç”¨çš„è¯·æ±‚æµªè´¹ã€‚ max_fails: è¾¾åˆ°æŒ‡å®šæ¬¡æ•°åŽè®¤ä¸ºæœåŠ¡å™¨æŒ‚æŽ‰ fail_timeoutï¼šæŒ‚æŽ‰å¤šä¹…åŽå†æ¬¡æµ‹è¯•æ˜¯å¦å·²ç»æŒ‚æŽ‰ é…ç½®å‘½ä»¤ server 192.168.1.66 max_fails=2 fail_timeout=60s;]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¥‡è¿¹ç”·å­©]]></title>
    <url>%2F2020%2F02%2F11%2F%E5%A5%87%E8%BF%B9%E7%94%B7%E5%AD%A9%2F</url>
    <content type="text"><![CDATA[é›¶My mom always saidâ€¦â€if you donâ€™t like where you areâ€¦just picture where you wanna be.â€ï¼ˆby Auggieï¼‰ æˆ‘å¦ˆå¦ˆå¸¸è¯´ï¼Œâ€œå¦‚æžœä½ ä¸å–œæ¬¢è¿™é‡Œï¼Œå°±æƒ³è±¡ä¸€ä¸ªä½ æƒ³åŽ»çš„åœ°æ–¹ã€‚â€(å¥¥å‰) å£¹â€œWhen given the choice between being right or being kind , choose kind.â€(Mr Brownâ€™s September Precet) â€œå¦‚æžœè¦ä»Žæ­£ç¡®å’Œå–„è‰¯ä¸­ï¼Œåšå‡ºé€‰æ‹©ï¼Œè¯·é€‰æ‹©å–„è‰¯ã€‚â€ï¼ˆå¸ƒæœ—è€å¸ˆçš„ä¹æœˆç®´è¨€ï¼‰ åBecause Iâ€™m your mom , it counts the most because I know you the most.(By Isabel) æ­£å› ä¸ºæˆ‘æ˜¯ä½ å¦ˆå¦ˆè¯´è¯æ‰ç®—æ•°ï¼Œå› ä¸ºæˆ‘æœ€äº†è§£ä½ ã€‚ï¼ˆä¼ŠèŽŽè´å°”ï¼‰ è‚†Because school sucks. And people change.So if you wanna be a normal kid,Auggie,the those are the rules.(By Via) ä¸Šå­¦å°±æ˜¯è¿™ä¹ˆç³Ÿç³•ã€‚äººä¹Ÿæ˜¯ä¼šå˜çš„ã€‚å¦‚æžœä½ æƒ³å½“æ™®é€šå°å­©å¥¥å‰ï¼Œè¿™å°±æ˜¯è§„åˆ™ã€‚ï¼ˆç»´å¨…ï¼‰ ä¼While nothing justifies striking another studentâ€¦I know goos friends are worth defending.(By Mr. Tushman) è™½ç„¶æ®´æ‰“åŒå­¦çš„è¡Œä¸ºä¸èƒ½é€šèžï¼Œä½†æˆ‘çŸ¥é“å‹æƒ…æ˜¯å€¼å¾—æå«çš„ã€‚ï¼ˆå›¾å§‹æ›¼å…ˆç”Ÿï¼‰ å…­Maybe if we knew what other people were thinking, weâ€™d know that no oneâ€™s ordinary.And we all deserve a standing ovation at least once in our lives.(By Auggie) å¦‚æžœæˆ‘ä»¬äº†è§£åˆ«äººçš„æƒ³æ³•ï¼Œå°±ä¼šçŸ¥é“ï¼Œæ²¡æœ‰äººæ˜¯æ™®é€šçš„ã€‚æ¯ä¸ªäººéƒ½å€¼å¾—å¤§å®¶ç«™èµ·æ¥ä¸ºä»–é¼“æŽŒä¸€æ¬¡ã€‚ æŸ’Be kind,for everyone is fighting a hard battle.And if you really wanna see what people areâ€¦ all you have to do ..is look.(By Auggie) å–„è‰¯ä¸€ç‚¹ï¼Œå› ä¸ºæ¯ä¸ªäººéƒ½åœ¨ä¸Žäººç”Ÿè‹¦æˆ˜ã€‚å¦‚æžœä½ æƒ³çœŸæ­£äº†è§£ä»–äººï¼Œä½ åªéœ€è¦ç”¨å¿ƒâ€¦åŽ»çœ‹ã€‚ï¼ˆå¥¥å‰ï¼‰]]></content>
      <categories>
        <category>ç”µå½±å°è¯</category>
      </categories>
      <tags>
        <tag>ç”µå½±å°è¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ£ç»è§£æƒ‘]]></title>
    <url>%2F2019%2F12%2F14%2F%E5%9C%A3%E7%BB%8F%E8%A7%A3%E6%83%91%2F</url>
    <content type="text"><![CDATA[çº¦æ‹¿çš„ç¥žè¿¹è·¯åŠ ç¦éŸ³11ç« 29èŠ‚ä¸­è®²é“â€œè¿™ä¸–ä»£æ˜¯ä¸€ä¸ªé‚ªæ¶çš„ä¸–ä»£ã€‚ä»–ä»¬æ±‚çœ‹ç¥žè¿¹ï¼Œé™¤äº†çº¦æ‹¿çš„ç¥žè¿¹å¤–ï¼Œå†æ²¡æœ‰ç¥žè¿¹ç»™ä»–ä»¬çœ‹äº†ã€‚çº¦æ‹¿æ€Žæ ·ä¸ºå°¼å°¼å¾®äººæˆäº†ç¥žè¿¹ï¼Œäººå­ä¹Ÿè¦ç…§è¿™æ ·ä¸ºè¿™ä¸–ä»£çš„äººæˆä¸ºç¥žè¿¹ã€‚â€ çº¦æ‹¿çš„ç¥žè¿¹æ˜¯ä»€ä¹ˆï¼Ÿçº¦æ‹¿çš„ç¥žè¿¹å°±æ˜¯æ‚”æ”¹çš„ç¥žè¿¹ã€‚å°¼å°¼å¾®äººå› ä¸ºæ‚”æ”¹ï¼Œè€Œæ˜¯ç¥žæ”¹å˜äº†è¦æ¯ç­ä»–ä»¬çš„è®¡åˆ’ã€‚ç…§æ ·è€¶ç¨£æ¥ä¸–ç•Œä¸Šå°±æ˜¯è¦è®©äººæ‚”æ”¹å½’å‘ä¸Šå¸ï¼Œè€Œè„±ç¦»ç­äº¡ã€‚å°¼å°¼å¾®åŸŽçš„æœ€ç»ˆæ¯ç­ï¼Œæ˜¯åœ¨çº¦æ‹¿ä¹‹åŽçš„å‡ ç™¾å¹´åŽï¼Œç…§æ ·ä¸Šå¸ä¹Ÿåœ¨å®½å®¹å’Œç­‰å¾…ä¸–äººçš„æ‚”æ”¹ã€‚]]></content>
      <categories>
        <category>ä¿¡ä»°</category>
      </categories>
      <tags>
        <tag>ä¿¡ä»°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è´¢åŠ¡è‡ªç”±ä½“ç³»-ä¸‰å…ƒç­–ç•¥]]></title>
    <url>%2F2019%2F12%2F12%2F%E8%B4%A2%E5%8A%A1%E8%87%AA%E7%94%B1%E4%BD%93%E7%B3%BB%2F</url>
    <content type="text"><![CDATA[çŽ°é‡‘æµçŽ°é‡‘æµæŒ‡é€šè¿‡è–ªèµ„ï¼Œå®žä¸šï¼Œç§Ÿé‡‘ç­‰èŽ·å–é•¿æœŸçš„ç¨³å®šçš„æ”¶å…¥ã€‚ ä½Žé£Žé™©æŠ•èµ„ä½Žé£Žé™©å¥—åˆ©ï¼šå°†çŽ°é‡‘æµè¿›è¡Œä½Žé£Žé™©çš„è¯åˆ¸ï¼Œå€ºåˆ¸å¥—åˆ©ï¼› ä¼˜è´¨å¢žå€¼èµ„äº§ï¼ˆæˆ¿åœ°äº§ç­‰ï¼‰]]></content>
      <categories>
        <category>è´¢åŠ¡</category>
      </categories>
      <tags>
        <tag>è´¢åŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šå¤©é“ã€‹]]></title>
    <url>%2F2019%2F12%2F11%2F%E5%A4%A9%E9%81%93%2F</url>
    <content type="text"><![CDATA[å£¹â€œæ‚Ÿï¼Œæ‚Ÿé“ä¼‘è¨€å¤©å‘½ï¼›ä¿®è¡Œå‹¿å–çœŸç»ã€‚ä¸€æ‚²ä¸€å–œä¸€æž¯è£ï¼Œå“ªä¸ªå‰ç”Ÿæ³¨å®šã€‚è¢ˆè£Ÿæœ¬æ— æ¸…å‡€ï¼Œçº¢å°˜ä¸æŸ“æ€§ç©ºï¼Œå¹½å¹½å¤åˆ¹åƒå¹´é’Ÿï¼Œéƒ½æ˜¯ç—´äººè¯´æ¢¦ã€‚â€ è´°â€œä½ æ˜¯ä¸€å—çŽ‰ï¼Œä½†æˆ‘ä¸æ˜¯åŒ äººï¼Œæˆ‘ä¸è¿‡æ˜¯ä¸€ä¸ªç•¥æ‡‚æŠ•æœºä¹‹é“çš„æ··å­ã€‚å……å…¶é‡æŒ£å‡ ä¸ªæ‰“å‘å‡¡å¤«ä¿—å­çš„é“œæ¿ï¼Œä½ è¦æ±‚çš„æ˜¯ä¸€ç§é›„æ€§æ–‡åŒ–çš„é­‚ï¼Œæˆ‘ä¸èƒ½å› ä¸ºä½ æ²¡æœ‰è¯´å‡ºæ¥è€Œå‡è£…ä¸çŸ¥é“ï¼ŒæŽ¥å—ä½ å°±æŽ¥å—äº†ä¸€ç§é«˜åº¦ï¼Œæˆ‘æ²¡æœ‰è¿™ä¸ªè‡ªä¿¡ã€‚â€ åâ€œé€è§†ç¤¾ä¼šä¾æ¬¡æœ‰ä¸‰ä¸ªå±‚é¢ï¼ŒæŠ€æœ¯ã€åˆ¶åº¦ã€æ–‡åŒ–ã€‚å°åˆ°ä¸€ä¸ªäººï¼Œå¤§åˆ°ä¸€ä¸ªå›½å®¶ä¸€ä¸ªæ°‘æ—ä»»ä½•ä¸€ç§å‘½è¿å½’æ ¹åˆ°åº•éƒ½æ˜¯é‚£ç§æ–‡åŒ–å±žæ€§çš„äº§ç‰©ã€‚å¼ºåŠ¿æ–‡åŒ–é€ å°±å¼ºè€…ï¼Œå¼±åŠ¿æ–‡åŒ–é€ å°±å¼±è€…ï¼Œè¿™æ˜¯è§„å¾‹ã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºå¤©é“ï¼Œä¸ä»¥äººçš„æ„å¿—ä¸ºè½¬ç§»ã€‚â€ è‚†â€œå¤©ä¸‹ä¹‹é“è®ºåˆ°æžè‡´ï¼Œç™¾å§“çš„æŸ´ç±³æ²¹ç›ï¼Œäººç”Ÿå†·æš–è®ºåˆ°æžè‡´ï¼Œç”·äººå¥³äººçš„ä¸€ä¸ªæƒ…å­—ã€‚â€ ä¼â€œæ‰€è°“çœŸç»ï¼Œå°±æ˜¯èƒ½å¤Ÿè¾¾åˆ°å¯‚ç©ºæ¶…æ§ƒçš„ç©¶ç«Ÿæ³•é—¨ã€‚å¯æ‚Ÿä¸å¯ä¿®ã€‚ä¿®ä¸ºæˆä½›ï¼Œåœ¨æ±‚ã€‚æ‚Ÿä¸ºæ˜Žæ€§ï¼Œåœ¨çŸ¥ã€‚ä¿®è¡Œä»¥è¡Œåˆ¶æ€§ã€‚æ‚Ÿé“ä»¥æ€§æ–½è¡Œã€‚è§‰ç€ç”±å¿ƒç”Ÿå¾‹ï¼›ä¿®è€…ä»¥å¾‹åˆ¶å¿ƒï¼Œä¸è½æ¶æžœè€…æœ‰ä¿¡æ— è¯ï¼Œä½å› ä½æžœï¼Œä½å¿µä½å¿ƒï¼Œå¦‚æ˜¯ç”Ÿç­ã€‚ä¸æ˜§å› æžœè€…æ— ä½è€Œä½ã€‚æ— æ¬²ä¸æ¬²ã€‚æ— æˆ’æ— ä¸æˆ’ã€‚å¦‚æ˜¯æ¶…æ§ƒã€‚â€ é™†ä½†çŸ¥è¡Œå¥½äº‹ï¼ŒèŽ«è¦é—®å‰ç¨‹ã€‚ æŸ’â€œå¼ºç›—çš„æœ¬è´¨æ˜¯ç ´æ ¼èŽ·å–ï¼Œç ´æ ¼èŽ·å–å’Œç›´æŽ¥èŽ·å–æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µã€‚ä½ ä»¬æ²¡æœ‰è‡ªä¿¡ä¸Žå¼ºè€…åœ¨åŒä¸€ä¸ªè§„åˆ™ä¸‹ç«žäº‰ï¼Œè¿™åªèƒ½è¯´æ˜Žä½ æ˜¯å¼±è€…ï¼Œå› ä¸ºå¼±åŠ¿æ–‡åŒ–æ‰€è¿½æ±‚çš„æœ€é«˜ä»·å€¼å°±æ˜¯ç ´æ ¼èŽ·å–ã€‚æ‰€ä»¥ï¼Œå¼ºç›—çš„é€»è¾‘ä»Žæœ¬è´¨ä¸Šè®²æ˜¯æ‡¦å¼±çš„ç”Ÿå­˜å“²å­¦ï¼Œæ‰€ä»¥ä½ ä¸ç®—å¥½æ±‰ã€‚â€ æŒç¥žå°±æ˜¯é“ï¼Œé“å°±æ˜¯è§„å¾‹ï¼Œè§„å¾‹å¦‚æ¥ï¼Œå®¹ä¸å¾—ä½ æ€è®®ï¼ŒæŒ‰è§„å¾‹åŠžäº‹çš„äººå°±æ˜¯ç¥žã€‚ çŽ–è¦æƒ³åšç‚¹äº‹ï¼Œåˆ«æŠŠè‡ªå·±å¤ªå½“äººï¼Œåˆ«æŠŠåˆ«äººä¸å½“äººã€‚ æ‹¾â€œå¦‚æžœä¸€ä¸ªæ°‘æ—çš„æ–‡åŒ–ä»Žéª¨å­é‡Œå°±æ˜¯å¼±åŠ¿æ–‡åŒ–å±žæ€§ï¼Œæ€Žä¹ˆå¯èƒ½åŽ»æ‰¿è½½å¼ºåŠ¿æ–‡åŒ–çš„æ”¿æ²»ã€ç»æµŽè¡¡é‡ä¸€ç§æ–‡åŒ–å±žæ€§ä¸æ˜¯çœ‹ä»–çš„ç§¯æ·€çš„æ—¶é—´é•¿çŸ­äºŒåçœ‹ä»–ä¸Žå®¢è§‚è§„å¾‹çš„è·ç¦»ã€‚äº”åƒå¹´çš„æ–‡åŒ–æ˜¯å…‰è¾‰ï¼Œæ˜¯ç¿çƒ‚ã€‚è¿™ä¸ªæ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯ï¼Œä¼ ç»Ÿå’Œä¹ ä¿—å¾—è¿‡è¿‡å®¢è§‚è§„å¾‹çš„ç­›å­ã€‚â€ åä¸€â€œå¥³äººæ˜¯å½¢å¼é€»è¾‘çš„å…¸èŒƒï¼Œæ˜¯è¾©è¯é€»è¾‘çš„éšœç¢ï¼Œæˆ‘æ— æ„æ‘§æ®‹å¥³äººï¼Œä¹Ÿä¸æƒ³è¢«å¥³äººæ‘§æ®‹ã€‚â€ åäºŒè¿‡äºŽæ²‰é™çš„å¤–è¡¨ï¼Œæ°æ°è¯ é‡Šç€ä»–å†…å¿ƒçš„æ²‰é‡ã€‚ åä¸‰â€œå¼ºåŠ¿æ–‡åŒ–å°±æ˜¯éµå¾ªäº‹ç‰©è§„å¾‹çš„æ–‡åŒ–ï¼Œå¼±åŠ¿æ–‡åŒ–å°±æ˜¯ä¾èµ–å¼ºè€…å¾—é“çš„æœŸæœ›ç ´æ ¼èŽ·å–çš„æ–‡åŒ–ï¼Œä¹Ÿæ˜¯æœŸæœ›æ•‘ä¸»çš„æ–‡åŒ–ã€‚å¼ºåŠ¿æ–‡åŒ–åœ¨æ­¦å­¦ä¸Šè¢«ç§°ä¸ºç§˜ç¬ˆï¼Œ è€Œå¼±åŠ¿æ–‡åŒ–ç”±äºŽæ˜“å­¦ã€ æ˜“æ‡‚ã€æ˜“ç”¨ã€æˆäº†æµè¡Œå“ç§ã€‚â€ åå››â€œä½ çš„ç”Ÿå­˜çŠ¶æ€ä¸æ˜¯ç—…æ€ï¼Œç”¨ä½›æ•™å¾—è¯è¯´æ˜¯è‡ªæ€§ï¼Œæ— æ‰€æŒ‚ç¢ï¼Œæ˜¯è‡ªåœ¨ã€‚è‡ªåœ¨æ˜¯ä»€ä¹ˆï¼Ÿå°±æ˜¯è§£è„±ã€‚â€ åäº”â€œçº¢é¢œçŸ¥å·±è‡ªå¤æœ‰ä¹‹ï¼Œè¿™è¿˜å¾—çœ‹ç”·äººæ˜¯ä¸æ˜¯ä¸€æ¯å¥½é…’ï¼Œè‡ªå¤åˆæœ‰å‡ ä¸ªç”·äººèƒ½æŠŠè‡ªå·±é…¿åˆ°æ·¡è€Œåˆæ·¡å¾—åè´µï¼Œè¿™ä¸æ˜¯ä¸ºä¹‹è€Œå¯ä¸ºçš„äº‹ï¼Œèƒ½æ··å°±æ··å§ã€‚â€ åå…­â€œè¿™å°±æ˜¯åœ†èžä¸–æ•…ï¼Œä¸æ˜¾å±±ä¸éœ²æ°´ï¼Œå„å¾—å…¶æ‰€ã€‚å¯å“è¡Œè¿™ä¸ªä¸œè¥¿ä»Šå¤©ç¼ºä¸ªè§’ï¼Œæ˜Žå¤©è£‚ä¸ªç¼ï¼Œä¹Ÿå°±ç¦»åé™·ä¸è¿œäº†ã€‚â€ åä¸ƒâ€œè¿™ä¸–ä¸ŠåŽŸæ¥å°±æ²¡æœ‰ä»€ä¹ˆç¥žè¯ã€‚æ‰€è°“çš„ç¥žè¯ï¼Œä¸è¿‡æ˜¯å¸¸äººçš„æ€ç»´æ‰€ä¸æ˜“ç†è§£çš„å¹³å¸¸äº‹ã€‚â€ åå…«â€œä¸­å›½çš„ä¼ ç»Ÿæ–‡åŒ–æ˜¯çš‡æ©æµ©è¡çš„æ–‡åŒ–ï¼Œä»–çš„å®žç”¨æ˜¯ä»¥çš‡å¤©åœ¨ä¸Šä¸ºå…ˆå†³æ¡ä»¶ï¼Œä¸­å›½ä¸ºä»€ä¹ˆç©·ï¼Œç©·å°±ç©·åœ¨å¹¼ç¨šçš„æ€ç»´ï¼Œç©·åœ¨æœŸæœ›æ•‘ä¸»ï¼ŒæœŸæœ›æ•‘æ©çš„æ–‡åŒ–ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªæ¸—é€åˆ°æ°‘æ—éª¨å­é‡Œçš„ä»·å€¼åˆ¤æ–­ä½“ç³»ã€‚å¤ªå¯æ€•äº†ï¼â€ åä¹â€œé©¬å…‹æ€ä¸»ä¹‰å¾—é“ç†å½’æ ¹åˆ°åº•ä¸€å¥è¯ï¼Œå®¢è§‚è§„å¾‹ä¸ä»¥äººçš„æ„å¿—ä¸ºè½¬ç§»ï¼Œä»€ä¹ˆæ˜¯å®¢è§‚è§„å¾‹ï¼Œå½’æ ¹åˆ°åº•ä¹Ÿæ˜¯ä¸€å¥è¯ï¼šä¸€åˆ‡ä»¥æ—¶é—´ï¼Œåœ°ç‚¹å’Œæ¡ä»¶ä¸ºè½¬ç§»ã€‚â€ äºŒåâ€œæˆ‘ä»¬è¿™ä¸ªæ°‘æ—æ€»æ˜¯ä»¥æœ‰æ–‡åŒ–è‡ªå±…ï¼Œå´å¿˜äº†é—®ä¸€å¥ï¼Œæ˜¯æœ‰ä»€ä¹ˆæ–‡åŒ–ï¼Œæ˜¯çœŸç†çœŸç›¸çš„æ–‡åŒ–ï¼Œè¿˜æ˜¯å¼±åŠ¿æ–‡åŒ–ï¼Œæ˜¯ç¬¦åˆäº‹ç‰©è§„å¾‹çš„æ–‡åŒ–è¿˜æ˜¯è¿èƒŒäº‹ç‰©è§„å¾‹çš„æ–‡åŒ–ï¼Œå½’æ ¹åˆ°åº•éƒ½æ˜¯é‚£ç§æ–‡åŒ–å±žæ€§çš„äº§ç‰©ï¼Œä¸ä»¥äººçš„æ„å¿—ä¸ºè½¬ç§»ã€‚â€ äºŒåå£¹å¥³äººä¸Žç”·äººçš„å¯¹è¯æ–¹å¼åªæœ‰ä¸¤ä¸ªï¼Œè¦ä¹ˆèººç€ï¼Œè¦ä¹ˆç«™ç€ã€‚æ‰€ä»¥ï¼Œæˆ‘æ€»æ„¿æ„æŠŠä½ æƒ³è±¡æˆä¸€ä¸ªæµæµªè¡—å¤´çš„é†‰æ±‰ï¼Œæƒ³æ”¶ç•™ä½ ï¼Œå´ä¸æ•¢æƒ³è±¡æ”¶ç•™ä½ çš„é—¨æ§›æœ‰å¤šé«˜ã€‚ä½ è¯´è¿‡ï¼Œç»™ä½ æ‰”å—é¦’å¤´å°±è¡Œï¼Œå¯ä½ è¦çš„è¿™å—é¦’å¤´å¤ªå¤§äº†ï¼Œæˆ‘è¿™ä¸ªç©·å®¶å…»ä¸æ´»ä½ ã€‚ äºŒåè´°â€œä½›è¯´ï¼Œçœ‹å±±æ˜¯å±±ï¼Œçœ‹æ°´æ˜¯æ°´ã€‚æˆ‘åªæ˜¯ä¾ä½›æ³•å¦‚å®žè§‚ç…§ï¼Œçœ‹æ‘©ç™»å¥³éƒŽå®žæ‘©ç™»å¥³éƒŽï¼Œçœ‹çº¢é¢œçŸ¥å·±å®žçº¢é¢œçŸ¥å·±ã€‚â€ äºŒååâ€œå½“æœ‰äººç¬‘è¯è€¶ç¨£æ˜¯å‚»å­çš„æ—¶å€™ï¼Œå…¶å®žè°éƒ½ä¸å‚»ï¼Œä»…ä»…æ˜¯ä¸¤ç§ä»·å€¼è§‚ä¸å…¼å®¹ã€‚â€ äºŒåè‚†â€œæ¯”å¦‚è¯´æ–‡åŒ–äº§ä¸šã€‚æ–‡å­¦ã€å½±è§†æ˜¯æ‰’æ‹‰çµé­‚çš„è‰ºæœ¯ã€‚å¦‚æžœæ–‡å­¦å½±è§†çš„åˆ›ä½œèƒ½ç ´è§£æ›´é«˜æ€ç»´ç©ºé—´çš„æ–‡åŒ–å¯†ç ï¼Œé‚£ä¹ˆä»–çš„åŠŸæ•ˆå°±æ˜¯å¯è¿ªäººçš„è§‰æ‚Ÿï¼Œéœ‡æ’¼äººçš„çµé­‚ï¼Œè¿™æ˜¯ä¼—ç”Ÿæ‰€éœ€ï¼Œå°±æ˜¯åŠŸå¾·ã€å¸‚åœºã€ ååˆ©ã€ç²¾ç¥žæ‹¯æ•‘çš„æš´åˆ©ä¸Žæ¯’å“éº»é†‰å®Œå…¨ç­‰å€¼ã€‚è€Œä¸”ä¸å¿…åƒè´©æ¯’é‚£æ ·è€èŠ±æ‹›æ²¡æœ‰å¿ƒç†æˆæœ¬å’Œæ³•å¾‹é£Žé™©ã€‚â€ äºŒåä¼â€œè‚¡ç¥¨çš„æš´åˆ©å¹¶ä¸äº§ç”Ÿä¸Šäº§ç»è¥ï¼Œè€Œæ˜¯äº§ç”ŸäºŽè‚¡ç¥¨å¸‚åœºæœ¬èº«çš„æŠ•æœºæ€§ã€‚ä»–çš„è¿ä½œåŠ¨åŠ›æ˜¯æŠŠä½ å£è¢‹é‡Œçš„é’±è£…åˆ°æˆ‘çš„å£è¢‹é‡ŒåŽ»ï¼Œä»–çš„è§„å¾‹æ˜¯æŠŠå¤§å¤šæ•°çš„è‚‰å¡«åˆ°æžå°‘æ•°ç‹¼çš„å˜´é‡Œã€‚ç§å‹ŸåŸºé‡‘æ˜¯ä»Žç‹¼å˜´é‡Œå¤¹è‚‰ã€‚è¿™å°±è¦æ±‚ä½ å¾—æ¯”ç‹¼æ›´é»‘æ›´ç‹ ï¼Œä½†æ˜¯å¿ƒç†æˆæœ¬ä¹Ÿæ›´é«˜ï¼Œè€Œä¸”åˆå¤šäº†ä¸€é‡è‚¡å¸‚ä¹‹å¤–çš„é£Žé™©ã€‚ æ‰€ä»¥ï¼Œå¾—é€‚å¯è€Œæ­¢ã€‚â€ äºŒåå…­â€œçµé­‚å½’å®¿æ„Ÿï¼Œ è¿™æ˜¯äººæ€§æœ¬èƒ½çš„éœ€è¦ï¼Œæ˜¯äººæ€§ä½ å¸®ä»–æ‰¾å—å¹²å‡€çš„åœ°æ–¹å½’å®¿çµé­‚ã€‚â€ äºŒåä¸ƒæœ‰é“æ— æœ¯ï¼Œæœ¯å°šå¯æ±‚ï¼Œæœ‰æœ¯æ— é“ï¼Œæ­¢äºŽæœ¯ã€‚ç¥žå³é“ï¼Œé“æ³•è‡ªç„¶,å¦‚æ¥! äºŒåå…«ä»Žå¿ƒç†å­¦è§’åº¦åˆ†æžï¼Œè¶Šæ˜¯å¤´è„‘ç®€ å•çš„äººè¶Šéœ€è¦ç‚¹ç¼€å’Œå¡«å……ï¼Œè€Œå¤´è„‘å¤æ‚çš„ äººï¼Œåˆ™å¯¹ç®€æ´æœ‰ç€ç‰¹æ®Šçš„å¿ƒç†éœ€æ±‚ã€‚ äºŒåä¹æ›´é«˜çš„å“²äººç‹¬å¤„ç€ï¼Œä¸æ˜¯ä»–ä»¬äº«å—å­¤ç‹¬ï¼Œè€Œæ˜¯åœ¨ä»–ä»¬èº«è¾¹æ‰¾ä¸åˆ°åŒç±»ï¼]]></content>
      <categories>
        <category>ä¹¦æ‘˜</category>
      </categories>
      <tags>
        <tag>ä¹¦æ‘˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ”¯ä»˜æ¨¡å—æ¢³ç†]]></title>
    <url>%2F2019%2F12%2F11%2F%E6%94%AF%E4%BB%98%E6%A8%A1%E5%9D%97%E6%A2%B3%E7%90%86%2F</url>
    <content type="text"><![CDATA[æ”¯ä»˜å®å’Œå¾®ä¿¡1ã€æ”¯ä»˜å®appæ”¯ä»˜ 2ã€æ”¯ä»˜å®äºŒç»´ç æ”¯ä»˜ 3ã€è·³è½¬æ”¯ä»˜åœ°å€æ”¯ä»˜ 4ã€æ”¯ä»˜å®WAPæ”¯ä»˜ï¼ˆH5ï¼‰ 5ã€å¾®ä¿¡appæ”¯ä»˜ 6ã€å¾®ä¿¡äºŒç»´ç æ”¯ä»˜ 7ã€å¾®ä¿¡å…¬ä¼—å·JSAPIæ”¯ä»˜ 8ã€å¾®ä¿¡WAPæ”¯ä»˜ï¼ˆH5ï¼‰ 9ã€å¾®ä¿¡å°ç¨‹åºæ”¯ä»˜ å®žçŽ°æž„é€ payå¯¹è±¡payå¯¹è±¡åŒ…å«å±žæ€§æœ‰ï¼šç”¨æˆ·idã€è®¢å•id(List)ã€æ”¯ä»˜é‡‘é¢ã€æ”¯ä»˜çŠ¶æ€ã€æ”¯ä»˜ç±»åž‹ï¼ˆaliqrã€aliurlã€aliwapã€aliappï¼‰ã€æ”¯ä»˜è®¢å•çš„ç±»åž‹ï¼ˆå…·ä½“ç”±ä¸šåŠ¡å®šä¹‰ï¼‰ã€æ”¯ä»˜æ ‡é¢˜ï¼Œå³æ”¯ä»˜æ—¶æ˜¾ç¤ºçš„å•†å“åç§°ã€å•†å“ä¿¡æ¯ã€æœåŠ¡å™¨å¼‚æ­¥é€šçŸ¥é¡µé¢è·¯å¾„ï¼ˆå›žè°ƒåœ°å€ï¼‰ã€é¡µé¢è·³è½¬åŒæ­¥é€šçŸ¥é¡µé¢è·¯å¾„ è‹¥æ˜¯å¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜ï¼Œéœ€åŠ ä¸Šopenidï¼Œip(å¾®ä¿¡æ”¯ä»˜æ‰€éœ€çš„å®¢æˆ·ç«¯ip),prepayIdï¼ˆç”¨äºŽå‘é€æ¨¡æ¿æ¶ˆæ¯ï¼‰ å…¥å‚æ”¯ä»˜å°†payå¯¹è±¡ä¼ å…¥ï¼Œç»„è£…ä¸šåŠ¡å‚æ•°ï¼Œè°ƒå–ç¬¬ä¸‰æ–¹sdkè¿›è¡Œæ”¯ä»˜ã€‚ å›žè°ƒå›žè°ƒç»“æžœï¼Œæ”¯ä»˜æˆåŠŸï¼Œpayå¯¹è±¡å†™å…¥æ”¯ä»˜çŠ¶æ€1å¹¶è¿”å›žã€‚ ä¸šåŠ¡æ•°æ®æ›´æ–°æ ¹æ®å›žè°ƒç»“æžœä»¥åŠæ˜¯å¦è¿”å›žpayå¯¹è±¡ï¼ŒéªŒè¯æ”¯ä»˜æˆåŠŸï¼Œè¿›è¡Œä¸šåŠ¡æ•°æ®æ›´æ–°ã€‚ä¸»è¦æ˜¯è®¢å•çš„è®°å½•,åˆ›å»ºorderå¹¶ä¿å­˜ã€‚ä¸šåŠ¡æ•°æ®æ›´æ–°æˆåŠŸåŽï¼Œpayå¯¹è±¡å†™å…¥æ”¯ä»˜çŠ¶æ€2]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡ã€æ”¯ä»˜å®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šæˆ‘å–œæ¬¢è¾½é˜”çš„åœ°æ–¹ã€‹-æ¯•æ·‘æ•]]></title>
    <url>%2F2019%2F12%2F08%2F%E6%88%91%E5%96%9C%E6%AC%A2%E8%BE%BD%E9%98%94%E7%9A%84%E5%9C%B0%E6%96%B9%2F</url>
    <content type="text"><![CDATA[é›¶æˆ‘ä»¬é‚£æ—¶åªæœ‰åå…­ä¸ƒå²ï¼Œè™½è¯´ä¹Ÿæ„Ÿåˆ°è½»å¾®çš„ä¸é€‚ï¼Œä½†éƒ½åƒå¦è®¤æœ‰å·çªƒè¡Œä¸ºä¸€æ ·å¦è®¤æœ‰é«˜åŽŸååº”ã€‚é‚£è¿˜æ˜¯ä¸€ä¸ªä»¥ä¸ºå¦è®¤å°±èƒ½æŒ½æ•‘ä¸€åˆ‡çš„å¹´çºªã€‚ å£¹å¥¹ä¼šé•¿å¤§ï¼Œè·¨è¿‡å²æœˆçš„æ …æ ï¼Œå‘è¿œæ–¹è·‘åŽ»ã€‚æˆ‘çŸ¥é“å¥¹ä¼šè·Œå¾ˆå¤šè·¤ï¼Œç˜€å¾ˆå¤šä¼¤ï¼Œæ·Œå¾ˆå¤šæ³ªå’Œæ±—ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šæ»´è¡€ã€‚ã€‚ã€‚å¥¹å°†æ¬²ç«æ²é£Žä¹è’¸ä¹ç„™ï¼Œä»Žä¸€é¢—å¨‡å«©çš„é’è±†ç£¨ç»ƒæˆçç ã€‚å¥¹çš„ç›®å…‰å°†ä¸å¤å¤©çœŸï¼Œä½†ä¾ç„¶ä¿æŒçœŸè¯šã€‚å¥¹çš„é¢åºžå…‰æ´ä¸å†ï¼Œä½†ç¬‘å®¹ä¾æ—§ã€‚å¥¹èƒ½ä¸€ç›´ä¸å€¦åœ°è·‘ä¸‹åŽ»ï¼Œå› ä¸ºå¥¹17å²çš„æ—¶å€™ï¼Œå°±å·²ç»åšå®ˆå²—ä½å’ŒèŒè´£ï¼Œå°±å·²ç»æ‡‚å¾—äº†å¥‰çŒ®å’Œå…‰è£ã€‚ åç—…ä½¿æˆ‘ä»¬è¡€æ°”æ–¹åˆšï¼Œä¸å†åŽŸè°…ï¼Œä¸å†æ•¦åŽšï¼Œä¸å†è´¹åŽ„æ³¼èµ–ã€‚ è‚†ä¹Ÿè®¸æ˜¯ç¦»æ­»äº¡è¿‘äº†ï¼Œçœ‹çˆ±æƒ…å°±æ›´çº¯æ­£æ°¸æ’ã€‚å¤§çš„çˆ±ä¹Ÿå¦‚å¤§çš„æ­»ä¸€èˆ¬ï¼Œæ˜¯å®½å¹¿å’ŒæŸ”è½¯çš„ï¼Œäº‘é›¾ä¼¼çš„åŒ…å®¹å¤©åœ°ã€‚ ä¼æˆ‘ä»¬ä¸å¿…åƒå°çš„æ—¶å€™ï¼Œæ€»è¦æŠŠæ•´ç¢—é¢éƒ½åƒå…‰ï¼Œæ‰çŸ¥é“ç¢—åº•ä¸‹å¹¶æ²¡æœ‰å§ä¸ªé¸¡è›‹ã€‚æˆ‘ä»¬ä»¥ä¸ºæ˜¯ç¢—æ¬ºéª—äº†æˆ‘ä»¬ï¼Œå…¶å®žæ˜¯ç¼ºå°‘ç»éªŒã€‚ é™†è¯»ä¹¦æ˜¯ç²¾ç¥žçš„ä¸€æ¬¡ç‰™ç‰™å­¦è¯­ã€‚ æŸ’é¢å¯¹è‹å‡‰æ—·è¿œçš„é«˜åŽŸï¼Œä¿¯å†²è€Œä¸‹ä¹œè§†çš„é¹°çœ¼ï¼Œæ•£ä¹±åœ¨å±±ä¹‹å·…çš„ç—…æ€è„å™¨å’Œç‰§ç¾Šäººé¢œé¢è¡¨çš®å±‚æ°¸æ’çš„ç¬‘å®¹ï¼Œåœ¨é‚£ä¸€çž¬é—´ï¼Œæˆ‘æ˜Žç™½äº†ä»€ä¹ˆå«ä½œç”Ÿå‘½ã€‚ æŒèº«åŽï¼Œæ˜¯ç†Ÿæ‚‰çš„ä¸€åˆ‡ï¼Œå°½ç®¡å®ƒæœ‰ä»¤äººä¸æ‚¦ä¸æ»¡ä»¥è‡´è…æœ½å‘è‡­çš„åœ°æ–¹ï¼Œä½†æˆ‘ä»¬æ›¾é•¿ä¹…åœ°æµ¸æ³¡å…¶ä¸­ï¼Œä¹ æƒ¯æˆè‡ªç„¶äº†ã€‚å³ä½¿æ˜¯ä»¤äººç—›è‹¦çš„ä½“éªŒï¼Œæˆ‘ä»¬ä¹Ÿå·²ç»æ‰¿å—å¹¶å¿è€ï¼Œç†¬è¿‡äº†ã€‚å‘å‰ï¼Œä¸€åˆ‡æ˜¯é™Œç”Ÿå’Œæ˜æš—æš§æ˜§çš„ã€‚ã€‚ã€‚ çŽ–å›žå¤´æ˜¯åœŸï¼Œå‘å‰æ˜¯é‡‘ã€‚ æ‹¾æ–‡åŒ–è¿™ä¸ªä¸œè¥¿ï¼Œåƒèƒƒä¸€æ ·ï¼Œæ¢ä¸æŽ‰çš„ã€‚ åä¸€æ—…é€”å°±æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬ä¼šåœ¨æŸä¸ªåœ°æ–¹ä»¥å‡ºä¹Žæ„æ–™çš„æ–¹å¼é‡åˆ°æŸä¸ªäººï¼Œå½¼æ­¤ä¸€ç‚¹å„¿éƒ½ä¸äº†è§£ï¼Œå´è¯´äº†å¤ªå¤šçš„è¯ã€‚ åäºŒæ—¥å­æ˜¯ä¸€å¤©å¤©åœ°èµ°ï¼Œä¹¦è¦ä¸€é¡µé¡µåœ°è¯»ã€‚æ¸…é£Žæœ—æœˆæ°´æ»´çŸ³ç©¿ï¼Œä¸€å¹´å‡ å¹´ä¸€è¾ˆå­åœ°è¯»ä¸‹åŽ»ã€‚ä¹¦å°±åƒå¾®æ³¢ï¼Œä»Žå†…å‘å¤–éœ‡è¡ç€æˆ‘ä»¬çš„å¿ƒï¼Œå¾å¾åœ°åŠ çƒ­ï¼Œç²¾ç¥žåˆ†å­çš„ç»“æž„å°±æ”¹å˜äº†ï¼Œæˆç†Ÿäº†ï¼Œä¹¦çš„æ•ˆåŠ›æœ€ç»ˆå‡¸æ˜¾å‡ºæ¥ã€‚ åä¸‰å¹´é¾„æ˜¯ç”Ÿå‘½çš„åæ ‡ï¼Œæ‡‚å¾—æ¸æ¸æ¶ˆå¤±å¹¶æ¬£ç„¶è¿ŽæŽ¥è€è¿ˆæ˜¯ä¸€ç§æˆç†Ÿçš„å…‰è£ã€‚ çœŸå®žæœ‰æ—¶å€™ç®€é™‹çš„å¯æ€•ã€‚ é»‘è‰²å¦‚è’è‰è”“å»¶æ»‹ç”Ÿã€‚]]></content>
      <categories>
        <category>ä¹¦æ‘˜</category>
      </categories>
      <tags>
        <tag>ä¹¦æ‘˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šæ—¶é—´ç®€å²ã€‹]]></title>
    <url>%2F2019%2F12%2F08%2F%E6%97%B6%E9%97%B4%E7%AE%80%E5%8F%B2%2F</url>
    <content type="text"><![CDATA[é›¶æˆ‘ä»¬çœ‹åˆ°çš„å®‡å®™ä¹‹æ‰€ä»¥å¦‚æ­¤ï¼Œä¹ƒæ˜¯å› ä¸ºæˆ‘ä»¬çš„å­˜åœ¨â€“äººå­˜åŽŸç† å£¹ä¸ºä½•å®‡å®™æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„è¿™ç§æ ·å­ï¼Ÿç­”æ¡ˆå¾ˆç®€å•ï¼šå¦‚æžœå®ƒä¸æ˜¯è¿™æ ·æ ·å­ï¼Œæˆ‘ä»¬å°±ä¸ä¼šåœ¨è¿™é‡Œã€‚]]></content>
      <categories>
        <category>ä¹¦æ‘˜</category>
      </categories>
      <tags>
        <tag>ä¹¦æ‘˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šä¸”ä»¥ä¼˜é›…è¿‡ä¸€ç”Ÿ:æ¨ç»›ä¼ ã€‹]]></title>
    <url>%2F2019%2F12%2F08%2F%E4%B8%94%E4%BB%A5%E4%BC%98%E9%9B%85%E8%BF%87%E4%B8%80%E7%94%9F-%E6%9D%A8%E7%BB%9B%E4%BC%A0%2F</url>
    <content type="text"><![CDATA[é›¶æˆ‘ä»¬æ›¾å¦‚æ­¤æ¸´æœ›å‘½è¿çš„æ³¢æ¾œï¼Œåˆ°æœ€åŽæ‰å‘çŽ°ï¼šäººç”Ÿæœ€æ›¼å¦™çš„é£Žæ™¯ï¼Œç«Ÿæ˜¯å†…å¿ƒçš„æ·¡å®šä¸Žä»Žå®¹ã€‚ã€‚ã€‚æˆ‘ä»¬æ›¾å¦‚æ­¤æœŸç›¼å¤–ç•Œçš„è®¤å¯ï¼Œåˆ°æœ€åŽæ‰çŸ¥é“ï¼šä¸–ç•Œæ˜¯è‡ªå·±çš„ï¼Œä¸Žä»–äººæ¯«æ— å…³ç³»ã€‚ å£¹æˆ‘å’Œè°éƒ½ä¸äº‰ï¼Œå’Œè°äº‰æˆ‘éƒ½ä¸å±‘ï¼›æˆ‘çˆ±å¤§è‡ªç„¶ï¼Œå…¶æ¬¡å°±æ˜¯è‰ºæœ¯ï¼›æˆ‘åŒæ‰‹çƒ¤ç€ç”Ÿå‘½ä¹‹ç«å–æš–ï¼›ç«èŽäº†ï¼Œæˆ‘ä¹Ÿå‡†å¤‡èµ°äº†ã€‚ åäººé‚£ä¹ˆå£®å¤§ï¼Œæƒä½ã€ç”Ÿæ­»ã€çˆ±æ¨ã€ååˆ©å´åŠ¨æ‘‡å®ƒã€‚æƒä½ã€ç”Ÿæ­»ã€çˆ±æ¨ã€ååˆ©é‚£ä¹ˆå£®å¤§ï¼Œæ—¶é—´å´æ¶ˆç£¨å®ƒã€‚â€“æ—¶é—´æœ€å£®å¤§å—ï¼Ÿä¸ï¼Œæ˜¯â€œå¿ƒâ€ï¼Œå½“å¿ƒç©ºæ— ä¸€ç‰©ï¼Œå®ƒä¾¿æ— è¾¹æ— æ¶¯ã€‚ è‚†æ—¶é—´æ˜¯æ´ªæ°´çŒ›å…½ï¼Œä¹Ÿæ˜¯è§£å¼€é—®é¢˜çš„ç­”æ¡ˆã€‚]]></content>
      <categories>
        <category>ä¹¦æ‘˜</category>
      </categories>
      <tags>
        <tag>ä¹¦æ‘˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šå›´åŸŽã€‹-é’±é’Ÿä¹¦]]></title>
    <url>%2F2019%2F12%2F07%2F%E5%9B%B4%E5%9F%8E-%E9%92%B1%E9%92%9F%E4%B9%A6%2F</url>
    <content type="text"><![CDATA[é›¶å›´åœ¨åŸŽé‡Œçš„äººæƒ³é€ƒå‡ºæ¥ï¼ŒåŸŽå¤–çš„äººæƒ³å†²è¿›åŽ»ï¼Œå¯¹å©šå§»ä¹Ÿç½¢ï¼ŒèŒä¸šä¹Ÿç½¢ï¼Œäººç”Ÿçš„æ„¿æœ›å¤§éƒ½å¦‚æ­¤ã€‚ å£¹å¤©ç”Ÿäººæ˜¯æ•™ä»–ä»¬å­¤ç‹¬çš„ï¼Œä¸€ä¸ªä¸ªè¯¥å„å½’å„ï¼Œè€æ­»ä¸ç›¸å¾€æ¥ã€‚èº«ä½“é‡Œå®¹ä¸ä¸‹çš„ä¸œè¥¿ï¼Œæˆ–æ¶ˆåŒ–ï¼Œæˆ–æŽ’æ³„ï¼Œæ˜¯ä¸ªäººçš„äº‹ï¼›ä¸ºä»€ä¹ˆå¿ƒé‡Œå®¹ä¸ä¸‹çš„æƒ…æ„Ÿï¼Œè¦æ‰¾åŒä¼´æ¥åˆ†æ‘Šï¼Ÿèšåœ¨ä¸€èµ·ï¼ŒåŠ¨ä¸åŠ¨è‡ªå·±å†’çŠ¯äººï¼Œæˆ–è€…äººå¼€ç½ªè‡ªå·±ï¼Œå¥½åƒä¸€åªåˆºçŒ¬ï¼Œåªå¥½ä¿æŒç€å½¼æ­¤é—´çš„è·ç¦»ï¼Œè¦äº²å¯†å›¢ç»“ï¼Œä¸æ˜¯ä½ åˆºç—›æˆ‘çš„è‚‰ï¼Œå°±æ˜¯æˆ‘æ“¦ç ´ä½ çš„çš®ã€‚ï¼ˆå¼•è‡ªç¬¬199é¡µï¼‰ è´°æˆ‘ä»¬ä¸€å¤©è¦æƒ³åˆ°ä¸çŸ¥å¤šå°‘äººï¼Œäº²æˆšã€æœ‹å‹ã€ä»‡äººï¼Œä»¥åŠä¸ç›¸å¹²çš„è§è¿‡é¢çš„äººã€‚çœŸæ­£æƒ³ä¸€ä¸ªäººï¼Œè®°æŒ‚ç€ä»–ï¼Œå¸Œæœ›è·Ÿä»–æŽ¥è¿‘ï¼Œè¿™å°‘å¾—å¾ˆã€‚äººäº‹å¤ªå¿™äº†ï¼Œä¸è®¸æˆ‘ä»¬å…¨ç¥žè´¯æ³¨ï¼Œæ— é—´æ–­åœ°æ€€å¿µä¸€ä¸ªäººã€‚æˆ‘ä»¬ä¸€ç”Ÿå¯¹äºŽæœ€äº²çˆ±çš„äººçš„æƒ³å¿µï¼ŒåŠ èµ·æ¥ææ€•ä¸åˆ°ä¸€ç‚¹é’Ÿï¼Œæ­¤å¤–ä¸è¿‡æ˜¯å¿µå¤´åœ¨ä»–èº«ä¸Šçž¥è¿‡ï¼Œæƒ³åˆ°è€Œå·²ã€‚ï¼ˆå¼•è‡ªç¬¬161é¡µï¼‰ åå†™ä¿¡çš„æ—¶å€™æ€»è§‰å¾—è¿™æ˜¯æ…°æƒ…èŠèƒœäºŽæ— ï¼Œæ¯”ä¸ä¸Šè§é¢ï¼Œåˆ°è§äº†é¢ï¼Œè®¸å¤šè¯å€’å°†ä¸å‡ºæ¥ï¼Œæƒ³è¿˜ä¸å¦‚å†™ä¿¡ã€‚è§é¢æœ‰ç˜¾çš„ï¼›æœ€åˆï¼Œçº¦ç€è§ä¸€é¢å°±èƒ½ä½¿è§é¢çš„å‰åŽå‡ å¤©éƒ½æ²¾ç€å…‰ï¼Œå˜æˆå¥½æ—¥å­æ¸æ¸åœ°æ¨ä¸èƒ½å¤©å¤©è§é¢äº†ï¼›åˆ°åŽæ¥ï¼Œæ¨ä¸èƒ½åˆ»åˆ»è§é¢äº†ã€‚å†™å¥½ä¿¡å‘å‡ºï¼Œä»–æ€»æ‹…å¿ƒè¿™ä¿¡åƒæ”¯ç«ç®­ï¼Œåˆ°è½åœ°æ—¶ï¼Œç«å·²ç†„äº†ï¼Œå¯¹æ–¹æ”¶åˆ°çš„åªæ˜¯ä¸€æ®µæž¯ç‚­ã€‚ï¼ˆå¼•è‡ªç¬¬79é¡µï¼‰ è‚†åƒå’±ä»¬è¿™ç§æ—…è¡Œï¼Œæœ€å®žéªŒå¾—å‡ºä¸€ä¸ªäººçš„å“æ€§ã€‚æ—…è¡Œæ˜¯æœ€åŠ³é¡¿ï¼Œæœ€éº»çƒ¦ï¼Œå«äººæœ¬ç›¸æ¯•çŽ°çš„æ—¶å€™ã€‚ç»è¿‡é•¿æœŸè‹¦æ—…è¡Œè€Œå½¼æ­¤ä¸è®¨åŽŒçš„äººï¼Œæ‰å¯ä»¥ç»“äº¤ä½œæœ‹å‹â€“ä¸”æ…¢ï¼Œä½ å¬æˆ‘è¯´â€“ç»“å©šä»¥åŽçš„èœœæœˆæ—…è¡Œæ˜¯æ¬¡åºé¢ å€’çš„ï¼Œåº”è¯¥å…ˆåŒæ—…è¡Œä¸€ä¸ªæœˆï¼Œä¸€ä¸ªæœˆèˆŸè½¦ä»†ä»†ä»¥åŽï¼ŒåŒæ–¹è¿˜æ²¡æœ‰å½¼æ­¤çœ‹ç ´ï¼Œå½¼æ­¤åŽŒæ¶ï¼Œè¿˜æ²¡æœ‰åµå˜´ç¿»è„¸ï¼Œè¿˜è¦ç»´æŒåŽŸæ¥çš„å©šçº¦ï¼Œè¿™ç§å¤«å¦‡ä¿è¯ä¸ä¼šç¦»å©šï¼ˆå¼•è‡ªç¬¬188é¡µï¼‰ ä¼å¹´é¾„æ˜¯ä¸ªè‡ªç„¶åŽ†ç¨‹é‡Œä¸èƒ½è¶…è¶Šçš„äº‹å®žï¼Œå°±åƒé¥®é£Ÿç”·å¥³ï¼Œåƒæ­»äº¡ã€‚æœ‰æ—¶ï¼Œè¿™ç§å¹´è¾ˆæ„è¯†æ¯”é˜¶çº§æ„è¯†æ›´é²œæ˜Žã€‚éšä½ æ”¿è§ã€å­¦è¯´æˆ–è¶£å‘³å¦‚ä½•ç›¸åŒï¼Œå¹´è¾ˆçš„è€å°‘æ€»æ›¿ä½ éšéšåˆ†äº†ç•Œé™ï¼Œä»¿ä½›ç“·å™¨ä¸Šçš„è£‚çº¹ï¼Œå¹³æ—¶ä¸€ç‚¹æ²¡æœ‰ä»€ä¹ˆï¼Œä¸€æ—¦å—ç€éœ‡åŠ¨ï¼Œè¿™æ¡è£‚çº¹å…ˆæ‰©å¤§æˆè£‚ç¼ã€‚ï¼ˆå¼•è‡ªç¬¬248é¡µï¼‰ é™†å¿ åŽšè€å®žäººçš„æ¶æ¯’ï¼Œåƒé¥­èœé‡Œçš„æ²™ç ¾æˆ–è€…å‡ºéª¨é±¼ç‰‡é‡Œæœªå‡€çš„åˆºï¼Œä¼šç»™äººä¸€ç§ä¸æœŸå¾…çš„ä¼¤ã€‚ï¼ˆå¼•è‡ªç¬¬5é¡µï¼‰ æŸ’å¿ƒé‡Œä»¿ä½›é»‘ç‰¢é‡Œçš„ç¦é”¢è€…æ‘¸ç´¢ç€ä¸€æ ¹ç«æŸ´ï¼Œåˆšåˆ’äº®ï¼Œç«æŸ´å°±ç†„äº†ï¼Œçœ¼å‰æ²¡çœ‹æ¸…çš„ä¸€ç‰‡åˆæ»‘å›žé»‘æš—é‡Œã€‚è­¬å¦‚é»‘å¤œé‡Œä¸¤æ¡èˆ¹ç›¸è¿Žæ“¦è¿‡ï¼Œä¸€ä¸ªåœ¨è¿™æ¡èˆ¹ä¸Šï¼Œçž¥è§å¯¹é¢èˆ¹èˆ±çš„ç¯å…‰æ­£æ˜¯è‡ªå·±æ¢¦å¯ä¸å¿˜çš„è„¸ï¼Œæ²¡æ¥å¾—åŠå«å”¤ï¼Œå½¼æ­¤æ—©è·ç¦»è¿œäº†ã€‚è¿™ä¸€åˆ¹é‚£çš„æŽ¥è¿‘ï¼Œåè§å¾—ç½éš”çš„æ¸ºèŒ«ã€‚ æŒåœ¨æ—…è¡Œçš„æ—¶å€™ï¼Œäººç”Ÿçš„åœ°å¹³çº¿ç§»è¿‘ï¼›åæ±½è½¦åªå‡ ä¸ªé’Ÿç‚¹ï¼Œè€Œä¹˜å®¢ä»¿ä½›ä¸‹åŠä¸–å…¨åœ¨è½¦é‡Œæ¶ˆç£¨çš„ï¼Œåªè¦åå®šäº†ï¼Œèº«å¿ƒåƒå¾—åˆ°å½’å®¿ï¼Œä¸€åŠ³æ°¸é€¸åœ°çœ‹ä¹¦ã€çœ‹æŠ¥ã€æŠ½çƒŸã€åƒä¸œè¥¿ã€çžŒç¡ï¼Œè·¯ç¨‹ä»¥å¤–çš„äº‹æš‚æ—¶ç­‰äºŽèº«åŽèº«å¤–çš„äº‹ã€‚ çŽ–å¯¹äºŽä¸‘äººï¼Œç»†çœ‹æ˜¯ä¸€ç§æ®‹å¿â€“é™¤éžä»–æ˜¯åäººï¼Œä½ è¦æƒ©ç½šä»–ã€‚ æ‹¾å¤©ä¸‹åªæœ‰ä¸¤ç§äººï¼Œè­¬å¦‚ä¸€ä¸²è‘¡è„åˆ°æ‰‹ï¼Œä¸€ç§äººæŒ‘æœ€å¥½çš„å…ˆåƒï¼Œå¦ä¸€ç§äººæŠŠæœ€å¥½çš„ç•™åœ¨æœ€åŽåƒã€‚ç…§ä¾‹ç¬¬ä¸€ç§äººåº”è¯¥ä¹è§‚ï¼Œå› ä¸ºä»–æ¯åƒä¸€é¢—éƒ½æ˜¯åƒå‰©çš„è‘¡è„é‡Œæœ€å¥½çš„ï¼›ç¬¬äºŒç§åº”è¯¥æ‚²è§‚ï¼Œå› ä¸ºä»–æ¯åƒä¸€é¢—éƒ½æ˜¯åƒå‰©çš„è‘¡è„é‡Œæœ€åçš„ã€‚åªä¸è¿‡äº‹å®žä¸Šé€‚å¾—å…¶åï¼Œç¼˜æ•…æ˜¯ç¬¬äºŒç§äººè¿˜æœ‰å¸Œæœ›ï¼Œç¬¬ä¸€ç§äººåªæœ‰å›žå¿†ã€‚ä»Žæ‹çˆ±åˆ°ç™½å¤´å•è€ï¼Œå¥½æ¯”ä¸€ä¸²è‘¡è„ï¼Œæ€»æœ‰æœ€å¥½çš„ä¸€é¢—ï¼Œæœ€å¥½çš„åªæœ‰ä¸€é¢—ï¼Œç•™ç€å¸Œæœ›ï¼Œå¤šä¹ˆå¥½ï¼Ÿä½ å¸Œæœ›çš„å¥½è‘¡è„åœ¨åŽé¢å‘¢ï¼Œæˆ‘ä»¬æ˜¯åè‘¡è„ï¼Œåˆ«å€’äº†ä½ çš„èƒƒå£ã€‚ åä¸€ä¸€ä¸ªäººçš„ç¼ºç‚¹æ­£åƒçŒ´å­çš„å°¾å·´ï¼ŒçŒ´å­è¹²åœ¨åœ°é¢çš„æ—¶å€™ï¼Œå°¾å·´æ˜¯çœ‹ä¸è§çš„ï¼Œç›´åˆ°ä»–å‘æ ‘ä¸Šçˆ¬ï¼Œå°±æŠŠåŽéƒ¨ä¾›å¤§ä¼—çž»ä»°ï¼Œå¯æ˜¯è¿™çº¢è‡€é•¿å°¾å·´æœ¬æ¥å°±æœ‰ï¼Œå¹¶éžåœ°ä½çˆ¬é«˜äº†çš„æ–°æ ‡è¯†ã€‚ åäºŒæˆ‘ä»¬åœ¨ç¤¾ä¼šä¸Šä¸€åˆ‡è¯´è¯å…¨åƒæˆé™¢å­çš„å…¥åœºåˆ¸ï¼Œä¸€è¾¹å°ç€â€œè¿‡æœŸä½œåºŸâ€ï¼Œå¯æ˜¯é‚£ä¸€è¾¹å¹¶ä¸æ³¨æ˜Žä»€ä¹ˆæ—¥æœŸï¼Œéšæˆ‘ä»¬éƒ½çš„ä¾¿å¯ä»¥ææ—©æˆ–å»¶è¿Ÿã€‚ åä¸‰è¿™å°±æ˜¯ç”Ÿç¦»æ­»åˆ«æ¯”ç™¾å¹´å›¢èšå¥½çš„åœ°æ–¹ï¼Œå®ƒèƒ½ä½¿äººä¸è€ã€‚ä¸ä½†é¬¼ä¸ä¼šé•¿å¤§ï¼Œä¸è§äº†å¥½ä¹…çš„æœ‹å‹ï¼Œåœ¨æˆ‘ä»¬å¿ƒç›®é‡Œï¼Œè¿˜æ˜¯å½“å¹´çš„é£Žé‡‡ï¼Œå°½ç®¡æˆ‘ä»¬è‡ªå·±å·²ç»è€äº†ã€‚ åå››ä»–ä¸ªäººçš„å¤©åœ°å¿½ç„¶ä»Žä¸–äººå…¬å…±ç”Ÿæ´»çš„å¤©åœ°é‡Œåˆ†å‡ºæ¥ï¼Œå®›å¦‚ä¸Žæ´»äººå¹½æ˜Žéš”ç»çš„å­¤é¬¼ã€‚çž§ç€é˜³ä¸–çš„ä¹äº‹ï¼Œè‡ªå·±æ’ä¸è¿›ï¼Œçž§ç€é˜³ä¸–çš„å¤ªé˜³ï¼Œè‡ªå·±æ™’ä¸åˆ°ã€‚ åäº”åƒçš„é¥­å¹¶ä¸èƒ½ä½¿ä»–ä»¬ä¸é¥¿ï¼Œåªæ»‹å…»æ ½åŸ¹äº†é¥¿ï¼Œä½¿é¥¿åœ¨ä»–ä»¬èº«ä½“é‡Œé•¿å­˜ï¼Œè€Œä»–ä»¬ä¸è‡³äºŽé¥¿æ­»äº†ä¸å†é¥¿ã€‚]]></content>
      <categories>
        <category>ä¹¦æ‘˜</category>
      </categories>
      <tags>
        <tag>ä¹¦æ‘˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é›†æˆå°ç¨‹åº]]></title>
    <url>%2F2019%2F05%2F18%2F%E9%9B%86%E6%88%90%E5%B0%8F%E7%A8%8B%E5%BA%8F%2F</url>
    <content type="text"><![CDATA[web.xml&lt;servlet&gt; &lt;servlet-name&gt;WeixinMiniServiceServlet&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring/weixinmini-context.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;async-supported&gt;true&lt;/async-supported&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;WeixinMiniServiceServlet&lt;/servlet-name&gt; &lt;url-pattern&gt;/wm/*&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; src/main/resourceså¢žåŠ weixinmimi-context.xmlé…ç½®ï¼Œæ·»åŠ å¯¹modulewxminiåŒ…çš„æ‰«æ &lt;context:component-scan base-package=&quot;com.material.modulewxmini&quot;&gt; &lt;context:include-filter type=&quot;annotation&quot; expression=&quot;org.springframework.web.bind.annotation.ControllerAdvice&quot; /&gt; &lt;/context:component-scan&gt; æ·»åŠ è¿‡æ»¤å™¨WeixinMiniInterceptor weixinåŒ…é‡Œå¢žåŠ WxMiniVoucherServiceåŠWxMinigetInfo WeMiniVoucherç±»]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>ç³»ç»Ÿé›†æˆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸ç”¨å‘½ä»¤]]></title>
    <url>%2F2019%2F05%2F04%2F%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[é¡¹ç›®æ‹·è´1.é¡¹ç›®å³é”® â€“&gt; properties â€“&gt; Web Project Settings â€“&gt; ä¿®æ”¹Context root 2.pom.xml 3.å·¥ä½œç©ºé—´ä¸­æ‰¾åˆ°å½“å‰é¡¹ç›®ä¸‹.projectæ–‡ä»¶ 4.å·¥ä½œç©ºé—´ä¸­æ‰¾åˆ°å½“å‰é¡¹ç›®ï¼Œæ‰“å¼€.settingsæ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°org.eclipse.wst.common.componentæ–‡ä»¶ 5..component hexo è®°å½•1.hexo new â€˜é¡µé¢åç§°â€™ 2.hexo clean æ¸…é™¤ 3.hexo g 4.hexo d 5.hexo server æœ¬åœ°èµ·æœåŠ¡ gitå¤‡ä»½hexoæºç 1ã€cd æœ¬åœ°åˆ†æ”¯é‡Œ12345678910111213141516171819202122232425git branch* hexo master git remote â€“vè‹¥ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œåˆ™å’Œä¸Šæ¸¸å·²æ–­è”ç³»ï¼Œæ‹‰ä¸äº†ä»£ç ä¹ŸæŽ¨ä¸äº†ä»£ç åŠ å…³è”git remote add origin https://github.com/ikangbow/ikangbow.github.iogit fetch originå†æ¬¡æ£€æŸ¥è¿œç¨‹ä»“åº“ï¼Œæ˜¾ç¤ºå¯¹åº”çš„cloneåœ°å€git remote â€“vorigin https://github.com/ikangbow/ikangbow.github.io (fetch)origin https://github.com/ikangbow/ikangbow.github.io (push)æœ¬åœ°git æ–‡ä»¶æ·»åŠ git add .æœ¬åœ°git æäº¤git commit -m "å¤‡æ³¨" 2ã€è¿›å…¥H:\hexo\ikangbow.github.ioç›®å½•å³é”® ç‚¹å‡»é»„æ¡†æœ€åŽä¸€ä¸ªæŒ‰é’®push ä¾æ¬¡ç‚¹å‡»é»„æ¡†çš„æŒ‰é’®å³å¯æäº¤æœ€æ–°ä»£ç åˆ°åˆ°è¿œç¨‹ä»“åº“]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JS]]></title>
    <url>%2F2019%2F03%2F03%2FJS%2F</url>
    <content type="text"><![CDATA[jså§”æ‰˜äº‹ä»¶æ¦‚è¿°ä»€ä¹ˆå«äº‹ä»¶å§”æ‰˜å‘¢ï¼Ÿå®ƒè¿˜æœ‰ä¸€ä¸ªåå­—å«äº‹ä»¶ä»£ç†ï¼ŒJavaScripté«˜çº§ç¨‹åºè®¾è®¡ä¸Šè®²ï¼šäº‹ä»¶å§”æ‰˜å°±æ˜¯åˆ©ç”¨äº‹ä»¶å†’æ³¡ï¼ŒåªæŒ‡å®šä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œå°±å¯ä»¥ç®¡ç†æŸä¸€ç±»åž‹çš„æ‰€æœ‰äº‹ä»¶ã€‚ä¸¾ä¸ªæ —å­ï¼šæœ‰ä¸‰ä¸ªåŒäº‹é¢„è®¡ä¼šåœ¨å‘¨ä¸€æ”¶åˆ°å¿«é€’ã€‚ä¸ºç­¾æ”¶å¿«é€’ï¼Œæœ‰ä¸¤ç§åŠžæ³•ï¼šä¸€æ˜¯ä¸‰ä¸ªäººåœ¨å…¬å¸é—¨å£ç­‰å¿«é€’ï¼›äºŒæ˜¯å§”æ‰˜ç»™å‰å°MMä»£ä¸ºç­¾æ”¶ã€‚çŽ°å®žå½“ä¸­ï¼Œæˆ‘ä»¬å¤§éƒ½é‡‡ç”¨å§”æ‰˜çš„æ–¹æ¡ˆï¼ˆå…¬å¸ä¹Ÿä¸ä¼šå®¹å¿é‚£ä¹ˆå¤šå‘˜å·¥ç«™åœ¨é—¨å£å°±ä¸ºäº†ç­‰å¿«é€’ï¼‰ã€‚å‰å°MMæ”¶åˆ°å¿«é€’åŽï¼Œå¥¹ä¼šåˆ¤æ–­æ”¶ä»¶äººæ˜¯è°ï¼Œç„¶åŽæŒ‰ç…§æ”¶ä»¶äººçš„è¦æ±‚ç­¾æ”¶ï¼Œç”šè‡³ä»£ä¸ºä»˜æ¬¾ã€‚è¿™ç§æ–¹æ¡ˆè¿˜æœ‰ä¸€ä¸ªä¼˜åŠ¿ï¼Œé‚£å°±æ˜¯å³ä½¿å…¬å¸é‡Œæ¥äº†æ–°å‘˜å·¥ï¼ˆä¸ç®¡å¤šå°‘ï¼‰ï¼Œå‰å°MMä¹Ÿä¼šåœ¨æ”¶åˆ°å¯„ç»™æ–°å‘˜å·¥çš„å¿«é€’åŽæ ¸å®žå¹¶ä»£ä¸ºç­¾æ”¶ã€‚ è¿™é‡Œå…¶å®žè¿˜æœ‰2å±‚æ„æ€çš„ï¼š ç¬¬ä¸€ï¼ŒçŽ°åœ¨å§”æ‰˜å‰å°çš„åŒäº‹æ˜¯å¯ä»¥ä»£ä¸ºç­¾æ”¶çš„ï¼Œå³ç¨‹åºä¸­çš„çŽ°æœ‰çš„domèŠ‚ç‚¹æ˜¯æœ‰äº‹ä»¶çš„ï¼› ç¬¬äºŒï¼Œæ–°å‘˜å·¥ä¹Ÿæ˜¯å¯ä»¥è¢«å‰å°MMä»£ä¸ºç­¾æ”¶çš„ï¼Œå³ç¨‹åºä¸­æ–°æ·»åŠ çš„domèŠ‚ç‚¹ä¹Ÿæ˜¯æœ‰äº‹ä»¶çš„ã€‚ ä¸ºä»€ä¹ˆè¦ç”¨äº‹ä»¶å§”æ‰˜ä¸€èˆ¬æ¥è¯´ï¼Œdoméœ€è¦æœ‰äº‹ä»¶å¤„ç†ç¨‹åºï¼Œæˆ‘ä»¬éƒ½ä¼šç›´æŽ¥ç»™å®ƒè®¾äº‹ä»¶å¤„ç†ç¨‹åºå°±å¥½äº†ï¼Œé‚£å¦‚æžœæ˜¯å¾ˆå¤šçš„doméœ€è¦æ·»åŠ äº‹ä»¶å¤„ç†å‘¢ï¼Ÿæ¯”å¦‚æˆ‘ä»¬æœ‰100ä¸ªliï¼Œæ¯ä¸ªliéƒ½æœ‰ç›¸åŒçš„clickç‚¹å‡»äº‹ä»¶ï¼Œå¯èƒ½æˆ‘ä»¬ä¼šç”¨forå¾ªçŽ¯çš„æ–¹æ³•ï¼Œæ¥éåŽ†æ‰€æœ‰çš„liï¼Œç„¶åŽç»™å®ƒä»¬æ·»åŠ äº‹ä»¶ï¼Œé‚£è¿™ä¹ˆåšä¼šå­˜åœ¨ä»€ä¹ˆå½±å“å‘¢ï¼Ÿ åœ¨JavaScriptä¸­ï¼Œæ·»åŠ åˆ°é¡µé¢ä¸Šçš„äº‹ä»¶å¤„ç†ç¨‹åºæ•°é‡å°†ç›´æŽ¥å…³ç³»åˆ°é¡µé¢çš„æ•´ä½“è¿è¡Œæ€§èƒ½ï¼Œå› ä¸ºéœ€è¦ä¸æ–­çš„ä¸ŽdomèŠ‚ç‚¹è¿›è¡Œäº¤äº’ï¼Œè®¿é—®domçš„æ¬¡æ•°è¶Šå¤šï¼Œå¼•èµ·æµè§ˆå™¨é‡ç»˜ä¸Žé‡æŽ’çš„æ¬¡æ•°ä¹Ÿå°±è¶Šå¤šï¼Œå°±ä¼šå»¶é•¿æ•´ä¸ªé¡µé¢çš„äº¤äº’å°±ç»ªæ—¶é—´ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ€§èƒ½ä¼˜åŒ–çš„ä¸»è¦æ€æƒ³ä¹‹ä¸€å°±æ˜¯å‡å°‘DOMæ“ä½œçš„åŽŸå› ï¼›å¦‚æžœè¦ç”¨äº‹ä»¶å§”æ‰˜ï¼Œå°±ä¼šå°†æ‰€æœ‰çš„æ“ä½œæ”¾åˆ°jsç¨‹åºé‡Œé¢ï¼Œä¸Ždomçš„æ“ä½œå°±åªéœ€è¦äº¤äº’ä¸€æ¬¡ï¼Œè¿™æ ·å°±èƒ½å¤§å¤§çš„å‡å°‘ä¸Ždomçš„äº¤äº’æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ï¼› æ¯ä¸ªå‡½æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯å¯¹è±¡å°±ä¼šå ç”¨å†…å­˜ï¼Œå¯¹è±¡è¶Šå¤šï¼Œå†…å­˜å ç”¨çŽ‡å°±è¶Šå¤§ï¼Œè‡ªç„¶æ€§èƒ½å°±è¶Šå·®äº†ï¼ˆå†…å­˜ä¸å¤Ÿç”¨ï¼Œæ˜¯ç¡¬ä¼¤ï¼Œå“ˆå“ˆï¼‰ï¼Œæ¯”å¦‚ä¸Šé¢çš„100ä¸ªliï¼Œå°±è¦å ç”¨100ä¸ªå†…å­˜ç©ºé—´ï¼Œå¦‚æžœæ˜¯1000ä¸ªï¼Œ10000ä¸ªå‘¢ï¼Œé‚£åªèƒ½è¯´å‘µå‘µäº†ï¼Œå¦‚æžœç”¨äº‹ä»¶å§”æ‰˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åªå¯¹å®ƒçš„çˆ¶çº§ï¼ˆå¦‚æžœåªæœ‰ä¸€ä¸ªçˆ¶çº§ï¼‰è¿™ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ“ä½œï¼Œè¿™æ ·æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªå†…å­˜ç©ºé—´å°±å¤Ÿäº†ï¼Œæ˜¯ä¸æ˜¯çœäº†å¾ˆå¤šï¼Œè‡ªç„¶æ€§èƒ½å°±ä¼šæ›´å¥½ã€‚ äº‹ä»¶å§”æ‰˜åŽŸç†äº‹ä»¶å§”æ‰˜æ˜¯åˆ©ç”¨äº‹ä»¶çš„å†’æ³¡åŽŸç†æ¥å®žçŽ°çš„ï¼Œä½•ä¸ºäº‹ä»¶å†’æ³¡å‘¢ï¼Ÿå°±æ˜¯äº‹ä»¶ä»Žæœ€æ·±çš„èŠ‚ç‚¹å¼€å§‹ï¼Œç„¶åŽé€æ­¥å‘ä¸Šä¼ æ’­äº‹ä»¶ï¼Œä¸¾ä¸ªä¾‹å­ï¼šé¡µé¢ä¸Šæœ‰è¿™ä¹ˆä¸€ä¸ªèŠ‚ç‚¹æ ‘ï¼Œdiv&gt;ul&gt;li&gt;a;æ¯”å¦‚ç»™æœ€é‡Œé¢çš„aåŠ ä¸€ä¸ªclickç‚¹å‡»äº‹ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹ä»¶å°±ä¼šä¸€å±‚ä¸€å±‚çš„å¾€å¤–æ‰§è¡Œï¼Œæ‰§è¡Œé¡ºåºa&gt;li&gt;ul&gt;divï¼Œæœ‰è¿™æ ·ä¸€ä¸ªæœºåˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç»™æœ€å¤–é¢çš„divåŠ ç‚¹å‡»äº‹ä»¶ï¼Œé‚£ä¹ˆé‡Œé¢çš„ulï¼Œliï¼Œaåšç‚¹å‡»äº‹ä»¶çš„æ—¶å€™ï¼Œéƒ½ä¼šå†’æ³¡åˆ°æœ€å¤–å±‚çš„divä¸Šï¼Œæ‰€ä»¥éƒ½ä¼šè§¦å‘ï¼Œè¿™å°±æ˜¯äº‹ä»¶å§”æ‰˜ï¼Œå§”æ‰˜å®ƒä»¬çˆ¶çº§ä»£ä¸ºæ‰§è¡Œäº‹ä»¶ã€‚ å®žçŽ°ç»™æŒ‡å®šli åŠ ä¸Šclasså±žæ€§ class=â€liShowâ€ $(&quot;.test&quot;).on(&quot;click&quot;,&quot;.liShow&quot;,function() { //èŽ·å–åˆ°å½“å‰ç‚¹å‡»äº‹ä»¶çš„å±žæ€§id var thisId = $(this).attr(&apos;data-id&apos;); //æ‰§è¡Œäº‹ä»¶ })]]></content>
      <categories>
        <category>JS</category>
      </categories>
      <tags>
        <tag>JS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é˜¿é‡Œäº‘webåº”ç”¨éƒ¨ç½²]]></title>
    <url>%2F2019%2F02%2F24%2F%E9%98%BF%E9%87%8C%E4%BA%91web%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2%2F</url>
    <content type="text"><![CDATA[é˜¿é‡Œäº‘æœåŠ¡å™¨ é˜¿é‡Œäº‘æœåŠ¡å™¨çš„æ³¨å†ŒåŠç”³è¯· æ·»åŠ å®‰å…¨ç»„è§„åˆ™ã€‚å®‰å…¨ç»„åœ¨äº‘ç«¯æä¾›ç±»ä¼¼è™šæ‹Ÿé˜²ç«å¢™åŠŸèƒ½ï¼Œç”¨äºŽè®¾ç½®å•ä¸ªæˆ–å¤šä¸ª ECS å®žä¾‹çš„ç½‘ç»œè®¿é—®æŽ§åˆ¶ï¼Œå®ƒæ˜¯é‡è¦çš„å®‰å…¨éš”ç¦»æ‰‹æ®µã€‚åœ¨åˆ›å»º ECS å®žä¾‹æ—¶ï¼Œå¿…é¡»é€‰æ‹©ä¸€ä¸ªå®‰å…¨ç»„ã€‚æ‚¨è¿˜å¯ä»¥æ·»åŠ å®‰å…¨ç»„è§„åˆ™ï¼Œå¯¹è¯¥å®‰å…¨ç»„ä¸‹çš„æ‰€æœ‰ ECS å®žä¾‹çš„å‡ºæ–¹å‘å’Œå…¥æ–¹å‘è¿›è¡Œç½‘ç»œæŽ§åˆ¶ã€‚ è‹¥æ²¡æœ‰é…ç½®å®‰å…¨ç»„è§„åˆ™ï¼Œç›´æŽ¥åœ¨æœ¬åœ°pingæœåŠ¡å™¨ï¼Œç»“æžœpingä¸é€šï¼Œsshä¹Ÿè¿žä¸ä¸Šã€‚ é»˜è®¤å®‰å…¨ç»„ä¸­çš„é»˜è®¤è§„åˆ™ä»…è®¾ç½®é’ˆå¯¹ICMPåè®®ã€SSH 22ç«¯å£ã€RDP 3389ç«¯å£ã€HTTP 80ç«¯å£å’ŒHTTPS 443ç«¯å£çš„å…¥æ–¹å‘è§„åˆ™ã€‚ç½‘ç»œç±»åž‹ä¸åŒï¼Œå®‰å…¨ä¸”è§„åˆ™ä¸åŒã€‚ å®‰å…¨ç»„å¸¸ç”¨é…ç½® ä¾‹å¦‚ï¼šredisç«¯å£6379/mongoæ•°æ®åº“ç«¯å£27017/mysqlç«¯å£3306/ æœåŠ¡å™¨çŽ¯å¢ƒéƒ¨ç½² ä½¿ç”¨shellå·¥å…·ä¸Šä¼  JDKï¼›å®‰è£…svnï¼Œå®‰è£…mavenï¼›æ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ä¸Šä¼ tomcatã€mongoã€rediså®‰è£…åŒ…ã€‚ é…ç½®çŽ¯å¢ƒå˜é‡ javaçŽ¯å¢ƒå˜é‡ JAVA_HOME=/usr/local/jdk1.8.0_162 export JRE_HOME=/usr/local/jdk1.8.0_162/jre export CLASSPATH=.:$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$JAVA_HOME:$PATH:$MAVEN_HOME/bin export MAVEN_HOME=/usr/local/maven/apache-maven-3.5.4 redisé…ç½® æ‰¾åˆ°redis.confæ–‡ä»¶å°†bind 127.0.0.1æ³¨é‡Šï¼Œæ”¹ä¸ºbind 0.0.0.0è¿™æ ·å°±å¯ä»¥æ”¯æŒè¿œç¨‹è¿žæŽ¥ æ‰¾åˆ°requirepass è®¾ç½®redisç™»å½•å¯†ç  mongoé…ç½® æ‰¾åˆ°mongo.confé…ç½®authå…ˆè®¾ç½®false port=27017 logpath=/airthink/mongodb-linux-x86_64-3.6.3/mongod.log pidfilepath=/airthink/mongodb-linux-x86_64-3.6.3/mongod.pid logappend=true fork=true maxConns=3000 dbpath=/airthink/mongodb-linux-x86_64-3.6.3/data auth=false ./mongodb-linux-x86_64-3.6.3/bin/mongo è¿›å…¥mongo shell åˆ›å»ºè¶…çº§ç®¡ç†å‘˜adminè´¦æˆ· use admin db.createUser( { user: &quot;admin&quot;, pwd: &quot;123456&quot;, roles: [ { role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; } ] } ) çŽ°åœ¨å¯ç”¨auth å°†é…ç½®æ–‡ä»¶ä¸­auth=false æ”¹ä¸º auth=true use admin db.auth(&apos;admin&apos;,&apos;123456&apos;);æŽˆæƒ åˆ›å»ºæ•°æ®åº“ db.createUser({user:&quot;ç”¨æˆ·å&quot;,pwd:&quot;å¯†ç &quot;,roles:[{role:&quot;readWrite&quot;,db:&quot;é¡¹ç›®å&quot;}]}) éƒ¨ç½²webé¡¹ç›®åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨svnå‘½ä»¤svn checkout svn://è·¯å¾„(ç›®å½•æˆ–æ–‡ä»¶çš„å…¨è·¯å¾„) é¦–æ¬¡checkoutå‡ºé¡¹ç›®åŽï¼Œè¿è¡Œè‡ªåŠ¨å‘å¸ƒè„šæœ¬ï¼Œåˆ é™¤å¼€å‘é…ç½®æ–‡ä»¶ï¼Œæ›¿æ¢ç”Ÿäº§é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨mvnæ‰“åŒ…ï¼Œå°†waråŒ…å¤åˆ¶åˆ°tomcatçš„webappä¸‹ï¼Œé‡å¯tomcatã€‚ é—®é¢˜Linuxæ‰§è¡Œ.shæ–‡ä»¶ï¼Œæç¤ºNo such file or directoryçš„é—®é¢˜çš„è§£å†³æ–¹æ³•ï¼š åŽŸå› ï¼šåœ¨windowsä¸­å†™å¥½shellè„šæœ¬æµ‹è¯•æ­£å¸¸ï¼Œä½†æ˜¯ä¸Šä¼ åˆ° Linux ä¸Šä»¥è„šæœ¬æ–¹å¼è¿è¡Œå‘½ä»¤æ—¶æç¤ºNo such file or directoryé”™è¯¯ï¼Œé‚£ä¹ˆä¸€èˆ¬æ˜¯æ–‡ä»¶æ ¼å¼æ˜¯dosæ ¼å¼çš„ç¼˜æ•…ï¼Œæ”¹æˆunix æ ¼å¼å³å¯ã€‚ä¸€èˆ¬æœ‰å¦‚ä¸‹å‡ ç§ä¿®æ”¹åŠžæ³•ã€‚ ç”¨vimæ‰“å¼€è¯¥shæ–‡ä»¶ï¼Œè¾“å…¥ï¼š:set ffå›žè½¦ï¼Œæ˜¾ç¤ºfileformat=dosï¼Œé‡æ–°è®¾ç½®ä¸‹æ–‡ä»¶æ ¼å¼ï¼š:set ff=unixä¿å­˜é€€å‡º::wqå†æ‰§è¡Œ å…è´¹sshè¯ä¹¦ç”³è¯·åŠé…ç½®å‚è€ƒhttps://help.aliyun.com/knowledge_detail/95496.html?spm=a2c4g.11186623.2.11.53674c07M5nwXN]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaå¼‚å¸¸åŠä½¿ç”¨]]></title>
    <url>%2F2019%2F02%2F02%2FJava%E5%BC%82%E5%B8%B8%E5%8F%8A%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[Javaå¼‚å¸¸Javaå¼‚å¸¸ç±»å±‚æ¬¡ç»“æž„å›¾java å¼‚å¸¸æ˜¯ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å‡ºçŽ°çš„é”™è¯¯ã€‚JavaæŠŠå¼‚å¸¸å½“ä½œå¯¹è±¡æ¥å¤„ç†ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªåŸºç±»java.lang.Throwableä½œä¸ºæ‰€æœ‰å¼‚å¸¸çš„è¶…ç±»ã€‚åœ¨Java APIä¸­å®šä¹‰äº†è®¸å¤šå¼‚å¸¸ç±»,åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œé”™è¯¯Errorå’Œå¼‚å¸¸Exceptionã€‚å…¶ä¸­å¼‚å¸¸ç±»Exceptionåˆåˆ†ä¸ºè¿è¡Œæ—¶å¼‚å¸¸(RuntimeException)å’Œéžè¿è¡Œæ—¶å¼‚å¸¸(éžruntimeException)ï¼Œä¹Ÿç§°ä¹‹ä¸ºä¸æ£€æŸ¥å¼‚å¸¸ï¼ˆUnchecked Exceptionï¼‰å’Œæ£€æŸ¥å¼‚å¸¸ï¼ˆChecked Exceptionï¼‰ã€‚ Errorä¸ŽExceptionErroræ˜¯ç¨‹åºæ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œæ¯”å¦‚OutOfMemoryErrorã€ThreadDeathç­‰ã€‚è¿™äº›å¼‚å¸¸å‘ç”Ÿæ—¶ï¼ŒJavaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸€èˆ¬ä¼šé€‰æ‹©çº¿ç¨‹ç»ˆæ­¢ã€‚Exceptionæ˜¯ç¨‹åºæœ¬èº«å¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œè¿™ç§å¼‚å¸¸åˆ†ä¸¤å¤§ç±»è¿è¡Œæ—¶å¼‚å¸¸å’Œéžè¿è¡Œæ—¶å¼‚å¸¸ã€‚ç¨‹åºä¸­åº”å½“å°½å¯èƒ½åŽ»å¤„ç†è¿™äº›å¼‚å¸¸ã€‚ è¿è¡Œæ—¶å¼‚å¸¸å’Œéžè¿è¡Œæ—¶å¼‚å¸¸1.è¿è¡Œæ—¶å¼‚å¸¸: éƒ½æ˜¯RuntimeExceptionç±»åŠå…¶å­ç±»å¼‚å¸¸ï¼š IndexOutOfBoundsExceptionï¼šç´¢å¼•è¶Šç•Œå¼‚å¸¸ ArithmeticExceptionï¼šæ•°å­¦è®¡ç®—å¼‚å¸¸ NullPointerExceptionï¼šç©ºæŒ‡é’ˆå¼‚å¸¸ ArrayOutOfBoundsExceptionï¼šæ•°ç»„ç´¢å¼•è¶Šç•Œå¼‚å¸¸ ClassNotFoundExceptionï¼šç±»æ–‡ä»¶æœªæ‰¾åˆ°å¼‚å¸¸ ClassCastExceptionï¼šé€ åž‹å¼‚å¸¸ï¼ˆç±»åž‹è½¬æ¢å¼‚å¸¸ï¼‰ è¿™äº›å¼‚å¸¸æ˜¯ä¸æ£€æŸ¥å¼‚å¸¸ï¼ˆUnchecked Exceptionï¼‰ï¼Œç¨‹åºä¸­å¯ä»¥é€‰æ‹©æ•èŽ·å¤„ç†ï¼Œä¹Ÿå¯ä»¥ä¸å¤„ç†ã€‚è¿™äº›å¼‚å¸¸ä¸€èˆ¬æ˜¯ç”±ç¨‹åºé€»è¾‘é”™è¯¯å¼•èµ·çš„ã€‚ 2.éžè¿è¡Œæ—¶å¼‚å¸¸:æ˜¯RuntimeExceptionä»¥å¤–çš„å¼‚å¸¸ï¼Œç±»åž‹ä¸Šéƒ½å±žäºŽExceptionç±»åŠå…¶å­ç±»ã€‚ä»Žç¨‹åºè¯­æ³•è§’åº¦è®²æ˜¯å¿…é¡»è¿›è¡Œå¤„ç†çš„å¼‚å¸¸ï¼Œå¦‚æžœä¸å¤„ç†ï¼Œç¨‹åºå°±ä¸èƒ½ç¼–è¯‘é€šè¿‡ã€‚å¦‚ï¼š IOExceptionï¼šæ–‡ä»¶è¯»å†™å¼‚å¸¸ FileNotFoundExceptionï¼šæ–‡ä»¶æœªæ‰¾åˆ°å¼‚å¸¸ EOFExceptionï¼šè¯»å†™æ–‡ä»¶å°¾å¼‚å¸¸ MalformedURLExceptionï¼šURLæ ¼å¼é”™è¯¯å¼‚å¸¸ SocketExceptionï¼šSocketå¼‚å¸¸ SQLExceptionï¼šSQLæ•°æ®åº“å¼‚å¸¸ å¼‚å¸¸çš„æ•èŽ·å’Œå¤„ç†Javaå¼‚å¸¸çš„æ•èŽ·å’Œå¤„ç†æ˜¯ä¸€ä¸ªä¸å®¹æ˜“æŠŠæ¡çš„äº‹æƒ…ï¼Œå¦‚æžœå¤„ç†ä¸å½“ï¼Œä¸ä½†ä¼šè®©ç¨‹åºä»£ç çš„å¯è¯»æ€§å¤§å¤§é™ä½Žï¼Œ è€Œä¸”å¯¼è‡´ç³»ç»Ÿæ€§èƒ½ä½Žä¸‹ï¼Œç”šè‡³å¼•å‘ä¸€äº›éš¾ä»¥å‘çŽ°çš„é”™è¯¯ã€‚ 1.tryã€catchæ–¹å¼ï¼š try{ //ï¼ˆå°è¯•è¿è¡Œçš„ï¼‰ç¨‹åºä»£ç  }catch(å¼‚å¸¸ç±»åž‹ å¼‚å¸¸çš„å˜é‡å){ //å¼‚å¸¸å¤„ç†ä»£ç  }finally{ //å¼‚å¸¸å‘ç”Ÿï¼Œæ–¹æ³•è¿”å›žä¹‹å‰ï¼Œæ€»æ˜¯è¦æ‰§è¡Œçš„ä»£ç  } tryã€catchã€finallyä¸‰ä¸ªè¯­å¥å—åº”æ³¨æ„çš„é—®é¢˜ç¬¬ä¸€ã€tryã€catchã€finallyä¸‰ä¸ªè¯­å¥å—å‡ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œä¸‰è€…å¯ä»¥ç»„æˆ tryâ€¦catchâ€¦finallyã€tryâ€¦catchã€ tryâ€¦finallyä¸‰ç§ç»“æž„ï¼Œcatchè¯­å¥å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œfinallyè¯­å¥æœ€å¤šä¸€ä¸ªã€‚ç¬¬äºŒã€tryã€catchã€finallyä¸‰ä¸ªä»£ç å—ä¸­å˜é‡çš„ä½œç”¨åŸŸä¸ºä»£ç å—å†…éƒ¨ï¼Œåˆ†åˆ«ç‹¬ç«‹è€Œä¸èƒ½ç›¸äº’è®¿é—®ã€‚å¦‚æžœè¦åœ¨ä¸‰ä¸ªå—ä¸­éƒ½å¯ä»¥è®¿é—®ï¼Œåˆ™éœ€è¦å°†å˜é‡å®šä¹‰åˆ°è¿™äº›å—çš„å¤–é¢ã€‚ç¬¬ä¸‰ã€å¤šä¸ªcatchå—æ—¶å€™ï¼Œåªä¼šåŒ¹é…å…¶ä¸­ä¸€ä¸ªå¼‚å¸¸ç±»å¹¶æ‰§è¡Œcatchå—ä»£ç ï¼Œè€Œä¸ä¼šå†æ‰§è¡Œåˆ«çš„catchå—ï¼Œå¹¶ä¸”åŒ¹é…catchè¯­å¥çš„é¡ºåºæ˜¯ç”±ä¸Šåˆ°ä¸‹ã€‚ 2.æŠ›å¼‚å¸¸ç»™ä¸Šä¸€çº§æ–¹å¼ï¼š public static void demo() throws Exception{ //æŠ›å‡ºä¸€ä¸ªæ£€æŸ¥å¼‚å¸¸ throw new Exception(&quot;æ–¹æ³•demoä¸­çš„Exception&quot;); } ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå…³é”®å­—ï¼Œthrowå’Œthrowså…³é”®å­—throwï¼šæ˜¯ç”¨äºŽæ–¹æ³•ä½“å†…éƒ¨ï¼Œç”¨æ¥æŠ›å‡ºä¸€ä¸ªThrowableç±»åž‹çš„å¼‚å¸¸ã€‚throwsï¼šæ˜¯ç”¨äºŽæ–¹æ³•ä½“å¤–éƒ¨çš„æ–¹æ³•å£°æ˜Žéƒ¨åˆ†ï¼Œç”¨æ¥å£°æ˜Žæ–¹æ³•å¯èƒ½ä¼šæŠ›å‡ºæŸäº›å¼‚å¸¸ã€‚ä»…å½“æŠ›å‡ºäº†æ£€æŸ¥å¼‚å¸¸ï¼Œè¯¥æ–¹æ³•çš„è°ƒç”¨è€…æ‰å¿…é¡»å¤„ç†æˆ–è€…é‡æ–°æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚å½“æ–¹æ³•çš„è°ƒç”¨è€…æ— åŠ›å¤„ç†è¯¥å¼‚å¸¸çš„æ—¶å€™ï¼Œåº”è¯¥ç»§ç»­æŠ›å‡ºã€‚å¼‚å¸¸å¤„ç†æ˜¯ä¸ºäº†ç¨‹åºçš„å¥å£®æ€§ã€‚å¼‚å¸¸èƒ½å¤„ç†å°±å¤„ç†ï¼Œä¸èƒ½å¤„ç†å°±æŠ›å‡ºï¼Œæœ€ç»ˆæ²¡æœ‰å¤„ç†çš„å¼‚å¸¸JVMä¼šè¿›è¡Œå¤„ç†ã€‚å¯¹äºŽä¸€ä¸ªåº”ç”¨ç³»ç»Ÿæ¥è¯´ï¼Œåº”è¯¥æœ‰è‡ªå·±çš„ä¸€å¥—å¼‚å¸¸å¤„ç†æ¡†æž¶ï¼Œè¿™æ ·å½“å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œä¹Ÿèƒ½å¾—åˆ°ç»Ÿä¸€çš„å¤„ç†é£Žæ ¼ï¼Œå°†ä¼˜é›…çš„å¼‚å¸¸ä¿¡æ¯åé¦ˆç»™ç”¨æˆ·ã€‚ Javaå¼‚å¸¸ä½¿ç”¨åœ¨å¼€å‘ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œç›®å‰ç»å¤§å¤šæ•°é‡‡ç”¨MVCæ¨¡å¼ã€‚è€ƒè™‘å¦‚ä¸‹åœºæ™¯ï¼šç³»ç»Ÿæä¾›ä¸€ä¸ªAPIï¼Œç”¨äºŽä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ï¼ŒæœåŠ¡å™¨ç«¯é‡‡ç”¨jsonæ•°æ®äº¤äº’.é¦–å…ˆæˆ‘ä»¬å®šä¹‰BaseExceptionï¼Œç”¨æ¥è¡¨ç¤ºä¸šåŠ¡é€»è¾‘å—ç†å¤±è´¥ï¼Œå®ƒä»…è¡¨ç¤ºæˆ‘ä»¬å¤„ç†ä¸šåŠ¡çš„æ—¶å€™å‘çŽ°æ— æ³•ç»§ç»­æ‰§è¡Œä¸‹åŽ»ã€‚ /** * ä¸šåŠ¡å—ç†å¤±è´¥å¼‚å¸¸ */ public class BaseException extends RuntimeException{ public ServiceException() { super(); } public BaseException(String arg0, Throwable arg1) { super(arg0, arg1); } public BaseException(String arg0) { super(arg0); } public BaseException(Throwable arg0) { super(arg0); } } æŽ¥ä¸‹æ¥Controllerå±‚ @RequestMapping pulic ReturnStatus updateUser(User user){ userService.updateUser(user); ReturnStatus status = new ReturnStatus(ture,&quot;æ›´æ–°æˆåŠŸ&quot;); status.setEntity(user) return status; } å…³äºŽä¸Šè¿°Controllerå†™æ³•ä¹ä¸€çœ‹ä¼šæœ‰ä¸€äº›å†—ä½™ï¼Œå¦‚æžœæ— æ³•ç†è§£ï¼Œè¯·ä»”ç»†ç ”è¯»MVCè®¾è®¡æ¨¡å¼. å…ˆä¸ç®¡serviceï¼Œæˆ‘ä»¬æ¥è€ƒè™‘ä¸‹ã€‚ ä¸€ä¸ªä¸šåŠ¡ç³»ç»Ÿä¸å¯èƒ½ä¸å¯¹ç”¨æˆ·æäº¤çš„æ•°æ®è¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯åŒ…æ‹¬ä¸¤æ–¹é¢ï¼šæœ‰æ•ˆæ€§å’Œåˆæ³•æ€§ æœ‰æ•ˆæ€§: æ¯”å¦‚ç”¨æˆ·æ‰€åœ¨å²—ä½,æ˜¯å¦å±žäºŽæ•°æ®åº“æœ‰è®°å½•çš„å²—ä½ID,å¦‚æžœä¸å­˜åœ¨,æ— æ•ˆ. åˆæ³•æ€§: æ¯”å¦‚ç”¨æˆ·ååªå…è®¸è¾“å…¥æœ€å¤š12ä¸ªå­—ç¬¦,ç”¨æˆ·æäº¤äº†20ä¸ªå­—ç¬¦,ä¸åˆæ³•. æœ‰æ•ˆæ€§æ£€æŸ¥ï¼Œå¯ä»¥äº¤ç»™javaçš„æ ¡éªŒæ¡†æž¶æ‰§è¡Œï¼Œæ¯”å¦‚JSR303ã€‚å‡è®¾ç”¨æˆ·æäº¤çš„æ•°æ®ç»è¿‡éªŒè¯éƒ½åˆæ³•ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›æƒ…å†µæ˜¯ä¸èƒ½è°ƒç”¨ä¿®æ”¹é€»è¾‘çš„ã€‚ è¦ä¿®æ”¹çš„ç”¨æˆ·IDä¸å­˜åœ¨. ç”¨æˆ·è¢«é”å®š,ä¸å…è®¸ä¿®æ”¹. ä¹è§‚é”æœºåˆ¶å‘çŽ°ç”¨æˆ·å·²ç»è¢«è¢«äººä¿®æ”¹è¿‡. ç”±äºŽæŸç§åŽŸå› ,æˆ‘ä»¬çš„ç¨‹åºæ— æ³•ä¿å­˜åˆ°æ•°æ®åº“. ä¸€äº›ç¨‹åºå‘˜é”™è¯¯çš„å¼€å‘äº†ä»£ç ,å¯¼è‡´ä¿å­˜è¿‡ç¨‹ä¸­å‡ºçŽ°å¼‚å¸¸,æ¯”å¦‚NPE. å¯¹äºŽå‰3ç§ï¼Œæˆ‘ä»¬è®¤ä¸ºæ˜¯æœ‰æ•ˆæ€§æ£€æŸ¥å¤±è´¥ï¼Œç¬¬4ç§å±žä¸Žæˆ‘ä»¬æ— æ³•å¤„ç†çš„å¼‚å¸¸ï¼Œç¬¬5ç§å°±æ˜¯ç¨‹åºå‘˜bugã€‚ çŽ°åœ¨çš„é—®é¢˜æ˜¯ï¼Œå‰ä¸‰ç§æƒ…å†µæˆ‘ä»¬å¦‚ä½•é€šçŸ¥ç”¨æˆ·å‘¢? 1.åœ¨ccontroller è°ƒç”¨userServiceçš„checkUserExist()æ–¹æ³•.2.åœ¨controllerç›´æŽ¥ä¹¦å†™ä¸šåŠ¡é€»è¾‘.3.åœ¨serviceå“åº”ä¸€ä¸ªçŠ¶æ€ç æœºåˆ¶,æ¯”å¦‚1 2 3è¡¨ç¤ºé”™è¯¯ä¿¡æ¯,0 è¡¨ç¤ºæ²¡æœ‰ä»»ä½•é”™è¯¯. æ˜¾ç„¶å‰2ç§æ–¹æ³•éƒ½ä¸å¯å–ï¼Œå› ä¸ºMVCè®¾è®¡æ¨¡å¼å‘Šè¯‰æˆ‘ä»¬,controlleræ˜¯ç”¨æ¥æŽ¥æ”¶é¡µé¢å‚æ•°ï¼Œå¹¶ä¸”è°ƒç”¨é€»è¾‘å¤„ç†ï¼Œæœ€åŽç»„ç»‡é¡µé¢å“åº”çš„åœ°æ–¹ã€‚æˆ‘ä»¬ä¸å¯ä»¥åœ¨controllerè¿›è¡Œé€»è¾‘å¤„ç†ï¼Œcontrolleråªåº”è¯¥è´Ÿè´£ç”¨æˆ·APIå…¥å£å’Œå“åº”çš„å¤„ç†(å¦‚è‹¥ä¸ç„¶,æ€è€ƒä¸€ä¸‹å¦‚æžœæœ‰ä¸€å¤©serviceçš„ä»£ç æ‰“åŒ…æˆjaræ”¾åˆ°å¦ä¸€ä¸ªå¹³å°ï¼Œæ²¡æœ‰controlleräº†,è¯¥æ€Žä¹ˆåŠžï¼Ÿ) çŠ¶æ€ç æœºåˆ¶æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå¯æ˜¯å¦‚æ­¤ä¸€æ¥ï¼Œç”¨æˆ·ä¿å­˜é€»è¾‘å˜äº†ï¼Œæ¯”å¦‚å¢žåŠ ä¸€ä¸ªæƒ…å†µï¼Œä¸å…è®¸ä¿®æ”¹å·²ç»ç¦»èŒçš„ç”¨æˆ·ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹controllerçš„ä»£ç ï¼Œä»£ç é‡å¢žåŠ ï¼Œç»´æŠ¤æˆæœ¬å¢žé«˜ï¼Œå¹¶ä¸”è¿˜è€¦åˆäº†serviceï¼Œä¸ç¬¦åˆMVCè®¾è®¡æ¨¡å¼ã€‚ é‚£ä¹ˆæ€Žä¹ˆåŠžå‘¢ï¼ŸçŽ°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸‹serviceä»£ç å¦‚ä½•ç¼–å†™ public void updateUser(User user){ User userOrig = userDao.getUserById(user.getUserById); if(null == userOrig){ throw new BaseException(&quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;); } if(userOrig.isLocked()){ throw new BaseException(&quot;ç”¨æˆ·è¢«é”å®š,ä¸å…è®¸ä¿®æ”¹&quot;); } if(!user.getVersion.equals(userOrig.getVersion)){ throw new BaseException(&quot;ç”¨æˆ·å·²ç»è¢«åˆ«äººä¿®æ”¹,è¯·åˆ·æ–°&quot;); } //TODOä¿å­˜ç”¨æˆ·æ•°æ®... } è¿™æ ·ä¸€æ¥åªè¦æˆ‘ä»¬æ£€æŸ¥åˆ°ä¸å…è®¸ä¿å­˜çš„é¡¹ç›®ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æŽ¥throw ä¸€ä¸ªæ–°çš„å¼‚å¸¸ï¼Œå¼‚å¸¸æœºåˆ¶ä¼šå¸®åŠ©æˆ‘ä»¬ä¸­æ–­ä»£ç æ‰§è¡Œã€‚ æŽ¥ä¸‹æ¥æœ‰2ç§é€‰æ‹©: åœ¨controller ä½¿ç”¨try-catchè¿›è¡Œå¤„ç†. ç›´æŽ¥æŠŠå¼‚å¸¸æŠ›ç»™ä¸Šå±‚æ¡†æž¶ç»Ÿä¸€å¤„ ç¬¬1ç§æ–¹å¼æ˜¯ä¸å¯å–çš„ï¼Œæ³¨æ„æˆ‘ä»¬æŠ›å‡ºçš„BaseExceptionï¼Œå®ƒä»…ä»…é€»è¾‘å¤„ç†å¼‚å¸¸,å¹¶ä¸”æˆ‘ä»¬çš„æ–¹æ³•å‰é¢æ²¡æœ‰å£°æ˜Žthrows BaseExceptionï¼Œè¿™è¡¨ç¤ºä»–æ˜¯ä¸€ä¸ªéžå—æŸ¥å¼‚å¸¸.controllerä¹Ÿæ²¡æœ‰å…³å¿ƒä¼šå‘ç”Ÿä»€ä¹ˆå¼‚å¸¸ã€‚ ä¸ºä»€ä¹ˆä¸å®šä¹‰æˆå—æŸ¥å¼‚å¸¸å‘¢ï¼Ÿå¦‚æžœæ˜¯ä¸€ä¸ªå—æŸ¥å¼‚å¸¸ï¼Œé‚£ä¹ˆæ„å‘³ç€controllerå¿…é¡»è¦å¤„ç†ä½ çš„å¼‚å¸¸ã€‚å¹¶ä¸”å¦‚æžœæœ‰ä¸€å¤©ä½ çš„ä¸šåŠ¡é€»è¾‘å˜äº†ï¼Œå¯èƒ½å¤šä¸€ç§æ£€æŸ¥é¡¹ï¼Œå°±éœ€è¦å¢žåŠ ä¸€ä¸ªå¼‚å¸¸ï¼Œåä¹‹éœ€è¦åˆ é™¤ä¸€ä¸ªå¼‚å¸¸ï¼Œé‚£ä¹ˆä½ çš„æ–¹æ³•ç­¾åä¹Ÿéœ€è¦æ”¹å˜ï¼Œcontrollerä¹Ÿéšä¹‹è¦æ”¹å˜,è¿™åˆå˜æˆäº†ç´§è€¦åˆï¼Œè¿™å’Œç”¨çŠ¶æ€ç 123è¡¨ç¤ºå¤„ç†ç»“æžœæ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚ æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸€ç§æ£€æŸ¥é¡¹å®šä¹‰ä¸€ä¸ªå¼‚å¸¸å—ï¼Ÿå¯ä»¥ï¼Œä½†æ˜¯é‚£æ ·æ˜¾å¾—å¤ªå¤šä½™äº†ã€‚å› ä¸ºä¸šåŠ¡é€»è¾‘å¤„ç†å¤±è´¥çš„æ—¶å€™ï¼Œæ ¹æ®æˆ‘ä»¬éœ€æ±‚ï¼Œæˆ‘ä»¬åªéœ€è¦é€šçŸ¥ç”¨æˆ·å¤±è´¥çš„åŽŸå› (é€šå¸¸åº”è¯¥æ˜¯ä¸€æ®µå­—ç¬¦ä¸²)ï¼Œä»¥åŠæœåŠ¡å™¨å—ç†å¤±è´¥çš„ä¸€ä¸ªçŠ¶æ€ç (æœ‰æ—¶å¯èƒ½ä¸éœ€è¦çŠ¶æ€ç ,è¿™è¦çœ‹ä½ çš„è®¾è®¡äº†)ï¼Œè¿™æ ·è¿™éœ€è¦ä¸€ä¸ªåŒ…å«åŽŸå› å±žæ€§çš„å¼‚å¸¸å³å¯æ»¡è¶³æˆ‘ä»¬éœ€æ±‚ã€‚ æœ€åŽæˆ‘ä»¬å†³å®šè¿™ä¸ªå¼‚å¸¸ç»§æ‰¿è‡ªRuntimeExceptionã€‚å¹¶ä¸”åŒ…å«ä¸€ä¸ªæŽ¥å—ä¸€ä¸ªé”™è¯¯åŽŸå› çš„æž„é€ å™¨ï¼Œè¿™æ ·controllerå±‚ä¹Ÿä¸éœ€è¦çŸ¥é“å¼‚å¸¸ï¼Œåªè¦å…¨å±€æ•èŽ·åˆ°BaseExceptionåšç»Ÿä¸€çš„å¤„ç†å³å¯ï¼Œè¿™æ— è®ºæ˜¯åœ¨struct1,2æ—¶ä»£ï¼Œè¿˜æ˜¯springMVCä¸­ï¼Œç”šè‡³servletå¹´ä»£ï¼Œéƒ½æ˜¯æžä¸ºå®¹æ˜“çš„ï¼ å¼‚å¸¸ä¸æä¾›æ— å‚æž„é€ å™¨ï¼Œå› ä¸ºç»å¯¹ä¸å…è®¸ä½ æŠ›å‡ºä¸€ä¸ªé€»è¾‘å¤„ç†å¼‚å¸¸ï¼Œä½†æ˜¯ä¸æŒ‡æ˜ŽåŽŸå› ï¼Œæƒ³æƒ³çœ‹ï¼Œä½ æ˜¯å¿…é¡»è¦å‘Šè¯‰ç”¨æˆ·ä¸ºä»€ä¹ˆå—ç†å¤±è´¥çš„ï¼ å¦‚æ­¤ä¸€æ¥ï¼Œæˆ‘ä»¬åªéœ€è¦å…¨å±€ç»Ÿä¸€å¤„ç†ä¸‹ BaseException å°±å¯ä»¥äº†ï¼Œå¾ˆå¥½ï¼Œspringä¸ºæˆ‘ä»¬æä¾›äº†ControllerAdviceæœºåˆ¶ï¼Œæœ‰å…³ControllerAdviceï¼Œå¯ä»¥æŸ¥é˜…springMVCä½¿ç”¨æ–‡æ¡£ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š @ControllerAdvice(basePackages = {&quot;com.xxx.xxx.bussiness.xxx&quot;}) public class ModuleControllerAdvice{ public static final Logger LOGGER = LoggerFactory.getLogger(ModuleControllerAdvice.class); public static final Logger BASE_LOGGER = LoggerFactory.getLogger(BaseException.class); /** * ä¸šåŠ¡å—ç†å¤±è´¥ */ @ResponseBody @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR) @ExceptionHandler(BaseException.class) private ReturnStatus handleServiceException(BaseException exception){ String message = &quot;ä¸šåŠ¡å—ç†å¤±è´¥,åŽŸå› ï¼š&quot;+exception.getLocalizedMessage(); SERVICE_LOGGER.info(message); ReturnStatus status = new ReturnStatus(MErrorCode.e2001.code(), MErrorCode.e2001.message());//è‡ªå®šä¹‰æžšä¸¾å¼‚å¸¸ç±» return status; } } åœ¨è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆè½»æ¾çš„å¤„ç†å„ç§æƒ…å†µäº†. æ³¨æ„ä¸€ç‚¹ï¼Œåœ¨è¿™ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†2ä¸ªlogå¯¹è±¡ï¼Œåˆ†åˆ«æŒ‡å‘ BaseException.class å’Œ ModuleControllerAdvice.classã€‚å¹¶ä¸”å¤„ç† BaseExceptionçš„æ—¶å€™ä½¿ç”¨äº†infoçº§åˆ«çš„æ—¥å¿—è¾“å‡ºï¼Œè¿™æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ é¦–å…ˆ,BaseExceptionä¸€å®šè¦å’Œå…¶ä»–çš„ä»£ç é”™è¯¯åˆ†ç¦»,ä¸åº”è¯¥æ··ä¸ºä¸€è°ˆ.å…¶æ¬¡,BaseExceptionå¹¶ä¸ä¸€å®šè¦è®°å½•æ—¥å¿—,æˆ‘ä»¬åº”è¯¥æä¾›ç‹¬ç«‹çš„logå¯¹è±¡,æ–¹ä¾¿å¼€å…³.æŽ¥ä¸‹æ¥ä½ å¯ä»¥åœ¨ä¿®æ”¹ç”¨æˆ·çš„æ—¶å€™æƒ³å®¢æˆ·ç«¯å“åº”è¿™æ ·çš„JSON { code : e2001, message : &quot;ç”¨æˆ·ä¸å­˜åœ¨&quot; } å¦‚æ­¤ä¸€æ¥æ²¡æœ‰ä»»ä½•åœ°æ–¹éœ€è¦å…³å¿ƒå¼‚å¸¸ï¼Œæˆ–è€…ä¸šåŠ¡é€»è¾‘æ ¡éªŒå¤±è´¥çš„æƒ…å†µã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥å¾—åˆ°å¾ˆå‹å¥½çš„é”™è¯¯æç¤ºã€‚å¦‚æžœä½ åªéœ€è¦ä¸€å¥æ¦‚æ‹¬ï¼Œé‚£ä¹ˆç›´æŽ¥å®šä¹‰ä¸€ä¸ªç®€å•çš„å¼‚å¸¸ï¼Œç”¨äºŽä¸­æ–­å¤„ç†ï¼Œå¹¶ä¸”ä¸Žç”¨æˆ·ä¿æŒå‹å¥½äº¤äº’å³å¯ã€‚å¦‚æžœä¸å¯èƒ½ä¸€å¥è¯æè¿°æ¸…æ¥šï¼Œå¹¶ä¸”åŒ…å«é™„åŠ ä¿¡æ¯ï¼Œæ¯”å¦‚éœ€è¦åœ¨æ—¥å¿—æˆ–è€…æ•°æ®åº“è®°å½•æ¶ˆæ¯IDï¼Œæ­¤æ—¶å¯èƒ½ä¸“é—¨é’ˆå¯¹è¿™ç§é‡è¦/å¤æ‚ä¸šåŠ¡åˆ›å»ºç‹¬ç«‹å¼‚å¸¸ã€‚ä¸Šè¿°ä¸¤ç§æƒ…å†µå› ä¸ºwebç³»ç»Ÿï¼Œæ˜¯ç”¨æˆ·å‘èµ·è¯·æ±‚ä¹‹åŽéœ€è¦ç­‰å¾…ç¨‹åºç»™äºˆå“åº”ç»“æžœçš„ã€‚ å¦‚æžœæ˜¯åŽå°ä½œä¸šï¼Œæˆ–è€…å¤æ‚ä¸šåŠ¡éœ€è¦è¿½æº¯æ€§ã€‚è¿™ç§é€šå¸¸ç”¨æµç¨‹åˆ¤æ–­è¯­å¥æŽ§åˆ¶ï¼Œè¦ç”¨å¼‚å¸¸å¤„ç†ã€‚æˆ‘ä»¬è®¤ä¸ºè¿™äº›æµç¨‹åˆ¤æ–­ä¸€å®šåœ¨ä¸€ä¸ªåŽŸå­æ€§å¤„ç†ä¸­ã€‚å¹¶ä¸”æ£€æŸ¥åˆ°(ä¸æ˜¯é‡åˆ°)çš„é—®é¢˜(ä¸æ˜¯å¼‚å¸¸)éœ€è¦è®°å½•åˆ°ç”¨æˆ·å¯å‹å¥½æŸ¥çœ‹çš„æ—¥å¿—ã€‚è¿™ç§æƒ…å†µå±žäºŽå¤„ç†åé¦ˆï¼Œå¹¶ä¸å«å¼‚å¸¸ã€‚ ç»¼ä¸Šï¼Œç¬”è€…é€šå¸¸åˆ†ä¸ºå¦‚ä¸‹å‡ ç±»:é€»è¾‘å¼‚å¸¸ï¼Œè¿™ç±»å¼‚å¸¸ç”¨äºŽæè¿°ä¸šåŠ¡æ— æ³•æŒ‰ç…§é¢„æœŸçš„æƒ…å†µå¤„ç†ä¸‹åŽ»ï¼Œå±žäºŽç”¨æˆ·åˆ¶é€ çš„æ„å¤–ã€‚ä»£ç é”™è¯¯ï¼Œè¿™ç±»å¼‚å¸¸ç”¨äºŽæè¿°å¼€å‘çš„ä»£ç é”™è¯¯ï¼Œä¾‹å¦‚NPEï¼ŒILLARGï¼Œéƒ½å±žäºŽç¨‹åºå‘˜åˆ¶é€ çš„BUGã€‚ä¸“æœ‰å¼‚å¸¸ï¼Œå¤šç”¨äºŽç‰¹å®šä¸šåŠ¡åœºæ™¯ï¼Œç”¨äºŽæè¿°æŒ‡å®šä½œä¸šå‡ºçŽ°æ„å¤–æƒ…å†µæ— æ³•é¢„å…ˆå¤„ç†ã€‚å„ç±»å¼‚å¸¸å¿…é¡»è¦æœ‰å•ç‹¬çš„æ—¥å¿—è®°å½•ï¼Œæˆ–è€…åˆ†çº§ï¼Œåˆ†ç±»å¯ç®¡ç†ã€‚æœ‰çš„æ—¶å€™ä»…ä»…æƒ³ç»™ä¸‰æ–¹è¿ç»´çœ‹åˆ°é€»è¾‘å¼‚å¸¸ã€‚ æ³¨æ„ å¼‚å¸¸è®¾è®¡çš„åˆè¡·æ˜¯è§£å†³ç¨‹åºè¿è¡Œä¸­çš„å„ç§æ„å¤–æƒ…å†µï¼Œä¸”å¼‚å¸¸çš„å¤„ç†æ•ˆçŽ‡æ¯”æ¡ä»¶åˆ¤æ–­æ–¹å¼è¦ä½Žå¾ˆå¤šã€‚ä¸Šé¢è¿™å¥è¯å‡ºè‡ª&lt;javaç¼–ç¨‹æ€æƒ³&gt;ï¼Œä½†æ˜¯æˆ‘ä»¬æ€è€ƒå¦‚ä¸‹å‡ ç‚¹ï¼šä¸šåŠ¡é€»è¾‘æ£€æŸ¥ï¼Œä¹Ÿæ˜¯æ„å¤–æƒ…å†µUnknownHostExceptionï¼Œè¡¨ç¤ºæ‰¾ä¸åˆ°è¿™æ ·çš„ä¸»æœºï¼Œè¿™ä¸ªå¼‚å¸¸å’ŒNoUserExceptionæœ‰ä»€ä¹ˆåŒºåˆ«ä¹ˆï¼Ÿæ¢è¨€ä¹‹ï¼Œæ²¡æœ‰è¿™æ ·çš„ä¸»æœºæ˜¯å¼‚å¸¸ï¼Œæ²¡æœ‰è¿™æ ·çš„ç”¨æˆ·ä¸æ˜¯å¼‚å¸¸äº†ä¹ˆï¼Ÿæ‰€ä»¥ä¸€å®šè¦å¼„æ˜Žç™½ä»€ä¹ˆæ˜¯ç”¨å¼‚å¸¸æ¥æŽ§åˆ¶é€»è¾‘ï¼Œä»€ä¹ˆæ˜¯å®šä¹‰ç¨‹åºå¼‚å¸¸ã€‚ å¼‚å¸¸å¤„ç†æ•ˆçŽ‡å¾ˆä½Ž ä¹¦ä¸­æ‰€ç¤ºçš„ä¾‹å­ï¼Œæ˜¯åœ¨å¾ªçŽ¯ä¸­å¤§é‡ä½¿ç”¨try-catchè¿›è¡Œæ£€æŸ¥ï¼Œä½†æ˜¯ä¸šåŠ¡ç³»ç»Ÿï¼Œç”¨æˆ·å‘èµ·è¯·æ±‚çš„æ¬¡æ•°ä¸Žè¯¥åœºæ™¯å¤©å£¤åœ°åˆ«ã€‚æ·˜å®çš„11`11æ˜¯ä¸ªå¾ˆå¥½çš„åä¾‹ã€‚ä½†æ˜¯è¯·ä½ çš„ç³»ç»Ÿä¸Šåˆ°è¿™ä¸ªçº§åˆ«å†è€ƒè™‘è¿™ç§é—®é¢˜ã€‚ç³»ç»Ÿæœ‰åƒä¸‡å¹¶å‘ï¼Œä¸å¯èƒ½è¿˜åŽ»è€ƒè™‘è¿™äº›ä¸­è§„ä¸­çŸ©çš„æŒ‰éƒ¨å°±ç­çš„æ–¹å¼ï¼Œåˆ«å¿˜äº†MVCæœ¬æ¥å°±æµªè´¹å¾ˆå¤šèµ„æºï¼Œä»£ç é‡å¢žåŠ å¾ˆå¤šã€‚ä¸šåŠ¡ç³»ç»Ÿä¹Ÿå­˜åœ¨å¾ˆå¤šå·¨é‡ä»»åŠ¡å¤„ç†çš„æƒ…å†µã€‚ä½†æ˜¯é‚£äº›ä»»åŠ¡éƒ½æ˜¯åŽŸå­æ€§çš„ï¼ŒçŽ°åœ¨MVCä¸­çš„controllerå’Œserviceå¯ä¸æ˜¯åŽŸå­æ€§çš„ï¼Œä¸ç„¶ä¸ºä»€ä¹ˆè¦åŒºåˆ†è¿™ä¹ˆå¤šå±‚å‘¢ã€‚å¦‚æžœé‚£ä¹ˆåœ¨ä¹Žæ•ˆçŽ‡ï¼Œè€ƒè™‘ä¸‹é‡å†™Throwableçš„fillStackTraceæ–¹æ³•ã€‚ä½ è¦çŸ¥é“å¼‚å¸¸çš„å¼€é”€å¤§åˆ°åº•å¤§åœ¨ä»€ä¹ˆåœ°æ–¹ï¼ŒfillStackTraceæ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼Œä¼šå¡«å……å¼‚å¸¸ç±»å†…éƒ¨çš„è¿è¡Œè½¨è¿¹ã€‚ ä¸è¦ç”¨å¼‚å¸¸è¿›è¡Œä¸šåŠ¡é€»è¾‘å¤„ç† æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­: public void processMessage(Message&lt;String&gt; message){ try{ //å¤„ç†æ¶ˆæ¯éªŒè¯ //å¤„ç†æ¶ˆæ¯è§£æž //å¤„ç†æ¶ˆæ¯å…¥åº“ }catch(ValidateException e){ //éªŒè¯å¤±è´¥ }catch(ParseException e){ //è§£æžå¤±è´¥ }catch(PersistException e){ //å…¥åº“å¤±è´¥ } } ä¸Šè¿°ä»£ç å°±æ˜¯å…¸åž‹çš„ä½¿ç”¨å¼‚å¸¸æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚è¿™ç§æ–¹å¼éœ€è¦ä¸¥é‡çš„ç¦æ­¢ï¼ä¸Šè¿°ä»£ç æœ€å¤§çš„é—®é¢˜åœ¨äºŽï¼Œæˆ‘ä»¬å¦‚ä½•åˆ©ç”¨å¼‚å¸¸æ¥è‡ªåŠ¨å¤„ç†äº‹åŠ¡å‘¢ï¼Ÿç„¶è€Œè¿™å’Œæˆ‘ä»¬çš„å¼‚å¸¸ä¸­æ–­serviceæ²¡æœ‰ä»€ä¹ˆå†²çª.ä¹Ÿå¹¶ä¸æ˜¯ä¸€å›žäº‹.æˆ‘ä»¬æå€¡åœ¨ ä¸šåŠ¡å¤„ç† çš„æ—¶å€™ï¼Œå¦‚æžœå‘çŽ°æ— æ³•å¤„ç†ç›´æŽ¥æŠ›å‡ºå¼‚å¸¸å³å¯ã€‚è€Œå¹¶ä¸æ˜¯åœ¨ é€»è¾‘å¤„ç† çš„æ—¶å€™ï¼Œç”¨å¼‚å¸¸æ¥åˆ¤æ–­é€»è¾‘è¿›è¡Œçš„çŠ¶å†µã€‚æ”¹æ­£åŽçš„é€»è¾‘ public void processMessage(Message&lt;String&gt; message){ if(!message.isValud){ MessageLogService.log(&quot;æ¶ˆæ¯éªŒè¯å¤±è´¥&quot;+message.errors()); return; } ... //TODO ... }]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dockerç³»åˆ—]]></title>
    <url>%2F2019%2F01%2F16%2Fdocker%E7%B3%BB%E5%88%97%2F</url>
    <content type="text"><![CDATA[CentOS Docker å®‰è£…Dockeræ”¯æŒä»¥ä¸‹çš„CentOSç‰ˆæœ¬ï¼š CentOS 7 (64-bit) CentOS 6.5 (64-bit) æˆ–æ›´é«˜çš„ç‰ˆæœ¬ ä½¿ç”¨ yum å®‰è£…ï¼ˆCentOS 7ä¸‹ï¼‰ é€šè¿‡ uname -r å‘½ä»¤æŸ¥çœ‹ä½ å½“å‰çš„å†…æ ¸ç‰ˆæœ¬ [root@airthink ~]# uname -r 3.10.0-327.el7.x86_64 åªéœ€é€šè¿‡ä»¥ä¸‹å‘½ä»¤å³å¯å®‰è£… Docker è½¯ä»¶ï¼š yum -y install docker-io å¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹ Docker æ˜¯å¦å®‰è£…æˆåŠŸ docker version Client: Version: 18.09.1 API version: 1.39 Go version: go1.10.6 Git commit: 4c52b90 Built: Wed Jan 9 19:35:01 2019 OS/Arch: linux/amd64 Experimental: false Server: Docker Engine - Community Engine: Version: 18.09.1 API version: 1.39 (minimum version 1.12) Go version: go1.10.6 Git commit: 4c52b90 Built: Wed Jan 9 19:06:30 2019 OS/Arch: linux/amd64 Experimental: false è‹¥è¾“å‡ºäº† Docker çš„ç‰ˆæœ¬å·ï¼Œåˆ™è¯´æ˜Žå®‰è£…æˆåŠŸäº†ï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Docker æœåŠ¡ï¼š service docker start ä¸‹è½½é•œåƒdocker search &quot;é•œåƒå&quot;ï¼Œæœç´¢é•œåƒï¼Œç¬¬ä¸€ä¸ªå­—æ®µä¸ºimagenameï¼ˆé•œåƒåå­—ï¼‰ï¼Œç¬¬å››ä¸ªå­—æ®µä¸ºofficialï¼Œæ˜¯å¦ä¸ºå®˜æ–¹é•œåƒï¼Œä¸ªäººä¹Ÿå¯ä»¥æŠŠè‡ªå·±åˆ¶ä½œçš„é•œåƒæ”¾åˆ°docker hubä¸Šï¼Œæ‰¾åˆ°è‡ªå·±æƒ³è¦ä¸‹è½½çš„é•œåƒåå­—å°±å¯ä»¥æ‹‰å–äº† docker pull &quot;é•œåƒå&quot;ï¼Œä¸‹è½½é•œåƒ docker rmi &quot;é•œåƒå&quot;ï¼Œåˆ é™¤é•œåƒ è¿è¡Œä¸€ä¸ªæ–°çš„container docker run [-i -t -d -p -P -c] [--name]:åœ¨å®¹å™¨å†…è¿è¡Œä¸€ä¸ªåº”ç”¨ç¨‹åº -t :åœ¨æ–°å®¹å™¨å†…æŒ‡å®šä¸€ä¸ªä¼ªç»ˆç«¯æˆ–ç»ˆç«¯ -i:å…è®¸ä½ å¯¹å®¹å™¨å†…çš„æ ‡å‡†è¾“å…¥è¿›è¡Œäº¤äº’ -dï¼šä»¥è¿›ç¨‹æ–¹å¼è¿è¡Œå®¹å™¨ï¼Œè®©å®¹å™¨åœ¨åŽå°è¿è¡Œ -pï¼šè®¾ç½®ç«¯å£ -Pï¼šå°†å®¹å™¨å†…éƒ¨ä½¿ç”¨çš„ç½‘ç»œç«¯å£æ˜ å°„åˆ°æˆ‘ä»¬ä½¿ç”¨çš„ä¸»æœºï¼Œå°±æ˜¯è®©æˆ‘ä»¬è®¿é—®æˆ‘ä»¬ä½¿ç”¨çš„ä¸»æœºå°±ç­‰åŒäºŽè®¿é—®åˆ°å®¹å™¨å†…éƒ¨ -cï¼šcommand,åŽé¢æŽ¥å‘½ä»¤ --name container nameï¼šæŒ‡å®šå®¹å™¨åå­— docker ps -a åˆ—å‡ºåˆ›å»ºçš„æ‰€æœ‰å®¹å™¨ docker ps -s åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨ docker start [container ID] docker exec -it [container ID] /bin/bash å³å¯è¿›å…¥ä¸€ä¸ªå·²ç»åœ¨è¿è¡Œçš„å®¹å™¨ exit å¯é€€å‡ºå®¹å™¨ docker stop [container ID] åœç”¨å®¹å™¨ Docker 1.13ç‰ˆæœ¬ä»¥åŽï¼Œå¯ä»¥ä½¿ç”¨ docker containers prune å‘½ä»¤ï¼Œåˆ é™¤å­¤ç«‹çš„å®¹å™¨ã€‚ docker container prune docker rmi -f image_ID//åˆ é™¤é•œåƒ Dockerfileéƒ¨åˆ†å‘½ä»¤é¦–å…ˆï¼Œæ¯ä¸ªæŒ‡ä»¤çš„å‰ç¼€å¿…é¡»å¤§å†™ æŒ‡ä»¤ï¼šFROM åŠŸèƒ½æè¿°ï¼šè®¾ç½®åŸºç¡€é•œåƒ è¯­æ³•ï¼šFROM &lt; image&gt;[:&lt; tag&gt; | @&lt; digest&gt;] æç¤ºï¼šé•œåƒéƒ½æ˜¯ä»Žä¸€ä¸ªåŸºç¡€é•œåƒï¼ˆæ“ä½œç³»ç»Ÿæˆ–å…¶ä»–é•œåƒï¼‰ç”Ÿæˆï¼Œå¯ä»¥åœ¨ä¸€ä¸ªDockerfileä¸­æ·»åŠ å¤šæ¡FROMæŒ‡ä»¤ï¼Œä¸€æ¬¡ç”Ÿæˆå¤šä¸ªé•œåƒ æ³¨æ„ï¼šå¦‚æžœå¿½ç•¥tagé€‰é¡¹ï¼Œä¼šä½¿ç”¨latesté•œåƒ æŒ‡ä»¤ï¼šMAINTAINER åŠŸèƒ½æè¿°ï¼šè®¾ç½®é•œåƒä½œè€… è¯­æ³•ï¼šMAINTAINER &lt; name&gt; æŒ‡ä»¤ï¼šRUN åŠŸèƒ½æè¿°ï¼š è¯­æ³•ï¼šRUN &lt; command&gt; RUN [â€œexecutableâ€,â€param1â€,â€param2â€] æç¤ºï¼šRUNæŒ‡ä»¤ä¼šç”Ÿæˆå®¹å™¨ï¼Œåœ¨å®¹å™¨ä¸­æ‰§è¡Œè„šæœ¬ï¼Œå®¹å™¨ä½¿ç”¨å½“å‰é•œåƒï¼Œè„šæœ¬æŒ‡ä»¤å®ŒæˆåŽï¼ŒDocker Daemonä¼šå°†è¯¥å®¹å™¨æäº¤ä¸ºä¸€ä¸ªä¸­é—´é•œåƒï¼Œä¾›åŽé¢çš„æŒ‡ä»¤ä½¿ç”¨ è¡¥å……ï¼šRUNæŒ‡ä»¤ç¬¬ä¸€ç§æ–¹å¼ä¸ºshellæ–¹å¼ï¼Œä½¿ç”¨/bin/sh -c &lt; command&gt;è¿è¡Œè„šæœ¬ï¼Œå¯ä»¥åœ¨å…¶ä¸­ä½¿ç”¨\å°†è„šæœ¬åˆ†ä¸ºå¤šè¡Œ RUNæŒ‡ä»¤ç¬¬äºŒç§æ–¹å¼ä¸ºexecæ–¹å¼ï¼Œé•œåƒä¸­æ²¡æœ‰/bin/shæˆ–è€…è¦ä½¿ç”¨å…¶ä»–shellæ—¶ä½¿ç”¨è¯¥æ–¹å¼ï¼Œå…¶ä¸ä¼šè°ƒç”¨shellå‘½ä»¤ ä¾‹å­ï¼šRUN source $HOME/.bashrc;\ echo $HOME RUN [â€œ/bin/bashâ€,â€-câ€,â€echo helloâ€] RUN [â€œshâ€,â€-câ€,â€echoâ€,â€$HOMEâ€] ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼è°ƒç”¨shellè¯»å–çŽ¯å¢ƒå˜é‡ æŒ‡ä»¤ï¼šCMD åŠŸèƒ½æè¿°ï¼šè®¾ç½®å®¹å™¨çš„å¯åŠ¨å‘½ä»¤ è¯­æ³•ï¼šCMD [â€œexecutableâ€,â€param1â€,â€param2â€] CMD [â€œparam1â€,â€param2â€] CMD &lt; command&gt; æç¤ºï¼šCMDç¬¬ä¸€ç§ã€ç¬¬ä¸‰ç§æ–¹å¼å’ŒRUNç±»ä¼¼ï¼Œç¬¬äºŒç§æ–¹å¼ä¸ºENTRYPOINTå‚æ•°æ–¹å¼ï¼Œä¸ºentrypointæä¾›å‚æ•°åˆ—è¡¨ æ³¨æ„ï¼šDockerfileä¸­åªèƒ½æœ‰ä¸€æ¡CMDå‘½ä»¤ï¼Œå¦‚æžœå†™äº†å¤šæ¡åˆ™æœ€åŽä¸€æ¡ç”Ÿæ•ˆ æŒ‡ä»¤ï¼šLABEL åŠŸèƒ½æè¿°ï¼šè®¾ç½®é•œåƒçš„æ ‡ç­¾ å»¶ä¼¸ï¼šé•œåƒæ ‡ç­¾å¯ä»¥é€šè¿‡docker inspectæŸ¥çœ‹ æ ¼å¼ï¼šLABEL &lt; key&gt;=&lt; value&gt; &lt; key&gt;=&lt; value&gt; â€¦ æç¤ºï¼šä¸åŒæ ‡ç­¾ä¹‹é—´é€šè¿‡ç©ºæ ¼éš”å¼€ æ³¨æ„ï¼šæ¯æ¡æŒ‡ä»¤éƒ½ä¼šç”Ÿæˆä¸€ä¸ªé•œåƒå±‚ï¼ŒDockerä¸­é•œåƒæœ€å¤šåªèƒ½æœ‰127å±‚ï¼Œå¦‚æžœè¶…å‡ºDocker Daemonå°±ä¼šæŠ¥é”™ï¼Œå¦‚LABEL ..=.. &lt;å‡è£…è¿™é‡Œæœ‰ä¸ªæ¢è¡Œ&gt; LABEL ..=..åˆåœ¨ä¸€èµ·ç”¨ç©ºæ ¼åˆ†éš”å°±å¯ä»¥å‡å°‘é•œåƒå±‚æ•°é‡ï¼ŒåŒæ ·ï¼Œå¯ä»¥ä½¿ç”¨è¿žæŽ¥ç¬¦\å°†è„šæœ¬åˆ†ä¸ºå¤šè¡Œ é•œåƒä¼šç»§æ‰¿åŸºç¡€é•œåƒä¸­çš„æ ‡ç­¾ï¼Œå¦‚æžœå­˜åœ¨åŒåæ ‡ç­¾åˆ™ä¼šè¦†ç›– æŒ‡ä»¤ï¼šEXPOSE åŠŸèƒ½æè¿°ï¼šè®¾ç½®é•œåƒæš´éœ²ç«¯å£ï¼Œè®°å½•å®¹å™¨å¯åŠ¨æ—¶ç›‘å¬å“ªäº›ç«¯å£ è¯­æ³•ï¼šEXPOSE &lt; port&gt; &lt; port&gt; â€¦ å»¶ä¼¸ï¼šé•œåƒæš´éœ²ç«¯å£å¯ä»¥é€šè¿‡docker inspectæŸ¥çœ‹ æç¤ºï¼šå®¹å™¨å¯åŠ¨æ—¶ï¼ŒDocker Daemonä¼šæ‰«æé•œåƒä¸­æš´éœ²çš„ç«¯å£ï¼Œå¦‚æžœåŠ å…¥-På‚æ•°ï¼ŒDocker Daemonä¼šæŠŠé•œåƒä¸­æ‰€æœ‰æš´éœ²ç«¯å£å¯¼å‡ºï¼Œå¹¶ä¸ºæ¯ä¸ªæš´éœ²ç«¯å£åˆ†é…ä¸€ä¸ªéšæœºçš„ä¸»æœºç«¯å£ï¼ˆæš´éœ²ç«¯å£æ˜¯å®¹å™¨ç›‘å¬ç«¯å£ï¼Œä¸»æœºç«¯å£ä¸ºå¤–éƒ¨è®¿é—®å®¹å™¨çš„ç«¯å£ï¼‰ æ³¨æ„ï¼šEXPOSEåªè®¾ç½®æš´éœ²ç«¯å£å¹¶ä¸å¯¼å‡ºç«¯å£ï¼Œåªæœ‰å¯åŠ¨å®¹å™¨æ—¶ä½¿ç”¨-P/-pæ‰å¯¼å‡ºç«¯å£ï¼Œè¿™ä¸ªæ—¶å€™æ‰èƒ½é€šè¿‡å¤–éƒ¨è®¿é—®å®¹å™¨æä¾›çš„æœåŠ¡ æŒ‡ä»¤ï¼šENV åŠŸèƒ½æè¿°ï¼šè®¾ç½®é•œåƒä¸­çš„çŽ¯å¢ƒå˜é‡ è¯­æ³•ï¼šENV &lt; key&gt;=&lt; value&gt;â€¦|&lt; key&gt; &lt; value&gt; æ³¨æ„ï¼šçŽ¯å¢ƒå˜é‡åœ¨æ•´ä¸ªç¼–è¯‘å‘¨æœŸéƒ½æœ‰æ•ˆï¼Œç¬¬ä¸€ç§æ–¹å¼å¯è®¾ç½®å¤šä¸ªçŽ¯å¢ƒå˜é‡ï¼Œç¬¬äºŒç§æ–¹å¼åªè®¾ç½®ä¸€ä¸ªçŽ¯å¢ƒå˜é‡ æç¤ºï¼šé€šè¿‡${å˜é‡å}æˆ–è€… $å˜é‡åä½¿ç”¨å˜é‡ï¼Œä½¿ç”¨æ–¹å¼${å˜é‡å}æ—¶å¯ä»¥ç”¨${å˜é‡å:-default} ${å˜é‡å:+cover}è®¾å®šé»˜è®¤å€¼æˆ–è€…è¦†ç›–å€¼ ENVè®¾ç½®çš„å˜é‡å€¼åœ¨æ•´ä¸ªç¼–è¯‘è¿‡ç¨‹ä¸­æ€»æ˜¯ä¿æŒä¸å˜çš„ æŒ‡ä»¤ï¼šADD åŠŸèƒ½æè¿°ï¼šå¤åˆ¶æ–‡ä»¶åˆ°é•œåƒä¸­ è¯­æ³•ï¼šADD &lt; src&gt;â€¦ &lt; dest&gt;|[â€œ&lt; src&gt;â€,â€¦ â€œ&lt; dest&gt;â€] æ³¨æ„ï¼šå½“è·¯å¾„ä¸­æœ‰ç©ºæ ¼æ—¶ï¼Œéœ€è¦ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ å½“srcä¸ºæ–‡ä»¶æˆ–ç›®å½•æ—¶ï¼ŒDocker Daemonä¼šä»Žç¼–è¯‘ç›®å½•å¯»æ‰¾è¿™äº›æ–‡ä»¶æˆ–ç›®å½•ï¼Œè€Œdestä¸ºé•œåƒä¸­çš„ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹äºŽWORKDIRçš„è·¯å¾„ æç¤ºï¼šsrcä¸ºç›®å½•æ—¶ï¼Œå¤åˆ¶ç›®å½•ä¸­æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿçš„å…ƒæ•°æ®ï¼Œä½†ä¸åŒ…æ‹¬ç›®å½•æœ¬èº« srcä¸ºåŽ‹ç¼©æ–‡ä»¶ï¼Œå¹¶ä¸”åŽ‹ç¼©æ–¹å¼ä¸ºgzip,bzip2æˆ–xzæ—¶ï¼ŒæŒ‡ä»¤ä¼šå°†å…¶è§£åŽ‹ä¸ºç›®å½• å¦‚æžœsrcä¸ºæ–‡ä»¶ï¼Œåˆ™å¤åˆ¶æ–‡ä»¶å’Œå…ƒæ•°æ® å¦‚æžœdestä¸å­˜åœ¨ï¼ŒæŒ‡ä»¤ä¼šè‡ªåŠ¨åˆ›å»ºdestå’Œç¼ºå¤±çš„ä¸Šçº§ç›®å½• æŒ‡ä»¤ï¼šCOPY åŠŸèƒ½æè¿°ï¼šå¤åˆ¶æ–‡ä»¶åˆ°é•œåƒä¸­ è¯­æ³•ï¼šCOPY &lt; src&gt;â€¦ &lt; dest&gt;|[â€œ&lt; src&gt;â€,â€¦ â€œ&lt; dest&gt;â€] æç¤ºï¼šæŒ‡ä»¤é€»è¾‘å’ŒADDååˆ†ç›¸ä¼¼ï¼ŒåŒæ ·Docker Daemonä¼šä»Žç¼–è¯‘ç›®å½•å¯»æ‰¾æ–‡ä»¶æˆ–ç›®å½•ï¼Œdestä¸ºé•œåƒä¸­çš„ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹äºŽWORKDIRçš„è·¯å¾„ æŒ‡ä»¤ï¼šENTRYPOINT åŠŸèƒ½æè¿°ï¼šè®¾ç½®å®¹å™¨çš„å…¥å£ç¨‹åº è¯­æ³•ï¼šENTRYPOINT [â€œexecutableâ€,â€param1â€,â€param2â€] ENTRYPOINT command param1 param2ï¼ˆshellæ–¹å¼ï¼‰ æç¤ºï¼šå…¥å£ç¨‹åºæ˜¯å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„ç¨‹åºï¼Œdocker runä¸­æœ€åŽçš„å‘½ä»¤å°†ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¥å£ç¨‹åº å…¥å£ç¨‹åºæœ‰ä¸¤ç§æ ¼å¼ï¼šexecã€shellï¼Œå…¶ä¸­shellä½¿ç”¨/bin/sh -cè¿è¡Œå…¥å£ç¨‹åºï¼Œæ­¤æ—¶å…¥å£ç¨‹åºä¸èƒ½æŽ¥æ”¶ä¿¡å·é‡ å½“Dockerfileæœ‰å¤šæ¡ENTRYPOINTæ—¶åªæœ‰æœ€åŽçš„ENTRYPOINTæŒ‡ä»¤ç”Ÿæ•ˆ å¦‚æžœä½¿ç”¨è„šæœ¬ä½œä¸ºå…¥å£ç¨‹åºï¼Œéœ€è¦ä¿è¯è„šæœ¬çš„æœ€åŽä¸€ä¸ªç¨‹åºèƒ½å¤ŸæŽ¥æ”¶ä¿¡å·é‡ï¼Œå¯ä»¥åœ¨è„šæœ¬æœ€åŽä½¿ç”¨execæˆ–gosuå¯åŠ¨ä¼ å…¥è„šæœ¬çš„å‘½ä»¤ æ³¨æ„ï¼šé€šè¿‡shellæ–¹å¼å¯åŠ¨å…¥å£ç¨‹åºæ—¶ï¼Œä¼šå¿½ç•¥CMDæŒ‡ä»¤å’Œdocker runä¸­çš„å‚æ•° ä¸ºäº†ä¿è¯å®¹å™¨èƒ½å¤ŸæŽ¥å—docker stopå‘é€çš„ä¿¡å·é‡ï¼Œéœ€è¦é€šè¿‡execå¯åŠ¨ç¨‹åºï¼›å¦‚æžœæ²¡æœ‰åŠ å…¥execå‘½ä»¤ï¼Œåˆ™åœ¨å¯åŠ¨å®¹å™¨æ—¶å®¹å™¨ä¼šå‡ºçŽ°ä¸¤ä¸ªè¿›ç¨‹ï¼Œå¹¶ä¸”ä½¿ç”¨docker stopå‘½ä»¤å®¹å™¨æ— æ³•æ­£å¸¸é€€å‡ºï¼ˆæ— æ³•æŽ¥å—SIGTERMä¿¡å·ï¼‰ï¼Œè¶…æ—¶åŽdocker stopå‘é€SIGKILLï¼Œå¼ºåˆ¶åœæ­¢å®¹å™¨ æŒ‡ä»¤ï¼šVOLUME åŠŸèƒ½æè¿°ï¼šè®¾ç½®å®¹å™¨çš„æŒ‚è½½ç‚¹ è¯­æ³•ï¼šVOLUME [â€œ/dataâ€] VOLUME /data1 /data2 æç¤ºï¼šå¯åŠ¨å®¹å™¨æ—¶ï¼ŒDocker Daemonä¼šæ–°å»ºæŒ‚è½½ç‚¹ï¼Œå¹¶ç”¨é•œåƒä¸­çš„æ•°æ®åˆå§‹åŒ–æŒ‚è½½ç‚¹ï¼Œå¯ä»¥å°†ä¸»æœºç›®å½•æˆ–æ•°æ®å·å®¹å™¨æŒ‚è½½åˆ°è¿™äº›æŒ‚è½½ç‚¹ æŒ‡ä»¤ï¼šUSER åŠŸèƒ½æè¿°ï¼šè®¾ç½®RUN CMD ENTRYPOINTçš„ç”¨æˆ·åæˆ–UID è¯­æ³•ï¼šUSER &lt; name&gt; æŒ‡ä»¤ï¼šWORKDIR åŠŸèƒ½æè¿°ï¼šè®¾ç½®RUN CMD ENTRYPOINT ADD COPYæŒ‡ä»¤çš„å·¥ä½œç›®å½• è¯­æ³•ï¼šWORKDIR &lt; Path&gt; æç¤ºï¼šå¦‚æžœå·¥ä½œç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™Docker Daemonä¼šè‡ªåŠ¨åˆ›å»º Dockerfileä¸­å¤šä¸ªåœ°æ–¹éƒ½å¯ä»¥è°ƒç”¨WORKDIRï¼Œå¦‚æžœåŽé¢è·Ÿçš„æ˜¯ç›¸å¯¹ä½ç½®ï¼Œåˆ™ä¼šè·Ÿåœ¨ä¸Šæ¡WORKDIRæŒ‡å®šè·¯å¾„åŽï¼ˆå¦‚WORKDIR /A WORKDIR B WORKDIR Cï¼Œæœ€ç»ˆè·¯å¾„ä¸º/A/B/Cï¼‰ æŒ‡ä»¤ï¼šARG åŠŸèƒ½æè¿°ï¼šè®¾ç½®ç¼–è¯‘å˜é‡ è¯­æ³•ï¼šARG &lt; name&gt;[=&lt; defaultValue&gt;] æ³¨æ„ï¼šARGä»Žå®šä¹‰å®ƒçš„åœ°æ–¹å¼€å§‹ç”Ÿæ•ˆè€Œä¸æ˜¯è°ƒç”¨çš„åœ°æ–¹ï¼Œåœ¨ARGä¹‹å‰è°ƒç”¨ç¼–è¯‘å˜é‡æ€»ä¸ºç©ºï¼Œåœ¨ç¼–è¯‘é•œåƒæ—¶ï¼Œå¯ä»¥é€šè¿‡docker build â€“build-arg &lt; var&gt;=&lt; value&gt;è®¾ç½®å˜é‡ï¼Œå¦‚æžœvaræ²¡æœ‰é€šè¿‡ARGå®šä¹‰åˆ™Daemonä¼šæŠ¥é”™ å¯ä»¥ä½¿ç”¨ENVæˆ–ARGè®¾ç½®RUNä½¿ç”¨çš„å˜é‡ï¼Œå¦‚æžœåŒååˆ™ENVå®šä¹‰çš„å€¼ä¼šè¦†ç›–ARGå®šä¹‰çš„å€¼ï¼Œä¸ŽENVä¸åŒï¼ŒARGçš„å˜é‡å€¼åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æ˜¯å¯å˜çš„ï¼Œä¼šå¯¹æ¯”ä½¿ç”¨ç¼–è¯‘ç¼“å­˜é€ æˆå½±å“ï¼ˆARGå€¼ä¸åŒåˆ™ç¼–è¯‘è¿‡ç¨‹ä¹Ÿä¸åŒï¼‰ ä¾‹å­ï¼šARG CONT_IMAG_VER &lt;æ¢è¡Œ&gt; RUN echo $CONT_IMG_VER ARG CONT_IMAG_VER &lt;æ¢è¡Œ&gt; RUN echo hello å½“ç¼–è¯‘æ—¶ç»™ARGå˜é‡èµ‹å€¼helloï¼Œåˆ™ä¸¤ä¸ªDockerfileå¯ä»¥ä½¿ç”¨ç›¸åŒçš„ä¸­é—´é•œåƒï¼Œå¦‚æžœä¸ä¸ºhelloï¼Œåˆ™ä¸èƒ½ä½¿ç”¨åŒä¸€ä¸ªä¸­é—´é•œ ç¤ºä¾‹ï¼šDockerfileä»¥é˜¿é‡Œä¸­é—´ä»¶å¤§èµ›ç»™çš„debian-jdk8é•œåƒä¸ºä¾‹ï¼ŒDockerfileæ–‡ä»¶å¦‚ä¸‹ï¼š FROM debian:stretch ARG DEBIAN_FRONTEND=noninteractive ARG JAVA_VERSION=8 ARG JAVA_UPDATE=172 ARG JAVA_BUILD=11 ARG JAVA_PACKAGE=jdk ARG JAVA_HASH=a58eab1ec242421181065cdc37240b08 ENV LANG C.UTF-8 ENV JAVA_HOME=/opt/jdk ENV PATH=${PATH}:${JAVA_HOME}/bin RUN set -ex \ &amp;&amp; apt-get update \ &amp;&amp; apt-get -y install ca-certificates wget unzip \ &amp;&amp; wget -q --header &quot;Cookie: oraclelicense=accept-securebackup-cookie&quot; \ -O /tmp/java.tar.gz \ http://download.oracle.com/otn-pub/java/jdk/${JAVA_VERSION}u${JAVA_UPDATE}-b${JAVA_BUILD}/${JAVA_HASH}/${JAVA_PACKAGE}-${JAVA_VERSION}u${JAVA_UPDATE}-linux-x64.tar.gz \ &amp;&amp; CHECKSUM=$(wget -q -O - https://www.oracle.com/webfolder/s/digest/${JAVA_VERSION}u${JAVA_UPDATE}checksum.html | grep -E &quot;${JAVA_PACKAGE}-${JAVA_VERSION}u${JAVA_UPDATE}-linux-x64\.tar\.gz&quot; | grep -Eo &apos;(sha256: )[^&lt;]+&apos; | cut -d: -f2 | xargs) \ &amp;&amp; echo &quot;${CHECKSUM} /tmp/java.tar.gz&quot; &gt; /tmp/java.tar.gz.sha256 \ &amp;&amp; sha256sum -c /tmp/java.tar.gz.sha256 \ &amp;&amp; mkdir ${JAVA_HOME} \ &amp;&amp; tar -xzf /tmp/java.tar.gz -C ${JAVA_HOME} --strip-components=1 \ &amp;&amp; wget -q --header &quot;Cookie: oraclelicense=accept-securebackup-cookie;&quot; \ -O /tmp/jce_policy.zip \ http://download.oracle.com/otn-pub/java/jce/${JAVA_VERSION}/jce_policy-${JAVA_VERSION}.zip \ &amp;&amp; unzip -jo -d ${JAVA_HOME}/jre/lib/security /tmp/jce_policy.zip \ &amp;&amp; rm -rf ${JAVA_HOME}/jar/lib/security/README.txt \ /var/lib/apt/lists/* \ /tmp/* \ /root/.wget-hsts ä½“éªŒä¸€ä¸‹å¦‚ä½•ç”¨Dockerfileæ‰“åŒ…ä¸€ä¸ªé•œåƒï¼Œæ–°å»ºä¸€ä¸ªç©ºç›®å½•ï¼Œå‡è®¾å°±æ˜¯~/debian-jdk8å§ï¼Œcdè¿›è¿™ä¸ªç›®å½•ï¼Œæ–°å»ºä¸€ä¸ªDockerfileï¼Œç„¶åŽæŠŠä¸Šé¢çš„å†…å®¹copyè¿›åŽ»ï¼Œç„¶åŽæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š docker build -t debian-jdk8:v1.0 .å…¶ä¸­-t debian-jdk8:v1.0è¡¨ç¤ºæ‰“åŒ…çš„é•œåƒåä¸ºdebian-jdkï¼Œtagä¸ºv1.0ï¼ˆå‰é¢è¯´è¿‡ï¼Œtagæ˜¯å¯ä»¥ä»»æ„å‘½åçš„ï¼Œä¸ä¸€å®šè¦æ˜¯è¿™ç§æ ¼å¼ï¼‰ï¼Œæ³¨æ„å‘½ä»¤çš„æœ€åŽæœ‰ä¸€ä¸ª.ï¼Œè¿™ä¸ªè¡¨ç¤ºæ‰“åŒ…çš„ä¸Šä¸‹æ–‡ï¼ˆå…¶å®žå°±æ˜¯Dockerfileæ‰€åœ¨ç›®å½•ï¼‰æ˜¯åœ¨å½“å‰ç›®å½•ï¼Œç„¶åŽç›®å½•ä¸‹çš„Dockerfileå°±ä¼šè¢«ç¼–è¯‘æ‰§è¡Œã€‚æ‰§è¡Œå®Œæ¯•åŽè¿è¡Œdocker imageså°±ä¼šå‘çŽ°å¤šäº†ä¸€ä¸ªdebian-jdk8é•œåƒã€‚ä¸‹é¢æ¥è§£é‡Šä¸€ä¸‹Dockerfileçš„ç»“æž„ï¼Œé‚£äº›å­—æ¯å…¨éƒ¨å¤§å†™çš„æ¯è¡Œç¬¬ä¸€ä¸ªå•è¯éƒ½æ˜¯Dockerfileçš„æŒ‡ä»¤ï¼Œå¯ä»¥çœ‹å‡ºè¿™ä¸ªDockefileä¸­åŒ…æ‹¬çš„æŒ‡ä»¤æœ‰FROMã€ARGã€ENVã€RUNFROMï¼šFROM debian:stretchè¡¨ç¤ºä»¥debian:stretchä½œä¸ºåŸºç¡€é•œåƒè¿›è¡Œæž„å»ºRUN å¯ä»¥çœ‹å‡ºRUNåŽé¢è·Ÿçš„å…¶å®žå°±æ˜¯ä¸€äº›shellå‘½ä»¤ï¼Œé€šè¿‡&amp;&amp;å°†è¿™äº›è„šæœ¬è¿žæŽ¥åœ¨äº†ä¸€è¡Œæ‰§è¡Œï¼Œè¿™ä¹ˆåšçš„åŽŸå› æ˜¯ä¸ºäº†å‡å°‘é•œåƒçš„å±‚æ•°ï¼Œæ¯å¤šä¸€è¡ŒRUNéƒ½ä¼šç»™é•œåƒå¢žåŠ ä¸€å±‚ï¼Œæ‰€ä»¥è¿™é‡Œé€‰æ‹©å°†æ‰€æœ‰å‘½ä»¤è”ç»“åœ¨ä¸€èµ·æ‰§è¡Œä»¥å‡å°‘å±‚æ•°ARG ç‰¹åœ°å°†è¿™ä¸ªæŒ‡ä»¤æ”¾åœ¨RUNä¹‹åŽè®²è§£ï¼Œè¿™ä¸ªæŒ‡ä»¤å¯ä»¥è¿›è¡Œä¸€äº›å®å®šä¹‰ï¼Œæ¯”å¦‚æˆ‘å®šä¹‰ENV JAVAHOME=/opt/jdkï¼Œä¹‹åŽRUNåŽé¢çš„shellå‘½ä»¤ä¸­çš„${JAVAHOME}éƒ½ä¼šè¢«/opt/jdkä»£æ›¿ENV å¯ä»¥çœ‹å‡ºè¿™ä¸ªæŒ‡ä»¤çš„ä½œç”¨æ˜¯åœ¨shellä¸­è®¾ç½®ä¸€äº›çŽ¯å¢ƒå˜é‡ï¼ˆå…¶å®žå°±æ˜¯exportï¼‰ Dockeréƒ¨ç½²webç¨‹åºä¸ºäº†æ­å»º Java Web è¿è¡ŒçŽ¯å¢ƒï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… JDK ã€æ•°æ®åº“ã€redisä¸Ž Tomcatï¼Œé¦–å…ˆè¦å†å®¿ä¸»æœºä¸Šä¼ JDK ã€æ•°æ®åº“ã€redisä¸Ž TomcatåŽ‹ç¼©åŒ…ï¼Œä»¥/mnt/software/ä¸ºä¾‹ã€‚ä¸‹é¢çš„è¿‡ç¨‹å‡åœ¨å®¹å™¨å†…éƒ¨è¿›è¡Œã€‚æˆ‘ä»¬ä¸å¦¨é€‰æ‹©/opt/ç›®å½•ä½œä¸ºå®‰è£…ç›®å½•ï¼Œé¦–å…ˆéœ€è¦é€šè¿‡cd /opt/å‘½ä»¤è¿›å…¥è¯¥ç›®å½•ã€‚ é¦–å…ˆï¼Œè§£åŽ‹ç¨‹åºåŒ… tar -zxf /mnt/software/jdk-7u67-linux-x64.tar.gz tar -zxf /mnt/software/apache-tomcat-7.0.55.tar.gz tar -zxf /mnt/software/redis tar -zxf /mnt/software/mongo è®¾ç½®çŽ¯å¢ƒå˜é‡ é¦–å…ˆï¼Œç¼–è¾‘.bashrcæ–‡ä»¶ vi ~/.bashrc ç„¶åŽï¼Œåœ¨è¯¥æ–‡ä»¶æœ«å°¾æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š export JAVA_HOME=/opt/jdk export PATH=$PATH:$JAVA_HOME æœ€åŽï¼Œéœ€è¦ä½¿ç”¨sourceå‘½ä»¤ï¼Œè®©çŽ¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š source ~/.bashrc ç¼–å†™è¿è¡Œè„šæœ¬ vi /root/run.sh ç„¶åŽï¼Œç¼–è¾‘è„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š source ~/.bashrc sh /opt/tomcat/bin/catalina.sh run æ³¨æ„ï¼šè¿™é‡Œå¿…é¡»å…ˆåŠ è½½çŽ¯å¢ƒå˜é‡ï¼Œç„¶åŽä½¿ç”¨ Tomcat çš„è¿è¡Œè„šæœ¬æ¥å¯åŠ¨ Tomcat æœåŠ¡ã€‚ æœ€åŽï¼Œä¸ºè¿è¡Œè„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™ï¼š chmod u+x /root/run.sh é€€å‡ºå®¹å™¨å½“ä»¥ä¸Šæ­¥éª¤å…¨éƒ¨å®ŒæˆåŽï¼Œå¯ä½¿ç”¨exitå‘½ä»¤ï¼Œé€€å‡ºå®¹å™¨ã€‚ éšåŽï¼Œå¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š docker ps//æœªè¾“å‡º docker ps -a//è¾“å‡º è¾“å‡ºå¦‚ä¸‹å†…å®¹ï¼š CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 57c312bbaad1 docker.cn/docker/centos:centos6 &quot;/bin/bash&quot; 27 minutes ago Exited (0) 19 seconds ago naughty_goldstine è®°ä½ä»¥ä¸ŠCONTAINER IDï¼ˆå®¹å™¨ IDï¼‰ï¼ŒéšåŽæˆ‘ä»¬å°†é€šè¿‡è¯¥å®¹å™¨ï¼Œåˆ›å»ºä¸€ä¸ªå¯è¿è¡Œ Java Web çš„é•œåƒã€‚ åˆ›å»º Java Web é•œåƒä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œæ ¹æ®æŸä¸ªâ€œå®¹å™¨ IDâ€æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„â€œé•œåƒâ€ï¼š docker commit 57c312bbaad1 ikangbow/javaweb:0.1 è¯¥å®¹å™¨çš„ ID æ˜¯â€œ57c312bbaad1â€ï¼Œæ‰€åˆ›å»ºçš„é•œåƒåæ˜¯â€œikangbow/javaweb:0.1â€ï¼ŒéšåŽå¯ä½¿ç”¨é•œåƒæ¥å¯åŠ¨ Java Web å®¹å™¨ã€‚ å¯åŠ¨ Java Web å®¹å™¨é¦–å…ˆä½¿ç”¨docker imageså‘½ä»¤ï¼ŒæŸ¥çœ‹å½“å‰æ‰€æœ‰çš„é•œåƒï¼š REPOSITORY TAG IMAGE ID CREATED SIZE ikangbow/javaweb 0.1 95b5f6b09ca6 6 hours ago 1.51GB centos latest 1e1148e4cc2c 5 weeks ago 202MB å¯è§ï¼Œæ­¤æ—¶å·²ç»çœ‹åˆ°äº†æœ€æ–°åˆ›å»ºçš„é•œåƒâ€œikangbow/javaweb:0.1â€ï¼Œå…¶é•œåƒ ID æ˜¯â€œ95b5f6b09ca6â€ã€‚æ­£å¦‚ä¸Šé¢æ‰€æè¿°çš„é‚£æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡â€œé•œåƒåâ€æˆ–â€œé•œåƒ IDâ€æ¥å¯åŠ¨å®¹å™¨ï¼Œä¸Žä¸Šæ¬¡å¯åŠ¨å®¹å™¨ä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬çŽ°åœ¨ä¸å†è¿›å…¥å®¹å™¨çš„å‘½ä»¤è¡Œï¼Œè€Œæ˜¯ç›´æŽ¥å¯åŠ¨å®¹å™¨å†…éƒ¨çš„ Tomcat æœåŠ¡ã€‚æ­¤æ—¶ï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š docker run -d -p 58080:8080 --name javaweb ikangbow/javaweb:0.1 /root/run.sh ç¨ä½œè§£é‡Šï¼š -dï¼šè¡¨ç¤ºä»¥â€œå®ˆæŠ¤æ¨¡å¼â€æ‰§è¡Œ/root/run.shè„šæœ¬ï¼Œæ­¤æ—¶ Tomcat æŽ§åˆ¶å°ä¸ä¼šå‡ºçŽ°åœ¨è¾“å‡ºç»ˆç«¯ä¸Šã€‚ -pï¼šè¡¨ç¤ºå®¿ä¸»æœºä¸Žå®¹å™¨çš„ç«¯å£æ˜ å°„ï¼Œæ­¤æ—¶å°†å®¹å™¨å†…éƒ¨çš„ 8080 ç«¯å£æ˜ å°„ä¸ºå®¿ä¸»æœºçš„ 58080 ç«¯å£ï¼Œè¿™æ ·å°±å‘å¤–ç•Œæš´éœ²äº† 58080 ç«¯å£ï¼Œå¯é€šè¿‡ Docker ç½‘æ¡¥æ¥è®¿é—®å®¹å™¨å†…éƒ¨çš„ 8080 ç«¯å£äº†ã€‚ â€“nameï¼šè¡¨ç¤ºå®¹å™¨åç§°ï¼Œç”¨ä¸€ä¸ªæœ‰æ„ä¹‰çš„åç§°å‘½åå³å¯ã€‚ å…³äºŽ Docker ç½‘æ¡¥çš„å†…å®¹ï¼Œéœ€è¦è¡¥å……è¯´æ˜Žä¸€ä¸‹ã€‚å®žé™…ä¸Š Docker åœ¨å®¿ä¸»æœºä¸Žå®¹å™¨ä¹‹é—´ï¼Œæ­å»ºäº†ä¸€åº§ç½‘ç»œé€šä¿¡çš„æ¡¥æ¢ï¼Œæˆ‘ä»¬å¯é€šè¿‡å®¿ä¸»æœº IP åœ°å€ä¸Žç«¯å£å·æ¥æ˜ å°„å®¹å™¨å†…éƒ¨çš„ IP åœ°å€ä¸Žç«¯å£å·ï¼Œ åœ¨ä¸€ç³»åˆ—å‚æ•°åŽé¢çš„æ˜¯â€œé•œåƒåâ€æˆ–â€œé•œåƒ IDâ€ï¼Œæ€Žä¹ˆæ–¹ä¾¿å°±æ€Žä¹ˆæ¥ã€‚æœ€åŽæ˜¯â€œåˆå§‹å‘½ä»¤â€ï¼Œå®ƒæ˜¯ä¸Šé¢ç¼–å†™çš„è¿è¡Œè„šæœ¬ï¼Œé‡Œé¢å°è£…äº†åŠ è½½çŽ¯å¢ƒå˜é‡å¹¶å¯åŠ¨ Tomcat æœåŠ¡çš„å‘½ä»¤ã€‚ å½“è¿è¡Œä»¥ä¸Šå‘½ä»¤åŽï¼Œä¼šç«‹å³è¾“å‡ºä¸€é•¿ä¸²â€œå®¹å™¨ IDâ€ï¼Œæˆ‘ä»¬å¯é€šè¿‡docker pså‘½ä»¤æ¥æŸ¥çœ‹å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ã€‚ CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 82f47923f926 ikangbow/javaweb:0.1 &quot;/root/run.sh&quot; 4 seconds ago Up 3 seconds 0.0.0.0:58080-&gt;8080/tcp javaweb æ­¤å¤„å®žæµ‹æœ‰é—®é¢˜ï¼Œéœ€è¦ç»§ç»­ç ”ç©¶ã€‚ é™„å¸¸ç”¨å‘½ä»¤ï¼š åˆ é™¤å®¹å™¨å®žä¾‹ å¯»æ‰¾å·²ç»åœæ­¢è¿è¡Œçš„container docker ps -a docker rm å®¹å™¨id åˆ é™¤å®žä¾‹ docker ps -a æŸ¥çœ‹å®žä¾‹å·²ç»åˆ é™¤ docker rm $(docker ps -a -q) åˆ é™¤æ‰€æœ‰container 2.åˆ é™¤é•œåƒ åœæ­¢æ‰€æœ‰çš„containerï¼Œè¿™æ ·æ‰èƒ½å¤Ÿåˆ é™¤å…¶ä¸­çš„imagesï¼š docker stop $(docker ps -a -q) docker rmi &lt;image id&gt; docker images æŸ¥çœ‹æ‰€æœ‰é•œåƒ docker rmi é•œåƒid åˆ é™¤é•œåƒ docker images æŸ¥çœ‹é•œåƒ å‘çŽ°å·²ç»åˆ é™¤ å®žé™…åº”ç”¨docker stop application//åœæ­¢åº”ç”¨ docker rm application//åˆ é™¤é•œåƒ docker run -i -t -d -p 88:8080 -v /badou/badou/badou1.war:/usr/local/tomcat/webapps/badou.war -v /badou/conf/apiclient_cert.p12:/usr/local/tomcat/apiclient_cert.p12 -v /badou/badou/index.html:/usr/local/tomcat/webapps/ROOT/index.html --name=application andylaun/tomcat:v5 -v æŒ‚è½½æ–‡ä»¶ç›®å½• dockerè¿è¡Œnginxwhich nginx æŸ¥çœ‹nginxå®‰è£…åœ¨å“ªä¸ªç›®å½• dockerç½‘ç»œdockerå…·æœ‰éš”ç¦»æ€§,ç½‘ç»œä¹Ÿæ˜¯ä¸ªéš”ç¦»æ€§çš„ä¸€éƒ¨åˆ†ï¼Œlinuxä½¿ç”¨äº†å‘½åç©ºé—´æ¥è¿›è¡Œèµ„æºçš„éš”ç¦»,æ¯”å¦‚pid namespaceå°±æ˜¯ç”¨æ¥éš”ç¦»è¿›ç¨‹çš„,mount namespaceæ˜¯ç”¨æ¥éš”ç¦»æ–‡ä»¶ç³»ç»Ÿçš„,network namespace æ˜¯ç”¨æ¥éš”ç¦»ç½‘ç»œçš„.æ¯ä¸€ä¸ªnetwork namespaceéƒ½æä¾›äº†ä¸€ä¸ªç‹¬ç«‹çš„ç½‘ç»œçŽ¯å¢ƒ,åŒ…æ‹¬ç½‘å¡è·¯ç”±iptableè§„åˆ™ç­‰ç­‰,éƒ½æ˜¯ä¸Žä»¥å…¶å®ƒçš„network spaceéš”ç¦»çš„ dockerå®¹å™¨åœ¨é»˜è®¤æƒ…å†µä¸‹,ä¸€èˆ¬ä¼šåˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„network-namespace,ä¹Ÿå°±æ˜¯ç½‘ç»œç±»åž‹ä¸­çš„Bridgeæ¨¡å¼ï¼Œåœ¨ä½¿ç”¨Bridgeæ—¶å°±æ¶‰åŠåˆ°äº†ä¸€ä¸ªé—®é¢˜,æ—¢ç„¶å®ƒæœ‰ç‹¬ç«‹çš„namesapce,è¿™å°±éœ€è¦ä¸€ç§æŠ€æœ¯ä½¿å®¹å™¨å†…çš„ç«¯å£å¯ä»¥åœ¨ä¸»æœºä¸Šè®¿é—®åˆ°,è¿™ç§æŠ€æœ¯å°±æ˜¯ç«¯å£æ˜ å°„,dockerå¯ä»¥æŒ‡å®šä½ æƒ³æŠŠå®¹å™¨å†…çš„æŸä¸€ä¸ªç«¯å£å¯ä»¥åœ¨å®¹å™¨æ‰€åœ¨ä¸»æœºä¸Šçš„æŸä¸€ä¸ªç«¯å£å®ƒä¿©ä¹‹é—´åšä¸€ä¸ªæ˜ å°„,å½“ä½ åœ¨è®¿é—®ä¸»æœºä¸Šçš„ç«¯å£æ—¶,å…¶å®žå°±æ˜¯è®¿é—®å®¹å™¨é‡Œé¢çš„ç«¯å£ã€‚ dockeréƒ¨ç½²web åœ¨å®¿ä¸»æœºç³»ç»Ÿä¸‹è½½æ‰€éœ€è¦çš„çš„jdkç‰ˆæœ¬gzæ–‡ä»¶ docker cp gzæ–‡ä»¶ å®¹å™¨ID:/root å¤åˆ¶gzæ–‡ä»¶åˆ°å®¹å™¨ä¸­çš„rootçš„ç”¨æˆ·ç›®å½•ä¸‹ docker cp jdk-8u121-linux-x64.tar.gz ea49f55dde3d :/root è¿›å…¥è¿è¡Œä¸­çš„å®¹å™¨ docker exec -it ea49f55dde3d /bin/bash åœ¨å®¹å™¨ä¸­è§£åŽ‹gzæ–‡ä»¶ tar -zxvf jdk-8u121-linux-x64.tar.gz å»ºç«‹å®¹å™¨ç³»ç»Ÿçš„JAVA_HOMEç›®å½• mkdir /usr/lib/jvm ç§»åŠ¨jdkç›®å½•åˆ°JAVA_HOMEç›®å½• mv ~/jdk1.8.0_121 /usr/lib/jvm å®‰è£…vimï¼ˆå¯é€‰ï¼‰ apt-get update apt-get install vim è®¾ç½®çŽ¯å¢ƒå˜é‡ vim ~/.bashrc export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_121 export JRE_HOME=${JAVA_HOME}/jre export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib export PATH=${JAVA_HOME}/bin:$PATH ä½¿å¾—çŽ¯å¢ƒå˜é‡é©¬ä¸Šç”Ÿæ•ˆ source ~/.bashrc éªŒè¯JDKæ˜¯å¦å®‰è£…æˆåŠŸ java -version å®‰è£…tomcat æŸ¥æ‰¾tomcatä¿¡æ¯ docker search tomcat ä¸‹è½½å®˜æ–¹çš„é•œåƒStartsæœ€é«˜çš„é‚£ä¸ª docker pull docker.io/tomcat æŸ¥çœ‹dockeré•œåƒ docker images åŽå°è¿è¡Œtomcaté•œåƒ docker run -d â€“name tomcat -p 8081:8080 hub.c.163.com/library/tomcat è‹¥ç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥æŒ‡å®šå®¹å™¨å’Œä¸»æœºçš„æ˜ å°„ç«¯å£ï¼Œå‰è€…æ˜¯å¤–å›´è®¿é—®ç«¯å£ï¼ŒåŽè€…æ˜¯å®¹å™¨å†…éƒ¨ç«¯å£ã€‚-då‚æ•°ï¼šå®¹å™¨ä¼šåœ¨åŽå°è¿è¡Œå¹¶ä¸ä¼šæŠŠè¾“å‡ºçš„ç»“æžœæ‰“å°åˆ°å®¿ä¸»æœºä¸Šé¢ã€‚ä½¿ç”¨ -d å‚æ•°å¯åŠ¨åŽä¼šè¿”å›žä¸€ä¸ªå”¯ä¸€çš„ idã€‚ éƒ¨ç½²webé¡¹ç›® æŠŠå®¿ä¸»æœºçš„waråŒ…ä¸¢åˆ°dockerå®¹å™¨tomcat/webappsä¸‹ï¼š docker cp lsz.war ab6bce2c5826:/usr/local/tomcat/webapps è¿›å…¥dockerå®¹å™¨ä¸­ docker exec -it ab6bce2c5826 /bin/bash æŸ¥çœ‹webappsä¸­çš„webé¡¹ç›® é€€å‡ºdockerå®¹å™¨Ctrl+p+q é‡æ–°è¿è¡Œtomcatå®¹å™¨docker restart ab6bce2c5826 åœæ­¢tomcatå®¹å™¨docker stop ab6bce2c5826]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[httpåŸºç¡€]]></title>
    <url>%2F2019%2F01%2F07%2Fhttp%2F</url>
    <content type="text"><![CDATA[HTTP ç®€ä»‹HTTPåè®®ï¼ˆHyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯å› ç‰¹ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼Œæ‰€æœ‰çš„WWWæ–‡ä»¶éƒ½å¿…é¡»éµå®ˆè¿™ä¸ªæ ‡å‡†ã€‚ HTTPæ˜¯ä¸€ä¸ªåŸºäºŽTCP/IPé€šä¿¡åè®®æ¥ä¼ é€’æ•°æ®ï¼ˆHTML æ–‡ä»¶, å›¾ç‰‡æ–‡ä»¶, æŸ¥è¯¢ç»“æžœç­‰ï¼‰ã€‚ å·¥ä½œåŽŸç†HTTPåè®®å·¥ä½œäºŽå®¢æˆ·ç«¯-æœåŠ¡ç«¯æž¶æž„ä¸Šã€‚æµè§ˆå™¨ä½œä¸ºHTTPå®¢æˆ·ç«¯é€šè¿‡URLå‘HTTPæœåŠ¡ç«¯å³WEBæœåŠ¡å™¨å‘é€æ‰€æœ‰è¯·æ±‚ã€‚ WebæœåŠ¡å™¨æœ‰ï¼šApacheæœåŠ¡å™¨ï¼ŒIISæœåŠ¡å™¨ï¼ˆInternet Information Servicesï¼‰ç­‰ã€‚ WebæœåŠ¡å™¨æ ¹æ®æŽ¥æ”¶åˆ°çš„è¯·æ±‚åŽï¼Œå‘å®¢æˆ·ç«¯å‘é€å“åº”ä¿¡æ¯ã€‚ HTTPé»˜è®¤ç«¯å£å·ä¸º80ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥æ”¹ä¸º8080æˆ–è€…å…¶ä»–ç«¯å£ã€‚ HTTPä¸‰ç‚¹æ³¨æ„äº‹é¡¹ï¼š 1.HTTPæ˜¯æ— è¿žæŽ¥ï¼šæ— è¿žæŽ¥çš„å«ä¹‰æ˜¯é™åˆ¶æ¯æ¬¡è¿žæŽ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚æœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·çš„è¯·æ±‚ï¼Œå¹¶æ”¶åˆ°å®¢æˆ·çš„åº”ç­”åŽï¼Œå³æ–­å¼€è¿žæŽ¥ã€‚é‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´ã€‚ 2.HTTPæ˜¯åª’ä½“ç‹¬ç«‹çš„ï¼šè¿™æ„å‘³ç€ï¼Œåªè¦å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çŸ¥é“å¦‚ä½•å¤„ç†çš„æ•°æ®å†…å®¹ï¼Œä»»ä½•ç±»åž‹çš„æ•°æ®éƒ½å¯ä»¥é€šè¿‡HTTPå‘é€ã€‚å®¢æˆ·ç«¯ä»¥åŠæœåŠ¡å™¨æŒ‡å®šä½¿ç”¨é€‚åˆçš„MIME-typeå†…å®¹ç±»åž‹ã€‚ 3.HTTPæ˜¯æ— çŠ¶æ€ï¼šHTTPåè®®æ˜¯æ— çŠ¶æ€åè®®ã€‚æ— çŠ¶æ€æ˜¯æŒ‡åè®®å¯¹äºŽäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚ç¼ºå°‘çŠ¶æ€æ„å‘³ç€å¦‚æžœåŽç»­å¤„ç†éœ€è¦å‰é¢çš„ä¿¡æ¯ï¼Œåˆ™å®ƒå¿…é¡»é‡ä¼ ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´æ¯æ¬¡è¿žæŽ¥ä¼ é€çš„æ•°æ®é‡å¢žå¤§ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨æœåŠ¡å™¨ä¸éœ€è¦å…ˆå‰ä¿¡æ¯æ—¶å®ƒçš„åº”ç­”å°±è¾ƒå¿«ã€‚ HTTP æ¶ˆæ¯ç»“æž„HTTPæ˜¯åŸºäºŽå®¢æˆ·ç«¯/æœåŠ¡ç«¯ï¼ˆC/Sï¼‰çš„æž¶æž„æ¨¡åž‹ï¼Œé€šè¿‡ä¸€ä¸ªå¯é çš„é“¾æŽ¥æ¥äº¤æ¢ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„è¯·æ±‚/å“åº”åè®®ã€‚ ä¸€ä¸ªHTTPâ€å®¢æˆ·ç«¯â€æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆWebæµè§ˆå™¨æˆ–å…¶ä»–ä»»ä½•å®¢æˆ·ç«¯ï¼‰ï¼Œé€šè¿‡è¿žæŽ¥åˆ°æœåŠ¡å™¨è¾¾åˆ°å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªæˆ–å¤šä¸ªHTTPçš„è¯·æ±‚çš„ç›®çš„ã€‚ ä¸€ä¸ªHTTPâ€æœåŠ¡å™¨â€åŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªWebæœåŠ¡ï¼Œå¦‚Apache WebæœåŠ¡å™¨æˆ–IISæœåŠ¡å™¨ç­‰ï¼‰ï¼Œé€šè¿‡æŽ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚å¹¶å‘å®¢æˆ·ç«¯å‘é€HTTPå“åº”æ•°æ®ã€‚ HTTPä½¿ç”¨ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ˆUniform Resource Identifiers, URIï¼‰æ¥ä¼ è¾“æ•°æ®å’Œå»ºç«‹è¿žæŽ¥ã€‚ ä¸€æ—¦å»ºç«‹è¿žæŽ¥åŽï¼Œæ•°æ®æ¶ˆæ¯å°±é€šè¿‡ç±»ä¼¼Interneté‚®ä»¶æ‰€ä½¿ç”¨çš„æ ¼å¼[RFC5322]å’Œå¤šç”¨é€”Interneté‚®ä»¶æ‰©å±•ï¼ˆMIMEï¼‰[RFC2045]æ¥ä¼ é€ã€‚ å®žä¾‹ä¸‹é¢å®žä¾‹æ˜¯ä¸€ç‚¹å…¸åž‹çš„ä½¿ç”¨GETæ¥ä¼ é€’æ•°æ®çš„å®žä¾‹ï¼š å®¢æˆ·ç«¯è¯·æ±‚ï¼š GET /hello.txt HTTP/1.1User-Agent: curl/7.16.3 libcurl/7.16.3 OpenSSL/0.9.7l zlib/1.2.3Host: www.example.comAccept-Language: en, mi æœåŠ¡ç«¯å“åº”: HTTP/1.1 200 OKDate: Mon, 27 Jul 2009 12:28:53 GMTServer: ApacheLast-Modified: Wed, 22 Jul 2009 19:15:56 GMTETag: â€œ34aa387-d-1568eb00â€Accept-Ranges: bytesContent-Length: 51Vary: Accept-EncodingContent-Type: text/plain HTTPè¯·æ±‚æ–¹æ³•æ ¹æ®HTTPæ ‡å‡†ï¼ŒHTTPè¯·æ±‚å¯ä»¥ä½¿ç”¨å¤šç§è¯·æ±‚æ–¹æ³•ã€‚ HTTP1.0å®šä¹‰äº†ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼š GET, POST å’Œ HEADæ–¹æ³•ã€‚ HTTP1.1æ–°å¢žäº†äº”ç§è¯·æ±‚æ–¹æ³•ï¼šOPTIONS, PUT, DELETE, TRACE å’Œ CONNECT æ–¹æ³•ã€‚ GET: è¯·æ±‚æŒ‡å®šçš„é¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿”å›žå®žä½“ä¸»ä½“ã€‚ HEAD: ç±»ä¼¼äºŽgetè¯·æ±‚ï¼Œåªä¸è¿‡è¿”å›žçš„å“åº”ä¸­æ²¡æœ‰å…·ä½“çš„å†…å®¹ï¼Œç”¨äºŽèŽ·å–æŠ¥å¤´ POST: å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼ˆä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚POSTè¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„å»ºç«‹å’Œ/æˆ–å·²æœ‰èµ„æºçš„ä¿®æ”¹ã€‚ PUT: ä»Žå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€çš„æ•°æ®å–ä»£æŒ‡å®šçš„æ–‡æ¡£çš„å†…å®¹ã€‚ DELETE: è¯·æ±‚æœåŠ¡å™¨åˆ é™¤æŒ‡å®šçš„é¡µé¢ã€‚ CONNECT: HTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿žæŽ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚ OPTIONS: å…è®¸å®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½ã€‚ TRACE: å›žæ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºŽæµ‹è¯•æˆ–è¯Šæ–­ã€‚ HTTP å“åº”å¤´ä¿¡æ¯ Allow: æœåŠ¡å™¨æ”¯æŒå“ªäº›è¯·æ±‚æ–¹æ³•ï¼ˆå¦‚GETã€POSTç­‰ï¼‰ã€‚ Content-Encoding: æ–‡æ¡£çš„ç¼–ç ï¼ˆEncodeï¼‰æ–¹æ³•ã€‚åªæœ‰åœ¨è§£ç ä¹‹åŽæ‰å¯ä»¥å¾—åˆ°Content-Typeå¤´æŒ‡å®šçš„å†…å®¹ç±»åž‹ã€‚åˆ©ç”¨gzipåŽ‹ç¼©æ–‡æ¡£èƒ½å¤Ÿæ˜¾è‘—åœ°å‡å°‘HTMLæ–‡æ¡£ çš„ä¸‹è½½æ—¶é—´ã€‚Javaçš„GZIPOutputStreamå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡ŒgzipåŽ‹ç¼©ï¼Œä½†åªæœ‰Unixä¸Šçš„Netscapeå’ŒWindowsä¸Šçš„IE 4ã€IE 5æ‰æ”¯æŒå®ƒã€‚å› æ­¤ï¼ŒServletåº”è¯¥é€šè¿‡æŸ¥çœ‹Accept-Encodingå¤´ï¼ˆå³request.getHeader(â€œAccept- Encodingâ€)ï¼‰æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒgzipï¼Œä¸ºæ”¯æŒgzipçš„æµè§ˆå™¨è¿”å›žç»gzipåŽ‹ç¼©çš„HTMLé¡µé¢ï¼Œä¸ºå…¶ä»–æµè§ˆå™¨è¿”å›žæ™®é€šé¡µé¢ã€‚ Content-Length: è¡¨ç¤ºå†…å®¹é•¿åº¦ã€‚åªæœ‰å½“æµè§ˆå™¨ä½¿ç”¨æŒä¹…HTTPè¿žæŽ¥æ—¶æ‰éœ€è¦è¿™ä¸ªæ•°æ®ã€‚å¦‚æžœä½ æƒ³è¦åˆ©ç”¨æŒä¹…è¿žæŽ¥çš„ä¼˜åŠ¿ï¼Œå¯ä»¥æŠŠè¾“å‡ºæ–‡æ¡£å†™å…¥ ByteArrayOutputStreamï¼Œå®ŒæˆåŽæŸ¥çœ‹å…¶å¤§å°ï¼Œç„¶åŽæŠŠè¯¥å€¼æ”¾å…¥Content-Lengthå¤´ï¼Œæœ€åŽé€šè¿‡ byteArrayStream.writeTo(response.getOutputStream()å‘é€å†…å®¹ã€‚ Content-Type: è¡¨ç¤ºåŽé¢çš„æ–‡æ¡£å±žäºŽä»€ä¹ˆMIMEç±»åž‹ã€‚Servleté»˜è®¤ä¸ºtext/plainï¼Œä½†é€šå¸¸éœ€è¦æ˜¾å¼åœ°æŒ‡å®šä¸ºtext/htmlã€‚ç”±äºŽç»å¸¸è¦è®¾ç½® Content-Typeï¼Œå› æ­¤HttpServletResponseæä¾›äº†ä¸€ä¸ªä¸“ç”¨çš„æ–¹æ³•setContentTypeã€‚ Date: å½“å‰çš„GMTæ—¶é—´ã€‚ä½ å¯ä»¥ç”¨setDateHeaderæ¥è®¾ç½®è¿™ä¸ªå¤´ä»¥é¿å…è½¬æ¢æ—¶é—´æ ¼å¼çš„éº»çƒ¦ã€‚ Expires: åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™è®¤ä¸ºæ–‡æ¡£å·²ç»è¿‡æœŸï¼Œä»Žè€Œä¸å†ç¼“å­˜å®ƒï¼Ÿ Last-Modified: æ–‡æ¡£çš„æœ€åŽæ”¹åŠ¨æ—¶é—´ã€‚å®¢æˆ·å¯ä»¥é€šè¿‡If-Modified-Sinceè¯·æ±‚å¤´æä¾›ä¸€ä¸ªæ—¥æœŸï¼Œè¯¥è¯·æ±‚å°†è¢«è§†ä¸ºä¸€ä¸ªæ¡ä»¶GETï¼Œåªæœ‰æ”¹åŠ¨æ—¶é—´è¿ŸäºŽæŒ‡å®šæ—¶é—´çš„æ–‡ æ¡£æ‰ä¼šè¿”å›žï¼Œå¦åˆ™è¿”å›žä¸€ä¸ª304ï¼ˆNot Modifiedï¼‰çŠ¶æ€ã€‚Last-Modifiedä¹Ÿå¯ç”¨setDateHeaderæ–¹æ³•æ¥è®¾ç½®ã€‚ Location: è¡¨ç¤ºå®¢æˆ·åº”å½“åˆ°å“ªé‡ŒåŽ»æå–æ–‡æ¡£ã€‚Locationé€šå¸¸ä¸æ˜¯ç›´æŽ¥è®¾ç½®çš„ï¼Œè€Œæ˜¯é€šè¿‡HttpServletResponseçš„sendRedirectæ–¹æ³•ï¼Œè¯¥æ–¹æ³•åŒæ—¶è®¾ç½®çŠ¶æ€ä»£ç ä¸º302ã€‚ Refresh: è¡¨ç¤ºæµè§ˆå™¨åº”è¯¥åœ¨å¤šå°‘æ—¶é—´ä¹‹åŽåˆ·æ–°æ–‡æ¡£ï¼Œä»¥ç§’è®¡ã€‚é™¤äº†åˆ·æ–°å½“å‰æ–‡æ¡£ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡setHeader(â€œRefreshâ€, â€œ5; URL=http://host/path&quot;)è®©æµè§ˆå™¨è¯»å–æŒ‡å®šçš„é¡µé¢ã€‚ æ³¨æ„è¿™ç§åŠŸèƒ½é€šå¸¸æ˜¯é€šè¿‡è®¾ç½®HTMLé¡µé¢HEADåŒºçš„ï¼œMETAHTTP-EQUIV=â€Refreshâ€ CONTENT=â€5;URL=http://host/path&quot;ï¼žå®žçŽ°ï¼Œè¿™æ˜¯å› ä¸ºï¼Œè‡ªåŠ¨åˆ·æ–°æˆ–é‡å®šå‘å¯¹äºŽé‚£äº›ä¸èƒ½ä½¿ç”¨CGIæˆ–Servletçš„HTMLç¼–å†™è€…ååˆ†é‡è¦ã€‚ä½†æ˜¯ï¼Œå¯¹äºŽServletæ¥è¯´ï¼Œç›´æŽ¥è®¾ç½®Refreshå¤´æ›´åŠ æ–¹ä¾¿ã€‚æ³¨æ„Refreshçš„æ„ä¹‰æ˜¯&quot;Nç§’ä¹‹åŽåˆ·æ–°æœ¬é¡µé¢æˆ–è®¿é—®æŒ‡å®šé¡µé¢&quot;ï¼Œè€Œä¸æ˜¯&quot;æ¯éš”Nç§’åˆ·æ–°æœ¬é¡µé¢æˆ–è®¿é—®æŒ‡å®šé¡µé¢&quot;ã€‚å› æ­¤ï¼Œè¿žç»­åˆ·æ–°è¦æ±‚æ¯æ¬¡éƒ½å‘é€ä¸€ ä¸ªRefreshå¤´ï¼Œè€Œå‘é€204çŠ¶æ€ä»£ç åˆ™å¯ä»¥é˜»æ­¢æµè§ˆå™¨ç»§ç»­åˆ·æ–°ï¼Œä¸ç®¡æ˜¯ä½¿ç”¨Refreshå¤´è¿˜æ˜¯ï¼œMETA HTTP-EQUIV=â€Refreshâ€ â€¦ï¼žã€‚Refreshå¤´ä¸å±žäºŽHTTP 1.1æ­£å¼è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯ä¸€ä¸ªæ‰©å±•ï¼Œä½†Netscapeå’ŒIEéƒ½æ”¯æŒå®ƒ Server: æœåŠ¡å™¨åå­—ã€‚Servletä¸€èˆ¬ä¸è®¾ç½®è¿™ä¸ªå€¼ï¼Œè€Œæ˜¯ç”±WebæœåŠ¡å™¨è‡ªå·±è®¾ç½®ã€‚ Set-Cookie: è®¾ç½®å’Œé¡µé¢å…³è”çš„Cookieã€‚Servletä¸åº”ä½¿ç”¨response.setHeader(â€œSet-Cookieâ€, â€¦)ï¼Œè€Œæ˜¯åº”ä½¿ç”¨HttpServletResponseæä¾›çš„ä¸“ç”¨æ–¹æ³•addCookieã€‚å‚è§ä¸‹æ–‡æœ‰å…³Cookieè®¾ç½®çš„è®¨è®ºã€‚ WWW-Authenticate: å®¢æˆ·åº”è¯¥åœ¨Authorizationå¤´ä¸­æä¾›ä»€ä¹ˆç±»åž‹çš„æŽˆæƒä¿¡æ¯ï¼Ÿåœ¨åŒ…å«401ï¼ˆUnauthorizedï¼‰çŠ¶æ€è¡Œçš„åº”ç­”ä¸­è¿™ä¸ªå¤´æ˜¯å¿…éœ€çš„ã€‚ä¾‹ å¦‚ï¼Œresponse.setHeader(â€œWWW-Authenticateâ€, â€œBASIC realm=ï¼¼â€executivesï¼¼â€â€)ã€‚ æ³¨æ„Servletä¸€èˆ¬ä¸è¿›è¡Œè¿™æ–¹é¢çš„å¤„ç†ï¼Œè€Œæ˜¯è®©WebæœåŠ¡å™¨çš„ä¸“é—¨æœºåˆ¶æ¥æŽ§åˆ¶å—å¯†ç ä¿æŠ¤é¡µé¢çš„è®¿é—®ï¼ˆä¾‹å¦‚.htaccessï¼‰ã€‚ HTTPçŠ¶æ€ç å½“æµè§ˆè€…è®¿é—®ä¸€ä¸ªç½‘é¡µæ—¶ï¼Œæµè§ˆè€…çš„æµè§ˆå™¨ä¼šå‘ç½‘é¡µæ‰€åœ¨æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ã€‚å½“æµè§ˆå™¨æŽ¥æ”¶å¹¶æ˜¾ç¤ºç½‘é¡µå‰ï¼Œæ­¤ç½‘é¡µæ‰€åœ¨çš„æœåŠ¡å™¨ä¼šè¿”å›žä¸€ä¸ªåŒ…å«HTTPçŠ¶æ€ç çš„ä¿¡æ¯å¤´ï¼ˆserver headerï¼‰ç”¨ä»¥å“åº”æµè§ˆå™¨çš„è¯·æ±‚ã€‚ HTTPçŠ¶æ€ç çš„è‹±æ–‡ä¸ºHTTP Status Codeã€‚ HTTPçŠ¶æ€ç åˆ†ç±» 200 OK è¯·æ±‚æˆåŠŸã€‚ä¸€èˆ¬ç”¨äºŽGETä¸ŽPOSTè¯·æ±‚ 401 Unauthorized è¯·æ±‚è¦æ±‚ç”¨æˆ·çš„èº«ä»½è®¤è¯ 500 Internal Server Error æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ 404 Not Found æœåŠ¡å™¨æ— æ³•æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚æ‰¾åˆ°èµ„æºï¼ˆç½‘é¡µï¼‰ã€‚é€šè¿‡æ­¤ä»£ç ï¼Œç½‘ç«™è®¾è®¡äººå‘˜å¯è®¾ç½®â€æ‚¨æ‰€è¯·æ±‚çš„èµ„æºæ— æ³•æ‰¾åˆ°â€çš„ä¸ªæ€§é¡µé¢ 502 Bad Gateway ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»Žè¿œç¨‹æœåŠ¡å™¨æŽ¥æ”¶åˆ°äº†ä¸€ä¸ªæ— æ•ˆçš„å“åº” HTTP content-typeContent-Typeï¼Œå†…å®¹ç±»åž‹ï¼Œä¸€èˆ¬æ˜¯æŒ‡ç½‘é¡µä¸­å­˜åœ¨çš„Content-Typeï¼Œç”¨äºŽå®šä¹‰ç½‘ç»œæ–‡ä»¶çš„ç±»åž‹å’Œç½‘é¡µçš„ç¼–ç ï¼Œå†³å®šæµè§ˆå™¨å°†ä»¥ä»€ä¹ˆå½¢å¼ã€ä»€ä¹ˆç¼–ç è¯»å–è¿™ä¸ªæ–‡ä»¶]]></content>
      <categories>
        <category>https</category>
      </categories>
      <tags>
        <tag>https</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[finalå’Œstaticçš„ä½œç”¨]]></title>
    <url>%2F2019%2F01%2F06%2Ffinal%E4%BF%AE%E9%A5%B0%E7%AC%A6%E7%9A%84%E4%BD%9C%E7%94%A8%2F</url>
    <content type="text"><![CDATA[finalå…³é”®å­—çš„ä½œç”¨ è¢«finalä¿®é¥°çš„ç±»ä¸å¯ä»¥è¢«ç»§æ‰¿ è¢«finalä¿®é¥°çš„æ–¹æ³•ä¸å¯ä»¥è¢«é‡å†™ è¢«finalä¿®é¥°çš„å˜é‡ä¸å¯è¢«æ”¹å˜ é‡ç‚¹ è¢«fianlä¿®é¥°ä¸å¯å˜çš„æ˜¯å˜é‡çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¼•ç”¨æŒ‡å‘çš„å†…å®¹ï¼Œå¼•ç”¨æŒ‡å‘çš„å†…å®¹æ˜¯å¯ä»¥æ”¹å˜çš„ã€‚ è¢«finaä¿®é¥°çš„å¸¸é‡ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µä¼šå­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­ã€‚ staticå…³é”®å­—çš„ä½œç”¨ è¢«staticä¿®é¥°çš„å˜é‡å±žäºŽç±»å˜é‡ï¼Œå¯ä»¥é€šè¿‡ ç±»å.å˜é‡å ç›´æŽ¥å¼•ç”¨ï¼Œè€Œä¸éœ€è¦newå‡ºä¸€ä¸ªç±»ã€‚ è¢«staticä¿®é¥°çš„æ–¹æ³•å±žäºŽç±»æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ ç±»å.å˜é‡å ç›´æŽ¥å¼•ç”¨ï¼Œè€Œä¸éœ€è¦newå‡ºä¸€ä¸ªç±»ã€‚ è¢«staticä¿®é¥°çš„å˜é‡å’Œæ–¹æ³•å±žäºŽç±»çš„é™æ€èµ„æºï¼Œæ˜¯ç±»å®žä¾‹ä¹‹é—´å…±äº«çš„ã€‚JDKæŠŠä¸åŒçš„é™æ€èµ„æºæ”¾åœ¨äº†ä¸åŒçš„ç±»ä¸­è€Œä¸æŠŠæ‰€æœ‰çš„é™æ€èµ„æºæ”¾åœ¨ä¸€ä¸ªç±»é‡Œé¢æ˜¯å› ä¸ºï¼š ä¸åŒçš„ç±»æœ‰è‡ªå·±çš„é™æ€èµ„æºï¼Œè¿™å¯ä»¥å®žçŽ°é™æ€èµ„æºåˆ†ç±»ã€‚æ¯”å¦‚å’Œæ•°å­¦ç›¸å…³çš„é™æ€èµ„æºæ”¾åœ¨java.lang.Mathä¸­ï¼Œå’Œæ—¥åŽ†ç›¸å…³çš„é™æ€èµ„æºæ”¾åœ¨java.util.Calendarä¸­ï¼Œè¿™æ ·æ¯”è¾ƒæ¸…æ™° é¿å…é‡åã€‚ä¸åŒçš„ç±»ä¹‹é—´æœ‰é‡åçš„é™æ€å˜é‡åï¼Œé™æ€æ–¹æ³•åä¹Ÿæ˜¯å¾ˆæ­£å¸¸ã€‚ é¿å…é™æ€èµ„æºç±»æ— é™è†¨èƒ€ã€‚ é—®é¢˜é™æ€æ–¹æ³•èƒ½ä¸èƒ½å¼•ç”¨éžé™æ€èµ„æºï¼Ÿé™æ€æ–¹æ³•é‡Œé¢èƒ½ä¸èƒ½å¼•ç”¨é™æ€èµ„æºï¼Ÿéžé™æ€æ–¹æ³•é‡Œé¢èƒ½ä¸èƒ½å¼•ç”¨é™æ€èµ„æºï¼Ÿæ¯”å¦‚å°±ä»¥è¿™æ®µä»£ç ä¸ºä¾‹ï¼Œæ˜¯å¦æœ‰é”™ï¼Ÿ public class A{ private int i = 1; public static void main(String[] args){ i = 1;//é”™è¯¯ } } é™æ€èµ„æºå±žäºŽç±»ï¼Œä½†æ˜¯æ˜¯ç‹¬ç«‹äºŽç±»å­˜åœ¨çš„ã€‚ä»ŽJVMç±»çš„åŠ è½½æœºåˆ¶çš„è§’åº¦è®²ï¼Œé™æ€èµ„æºæ˜¯ç±»åˆå§‹åŒ–çš„æ—¶å€™åŠ è½½çš„ï¼Œè€Œéžé™æ€èµ„æºæ˜¯ç±»newçš„æ—¶å€™åŠ è½½çš„ã€‚ç±»çš„åˆå§‹åŒ–æ—©äºŽç±»çš„new,æ¯”å¦‚Class.forName(â€œxxxâ€),å°±æ˜¯åˆå§‹åŒ–äº†ä¸€ä¸ªç±»ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰newå®ƒï¼Œåªæ˜¯åŠ è½½è¿™ä¸ªç±»çš„é™æ€èµ„æºã€‚æ‰€ä»¥å¯¹äºŽé™æ€èµ„æºæ¥è¯´ï¼Œå®ƒæ˜¯ä¸å¯èƒ½çŸ¥é“ä¸€ä¸ªç±»ä¸­æœ‰å“ªäº›éžé™æ€èµ„æºçš„ï¼›ä½†æ˜¯å¯¹äºŽéžé™æ€èµ„æºæ¥è¯´å°±ä¸ä¸€æ ·äº†ï¼Œå®ƒæ˜¯newå‡ºæ¥ä¹‹åŽäº§ç”Ÿçš„ï¼Œå› æ­¤å±žäºŽç±»çš„å®ƒéƒ½è®¤è¯†ã€‚æ‰€ä»¥ç»“è®ºæ˜¯ï¼š é™æ€æ–¹æ³•ä¸èƒ½å¼•ç”¨éžé™æ€èµ„æºã€‚éžé™æ€èµ„æºåœ¨newå¯¹è±¡çš„æ—¶å€™æ‰ä¼šäº§ç”Ÿï¼Œæ™šäºŽä¸€åˆå§‹åŒ–å°±å­˜åœ¨çš„é™æ€èµ„æºã€‚ é™æ€æ–¹æ³•é‡Œé¢å¯ä»¥å¼•ç”¨é™æ€èµ„æºã€‚éƒ½æ˜¯ç±»åˆå§‹åŒ–çš„æ—¶å€™åŠ è½½çš„ã€‚ éžé™æ€æ–¹æ³•å¯ä»¥å¼•ç”¨é™æ€èµ„æºã€‚éžé™æ€æ–¹æ³•æ˜¯newä¹‹åŽäº§ç”Ÿçš„ï¼Œé™æ€èµ„æºæ˜¯ç±»ä¸€åˆå§‹åŒ–å°±å­˜åœ¨çš„ã€‚ é™æ€å—é™æ€å—æ˜¯staticçš„é‡è¦åº”ç”¨ä¹‹ä¸€ã€‚ä¸»è¦ç”¨äºŽåˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™åšæ“ä½œç”¨çš„ï¼Œå’Œé™æ€å˜é‡ï¼Œé™æ€æ–¹æ³•ä¸€æ ·ï¼Œé™æ€å—é‡Œé¢çš„ä»£ç åªæ‰§è¡Œä¸€æ¬¡ï¼Œä¸”åªåœ¨ç±»åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œã€‚ public class A{ private static int a = B(); static{ System.out.println(&quot;Enter A.static block&quot;); } public static void main(String[] args){ new A(); } public static int B(){ System.out.println(&quot;Enter A.B()&quot;); return 1; } } æ‰“å°ç»“æžœï¼š Enter A.B() Enter A.static block ç»“è®ºï¼š é™æ€èµ„æºçš„åŠ è½½é¡ºåºæ˜¯ä¸¥æ ¼å®‰è£…é™æ€èµ„æºçš„å®šä¹‰é¡ºåºåŠ è½½çš„ã€‚ public class A{ static { c = 3; System.out.println(c);//Cannot reference a field before it is defined } private static int c; } ç»“è®ºï¼š é™æ€ä»£ç å—å¯¹äºŽå®šä¹‰åœ¨å®ƒä¹‹åŽçš„é™æ€å˜é‡ï¼Œå¯ä»¥èµ‹å€¼ï¼Œä½†æ˜¯ä¸èƒ½è®¿é—®ã€‚ public class A{ static { System.out.println(&quot;A.static block&quot;); } public A() { System.out.println(&quot;A.constructor()&quot;); } } public class B extends A{ static { System.out.println(&quot;B.static block&quot;); } public B() { System.out.println(&quot;B.constructor()&quot;); } public static void main(String[] args) { new B(); new B(); } } æ‰“å°ç»“æžœï¼š A.static block B.static block A.constructor() B.constructor() A.constructor() B.constructor() ç»“è®ºï¼š é™æ€ä»£ç å—æ˜¯ä¸¥æ ¼æŒ‰ç…§çˆ¶ç±»é™æ€ä»£ç å—ã€‹å­ç±»é™æ€ä»£ç å—çš„é¡ºåºåŠ è½½çš„ï¼Œä¸”åªåŠ è½½ä¸€æ¬¡ã€‚ é¡¹ç›®ä¸­ç”¨åˆ°çš„é¡¹ç›®ä¸­çš„è§’è‰²ç±»åž‹é€šå¸¸ç”¨static finalä¿®é¥° public static final String TYPE_A = &quot;a&quot;; public static final String TYPE_B = &quot;b&quot;; public:ä½¿æŽ¥å£çš„å®žçŽ°ç±»å¯ä»¥ä½¿ç”¨è¿™ä¸ªå¸¸é‡ static:staticä¿®é¥°çš„è¡¨ç¤ºæ˜¯å±žäºŽç±»çš„ï¼Œéšç€ç±»çš„åŠ è½½è€Œå­˜åœ¨ã€‚å¦‚æžœæ˜¯éžstaticçš„ï¼Œå°±è¡¨ç¤ºå±žäºŽå¯¹è±¡çš„ï¼Œåªæœ‰å»ºç«‹å¯¹è±¡æ—¶æ‰æœ‰å®ƒï¼Œè€ŒæŽ¥å£æ˜¯ä¸èƒ½å»ºç«‹å¯¹è±¡çš„ï¼Œæ‰€ä»¥æŽ¥å£çš„å¸¸é‡å¿…é¡»å®šä¹‰ä¸ºsatic final:finaä¿®é¥°ä¿è¯æŽ¥å£å®šä¹‰çš„å¸¸é‡ä¸èƒ½è¢«å®žçŽ°ç±»åŽ»ä¿®æ”¹ï¼Œå¦‚æžœæ²¡æœ‰finalçš„è¯ï¼Œä»»ç”±å­ç±»éšæ„åŽ»ä¿®æ”¹çš„è¯ï¼ŒæŽ¥å£å»ºç«‹è¿™ä¸ªå¸¸é‡å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¼˜é›…çš„å†™ä»£ç ]]></title>
    <url>%2F2018%2F12%2F19%2F%E4%BC%98%E9%9B%85%E7%9A%84%E5%86%99%E4%BB%A3%E7%A0%81%2F</url>
    <content type="text"><![CDATA[ä»£ç ä¼˜åŒ–çš„ç›®æ ‡1.å‡å°ä»£ç çš„ä½“ç§¯ã€‚ 2.æé«˜ä»£ç è¿è¡Œæ•ˆçŽ‡ ä»£ç è§„èŒƒ æ‰€æœ‰æ–‡ä»¶çš„å¼€å¤´éƒ½è¦æœ‰Javaæ–‡æ¡£çš„æ³¨é‡Šï¼ˆ/* /ï¼‰ å¸¸é‡åº”è¯¥å…¨éƒ¨å¤§å†™ï¼Œå•è¯ä¹‹é—´ç”±ä¸‹åˆ’çº¿åˆ†éš”(ä¾‹å¦‚ï¼ŒMAX_WORK_HOURS) æ•°ç»„æ ‡è¯†ï¼šè¦ç”¨â€int[] packetsâ€ï¼Œè€Œä¸æ˜¯â€int packets[]â€ï¼ŒåŽä¸€ç§æ°¸è¿œä¹Ÿä¸è¦ç”¨ ä¸è¦åœ¨å¾ªçŽ¯ä¸­æž„é€ å’Œé‡Šæ”¾å¯¹è±¡ ä¸è¦åœ¨å¾ªçŽ¯ä¸­é¢‘ç¹æŸ¥è¯¢æ•°æ®åº“ æ–¹æ³•è¦é€šç›˜è€ƒè™‘ï¼Œå°½é‡åšåˆ°å¤ç”¨ã€‚ï¼ˆå¤šæƒ³ï¼‰ ä»£ç ä¼˜åŒ–ç»†èŠ‚å°½é‡é‡ç”¨å¯¹è±¡ç‰¹åˆ«æ˜¯Stringå¯¹è±¡çš„ä½¿ç”¨ï¼Œå‡ºçŽ°å­—ç¬¦ä¸²è¿žæŽ¥æ—¶åº”è¯¥ä½¿ç”¨StringBuilder/StringBufferä»£æ›¿ã€‚ç”±äºŽJavaè™šæ‹Ÿæœºä¸ä»…è¦èŠ±æ—¶é—´ç”Ÿæˆå¯¹è±¡ï¼Œä»¥åŽå¯èƒ½è¿˜éœ€è¦èŠ±æ—¶é—´å¯¹è¿™äº›å¯¹è±¡è¿›è¡Œåžƒåœ¾å›žæ”¶å’Œå¤„ç†ï¼Œå› æ­¤ï¼Œç”Ÿæˆè¿‡å¤šçš„å¯¹è±¡å°†ä¼šç»™ç¨‹åºçš„æ€§èƒ½å¸¦æ¥å¾ˆå¤§çš„å½±å“ã€‚ stringç±»æ˜¯finalç±»ï¼Œä¸èƒ½è¢«ç»§æ‰¿ï¼Œå¹¶ä¸”å®ƒçš„æˆå‘˜æ–¹æ³•éƒ½é»˜è®¤ä¸ºfinalæ–¹æ³•ã€‚åœ¨javaä¸­ï¼Œè¢«finalä¿®é¥°çš„ç±»æ˜¯ä¸å…è®¸è¢«ç»§æ‰¿çš„ï¼Œå¹¶ä¸”è¯¥ç±»ä¸­çš„æˆå‘˜æ–¹æ³•éƒ½é»˜è®¤ä¸ºfinalæ–¹æ³•ã€‚åœ¨æ—©æœŸçš„JVMå®žçŽ°ç‰ˆæœ¬ä¸­ï¼Œè¢«finalä¿®é¥°çš„æ–¹æ³•ä¼šè¢«è½¬ä¸ºå†…åµŒè°ƒç”¨ä»¥æå‡æ‰§è¡Œæ•ˆçŽ‡ã€‚ä»ŽJava SE5/6å¼€å§‹ï¼Œå°±æ¸æ¸æ‘’å¼ƒè¿™ç§æ–¹å¼äº†ã€‚å› æ­¤åœ¨çŽ°åœ¨ç‰ˆæœ¬ä¸­å¹¶ä¸éœ€è¦è€ƒè™‘ç”¨finalåŽ»æå‡æ–¹æ³•è°ƒç”¨æ•ˆçŽ‡ã€‚åªæœ‰åœ¨ç¡®å®šä¸æƒ³è®©è¯¥æ–¹æ³•è¢«è¦†ç›–æ—¶ï¼Œæ‰å°†æ–¹æ³•è®¾ç½®ä¸ºfinal. Stringç±»å…¶å®žæ˜¯é€šè¿‡charæ•°ç»„æ¥ä¿å­˜å­—ç¬¦ä¸²çš„ã€‚æ‰€ä»¥æ— è®ºæ˜¯substringã€concatã€replaceæ“ä½œéƒ½ä¸æ˜¯åœ¨åŽŸæœ‰çš„å­—ç¬¦ä¸²ä¸Šè¿›è¡Œçš„ï¼Œè€Œæ˜¯é‡æ–°ç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚æ‰€ä»¥ç»“è®ºæ˜¯ï¼šå¯¹Stringå¯¹è±¡çš„ä»»ä½•æ”¹å˜éƒ½ä¸å½±å“åˆ°åŽŸå¯¹è±¡ï¼Œç›¸å…³çš„ä»»ä½•changeæ“ä½œéƒ½ä¼šç”Ÿæˆæ–°çš„å¯¹è±¡ã€‚ é€šè¿‡newå…³é”®å­—æ¥ç”Ÿæˆå¯¹è±¡æ˜¯åœ¨å †åŒºè¿›è¡Œçš„ï¼Œæ‰€ä»¥é€šè¿‡newæ¥åˆ›å»ºå¯¹è±¡ï¼Œåˆ›å»ºå‡ºçš„ä¸€å®šæ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œå³ä½¿å­—ç¬¦ä¸²çš„å†…å®¹æ˜¯ç›¸åŒçš„ã€‚ åœ¨classæ–‡ä»¶ä¸­æœ‰ä¸€éƒ¨åˆ†æ¥å­˜å‚¨ç¼–è¯‘æœŸé—´ç”Ÿæˆçš„å­—é¢å¸¸é‡ä»¥åŠç¬¦åˆçš„å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å«åšclassæ–‡ä»¶å¸¸é‡æ± ï¼Œåœ¨è¿è¡ŒæœŸé—´å¯¹åº”ç€æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ã€‚ä¸‹é¢ä»£ç  str1å’Œstr3éƒ½å­˜å‚¨åœ¨å¸¸é‡æ± ä¸­ï¼Œåªå­˜äº†ä¸€ä»½ã€‚ public class Main { public static void main(String[] args) { String str1 = &quot;hello world&quot;; String str2 = new String(&quot;hello world&quot;); String str3 = &quot;hello world&quot;; String str4 = new String(&quot;hello world&quot;); System.out.println(str1==str2); System.out.println(str1==str3); System.out.println(str2==str4); } } è¾“å‡ºç»“æžœä¸ºfalse true false æ—¢ç„¶å·²ç»æœ‰äº†Stringç±»ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜éœ€è¦StringBuilderã€StringBufferç±»å‘¢ public class Main { public static void main(String[] args) { String string = &quot;&quot;; for(int i=0;i&lt;10000;i++){ string += &quot;hello&quot;; } } } è¿™å¥ string += â€œhelloâ€;çš„è¿‡ç¨‹ç›¸å½“äºŽå°†åŽŸæœ‰çš„stringå˜é‡æŒ‡å‘çš„å¯¹è±¡å†…å®¹å–å‡ºä¸Žâ€helloâ€ä½œå­—ç¬¦ä¸²ç›¸åŠ æ“ä½œå†å­˜è¿›å¦ä¸€ä¸ªæ–°çš„Stringå¯¹è±¡å½“ä¸­ï¼Œå†è®©stringå˜é‡æŒ‡å‘æ–°ç”Ÿæˆçš„å¯¹è±¡ã€‚ç»“è®ºï¼šä½¿ç”¨Stringè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æŽ¥ä¼šé€ æˆå†…å­˜èµ„æºæµªè´¹ã€‚ public class Main { public static void main(String[] args) { StringBuilder stringBuilder = new StringBuilder(); for(int i=0;i&lt;10000;i++){ stringBuilder.append(&quot;hello&quot;); } } } ä½¿ç”¨StringBuilder newæ“ä½œåªè¿›è¡Œäº†ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´åªç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡ï¼Œappendæ“ä½œæ˜¯åœ¨åŽŸæœ‰å¯¹è±¡çš„åŸºç¡€ä¸Šè¿›è¡Œçš„ã€‚å› æ­¤åœ¨å¾ªçŽ¯äº†10000æ¬¡ä¹‹åŽï¼Œè¿™æ®µä»£ç æ‰€å çš„èµ„æºè¦æ¯”ä¸Šé¢å°å¾—å¤šã€‚ äº‹å®žä¸Šï¼ŒStringBuilderå’ŒStringBufferç±»æ‹¥æœ‰çš„æˆå‘˜å±žæ€§ä»¥åŠæˆå‘˜æ–¹æ³•åŸºæœ¬ç›¸åŒï¼ŒåŒºåˆ«æ˜¯StringBufferç±»çš„æˆå‘˜æ–¹æ³•å‰é¢å¤šäº†ä¸€ä¸ªå…³é”®å­—ï¼šsynchronizedï¼Œä¸ç”¨å¤šè¯´ï¼Œè¿™ä¸ªå…³é”®å­—æ˜¯åœ¨å¤šçº¿ç¨‹è®¿é—®æ—¶èµ·åˆ°å®‰å…¨ä¿æŠ¤ä½œç”¨çš„,ä¹Ÿå°±æ˜¯è¯´StringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ StringBuilderçš„insertæ–¹æ³•ï¼š public StringBuilder insert(int index, char str[], int offset, int len){ super.insert(index, str, offset, len); return this; } StringBufferçš„insertæ–¹æ³•ï¼š public synchronized StringBuffer insert(int index, char str[], int offset, int len) { super.insert(index, str, offset, len); return this; } ç»“è®ºï¼š 1.å¯¹äºŽç›´æŽ¥ç›¸åŠ å­—ç¬¦ä¸²ï¼Œæ•ˆçŽ‡å¾ˆé«˜ï¼Œå› ä¸ºåœ¨ç¼–è¯‘å™¨ä¾¿ç¡®å®šäº†å®ƒçš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´å½¢å¦‚â€Iâ€+â€loveâ€+â€javaâ€; çš„å­—ç¬¦ä¸²ç›¸åŠ ï¼Œåœ¨ç¼–è¯‘æœŸé—´ä¾¿è¢«ä¼˜åŒ–æˆäº†â€Ilovejavaâ€ã€‚è¿™ä¸ªå¯ä»¥ç”¨javap -cå‘½ä»¤åç¼–è¯‘ç”Ÿæˆçš„classæ–‡ä»¶è¿›è¡ŒéªŒè¯ã€‚ å¯¹äºŽé—´æŽ¥ç›¸åŠ ï¼ˆå³åŒ…å«å­—ç¬¦ä¸²å¼•ç”¨ï¼‰ï¼Œå½¢å¦‚s1+s2+s3; æ•ˆçŽ‡è¦æ¯”ç›´æŽ¥ç›¸åŠ ä½Žï¼Œå› ä¸ºåœ¨ç¼–è¯‘å™¨ä¸ä¼šå¯¹å¼•ç”¨å˜é‡è¿›è¡Œä¼˜åŒ–ã€‚ 2.Stringã€StringBuilderã€StringBufferä¸‰è€…çš„æ‰§è¡Œæ•ˆçŽ‡ï¼š StringBuilder &gt; StringBuffer &gt; String å½“ç„¶è¿™ä¸ªæ˜¯ç›¸å¯¹çš„ï¼Œä¸ä¸€å®šåœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½æ˜¯è¿™æ ·ã€‚ æ¯”å¦‚String str = â€œhelloâ€+ â€œworldâ€çš„æ•ˆçŽ‡å°±æ¯” StringBuilder st = new StringBuilder().append(â€œhelloâ€).append(â€œworldâ€)è¦é«˜ã€‚ å› æ­¤ï¼Œè¿™ä¸‰ä¸ªç±»æ˜¯å„æœ‰åˆ©å¼Šï¼Œåº”å½“æ ¹æ®ä¸åŒçš„æƒ…å†µæ¥è¿›è¡Œé€‰æ‹©ä½¿ç”¨ï¼š å½“å­—ç¬¦ä¸²ç›¸åŠ æ“ä½œæˆ–è€…æ”¹åŠ¨è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨ String str=â€helloâ€è¿™ç§å½¢å¼ï¼› å½“å­—ç¬¦ä¸²ç›¸åŠ æ“ä½œè¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨StringBuilderï¼Œå¦‚æžœé‡‡ç”¨äº†å¤šçº¿ç¨‹ï¼Œåˆ™ä½¿ç”¨StringBufferã€‚ å°½å¯èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡è°ƒç”¨æ–¹æ³•æ—¶ä¼ é€’çš„å‚æ•°ä»¥åŠåœ¨è°ƒç”¨ä¸­åˆ›å»ºçš„ä¸´æ—¶å˜é‡éƒ½ä¿å­˜åœ¨æ ˆä¸­ï¼Œé€Ÿåº¦è¾ƒå¿«ï¼Œå…¶ä»–å˜é‡ï¼Œå¦‚é™æ€å˜é‡ã€å®žä¾‹å˜é‡ç­‰ï¼Œéƒ½åœ¨å †ä¸­åˆ›å»ºï¼Œé€Ÿåº¦è¾ƒæ…¢ã€‚å¦å¤–ï¼Œæ ˆä¸­åˆ›å»ºçš„å˜é‡ï¼Œéšç€æ–¹æ³•çš„è¿è¡Œç»“æŸï¼Œè¿™äº›å†…å®¹å°±æ²¡äº†ï¼Œä¸éœ€è¦é¢å¤–çš„åžƒåœ¾å›žæ”¶ã€‚ åŠæ—¶å…³é—­æµJavaç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œè¿›è¡Œæ•°æ®åº“è¿žæŽ¥ã€I/Oæµæ“ä½œæ—¶åŠ¡å¿…å°å¿ƒï¼Œåœ¨ä½¿ç”¨å®Œæ¯•åŽï¼ŒåŠæ—¶å…³é—­ä»¥é‡Šæ”¾èµ„æºã€‚å› ä¸ºå¯¹è¿™äº›å¤§å¯¹è±¡çš„æ“ä½œä¼šé€ æˆç³»ç»Ÿå¤§çš„å¼€é”€ï¼Œç¨æœ‰ä¸æ…Žï¼Œå°†ä¼šå¯¼è‡´ä¸¥é‡çš„åŽæžœã€‚å°½é‡é¿å…åœ¨forå¾ªçŽ¯ä¸­è¿›è¡Œæ•°æ®åº“çš„æ“ä½œã€‚ å°½é‡å‡å°‘å¯¹å˜é‡çš„é‡å¤è®¡ç®—æ˜Žç¡®ä¸€ä¸ªæ¦‚å¿µï¼Œå¯¹æ–¹æ³•çš„è°ƒç”¨ï¼Œå³ä½¿æ–¹æ³•ä¸­åªæœ‰ä¸€å¥è¯­å¥ï¼Œä¹Ÿæ˜¯æœ‰æ¶ˆè€—çš„ï¼ŒåŒ…æ‹¬åˆ›å»ºæ ˆå¸§ã€è°ƒç”¨æ–¹æ³•æ—¶ä¿æŠ¤çŽ°åœºã€è°ƒç”¨æ–¹æ³•å®Œæ¯•æ—¶æ¢å¤çŽ°åœºç­‰ã€‚æ‰€ä»¥ä¾‹å¦‚ä¸‹é¢çš„æ“ä½œï¼š for (int i = 0; i &lt; list.size(); i++) {...} æ›¿æ¢ä¸º for (int i = 0, length = list.size(); i &lt; length; i++) {...} è¿™æ ·ï¼Œåœ¨list.size()å¾ˆå¤§çš„æ—¶å€™ï¼Œå°±å‡å°‘äº†å¾ˆå¤šçš„æ¶ˆè€— å°½é‡é‡‡ç”¨æ‡’åŠ è½½çš„ç­–ç•¥ï¼Œå³åœ¨éœ€è¦çš„æ—¶å€™æ‰åˆ›å»ºä¾‹å¦‚ï¼š String str = &quot;aaa&quot;; if (i == 1) { list.add(str); } å»ºè®®æ›¿æ¢ä¸ºï¼š if (i == 1) { String str = &quot;aaa&quot;; list.add(str); } æ…Žç”¨å¼‚å¸¸å¼‚å¸¸å¯¹æ€§èƒ½ä¸åˆ©ã€‚æŠ›å‡ºå¼‚å¸¸é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ŒThrowableæŽ¥å£çš„æž„é€ å‡½æ•°è°ƒç”¨åä¸ºfillInStackTrace()çš„æœ¬åœ°åŒæ­¥æ–¹æ³•ï¼ŒfillInStackTrace()æ–¹æ³•æ£€æŸ¥å †æ ˆï¼Œæ”¶é›†è°ƒç”¨è·Ÿè¸ªä¿¡æ¯ã€‚åªè¦æœ‰å¼‚å¸¸è¢«æŠ›å‡ºï¼ŒJavaè™šæ‹Ÿæœºå°±å¿…é¡»è°ƒæ•´è°ƒç”¨å †æ ˆï¼Œå› ä¸ºåœ¨å¤„ç†è¿‡ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚å¼‚å¸¸åªèƒ½ç”¨äºŽé”™è¯¯å¤„ç†ï¼Œä¸åº”è¯¥ç”¨æ¥æŽ§åˆ¶ç¨‹åºæµç¨‹ã€‚ å¦‚æžœèƒ½ä¼°è®¡åˆ°å¾…æ·»åŠ çš„å†…å®¹é•¿åº¦ï¼Œä¸ºåº•å±‚ä»¥æ•°ç»„æ–¹å¼å®žçŽ°çš„é›†åˆã€å·¥å…·ç±»æŒ‡å®šåˆå§‹é•¿åº¦æ¯”å¦‚ArrayListã€LinkedLlistã€StringBuilderã€StringBufferã€HashMapã€HashSetç­‰ç­‰ï¼Œä»¥StringBuilderä¸ºä¾‹ï¼š StringBuilder() // é»˜è®¤åˆ†é…16ä¸ªå­—ç¬¦çš„ç©ºé—´ StringBuilder(int size) // é»˜è®¤åˆ†é…sizeä¸ªå­—ç¬¦çš„ç©ºé—´ StringBuilder(String str) // é»˜è®¤åˆ†é…16ä¸ªå­—ç¬¦+str.length()ä¸ªå­—ç¬¦ç©ºé—´ å¯ä»¥é€šè¿‡ç±»ï¼ˆè¿™é‡ŒæŒ‡çš„ä¸ä»…ä»…æ˜¯ä¸Šé¢çš„StringBuilderï¼‰çš„æž„é€ å‡½æ•°æ¥è®¾å®šå®ƒçš„åˆå§‹åŒ–å®¹é‡ï¼Œè¿™æ ·å¯ä»¥æ˜Žæ˜¾åœ°æå‡æ€§èƒ½ã€‚æ¯”å¦‚StringBuilderå§ï¼Œlengthè¡¨ç¤ºå½“å‰çš„StringBuilderèƒ½ä¿æŒçš„å­—ç¬¦æ•°é‡ã€‚å› ä¸ºå½“StringBuilderè¾¾åˆ°æœ€å¤§å®¹é‡çš„æ—¶å€™ï¼Œå®ƒä¼šå°†è‡ªèº«å®¹é‡å¢žåŠ åˆ°å½“å‰çš„2å€å†åŠ 2ï¼Œæ— è®ºä½•æ—¶åªè¦StringBuilderè¾¾åˆ°å®ƒçš„æœ€å¤§å®¹é‡ï¼Œå®ƒå°±ä¸å¾—ä¸åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦æ•°ç»„ç„¶åŽå°†æ—§çš„å­—ç¬¦æ•°ç»„å†…å®¹æ‹·è´åˆ°æ–°å­—ç¬¦æ•°ç»„ä¸­â€”-è¿™æ˜¯ååˆ†è€—è´¹æ€§èƒ½çš„ä¸€ä¸ªæ“ä½œã€‚è¯•æƒ³ï¼Œå¦‚æžœèƒ½é¢„ä¼°åˆ°å­—ç¬¦æ•°ç»„ä¸­å¤§æ¦‚è¦å­˜æ”¾5000ä¸ªå­—ç¬¦è€Œä¸æŒ‡å®šé•¿åº¦ï¼Œæœ€æŽ¥è¿‘5000çš„2æ¬¡å¹‚æ˜¯4096ï¼Œæ¯æ¬¡æ‰©å®¹åŠ çš„2ä¸ç®¡ï¼Œé‚£ä¹ˆï¼š åœ¨4096 çš„åŸºç¡€ä¸Šï¼Œå†ç”³è¯·8194ä¸ªå¤§å°çš„å­—ç¬¦æ•°ç»„ï¼ŒåŠ èµ·æ¥ç›¸å½“äºŽä¸€æ¬¡ç”³è¯·äº†12290ä¸ªå¤§å°çš„å­—ç¬¦æ•°ç»„ï¼Œå¦‚æžœä¸€å¼€å§‹èƒ½æŒ‡å®š5000ä¸ªå¤§å°çš„å­—ç¬¦æ•°ç»„ï¼Œå°±èŠ‚çœäº†ä¸€å€ä»¥ä¸Šçš„ç©ºé—´ æŠŠåŽŸæ¥çš„4096ä¸ªå­—ç¬¦æ‹·è´åˆ°æ–°çš„çš„å­—ç¬¦æ•°ç»„ä¸­åŽ»ã€‚ è¿™æ ·ï¼Œæ—¢æµªè´¹å†…å­˜ç©ºé—´åˆé™ä½Žä»£ç è¿è¡Œæ•ˆçŽ‡ã€‚æ‰€ä»¥ï¼Œç»™åº•å±‚ä»¥æ•°ç»„å®žçŽ°çš„é›†åˆã€å·¥å…·ç±»è®¾ç½®ä¸€ä¸ªåˆç†çš„åˆå§‹åŒ–å®¹é‡æ˜¯é”™ä¸äº†çš„ï¼Œè¿™ä¼šå¸¦æ¥ç«‹ç«¿è§å½±çš„æ•ˆæžœã€‚ä½†æ˜¯ï¼Œæ³¨æ„ï¼ŒåƒHashMapè¿™ç§æ˜¯ä»¥æ•°ç»„+é“¾è¡¨å®žçŽ°çš„é›†åˆï¼Œåˆ«æŠŠåˆå§‹å¤§å°å’Œä½ ä¼°è®¡çš„å¤§å°è®¾ç½®å¾—ä¸€æ ·ï¼Œå› ä¸ºä¸€ä¸ªtableä¸Šåªè¿žæŽ¥ä¸€ä¸ªå¯¹è±¡çš„å¯èƒ½æ€§å‡ ä¹Žä¸º0ã€‚åˆå§‹å¤§å°å»ºè®®è®¾ç½®ä¸º2çš„Næ¬¡å¹‚ï¼Œå¦‚æžœèƒ½ä¼°è®¡åˆ°æœ‰2000ä¸ªå…ƒç´ ï¼Œè®¾ç½®æˆnew HashMap(128)ã€new HashMap(256)éƒ½å¯ä»¥ã€‚ å¾ªçŽ¯å†…ä¸è¦ä¸æ–­åˆ›å»ºå¯¹è±¡å¼•ç”¨ä¾‹å¦‚ï¼š for (int i = 1; i &lt;= count; i++){ Object obj = new Object(); } è¿™ç§åšæ³•ä¼šå¯¼è‡´å†…å­˜ä¸­æœ‰countä»½Objectå¯¹è±¡å¼•ç”¨å­˜åœ¨ï¼Œcountå¾ˆå¤§çš„è¯ï¼Œå°±è€—è´¹å†…å­˜äº†ï¼Œå»ºè®®ä¸ºæ”¹ä¸ºï¼š Object obj = null; for (int i = 0; i &lt;= count; i++) { obj = new Object(); } åŸºäºŽæ•ˆçŽ‡å’Œç±»åž‹æ£€æŸ¥çš„è€ƒè™‘ï¼Œåº”è¯¥å°½å¯èƒ½ä½¿ç”¨arrayï¼Œæ— æ³•ç¡®å®šæ•°ç»„å¤§å°æ—¶æ‰ä½¿ç”¨ArrayListï¼Œå°½é‡ä½¿ç”¨HashMapã€ArrayListã€StringBuilderï¼Œé™¤éžçº¿ç¨‹å®‰å…¨éœ€è¦ï¼Œå¦åˆ™ä¸æŽ¨èä½¿ç”¨Hashtableã€Vectorã€StringBufferï¼ŒåŽä¸‰è€…ç”±äºŽä½¿ç”¨åŒæ­¥æœºåˆ¶è€Œå¯¼è‡´äº†æ€§èƒ½å¼€é”€ã€‚å®žçŽ°RandomAccessæŽ¥å£çš„é›†åˆæ¯”å¦‚ArrayListï¼Œåº”å½“ä½¿ç”¨æœ€æ™®é€šçš„forå¾ªçŽ¯è€Œä¸æ˜¯foreachå¾ªçŽ¯æ¥éåŽ†if (list instanceof RandomAccess){ for (int i = 0; i &lt; list.size(); i++){ ... } } else { Iterator&lt;?&gt; iterator = list.iterable(); while (iterator.hasNext()){ iterator.next() } } è¿™æ˜¯JDKæŽ¨èç»™ç”¨æˆ·çš„ã€‚JDK APIå¯¹äºŽRandomAccessæŽ¥å£çš„è§£é‡Šæ˜¯ï¼šå®žçŽ°RandomAccessæŽ¥å£ç”¨æ¥è¡¨æ˜Žå…¶æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼Œæ­¤æŽ¥å£çš„ä¸»è¦ç›®çš„æ˜¯å…è®¸ä¸€èˆ¬çš„ç®—æ³•æ›´æ”¹å…¶è¡Œä¸ºï¼Œä»Žè€Œå°†å…¶åº”ç”¨åˆ°éšæœºæˆ–è¿žç»­è®¿é—®åˆ—è¡¨æ—¶èƒ½æä¾›è‰¯å¥½çš„æ€§èƒ½ã€‚å®žé™…ç»éªŒè¡¨æ˜Žï¼Œå®žçŽ°RandomAccessæŽ¥å£çš„ç±»å®žä¾‹ï¼Œå‡å¦‚æ˜¯éšæœºè®¿é—®çš„ï¼Œä½¿ç”¨æ™®é€šforå¾ªçŽ¯æ•ˆçŽ‡å°†é«˜äºŽä½¿ç”¨foreachå¾ªçŽ¯ï¼›åè¿‡æ¥ï¼Œå¦‚æžœæ˜¯é¡ºåºè®¿é—®çš„ï¼Œåˆ™ä½¿ç”¨Iteratorä¼šæ•ˆçŽ‡æ›´é«˜ã€‚ ä½¿ç”¨å¸¦ç¼“å†²çš„è¾“å…¥è¾“å‡ºæµè¿›è¡ŒIOæ“ä½œå¸¦ç¼“å†²çš„è¾“å…¥è¾“å‡ºæµï¼Œå³BufferedReaderã€BufferedWriterã€BufferedInputStreamã€BufferedOutputStreamï¼Œè¿™å¯ä»¥æžå¤§åœ°æå‡IOæ•ˆçŽ‡ å­—ç¬¦ä¸²å˜é‡å’Œå­—ç¬¦ä¸²å¸¸é‡equalsçš„æ—¶å€™å°†å­—ç¬¦ä¸²å¸¸é‡å†™åœ¨å‰é¢æŠŠä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»åž‹è½¬ä¸ºå­—ç¬¦ä¸²ï¼ŒåŸºæœ¬æ•°æ®ç±»åž‹.toString()æ˜¯æœ€å¿«çš„æ–¹å¼ã€String.valueOf(æ•°æ®)æ¬¡ä¹‹ã€æ•°æ®+â€â€æœ€æ…¢public static void main(String[] args){ int loopTime = 50000; Integer i = 0; long startTime = System.currentTimeMillis(); for (int j = 0; j &lt; loopTime; j++){ String str = String.valueOf(i); } System.out.println(&quot;String.valueOf()ï¼š&quot; + (System.currentTimeMillis() - startTime) + &quot;ms&quot;); startTime = System.currentTimeMillis(); for (int j = 0; j &lt; loopTime; j++){ String str = i.toString(); } System.out.println(&quot;Integer.toString()ï¼š&quot; + (System.currentTimeMillis() - startTime) + &quot;ms&quot;); startTime = System.currentTimeMillis(); for (int j = 0; j &lt; loopTime; j++){ String str = i + &quot;&quot;; } System.out.println(&quot;i + \&quot;\&quot;ï¼š&quot; + (System.currentTimeMillis() - startTime) + &quot;ms&quot;); } è¿è¡Œç»“æžœä¸ºï¼š String.valueOf()ï¼š11ms Integer.toString()ï¼š5ms i + &quot;&quot;ï¼š25ms ä¸‰è€…å¯¹æ¯”ä¸‹æ¥ï¼Œæ˜Žæ˜¾æ˜¯2æœ€å¿«ã€1æ¬¡ä¹‹ã€3æœ€æ…¢ã€‚ç»“è®ºï¼š ä»¥åŽé‡åˆ°æŠŠä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»åž‹è½¬ä¸ºStringçš„æ—¶å€™ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨toString()æ–¹æ³•ã€‚è‡³äºŽä¸ºä»€ä¹ˆï¼Œå¾ˆç®€å•ï¼š String.valueOf()æ–¹æ³•åº•å±‚è°ƒç”¨äº†Integer.toString()æ–¹æ³•ï¼Œä½†æ˜¯ä¼šåœ¨è°ƒç”¨å‰åšç©ºåˆ¤æ–­ Integer.toString()æ–¹æ³•å°±ä¸è¯´äº†ï¼Œç›´æŽ¥è°ƒç”¨äº† i + â€œâ€åº•å±‚ä½¿ç”¨äº†StringBuilderå®žçŽ°ï¼Œå…ˆç”¨appendæ–¹æ³•æ‹¼æŽ¥ï¼Œå†ç”¨toString()æ–¹æ³•èŽ·å–å­—ç¬¦ä¸² ä½¿ç”¨æœ€æœ‰æ•ˆçŽ‡çš„æ–¹å¼åŽ»éåŽ†Mappublic static void main(String[] args){ HashMap&lt;String, String&gt; hm = new HashMap&lt;String, String&gt;(); hm.put(&quot;111&quot;, &quot;222&quot;); Set&lt;Map.Entry&lt;String, String&gt;&gt; entrySet = hm.entrySet(); Iterator&lt;Map.Entry&lt;String, String&gt;&gt; iter = entrySet.iterator(); while (iter.hasNext()) { Map.Entry&lt;String, String&gt; entry = iter.next(); System.out.println(entry.getKey() + &quot;\t&quot; + entry.getValue()); } } å¦‚æžœä½ åªæ˜¯æƒ³éåŽ†ä¸€ä¸‹è¿™ä¸ªMapçš„keyå€¼ï¼Œé‚£ç”¨â€Set keySet = hm.keySet();â€ä¼šæ¯”è¾ƒåˆé€‚ä¸€äº›]]></content>
      <categories>
        <category>code</category>
      </categories>
      <tags>
        <tag>code</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Redisç›¸å…³åŠå®žè·µ]]></title>
    <url>%2F2018%2F12%2F15%2FRedis%E7%9B%B8%E5%85%B3%E5%8F%8A%E5%AE%9E%E8%B7%B5%2F</url>
    <content type="text"><![CDATA[å®šä¹‰redisæ˜¯ä¸€ä¸ªkey-valueå­˜å‚¨ç³»ç»Ÿã€‚å’ŒMemcachedç±»ä¼¼ï¼Œå®ƒæ”¯æŒå­˜å‚¨çš„valueç±»åž‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬string(å­—ç¬¦ä¸²)ã€list(é“¾è¡¨)ã€set(é›†åˆ)ã€zset(sorted set â€“æœ‰åºé›†åˆ)å’Œhashï¼ˆå“ˆå¸Œç±»åž‹ï¼‰ã€‚è¿™äº›æ•°æ®ç±»åž‹éƒ½æ”¯æŒpush/popã€add/removeåŠå–äº¤é›†å¹¶é›†å’Œå·®é›†åŠæ›´ä¸°å¯Œçš„æ“ä½œï¼Œè€Œä¸”è¿™äº›æ“ä½œéƒ½æ˜¯åŽŸå­æ€§çš„ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œredisæ”¯æŒå„ç§ä¸åŒæ–¹å¼çš„æŽ’åºã€‚ä¸Žmemcachedä¸€æ ·ï¼Œä¸ºäº†ä¿è¯æ•ˆçŽ‡ï¼Œæ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚åŒºåˆ«çš„æ˜¯redisä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®žçŽ°äº†master-slave(ä¸»ä»Ž)åŒæ­¥ã€‚Redis æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„key-valueæ•°æ®åº“ã€‚ redisçš„å‡ºçŽ°ï¼Œå¾ˆå¤§ç¨‹åº¦è¡¥å¿äº†memcachedè¿™ç±»key/valueå­˜å‚¨çš„ä¸è¶³ï¼Œåœ¨éƒ¨ åˆ†åœºåˆå¯ä»¥å¯¹å…³ç³»æ•°æ®åº“èµ·åˆ°å¾ˆå¥½çš„è¡¥å……ä½œç”¨ã€‚å®ƒæä¾›äº†Javaï¼ŒC/C++ï¼ŒC#ï¼ŒPHPï¼ŒJavaScriptï¼ŒPerlï¼ŒObject-Cï¼ŒPythonï¼ŒRubyï¼ŒErlangç­‰å®¢æˆ·ç«¯ï¼Œä½¿ç”¨å¾ˆæ–¹ä¾¿ã€‚Redisæ”¯æŒä¸»ä»ŽåŒæ­¥ã€‚æ•°æ®å¯ä»¥ä»Žä¸»æœåŠ¡å™¨å‘ä»»æ„æ•°é‡çš„ä»ŽæœåŠ¡å™¨ä¸ŠåŒæ­¥ï¼Œä»ŽæœåŠ¡å™¨å¯ä»¥æ˜¯å…³è”å…¶ä»–ä»ŽæœåŠ¡å™¨çš„ä¸»æœåŠ¡å™¨ã€‚è¿™ä½¿å¾—Rediså¯æ‰§è¡Œå•å±‚æ ‘å¤åˆ¶ã€‚å­˜ç›˜å¯ä»¥æœ‰æ„æ— æ„çš„å¯¹æ•°æ®è¿›è¡Œå†™æ“ä½œã€‚ç”±äºŽå®Œå…¨å®žçŽ°äº†å‘å¸ƒ/è®¢é˜…æœºåˆ¶ï¼Œä½¿å¾—ä»Žæ•°æ®åº“åœ¨ä»»ä½•åœ°æ–¹åŒæ­¥æ ‘æ—¶ï¼Œå¯è®¢é˜…ä¸€ä¸ªé¢‘é“å¹¶æŽ¥æ”¶ä¸»æœåŠ¡å™¨å®Œæ•´çš„æ¶ˆæ¯å‘å¸ƒè®°å½•ã€‚åŒæ­¥å¯¹è¯»å–æ“ä½œçš„å¯æ‰©å±•æ€§å’Œæ•°æ®å†—ä½™å¾ˆæœ‰å¸®åŠ©ã€‚redisçš„å®˜ç½‘åœ°å€ï¼Œéžå¸¸å¥½è®°ï¼Œæ˜¯redis.ioã€‚ï¼ˆç‰¹æ„æŸ¥äº†ä¸€ä¸‹ï¼ŒåŸŸååŽç¼€ioå±žäºŽå›½å®¶åŸŸåï¼Œæ˜¯british Indian Ocean territoryï¼Œå³è‹±å±žå°åº¦æ´‹é¢†åœ°ï¼‰ç›®å‰ï¼ŒVmwareåœ¨èµ„åŠ©ç€redisé¡¹ç›®çš„å¼€å‘å’Œç»´æŠ¤ã€‚è¯¦è§ç™¾åº¦ç™¾ç§‘ RedisTemplateå¸¸ç”¨é›†åˆ-opsForValue1.set(K key, V value)æ–°å¢žä¸€ä¸ªå­—ç¬¦ä¸²ç±»åž‹çš„å€¼,keyæ˜¯é”®ï¼Œvalueæ˜¯å€¼ã€‚ redisTemplate.opsForValue().set(&quot;stringValue&quot;,&quot;bbb&quot;); 2.get(Object key)èŽ·å–keyé”®å¯¹åº”çš„å€¼ String stringValue = redisTemplate.opsForValue().get(&quot;stringValue&quot;)+&quot;&quot;; System.out.println(&quot;é€šè¿‡get(Object key)æ–¹æ³•èŽ·å–set(K key, V value)æ–¹æ³•æ–°å¢žçš„å­—ç¬¦ä¸²å€¼:&quot; + stringValue); 3.append(K key, String value)åœ¨åŽŸæœ‰çš„å€¼åŸºç¡€ä¸Šæ–°å¢žå­—ç¬¦ä¸²åˆ°æœ«å°¾ã€‚ redisTemplate.opsForValue().append(&quot;stringValue&quot;,&quot;aaa&quot;); String stringValueAppend = redisTemplate.opsForValue().get(&quot;stringValue&quot;)+&quot;&quot;; ` System.out.println(&quot;é€šè¿‡append(K key, String value)æ–¹æ³•ä¿®æ”¹åŽçš„å­—ç¬¦ä¸²:&quot;+stringValueAppend); 4.get(K key, long start, long end)æˆªå–keyé”®å¯¹åº”å€¼å¾—å­—ç¬¦ä¸²ï¼Œä»Žå¼€å§‹ä¸‹æ ‡ä½ç½®å¼€å§‹åˆ°ç»“æŸä¸‹æ ‡çš„ä½ç½®(åŒ…å«ç»“æŸä¸‹æ ‡)çš„å­—ç¬¦ä¸²ã€‚ String cutString = redisTemplate.opsForValue().get(&quot;stringValue&quot;,0,3); System.out.println(&quot;é€šè¿‡get(K key, long start, long end)æ–¹æ³•èŽ·å–æˆªå–çš„å­—ç¬¦ä¸²:&quot;+cutString); 5.getAndSet(K key, V value)èŽ·å–åŽŸæ¥keyé”®å¯¹åº”çš„å€¼å¹¶é‡æ–°èµ‹æ–°å€¼ã€‚ String oldAndNewStringValue = redisTemplate.opsForValue().getAndSet(&quot;stringValue&quot;,&quot;ccc&quot;)+&quot;&quot;; System.out.print(&quot;é€šè¿‡getAndSet(K key, V value)æ–¹æ³•èŽ·å–åŽŸæ¥çš„&quot; + oldAndNewStringValue + &quot;,&quot;); String newStringValue = redisTemplate.opsForValue().get(&quot;stringValue&quot;)+&quot;&quot;; System.out.println(&quot;ä¿®æ”¹è¿‡åŽçš„å€¼:&quot;+newStringValue); 6.setBit(K key, long offset, boolean value)keyé”®å¯¹åº”çš„å€¼valueå¯¹åº”çš„asciiç ,åœ¨offsetçš„ä½ç½®(ä»Žå·¦å‘å³æ•°)å˜ä¸ºvalueã€‚ redisTemplate.opsForValue().setBit(&quot;stringValue&quot;,1,false); newStringValue = redisTemplate.opsForValue().get(&quot;stringValue&quot;)+&quot;&quot;; System.out.println(&quot;é€šè¿‡setBit(K key,long offset,boolean value)æ–¹æ³•ä¿®æ”¹è¿‡åŽçš„å€¼:&quot;+newStringValue); 7.getBit(K key, long offset)åˆ¤æ–­æŒ‡å®šçš„ä½ç½®ASCIIç çš„bitä½æ˜¯å¦ä¸º1ã€‚ boolean bitBoolean = redisTemplate.opsForValue().getBit(&quot;stringValue&quot;,1); boolean bitBoolean = redisTemplate.opsForValue().getBit(&quot;stringValue&quot;,1); 8.size(K key)èŽ·å–æŒ‡å®šå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ Long stringValueLength = redisTemplate.opsForValue().size(&quot;stringValue&quot;); Long stringValueLength = redisTemplate.opsForValue().size(&quot;stringValue&quot;); 9.increment(K key, double delta) ä»¥å¢žé‡çš„æ–¹å¼å°†doubleå€¼å­˜å‚¨åœ¨å˜é‡ä¸­ã€‚ double stringValueDouble = redisTemplate.opsForValue().increment(&quot;doubleValue&quot;,5); System.out.println(&quot;é€šè¿‡increment(K key, double delta)æ–¹æ³•ä»¥å¢žé‡æ–¹å¼å­˜å‚¨doubleå€¼:&quot; + stringValueDouble); 10.increment(K key, long delta)ä»¥å¢žé‡çš„æ–¹å¼å°†longå€¼å­˜å‚¨åœ¨å˜é‡ä¸­ã€‚ double stringValueLong = redisTemplate.opsForValue().increment(&quot;longValue&quot;,6); System.out.println(&quot;é€šè¿‡increment(K key, long delta)æ–¹æ³•ä»¥å¢žé‡æ–¹å¼å­˜å‚¨longå€¼:&quot; + stringValueLong); 11.setIfAbsent(K key, V value)å¦‚æžœé”®ä¸å­˜åœ¨åˆ™æ–°å¢ž,å­˜åœ¨åˆ™ä¸æ”¹å˜å·²ç»æœ‰çš„å€¼ã€‚ boolean absentBoolean = redisTemplate.opsForValue().setIfAbsent(&quot;absentValue&quot;,&quot;fff&quot;); System.out.println(&quot;é€šè¿‡setIfAbsent(K key, V value)æ–¹æ³•åˆ¤æ–­å˜é‡å€¼absentValueæ˜¯å¦å­˜åœ¨:&quot; + absentBoolean); if(absentBoolean){ String absentValue = redisTemplate.opsForValue().get(&quot;absentValue&quot;)+&quot;&quot;; System.out.print(&quot;,ä¸å­˜åœ¨ï¼Œåˆ™æ–°å¢žåŽçš„å€¼æ˜¯:&quot;+absentValue); boolean existBoolean = redisTemplate.opsForValue().setIfAbsent(&quot;absentValue&quot;,&quot;eee&quot;); System.out.print(&quot;,å†æ¬¡è°ƒç”¨setIfAbsent(K key, V value)åˆ¤æ–­absentValueæ˜¯å¦å­˜åœ¨å¹¶é‡æ–°èµ‹å€¼:&quot; + existBoolean); if(!existBoolean){ absentValue = redisTemplate.opsForValue().get(&quot;absentValue&quot;)+&quot;&quot;; System.out.print(&quot;å¦‚æžœå­˜åœ¨,åˆ™é‡æ–°èµ‹å€¼åŽçš„absentValueå˜é‡çš„å€¼æ˜¯:&quot; + absentValue); } } 12.set(K key, V value, long timeout, TimeUnit unit)è®¾ç½®å˜é‡å€¼çš„è¿‡æœŸæ—¶é—´ã€‚ redisTemplate.opsForValue().set(&quot;timeOutValue&quot;,&quot;timeOut&quot;,5,TimeUnit.SECONDS); String timeOutValue = redisTemplate.opsForValue().get(&quot;timeOutValue&quot;)+&quot;&quot;; System.out.println(&quot;é€šè¿‡set(K key, V value, long timeout, TimeUnit unit)æ–¹æ³•è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸä¹‹å‰èŽ·å–çš„æ•°æ®:&quot;+timeOutValue); Thread.sleep(5*1000); timeOutValue = redisTemplate.opsForValue().get(&quot;timeOutValue&quot;)+&quot;&quot;; System.out.print(&quot;,ç­‰å¾…10sè¿‡åŽï¼ŒèŽ·å–çš„å€¼:&quot;+timeOutValue); 13.set(K key, V value, long offset) è¦†ç›–ä»ŽæŒ‡å®šä½ç½®å¼€å§‹çš„å€¼ã€‚ redisTemplate.opsForValue().set(&quot;absentValue&quot;,&quot;dd&quot;,1); String overrideString = redisTemplate.opsForValue().get(&quot;absentValue&quot;)+&quot;&quot;; System.out.println(&quot;é€šè¿‡set(K key, V value, long offset)æ–¹æ³•è¦†ç›–éƒ¨åˆ†çš„å€¼:&quot;+overrideString); 14.multiSet(Map&lt;? extends K,? extends V&gt; map)è®¾ç½®mapé›†åˆåˆ°redisã€‚ Map valueMap = new HashMap(); valueMap.put(&quot;valueMap1&quot;,&quot;map1&quot;); valueMap.put(&quot;valueMap2&quot;,&quot;map2&quot;); valueMap.put(&quot;valueMap3&quot;,&quot;map3&quot;); redisTemplate.opsForValue().multiSet(valueMap); 15.multiGet(Collection keys) æ ¹æ®é›†åˆå–å‡ºå¯¹åº”çš„valueå€¼ã€‚ //æ ¹æ®Listé›†åˆå–å‡ºå¯¹åº”çš„valueå€¼ List paraList = new ArrayList(); paraList.add(&quot;valueMap1&quot;); paraList.add(&quot;valueMap2&quot;); paraList.add(&quot;valueMap3&quot;); List&lt;String&gt; valueList = redisTemplate.opsForValue().multiGet(paraList); for (String value : valueList){ System.out.println(&quot;é€šè¿‡multiGet(Collection&lt;K&gt; keys)æ–¹æ³•èŽ·å–mapå€¼:&quot; + value); } 16.multiSetIfAbsent(Map&lt;? extends K,? extends V&gt; map)å¦‚æžœå¯¹åº”çš„mapé›†åˆåç§°ä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ ï¼Œå¦‚æžœå­˜åœ¨åˆ™ä¸åšä¿®æ”¹ã€‚ Map valueMap = new HashMap(); valueMap.put(&quot;valueMap1&quot;,&quot;map1&quot;); valueMap.put(&quot;valueMap2&quot;,&quot;map2&quot;); valueMap.put(&quot;valueMap3&quot;,&quot;map3&quot;); redisTemplate.opsForValue().multiSetIfAbsent(valueMap); RedisTemplateå¸¸ç”¨é›†åˆ-opsForList1.leftPush(K key, V value)åœ¨å˜é‡å·¦è¾¹æ·»åŠ å…ƒç´ å€¼ã€‚ redisTemplate.opsForList().leftPush(&quot;list&quot;,&quot;a&quot;); redisTemplate.opsForList().leftPush(&quot;list&quot;,&quot;b&quot;); redisTemplate.opsForList().leftPush(&quot;list&quot;,&quot;c&quot;); 2.index(K key, long index)èŽ·å–é›†åˆæŒ‡å®šä½ç½®çš„å€¼ã€‚ String listValue = redisTemplate.opsForList().index(&quot;list&quot;,1) + &quot;&quot;; System.out.println(&quot;é€šè¿‡index(K key, long index)æ–¹æ³•èŽ·å–æŒ‡å®šä½ç½®çš„å€¼:&quot; + listValue); 3.range(K key, long start, long end)èŽ·å–æŒ‡å®šåŒºé—´çš„å€¼ã€‚ List&lt;Object&gt; list = redisTemplate.opsForList().range(&quot;list&quot;,0,-1); System.out.println(&quot;é€šè¿‡range(K key, long start, long end)æ–¹æ³•èŽ·å–æŒ‡å®šèŒƒå›´çš„é›†åˆå€¼:&quot;+list); 4.leftPush(K key, V pivot, V value)æŠŠæœ€åŽä¸€ä¸ªå‚æ•°å€¼æ”¾åˆ°æŒ‡å®šé›†åˆçš„ç¬¬ä¸€ä¸ªå‡ºçŽ°ä¸­é—´å‚æ•°çš„å‰é¢ï¼Œå¦‚æžœä¸­é—´å‚æ•°å€¼å­˜åœ¨çš„è¯ã€‚ redisTemplate.opsForList().leftPush(&quot;list&quot;,&quot;a&quot;,&quot;n&quot;); list = redisTemplate.opsForList().range(&quot;list&quot;,0,-1); System.out.println(&quot;é€šè¿‡leftPush(K key, V pivot, V value)æ–¹æ³•æŠŠå€¼æ”¾åˆ°æŒ‡å®šå‚æ•°å€¼å‰é¢:&quot; + list); 5.leftPushAll(K key, Vâ€¦ values)å‘å·¦è¾¹æ‰¹é‡æ·»åŠ å‚æ•°å…ƒç´ ã€‚ redisTemplate.opsForList().leftPushAll(&quot;list&quot;,&quot;w&quot;,&quot;x&quot;,&quot;y&quot;); list = redisTemplate.opsForList().range(&quot;list&quot;,0,-1); System.out.println(&quot;é€šè¿‡leftPushAll(K key, V... values)æ–¹æ³•æ‰¹é‡æ·»åŠ å…ƒç´ :&quot; + list); 6.leftPushAll(K key, Collection values)ä»¥é›†åˆçš„æ–¹å¼å‘å·¦è¾¹æ‰¹é‡æ·»åŠ å…ƒç´ ã€‚ List newList = new ArrayList(); newList.add(&quot;o&quot;); newList.add(&quot;p&quot;); newList.add(&quot;q&quot;); redisTemplate.opsForList().leftPushAll(&quot;list&quot;,newList); list = redisTemplate.opsForList().range(&quot;list&quot;,0,-1); System.out.println(&quot;é€šè¿‡leftPushAll(K key, Collection&lt;V&gt; values)æ–¹æ³•ä»¥é›†åˆçš„æ–¹å¼æ‰¹é‡æ·»åŠ å…ƒç´ :&quot; + list); 7.leftPushIfPresent(K key, V value) å¦‚æžœå­˜åœ¨é›†åˆåˆ™æ·»åŠ å…ƒç´ ã€‚ redisTemplate.opsForList().leftPushIfPresent(&quot;presentList&quot;,&quot;o&quot;); list = redisTemplate.opsForList().range(&quot;presentList&quot;,0,-1); System.out.println(&quot;é€šè¿‡leftPushIfPresent(K key, V value)æ–¹æ³•å‘å·²å­˜åœ¨çš„é›†åˆæ·»åŠ å…ƒç´ :&quot; + list); 8.rightPush(K key, V value)å‘é›†åˆæœ€å³è¾¹æ·»åŠ å…ƒç´ ã€‚ redisTemplate.opsForList().rightPush(&quot;list&quot;,&quot;w&quot;); list = redisTemplate.opsForList().range(&quot;list&quot;,0,-1); System.out.println(&quot;é€šè¿‡rightPush(K key, V value)æ–¹æ³•å‘æœ€å³è¾¹æ·»åŠ å…ƒç´ :&quot; + list); 9.rightPush(K key, V pivot, V value)å‘é›†åˆä¸­ç¬¬ä¸€æ¬¡å‡ºçŽ°ç¬¬äºŒä¸ªå‚æ•°å˜é‡å…ƒç´ çš„å³è¾¹æ·»åŠ ç¬¬ä¸‰ä¸ªå‚æ•°å˜é‡çš„å…ƒç´ å€¼ã€‚ redisTemplate.opsForList().rightPush(&quot;list&quot;,&quot;w&quot;,&quot;r&quot;); list = redisTemplate.opsForList().range(&quot;list&quot;,0,-1); System.out.println(&quot;é€šè¿‡rightPush(K key, V pivot, V value)æ–¹æ³•å‘æœ€å³è¾¹æ·»åŠ å…ƒç´ :&quot; + list); 10.rightPushAll(K key, Vâ€¦ values)å‘å³è¾¹æ‰¹é‡æ·»åŠ å…ƒç´ ã€‚ redisTemplate.opsForList().rightPushAll(&quot;list&quot;,&quot;j&quot;,&quot;k&quot;); list = redisTemplate.opsForList().range(&quot;list&quot;,0,-1); System.out.println(&quot;é€šè¿‡rightPushAll(K key, V... values)æ–¹æ³•å‘æœ€å³è¾¹æ‰¹é‡æ·»åŠ å…ƒç´ :&quot; + list); 11.rightPushAll(K key, Collection values)ä»¥é›†åˆæ–¹å¼å‘å³è¾¹æ·»åŠ å…ƒç´ ã€‚ newList.clear(); newList.add(&quot;g&quot;); newList.add(&quot;h&quot;); redisTemplate.opsForList().rightPushAll(&quot;list&quot;,newList); list = redisTemplate.opsForList().range(&quot;list&quot;,0,-1); System.out.println(&quot;é€šè¿‡rightPushAll(K key, Collection&lt;V&gt; values)æ–¹æ³•å‘æœ€å³è¾¹ä»¥é›†åˆæ–¹å¼æ‰¹é‡æ·»åŠ å…ƒç´ :&quot; + list); 12.rightPushIfPresent(K key, V value)å‘å·²å­˜åœ¨çš„é›†åˆä¸­æ·»åŠ å…ƒç´ ã€‚ redisTemplate.opsForList().rightPushIfPresent(&quot;presentList&quot;,&quot;d&quot;); list = redisTemplate.opsForList().range(&quot;presentList&quot;,0,-1); System.out.println(&quot;é€šè¿‡rightPushIfPresent(K key, V value)æ–¹æ³•å·²å­˜åœ¨çš„é›†åˆå‘æœ€å³è¾¹æ·»åŠ å…ƒç´ :&quot; + list); 13.size(K key)èŽ·å–é›†åˆé•¿åº¦ã€‚ long listLength = redisTemplate.opsForList().size(&quot;list&quot;); System.out.println(&quot;é€šè¿‡size(K key)æ–¹æ³•èŽ·å–é›†åˆlistçš„é•¿åº¦ä¸º:&quot; + listLength); 14.leftPop(K key)ç§»é™¤é›†åˆä¸­çš„å·¦è¾¹ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ Object popValue = redisTemplate.opsForList().leftPop(&quot;list&quot;); System.out.print(&quot;é€šè¿‡leftPop(K key)æ–¹æ³•ç§»é™¤çš„å…ƒç´ æ˜¯:&quot; + popValue); list = redisTemplate.opsForList().range(&quot;list&quot;,0,-1); System.out.println(&quot;,å‰©ä½™çš„å…ƒç´ æ˜¯:&quot; + list); 15.leftPop(K key, long timeout, TimeUnit unit)ç§»é™¤é›†åˆä¸­å·¦è¾¹çš„å…ƒç´ åœ¨ç­‰å¾…çš„æ—¶é—´é‡Œï¼Œå¦‚æžœè¶…è¿‡ç­‰å¾…çš„æ—¶é—´ä»æ²¡æœ‰å…ƒç´ åˆ™é€€å‡ºã€‚ popValue = redisTemplate.opsForList().leftPop(&quot;presentList&quot;,1, TimeUnit.SECONDS); System.out.print(&quot;é€šè¿‡leftPop(K key, long timeout, TimeUnit unit)æ–¹æ³•ç§»é™¤çš„å…ƒç´ æ˜¯:&quot; + popValue); list = redisTemplate.opsForList().range(&quot;presentList&quot;,0,-1); System.out.println(&quot;,å‰©ä½™çš„å…ƒç´ æ˜¯:&quot; + list); 16.rightPop(K key)ç§»é™¤é›†åˆä¸­å³è¾¹çš„å…ƒç´ ã€‚ popValue = redisTemplate.opsForList().rightPop(&quot;list&quot;); System.out.print(&quot;é€šè¿‡rightPop(K key)æ–¹æ³•ç§»é™¤çš„å…ƒç´ æ˜¯:&quot; + popValue); list = redisTemplate.opsForList().range(&quot;list&quot;,0,-1); System.out.println(&quot;,å‰©ä½™çš„å…ƒç´ æ˜¯:&quot; + list); 17.rightPop(K key, long timeout, TimeUnit unit)ç§»é™¤é›†åˆä¸­å³è¾¹çš„å…ƒç´ åœ¨ç­‰å¾…çš„æ—¶é—´é‡Œï¼Œå¦‚æžœè¶…è¿‡ç­‰å¾…çš„æ—¶é—´ä»æ²¡æœ‰å…ƒç´ åˆ™é€€å‡ºã€‚ popValue = redisTemplate.opsForList().rightPop(&quot;presentList&quot;,1, TimeUnit.SECONDS); System.out.print(&quot;é€šè¿‡rightPop(K key, long timeout, TimeUnit unit)æ–¹æ³•ç§»é™¤çš„å…ƒç´ æ˜¯:&quot; + popValue); list = redisTemplate.opsForList().range(&quot;presentList&quot;,0,-1); System.out.println(&quot;,å‰©ä½™çš„å…ƒç´ æ˜¯:&quot; + list); 18.rightPopAndLeftPush(K sourceKey, K destinationKey)ç§»é™¤é›†åˆä¸­å³è¾¹çš„å…ƒç´ ï¼ŒåŒæ—¶åœ¨å·¦è¾¹åŠ å…¥ä¸€ä¸ªå…ƒç´ ã€‚ popValue = redisTemplate.opsForList().rightPopAndLeftPush(&quot;list&quot;,&quot;12&quot;); System.out.print(&quot;é€šè¿‡rightPopAndLeftPush(K sourceKey, K destinationKey)æ–¹æ³•ç§»é™¤çš„å…ƒç´ æ˜¯:&quot; + popValue); list = redisTemplate.opsForList().range(&quot;list&quot;,0,-1); System.out.println(&quot;,å‰©ä½™çš„å…ƒç´ æ˜¯:&quot; + list); 19.rightPopAndLeftPush(K sourceKey, K destinationKey, long timeout, TimeUnit unit) ç§»é™¤é›†åˆä¸­å³è¾¹çš„å…ƒç´ åœ¨ç­‰å¾…çš„æ—¶é—´é‡Œï¼ŒåŒæ—¶åœ¨å·¦è¾¹æ·»åŠ å…ƒç´ ï¼Œå¦‚æžœè¶…è¿‡ç­‰å¾…çš„æ—¶é—´ä»æ²¡æœ‰å…ƒç´ åˆ™é€€å‡ºã€‚ popValue = redisTemplate.opsForList().rightPopAndLeftPush(&quot;presentList&quot;,&quot;13&quot;,1,TimeUnit.SECONDS); System.out.println(&quot;é€šè¿‡rightPopAndLeftPush(K sourceKey, K destinationKey, long timeout, TimeUnit unit)æ–¹æ³•ç§»é™¤çš„å…ƒç´ æ˜¯:&quot; + popValue); list = redisTemplate.opsForList().range(&quot;presentList&quot;,0,-1); System.out.print(&quot;,å‰©ä½™çš„å…ƒç´ æ˜¯:&quot; + list); 20.set(K key, long index, V value)åœ¨é›†åˆçš„æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ ,å¦‚æžœæŒ‡å®šä½ç½®å·²æœ‰å…ƒç´ ï¼Œåˆ™è¦†ç›–ï¼Œæ²¡æœ‰åˆ™æ–°å¢žï¼Œè¶…è¿‡é›†åˆä¸‹æ ‡+nåˆ™ä¼šæŠ¥é”™ã€‚ redisTemplate.opsForList().set(&quot;presentList&quot;,3,&quot;15&quot;); list = redisTemplate.opsForList().range(&quot;presentList&quot;,0,-1); System.out.print(&quot;é€šè¿‡set(K key, long index, V value)æ–¹æ³•åœ¨æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´ åŽ:&quot; + list); 21.remove(K key, long count, Object value)ä»Žå­˜å‚¨åœ¨é”®ä¸­çš„åˆ—è¡¨ä¸­åˆ é™¤ç­‰äºŽå€¼çš„å…ƒç´ çš„ç¬¬ä¸€ä¸ªè®¡æ•°äº‹ä»¶ã€‚count&gt; 0ï¼šåˆ é™¤ç­‰äºŽä»Žå·¦åˆ°å³ç§»åŠ¨çš„å€¼çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›count&lt; 0ï¼šåˆ é™¤ç­‰äºŽä»Žå³åˆ°å·¦ç§»åŠ¨çš„å€¼çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›count = 0ï¼šåˆ é™¤ç­‰äºŽvalueçš„æ‰€æœ‰å…ƒç´ ã€‚ long removeCount = redisTemplate.opsForList().remove(&quot;list&quot;,0,&quot;w&quot;); list = redisTemplate.opsForList().range(&quot;list&quot;,0,-1); System.out.println(&quot;é€šè¿‡remove(K key, long count, Object value)æ–¹æ³•ç§»é™¤å…ƒç´ æ•°é‡:&quot; + removeCount); System.out.println(&quot;,å‰©ä½™çš„å…ƒç´ :&quot; + list); 22.trim(K key, long start, long end)æˆªå–é›†åˆå…ƒç´ é•¿åº¦ï¼Œä¿ç•™é•¿åº¦å†…çš„æ•°æ®ã€‚ redisTemplate.opsForList().trim(&quot;list&quot;,0,5); list = redisTemplate.opsForList().range(&quot;list&quot;,0,-1); System.out.println(&quot;é€šè¿‡trim(K key, long start, long end)æ–¹æ³•æˆªå–åŽå‰©ä½™å…ƒç´ :&quot; + list); RedisTemplateå¸¸ç”¨é›†åˆ-opsForHash1.put(H key, HK hashKey, HV value)æ–°å¢žhashMapå€¼ã€‚ redisTemplate.opsForHash().put(&quot;hashValue&quot;,&quot;map1&quot;,&quot;map1-1&quot;); redisTemplate.opsForHash().put(&quot;hashValue&quot;,&quot;map2&quot;,&quot;map2-2&quot;); 2.values(H key)èŽ·å–æŒ‡å®šå˜é‡ä¸­çš„hashMapå€¼ã€‚ List&lt;Object&gt; hashList = redisTemplate.opsForHash().values(&quot;hashValue&quot;); System.out.println(&quot;é€šè¿‡values(H key)æ–¹æ³•èŽ·å–å˜é‡ä¸­çš„hashMapå€¼:&quot; + hashList); 3.entries(H key)èŽ·å–å˜é‡ä¸­çš„é”®å€¼å¯¹ã€‚ Map&lt;Object,Object&gt; map = redisTemplate.opsForHash().entries(&quot;hashValue&quot;); System.out.println(&quot;é€šè¿‡entries(H key)æ–¹æ³•èŽ·å–å˜é‡ä¸­çš„é”®å€¼å¯¹:&quot; + map); 4.get(H key, Object hashKey)èŽ·å–å˜é‡ä¸­çš„æŒ‡å®šmapé”®æ˜¯å¦æœ‰å€¼,å¦‚æžœå­˜åœ¨è¯¥mapé”®åˆ™èŽ·å–å€¼ï¼Œæ²¡æœ‰åˆ™è¿”å›žnullã€‚ Object mapValue = redisTemplate.opsForHash().get(&quot;hashValue&quot;,&quot;map1&quot;); System.out.println(&quot;é€šè¿‡get(H key, Object hashKey)æ–¹æ³•èŽ·å–mapé”®çš„å€¼:&quot; + mapValue); 5.hasKey(H key, Object hashKey) åˆ¤æ–­å˜é‡ä¸­æ˜¯å¦æœ‰æŒ‡å®šçš„mapé”®ã€‚ boolean hashKeyBoolean = redisTemplate.opsForHash().hasKey(&quot;hashValue&quot;,&quot;map3&quot;); System.out.println(&quot;é€šè¿‡hasKey(H key, Object hashKey)æ–¹æ³•åˆ¤æ–­å˜é‡ä¸­æ˜¯å¦å­˜åœ¨mapé”®:&quot; + hashKeyBoolean); 6.keys(H key)èŽ·å–å˜é‡ä¸­çš„é”®ã€‚ Set&lt;Object&gt; keySet = redisTemplate.opsForHash().keys(&quot;hashValue&quot;); System.out.println(&quot;é€šè¿‡keys(H key)æ–¹æ³•èŽ·å–å˜é‡ä¸­çš„é”®:&quot; + keySet); 7.size(H key)èŽ·å–å˜é‡çš„é•¿åº¦ã€‚ long hashLength = redisTemplate.opsForHash().size(&quot;hashValue&quot;); System.out.println(&quot;é€šè¿‡size(H key)æ–¹æ³•èŽ·å–å˜é‡çš„é•¿åº¦:&quot; + hashLength); 8.increment(H key, HK hashKey, double delta)ä½¿å˜é‡ä¸­çš„é”®ä»¥doubleå€¼çš„å¤§å°è¿›è¡Œè‡ªå¢žé•¿ã€‚ double hashIncDouble = redisTemplate.opsForHash().increment(&quot;hashInc&quot;,&quot;map1&quot;,3); System.out.println(&quot;é€šè¿‡increment(H key, HK hashKey, double delta)æ–¹æ³•ä½¿å˜é‡ä¸­çš„é”®ä»¥å€¼çš„å¤§å°è¿›è¡Œè‡ªå¢žé•¿:&quot; + hashIncDouble); 9.increment(H key, HK hashKey, long delta)ä½¿å˜é‡ä¸­çš„é”®ä»¥longå€¼çš„å¤§å°è¿›è¡Œè‡ªå¢žé•¿ã€‚ long hashIncLong = redisTemplate.opsForHash().increment(&quot;hashInc&quot;,&quot;map2&quot;,6); System.out.println(&quot;é€šè¿‡increment(H key, HK hashKey, long delta)æ–¹æ³•ä½¿å˜é‡ä¸­çš„é”®ä»¥å€¼çš„å¤§å°è¿›è¡Œè‡ªå¢žé•¿:&quot; + hashIncLong); 10.multiGet(H key, Collection hashKeys)ä»¥é›†åˆçš„æ–¹å¼èŽ·å–å˜é‡ä¸­çš„å€¼ã€‚ List&lt;Object&gt; list = new ArrayList&lt;Object&gt;(); list.add(&quot;map1&quot;); list.add(&quot;map2&quot;); List mapValueList = redisTemplate.opsForHash().multiGet(&quot;hashValue&quot;,list); System.out.println(&quot;é€šè¿‡multiGet(H key, Collection&lt;HK&gt; hashKeys)æ–¹æ³•ä»¥é›†åˆçš„æ–¹å¼èŽ·å–å˜é‡ä¸­çš„å€¼:&quot;+mapValueList); 11.putAll(H key, Map&lt;? extends HK,? extends HV&gt; m)ä»¥mapé›†åˆçš„å½¢å¼æ·»åŠ é”®å€¼å¯¹ã€‚ Map newMap = new HashMap(); newMap.put(&quot;map3&quot;,&quot;map3-3&quot;); newMap.put(&quot;map5&quot;,&quot;map5-5&quot;); redisTemplate.opsForHash().putAll(&quot;hashValue&quot;,newMap); map = redisTemplate.opsForHash().entries(&quot;hashValue&quot;); System.out.println(&quot;é€šè¿‡putAll(H key, Map&lt;? extends HK,? extends HV&gt; m)æ–¹æ³•ä»¥mapé›†åˆçš„å½¢å¼æ·»åŠ é”®å€¼å¯¹:&quot; + map); 12.putIfAbsent(H key, HK hashKey, HV value)å¦‚æžœå˜é‡å€¼å­˜åœ¨ï¼Œåœ¨å˜é‡ä¸­å¯ä»¥æ·»åŠ ä¸å­˜åœ¨çš„çš„é”®å€¼å¯¹ï¼Œå¦‚æžœå˜é‡ä¸å­˜åœ¨ï¼Œåˆ™æ–°å¢žä¸€ä¸ªå˜é‡ï¼ŒåŒæ—¶å°†é”®å€¼å¯¹æ·»åŠ åˆ°è¯¥å˜é‡ã€‚ redisTemplate.opsForHash().putIfAbsent(&quot;hashValue&quot;,&quot;map6&quot;,&quot;map6-6&quot;); map = redisTemplate.opsForHash().entries(&quot;hashValue&quot;); System.out.println(&quot;é€šè¿‡putIfAbsent(H key, HK hashKey, HV value)æ–¹æ³•æ·»åŠ ä¸å­˜åœ¨äºŽå˜é‡ä¸­çš„é”®å€¼å¯¹:&quot; + map); 13.scan(H key, ScanOptions options)åŒ¹é…èŽ·å–é”®å€¼å¯¹ï¼ŒScanOptions.NONEä¸ºèŽ·å–å…¨éƒ¨é”®å¯¹ï¼ŒScanOptions.scanOptions().match(&quot;map1&quot;).build() åŒ¹é…èŽ·å–é”®ä½map1çš„é”®å€¼å¯¹,ä¸èƒ½æ¨¡ç³ŠåŒ¹é…ã€‚ Cursor&lt;Map.Entry&lt;Object,Object&gt;&gt; cursor = redisTemplate.opsForHash().scan(&quot;hashValue&quot;,ScanOptions.scanOptions().match(&quot;map1&quot;).build()); //Cursor&lt;Map.Entry&lt;Object,Object&gt;&gt; cursor = redisTemplate.opsForHash().scan(&quot;hashValue&quot;,ScanOptions.NONE); while (cursor.hasNext()){ Map.Entry&lt;Object,Object&gt; entry = cursor.next(); System.out.println(&quot;é€šè¿‡scan(H key, ScanOptions options)æ–¹æ³•èŽ·å–åŒ¹é…é”®å€¼å¯¹:&quot; + entry.getKey() + &quot;----&gt;&quot; + entry.getValue()); } 14.delete(H key, Objectâ€¦ hashKeys)åˆ é™¤å˜é‡ä¸­çš„é”®å€¼å¯¹ï¼Œå¯ä»¥ä¼ å…¥å¤šä¸ªå‚æ•°ï¼Œåˆ é™¤å¤šä¸ªé”®å€¼å¯¹ã€‚ redisTemplate.opsForHash().delete(&quot;hashValue&quot;,&quot;map1&quot;,&quot;map2&quot;); map = redisTemplate.opsForHash().entries(&quot;hashValue&quot;); System.out.println(&quot;é€šè¿‡delete(H key, Object... hashKeys)æ–¹æ³•åˆ é™¤å˜é‡ä¸­çš„é”®å€¼å¯¹åŽå‰©ä½™çš„:&quot; + map); RedisTemplateå¸¸ç”¨é›†åˆ-opsForSet1.add(K key, Vâ€¦ values)å‘å˜é‡ä¸­æ‰¹é‡æ·»åŠ å€¼ã€‚ redisTemplate.opsForSet().add(&quot;setValue&quot;,&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;B&quot;,&quot;D&quot;,&quot;E&quot;,&quot;F&quot;); 2.members(K key) èŽ·å–å˜é‡ä¸­çš„å€¼ã€‚ Set set = redisTemplate.opsForSet().members(&quot;setValue&quot;); System.out.println(&quot;é€šè¿‡members(K key)æ–¹æ³•èŽ·å–å˜é‡ä¸­çš„å…ƒç´ å€¼:&quot; + set); 3.size(K key)èŽ·å–å˜é‡ä¸­å€¼çš„é•¿åº¦ã€‚ long setLength = redisTemplate.opsForSet().size(&quot;setValue&quot;); System.out.println(&quot;é€šè¿‡size(K key)æ–¹æ³•èŽ·å–å˜é‡ä¸­å…ƒç´ å€¼çš„é•¿åº¦:&quot; + setLength); 4.randomMember(K key)éšæœºèŽ·å–å˜é‡ä¸­çš„å…ƒç´ ã€‚ Object randomMember = redisTemplate.opsForSet().randomMember(&quot;setValue&quot;); System.out.println(&quot;é€šè¿‡randomMember(K key)æ–¹æ³•éšæœºèŽ·å–å˜é‡ä¸­çš„å…ƒç´ :&quot; + randomMember); 5.randomMembers(K key, long count)éšæœºèŽ·å–å˜é‡ä¸­æŒ‡å®šä¸ªæ•°çš„å…ƒç´ ã€‚ List randomMembers = redisTemplate.opsForSet().randomMembers(&quot;setValue&quot;,2); System.out.println(&quot;é€šè¿‡randomMembers(K key, long count)æ–¹æ³•éšæœºèŽ·å–å˜é‡ä¸­æŒ‡å®šä¸ªæ•°çš„å…ƒç´ :&quot; + randomMembers); 6.isMember(K key, Object o)æ£€æŸ¥ç»™å®šçš„å…ƒç´ æ˜¯å¦åœ¨å˜é‡ä¸­ã€‚ boolean isMember = redisTemplate.opsForSet().isMember(&quot;setValue&quot;,&quot;A&quot;); System.out.println(&quot;é€šè¿‡isMember(K key, Object o)æ–¹æ³•æ£€æŸ¥ç»™å®šçš„å…ƒç´ æ˜¯å¦åœ¨å˜é‡ä¸­:&quot; + isMember); 7.move(K key, V value, K destKey)è½¬ç§»å˜é‡çš„å…ƒç´ å€¼åˆ°ç›®çš„å˜é‡ã€‚ boolean isMove = redisTemplate.opsForSet().move(&quot;setValue&quot;,&quot;A&quot;,&quot;destSetValue&quot;); if(isMove){ set = redisTemplate.opsForSet().members(&quot;setValue&quot;); System.out.print(&quot;é€šè¿‡move(K key, V value, K destKey)æ–¹æ³•è½¬ç§»å˜é‡çš„å…ƒç´ å€¼åˆ°ç›®çš„å˜é‡åŽçš„å‰©ä½™å…ƒç´ :&quot; + set); set = redisTemplate.opsForSet().members(&quot;destSetValue&quot;); System.out.println(&quot;,ç›®çš„å˜é‡ä¸­çš„å…ƒç´ å€¼:&quot; + set); } 8.pop(K key)å¼¹å‡ºå˜é‡ä¸­çš„å…ƒç´ ã€‚ Object popValue = redisTemplate.opsForSet().pop(&quot;setValue&quot;); System.out.print(&quot;é€šè¿‡pop(K key)æ–¹æ³•å¼¹å‡ºå˜é‡ä¸­çš„å…ƒç´ :&quot; + popValue); set = redisTemplate.opsForSet().members(&quot;setValue&quot;); System.out.println(&quot;,å‰©ä½™å…ƒç´ :&quot; + set) 9.remove(K key, Objectâ€¦ values)æ‰¹é‡ç§»é™¤å˜é‡ä¸­çš„å…ƒç´ ã€‚ long removeCount = redisTemplate.opsForSet().remove(&quot;setValue&quot;,&quot;E&quot;,&quot;F&quot;,&quot;G&quot;); System.out.print(&quot;é€šè¿‡remove(K key, Object... values)æ–¹æ³•ç§»é™¤å˜é‡ä¸­çš„å…ƒç´ ä¸ªæ•°:&quot; + removeCount); set = redisTemplate.opsForSet().members(&quot;setValue&quot;); System.out.println(&quot;,å‰©ä½™å…ƒç´ :&quot; + set); 10.scan(K key, ScanOptions options)åŒ¹é…èŽ·å–é”®å€¼å¯¹ï¼ŒScanOptions.NONEä¸ºèŽ·å–å…¨éƒ¨é”®å€¼å¯¹ï¼›ScanOptions.scanOptions().match(&quot;C&quot;).build()åŒ¹é…èŽ·å–é”®ä½map1çš„é”®å€¼å¯¹,ä¸èƒ½æ¨¡ç³ŠåŒ¹é…ã€‚ //Cursor&lt;Object&gt; cursor = redisTemplate.opsForSet().scan(&quot;setValue&quot;, ScanOptions.NONE); Cursor&lt;Object&gt; cursor = redisTemplate.opsForSet().scan(&quot;setValue&quot;, ScanOptions.scanOptions().match(&quot;C&quot;).build()); while (cursor.hasNext()){ Object object = cursor.next(); System.out.println(&quot;é€šè¿‡scan(K key, ScanOptions options)æ–¹æ³•èŽ·å–åŒ¹é…çš„å€¼:&quot; + object); } 11.difference(K key, Collection otherKeys)é€šè¿‡é›†åˆæ±‚å·®å€¼ã€‚ List list = new ArrayList(); list.add(&quot;destSetValue&quot;); Set differenceSet = redisTemplate.opsForSet().difference(&quot;setValue&quot;,list); System.out.println(&quot;é€šè¿‡difference(K key, Collection&lt;K&gt; otherKeys)æ–¹æ³•èŽ·å–å˜é‡ä¸­ä¸Žç»™å®šé›†åˆä¸­å˜é‡ä¸ä¸€æ ·çš„å€¼:&quot; + differenceSet); 12.difference(K key, K otherKey)é€šè¿‡ç»™å®šçš„keyæ±‚2ä¸ªsetå˜é‡çš„å·®å€¼ã€‚ differenceSet = redisTemplate.opsForSet().difference(&quot;setValue&quot;,&quot;destSetValue&quot;); System.out.println(&quot;é€šè¿‡difference(K key, Collection&lt;K&gt; otherKeys)æ–¹æ³•èŽ·å–å˜é‡ä¸­ä¸Žç»™å®šå˜é‡ä¸ä¸€æ ·çš„å€¼:&quot; + differenceSet); 13.differenceAndStore(K key, K otherKey, K destKey)å°†æ±‚å‡ºæ¥çš„å·®å€¼å…ƒç´ ä¿å­˜ã€‚ redisTemplate.opsForSet().differenceAndStore(&quot;setValue&quot;,&quot;destSetValue&quot;,&quot;storeSetValue&quot;); set = redisTemplate.opsForSet().members(&quot;storeSetValue&quot;); System.out.println(&quot;é€šè¿‡differenceAndStore(K key, K otherKey, K destKey)æ–¹æ³•å°†æ±‚å‡ºæ¥çš„å·®å€¼å…ƒç´ ä¿å­˜:&quot; + set); 14.differenceAndStore(K key, Collection otherKeys, K destKey)å°†æ±‚å‡ºæ¥çš„å·®å€¼å…ƒç´ ä¿å­˜ã€‚ redisTemplate.opsForSet().differenceAndStore(&quot;setValue&quot;,list,&quot;storeSetValue&quot;); set = redisTemplate.opsForSet().members(&quot;storeSetValue&quot;); System.out.println(&quot;é€šè¿‡differenceAndStore(K key, Collection&lt;K&gt; otherKeys, K destKey)æ–¹æ³•å°†æ±‚å‡ºæ¥çš„å·®å€¼å…ƒç´ ä¿å­˜:&quot; + set); 15.distinctRandomMembers(K key, long count)èŽ·å–åŽ»é‡çš„éšæœºå…ƒç´ ã€‚ set = redisTemplate.opsForSet().distinctRandomMembers(&quot;setValue&quot;,2); System.out.println(&quot;é€šè¿‡distinctRandomMembers(K key, long count)æ–¹æ³•èŽ·å–åŽ»é‡çš„éšæœºå…ƒç´ :&quot; + set); 16.intersect(K key, K otherKey)èŽ·å–2ä¸ªå˜é‡ä¸­çš„äº¤é›†ã€‚ set = redisTemplate.opsForSet().intersect(&quot;setValue&quot;,&quot;destSetValue&quot;); System.out.println(&quot;é€šè¿‡intersect(K key, K otherKey)æ–¹æ³•èŽ·å–äº¤é›†å…ƒç´ :&quot; + set); 17.intersect(K key, Collection otherKeys)èŽ·å–å¤šä¸ªå˜é‡ä¹‹é—´çš„äº¤é›†ã€‚ set = redisTemplate.opsForSet().intersect(&quot;setValue&quot;,list); System.out.println(&quot;é€šè¿‡intersect(K key, Collection&lt;K&gt; otherKeys)æ–¹æ³•èŽ·å–äº¤é›†å…ƒç´ :&quot; + set); 18.intersectAndStore(K key, K otherKey, K destKey)èŽ·å–2ä¸ªå˜é‡äº¤é›†åŽä¿å­˜åˆ°æœ€åŽä¸€ä¸ªå‚æ•°ä¸Šã€‚ redisTemplate.opsForSet().intersectAndStore(&quot;setValue&quot;,&quot;destSetValue&quot;,&quot;intersectValue&quot;); set = redisTemplate.opsForSet().members(&quot;intersectValue&quot;); System.out.println(&quot;é€šè¿‡intersectAndStore(K key, K otherKey, K destKey)æ–¹æ³•å°†æ±‚å‡ºæ¥çš„äº¤é›†å…ƒç´ ä¿å­˜:&quot; + set); 19.intersectAndStore(K key, Collection otherKeys, K destKey)èŽ·å–å¤šä¸ªå˜é‡çš„äº¤é›†å¹¶ä¿å­˜åˆ°æœ€åŽä¸€ä¸ªå‚æ•°ä¸Šã€‚ redisTemplate.opsForSet().intersectAndStore(&quot;setValue&quot;,list,&quot;intersectListValue&quot;); set = redisTemplate.opsForSet().members(&quot;intersectListValue&quot;); System.out.println(&quot;é€šè¿‡intersectAndStore(K key, Collection&lt;K&gt; otherKeys, K destKey)æ–¹æ³•å°†æ±‚å‡ºæ¥çš„äº¤é›†å…ƒç´ ä¿å­˜:&quot; + set); 20.union(K key, K otherKey)èŽ·å–2ä¸ªå˜é‡çš„åˆé›†ã€‚ set = redisTemplate.opsForSet().union(&quot;setValue&quot;,&quot;destSetValue&quot;); System.out.println(&quot;é€šè¿‡union(K key, K otherKey)æ–¹æ³•èŽ·å–2ä¸ªå˜é‡çš„åˆé›†å…ƒç´ :&quot; + set); 21.union(K key, Collection otherKeys)èŽ·å–å¤šä¸ªå˜é‡çš„åˆé›†ã€‚ set = redisTemplate.opsForSet().union(&quot;setValue&quot;,list); System.out.println(&quot;é€šè¿‡union(K key, Collection&lt;K&gt; otherKeys)æ–¹æ³•èŽ·å–å¤šä¸ªå˜é‡çš„åˆé›†å…ƒç´ :&quot; + set); 22.unionAndStore(K key, K otherKey, K destKey)èŽ·å–2ä¸ªå˜é‡åˆé›†åŽä¿å­˜åˆ°æœ€åŽä¸€ä¸ªå‚æ•°ä¸Šã€‚ redisTemplate.opsForSet().unionAndStore(&quot;setValue&quot;,&quot;destSetValue&quot;,&quot;unionValue&quot;); set = redisTemplate.opsForSet().members(&quot;unionValue&quot;); System.out.println(&quot;é€šè¿‡unionAndStore(K key, K otherKey, K destKey)æ–¹æ³•å°†æ±‚å‡ºæ¥çš„äº¤é›†å…ƒç´ ä¿å­˜:&quot; + set); 23.unionAndStore(K key, Collection otherKeys, K destKey)èŽ·å–å¤šä¸ªå˜é‡çš„åˆé›†å¹¶ä¿å­˜åˆ°æœ€åŽä¸€ä¸ªå‚æ•°ä¸Šã€‚ redisTemplate.opsForSet().unionAndStore(&quot;setValue&quot;,list,&quot;unionListValue&quot;); set = redisTemplate.opsForSet().members(&quot;unionListValue&quot;); System.out.println(&quot;é€šè¿‡unionAndStore(K key, Collection&lt;K&gt; otherKeys, K destKey)æ–¹æ³•å°†æ±‚å‡ºæ¥çš„äº¤é›†å…ƒç´ ä¿å­˜:&quot; + set); RedisTemplateå¸¸ç”¨é›†åˆ-opsForZSet1.add(K key, V value, double score)æ·»åŠ å…ƒç´ åˆ°å˜é‡ä¸­åŒæ—¶æŒ‡å®šå…ƒç´ çš„åˆ†å€¼ã€‚ redisTemplate.opsForZSet().add(&quot;zSetValue&quot;,&quot;A&quot;,1); redisTemplate.opsForZSet().add(&quot;zSetValue&quot;,&quot;B&quot;,3); redisTemplate.opsForZSet().add(&quot;zSetValue&quot;,&quot;C&quot;,2); redisTemplate.opsForZSet().add(&quot;zSetValue&quot;,&quot;D&quot;,5); 2.range(K key, long start, long end)èŽ·å–å˜é‡æŒ‡å®šåŒºé—´çš„å…ƒç´ ã€‚ Set zSetValue = redisTemplate.opsForZSet().range(&quot;zSetValue&quot;,0,-1); System.out.println(&quot;é€šè¿‡range(K key, long start, long end)æ–¹æ³•èŽ·å–æŒ‡å®šåŒºé—´çš„å…ƒç´ :&quot; + zSetValue); 3.rangeByLex(K key, RedisZSetCommands.Range range) ç”¨äºŽèŽ·å–æ»¡è¶³éžscoreçš„æŽ’åºå–å€¼ã€‚è¿™ä¸ªæŽ’åºåªæœ‰åœ¨æœ‰ç›¸åŒåˆ†æ•°çš„æƒ…å†µä¸‹æ‰èƒ½ä½¿ç”¨ï¼Œå¦‚æžœæœ‰ä¸åŒçš„åˆ†æ•°åˆ™è¿”å›žå€¼ä¸ç¡®å®šã€‚ RedisZSetCommands.Range range = new RedisZSetCommands.Range(); //range.gt(&quot;A&quot;); range.lt(&quot;D&quot;); zSetValue = redisTemplate.opsForZSet().rangeByLex(&quot;zSetValue&quot;, range); System.out.println(&quot;é€šè¿‡rangeByLex(K key, RedisZSetCommands.Range range)æ–¹æ³•èŽ·å–æ»¡è¶³éžscoreçš„æŽ’åºå–å€¼å…ƒç´ :&quot; + zSetValue); 4.rangeByLex(K key, RedisZSetCommands.Range range, RedisZSetCommands.Limit limit)ç”¨äºŽèŽ·å–æ»¡è¶³éžscoreçš„è®¾ç½®ä¸‹æ ‡å¼€å§‹çš„é•¿åº¦æŽ’åºå–å€¼ã€‚ RedisZSetCommands.Limit limit = new RedisZSetCommands.Limit(); limit.count(2); //èµ·å§‹ä¸‹æ ‡ä¸º0 limit.offset(1); zSetValue = redisTemplate.opsForZSet().rangeByLex(&quot;zSetValue&quot;, range,limit); System.out.println(&quot;é€šè¿‡rangeByLex(K key, RedisZSetCommands.Range range, RedisZSetCommands.Limit limit)æ–¹æ³•èŽ·å–æ»¡è¶³éžscoreçš„æŽ’åºå–å€¼å…ƒç´ :&quot; + zSetValue); 5.add(K key, Set&lt;ZSetOperations.TypedTuple&gt; tuples)é€šè¿‡TypedTupleæ–¹å¼æ–°å¢žæ•°æ®ã€‚ ZSetOperations.TypedTuple&lt;Object&gt; typedTuple1 = new DefaultTypedTuple&lt;Object&gt;(&quot;E&quot;,6.0); ZSetOperations.TypedTuple&lt;Object&gt; typedTuple2 = new DefaultTypedTuple&lt;Object&gt;(&quot;F&quot;,7.0); ZSetOperations.TypedTuple&lt;Object&gt; typedTuple3 = new DefaultTypedTuple&lt;Object&gt;(&quot;G&quot;,5.0); Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; typedTupleSet = new HashSet&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt;(); typedTupleSet.add(typedTuple1); typedTupleSet.add(typedTuple2); typedTupleSet.add(typedTuple3); redisTemplate.opsForZSet().add(&quot;typedTupleSet&quot;,typedTupleSet); zSetValue = redisTemplate.opsForZSet().range(&quot;typedTupleSet&quot;,0,-1); System.out.println(&quot;é€šè¿‡add(K key, Set&lt;ZSetOperations.TypedTuple&lt;V&gt;&gt; tuples)æ–¹æ³•æ·»åŠ å…ƒç´ :&quot; + zSetValue); 6.rangeByScore(K key, double min, double max)æ ¹æ®è®¾ç½®çš„scoreèŽ·å–åŒºé—´å€¼ã€‚ zSetValue = redisTemplate.opsForZSet().rangeByScore(&quot;zSetValue&quot;,1,2); System.out.println(&quot;é€šè¿‡rangeByScore(K key, double min, double max)æ–¹æ³•æ ¹æ®è®¾ç½®çš„scoreèŽ·å–åŒºé—´å€¼:&quot; + zSetValue); 7.rangeByScore(K key, double min, double max,long offset, long count)æ ¹æ®è®¾ç½®çš„scoreèŽ·å–åŒºé—´å€¼ä»Žç»™å®šä¸‹æ ‡å’Œç»™å®šé•¿åº¦èŽ·å–æœ€ç»ˆå€¼ã€‚ zSetValue = redisTemplate.opsForZSet().rangeByScore(&quot;zSetValue&quot;,1,5,1,3); System.out.println(&quot;é€šè¿‡rangeByScore(K key, double min, double max, long offset, long count)æ–¹æ³•æ ¹æ®è®¾ç½®çš„scoreèŽ·å–åŒºé—´å€¼:&quot; + zSetValue); 8.rangeWithScores(K key, long start, long end) èŽ·å–RedisZSetCommands.Tuplesçš„åŒºé—´å€¼ã€‚ Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; typedTupleSet = redisTemplate.opsForZSet().rangeWithScores(&quot;typedTupleSet&quot;,1,3); Iterator&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; iterator = typedTupleSet.iterator(); while (iterator.hasNext()){ ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next(); Object value = typedTuple.getValue(); double score = typedTuple.getScore(); System.out.println(&quot;é€šè¿‡rangeWithScores(K key, long start, long end)æ–¹æ³•èŽ·å–RedisZSetCommands.Tuplesçš„åŒºé—´å€¼:&quot; + value + &quot;----&gt;&quot; + score ); } 9.rangeByScoreWithScores(K key, double min, double max)èŽ·å–RedisZSetCommands.Tuplesçš„åŒºé—´å€¼é€šè¿‡åˆ†å€¼ã€‚ Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; typedTupleSet = redisTemplate.opsForZSet().rangeByScoreWithScores(&quot;typedTupleSet&quot;,5,8); iterator = typedTupleSet.iterator(); while (iterator.hasNext()){ ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next(); Object value = typedTuple.getValue(); double score = typedTuple.getScore(); System.out.println(&quot;é€šè¿‡rangeByScoreWithScores(K key, double min, double max)æ–¹æ³•èŽ·å–RedisZSetCommands.Tuplesçš„åŒºé—´å€¼é€šè¿‡åˆ†å€¼:&quot; + value + &quot;----&gt;&quot; + score ); } 10.rangeByScoreWithScores(K key, double min, double max, long offset, long count)èŽ·å–RedisZSetCommands.Tuplesçš„åŒºé—´å€¼ä»Žç»™å®šä¸‹æ ‡å’Œç»™å®šé•¿åº¦èŽ·å–æœ€ç»ˆå€¼é€šè¿‡åˆ†å€¼ã€‚ Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; typedTupleSet = redisTemplate.opsForZSet().rangeByScoreWithScores(&quot;typedTupleSet&quot;,5,8,1,1); iterator = typedTupleSet.iterator(); while (iterator.hasNext()){ ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next(); Object value = typedTuple.getValue(); double score = typedTuple.getScore(); System.out.println(&quot;é€šè¿‡rangeByScoreWithScores(K key, double min, double max, long offset, long count)æ–¹æ³•èŽ·å–RedisZSetCommands.Tuplesçš„åŒºé—´å€¼ä»Žç»™å®šä¸‹æ ‡å’Œç»™å®šé•¿åº¦èŽ·å–æœ€ç»ˆå€¼é€šè¿‡åˆ†å€¼:&quot; + value + &quot;----&gt;&quot; + score ); } 11.count(K key, double min, double max)èŽ·å–åŒºé—´å€¼çš„ä¸ªæ•°ã€‚ long count = redisTemplate.opsForZSet().count(&quot;zSetValue&quot;,1,5); System.out.println(&quot;é€šè¿‡count(K key, double min, double max)æ–¹æ³•èŽ·å–åŒºé—´å€¼çš„ä¸ªæ•°:&quot; + count); 12.rank(K key, Object o)èŽ·å–å˜é‡ä¸­å…ƒç´ çš„ç´¢å¼•,ä¸‹æ ‡å¼€å§‹ä½ç½®ä¸º0ã€‚ long index = redisTemplate.opsForZSet().rank(&quot;zSetValue&quot;,&quot;B&quot;); System.out.println(&quot;é€šè¿‡rank(K key, Object o)æ–¹æ³•èŽ·å–å˜é‡ä¸­å…ƒç´ çš„ç´¢å¼•:&quot; + index); 13.scan(K key, ScanOptions options)åŒ¹é…èŽ·å–é”®å€¼å¯¹ï¼ŒScanOptions.NONEä¸ºèŽ·å–å…¨éƒ¨é”®å€¼å¯¹ï¼›ScanOptions.scanOptions().match(&quot;C&quot;).build()åŒ¹é…èŽ·å–é”®ä½map1çš„é”®å€¼å¯¹,ä¸èƒ½æ¨¡ç³ŠåŒ¹é…ã€‚ //Cursor&lt;Object&gt; cursor = redisTemplate.opsForSet().scan(&quot;setValue&quot;, ScanOptions.NONE); Cursor&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; cursor = redisTemplate.opsForZSet().scan(&quot;zSetValue&quot;, ScanOptions.NONE); while (cursor.hasNext()){ ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = cursor.next(); System.out.println(&quot;é€šè¿‡scan(K key, ScanOptions options)æ–¹æ³•èŽ·å–åŒ¹é…å…ƒç´ :&quot; + typedTuple.getValue() + &quot;---&gt;&quot; + typedTuple.getScore()); } 14.score(K key, Object o) èŽ·å–å…ƒç´ çš„åˆ†å€¼ã€‚ double score = redisTemplate.opsForZSet().score(&quot;zSetValue&quot;,&quot;B&quot;); System.out.println(&quot;é€šè¿‡score(K key, Object o)æ–¹æ³•èŽ·å–å…ƒç´ çš„åˆ†å€¼:&quot; + score); 15.zCard(K key)èŽ·å–å˜é‡ä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚ long zCard = redisTemplate.opsForZSet().zCard(&quot;zSetValue&quot;); System.out.println(&quot;é€šè¿‡zCard(K key)æ–¹æ³•èŽ·å–å˜é‡çš„é•¿åº¦:&quot; + zCard); 16.incrementScore(K key, V value, double delta)ä¿®æ”¹å˜é‡ä¸­çš„å…ƒç´ çš„åˆ†å€¼ã€‚ double incrementScore = redisTemplate.opsForZSet().incrementScore(&quot;zSetValue&quot;,&quot;C&quot;,5); System.out.print(&quot;é€šè¿‡incrementScore(K key, V value, double delta)æ–¹æ³•ä¿®æ”¹å˜é‡ä¸­çš„å…ƒç´ çš„åˆ†å€¼:&quot; + incrementScore); score = redisTemplate.opsForZSet().score(&quot;zSetValue&quot;,&quot;C&quot;); System.out.print(&quot;,ä¿®æ”¹åŽèŽ·å–å…ƒç´ çš„åˆ†å€¼:&quot; + score); zSetValue = redisTemplate.opsForZSet().range(&quot;zSetValue&quot;,0,-1); System.out.println(&quot;ï¼Œä¿®æ”¹åŽæŽ’åºçš„å…ƒç´ :&quot; + zSetValue); 17.reverseRange(K key, long start, long end)ç´¢å¼•å€’åºæŽ’åˆ—æŒ‡å®šåŒºé—´å…ƒç´ ã€‚ zSetValue = redisTemplate.opsForZSet().reverseRange(&quot;zSetValue&quot;,0,-1); System.out.println(&quot;é€šè¿‡reverseRange(K key, long start, long end)æ–¹æ³•å€’åºæŽ’åˆ—å…ƒç´ :&quot; + zSetValue); 18.reverseRangeByScore(K key, double min, double max)å€’åºæŽ’åˆ—æŒ‡å®šåˆ†å€¼åŒºé—´å…ƒç´ ã€‚ zSetValue = redisTemplate.opsForZSet().reverseRangeByScore(&quot;zSetValue&quot;,1,5); System.out.println(&quot;é€šè¿‡reverseRangeByScore(K key, double min, double max)æ–¹æ³•å€’åºæŽ’åˆ—æŒ‡å®šåˆ†å€¼åŒºé—´å…ƒç´ :&quot; + zSetValue); 19.reverseRangeByScore(K key, double min, double max, long offset, long count)å€’åºæŽ’åˆ—ä»Žç»™å®šä¸‹æ ‡å’Œç»™å®šé•¿åº¦åˆ†å€¼åŒºé—´å…ƒç´ ã€‚ zSetValue = redisTemplate.opsForZSet().reverseRangeByScore(&quot;zSetValue&quot;,1,5,1,2); System.out.println(&quot;é€šè¿‡reverseRangeByScore(K key, double min, double max, long offset, long count)æ–¹æ³•å€’åºæŽ’åˆ—ä»Žç»™å®šä¸‹æ ‡å’Œç»™å®šé•¿åº¦åˆ†å€¼åŒºé—´å…ƒç´ :&quot; + zSetValue); 20.reverseRangeByScoreWithScores(K key, double min, double max)å€’åºæŽ’åºèŽ·å–RedisZSetCommands.Tuplesçš„åˆ†å€¼åŒºé—´å€¼ã€‚ Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; typedTupleSet = redisTemplate.opsForZSet().reverseRangeByScoreWithScores(&quot;zSetValue&quot;,1,5); iterator = typedTupleSet.iterator(); while (iterator.hasNext()){ ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next(); Object value = typedTuple.getValue(); double score1 = typedTuple.getScore(); System.out.println(&quot;é€šè¿‡reverseRangeByScoreWithScores(K key, double min, double max)æ–¹æ³•å€’åºæŽ’åºèŽ·å–RedisZSetCommands.Tuplesçš„åŒºé—´å€¼:&quot; + value + &quot;----&gt;&quot; + score1 ); } 21.reverseRangeByScoreWithScores(K key, double min, double max, long offset, long count)å€’åºæŽ’åºèŽ·å–RedisZSetCommands.Tuplesçš„ä»Žç»™å®šä¸‹æ ‡å’Œç»™å®šé•¿åº¦åˆ†å€¼åŒºé—´å€¼ã€‚ Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; typedTupleSet = redisTemplate.opsForZSet().reverseRangeByScoreWithScores(&quot;zSetValue&quot;,1,5,1,2); iterator = typedTupleSet.iterator(); while (iterator.hasNext()){ ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next(); Object value = typedTuple.getValue(); double score1 = typedTuple.getScore(); System.out.println(&quot;é€šè¿‡reverseRangeByScoreWithScores(K key, double min, double max, long offset, long count)æ–¹æ³•å€’åºæŽ’åºèŽ·å–RedisZSetCommands.Tuplesçš„ä»Žç»™å®šä¸‹æ ‡å’Œç»™å®šé•¿åº¦åŒºé—´å€¼:&quot; + value + &quot;----&gt;&quot; + score1 ); } 22.reverseRangeWithScores(K key, long start, long end)ç´¢å¼•å€’åºæŽ’åˆ—åŒºé—´å€¼ã€‚ Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; typedTupleSet = redisTemplate.opsForZSet().reverseRangeWithScores(&quot;zSetValue&quot;,1,5); iterator = typedTupleSet.iterator(); while (iterator.hasNext()){ ZSetOperations.TypedTuple&lt;Object&gt; typedTuple = iterator.next(); Object value = typedTuple.getValue(); double score1 = typedTuple.getScore(); System.out.println(&quot;é€šè¿‡reverseRangeWithScores(K key, long start, long end)æ–¹æ³•ç´¢å¼•å€’åºæŽ’åˆ—åŒºé—´å€¼:&quot; + value + &quot;-----&gt;&quot; + score1); } 23.reverseRank(K key, Object o)èŽ·å–å€’åºæŽ’åˆ—çš„ç´¢å¼•å€¼ã€‚ long reverseRank = redisTemplate.opsForZSet().reverseRank(&quot;zSetValue&quot;,&quot;B&quot;); System.out.println(&quot;é€šè¿‡reverseRank(K key, Object o)èŽ·å–å€’åºæŽ’åˆ—çš„ç´¢å¼•å€¼:&quot; + reverseRank); 24.intersectAndStore(K key, K otherKey, K destKey)èŽ·å–2ä¸ªå˜é‡çš„äº¤é›†å­˜æ”¾åˆ°ç¬¬3ä¸ªå˜é‡é‡Œé¢ã€‚ redisTemplate.opsForZSet().intersectAndStore(&quot;zSetValue&quot;,&quot;typedTupleSet&quot;,&quot;intersectSet&quot;); zSetValue = redisTemplate.opsForZSet().range(&quot;intersectSet&quot;,0,-1); System.out.println(&quot;é€šè¿‡intersectAndStore(K key, K otherKey, K destKey)æ–¹æ³•èŽ·å–2ä¸ªå˜é‡çš„äº¤é›†å­˜æ”¾åˆ°ç¬¬3ä¸ªå˜é‡é‡Œé¢:&quot; + zSetValue); 25.intersectAndStore(K key, Collection otherKeys, K destKey)èŽ·å–å¤šä¸ªå˜é‡çš„äº¤é›†å­˜æ”¾åˆ°ç¬¬3ä¸ªå˜é‡é‡Œé¢ã€‚ List list = new ArrayList(); list.add(&quot;typedTupleSet&quot;); redisTemplate.opsForZSet().intersectAndStore(&quot;zSetValue&quot;,list,&quot;intersectListSet&quot;); zSetValue = redisTemplate.opsForZSet().range(&quot;intersectListSet&quot;,0,-1); System.out.println(&quot;é€šè¿‡intersectAndStore(K key, Collection&lt;K&gt; otherKeys, K destKey)æ–¹æ³•èŽ·å–å¤šä¸ªå˜é‡çš„äº¤é›†å­˜æ”¾åˆ°ç¬¬3ä¸ªå˜é‡é‡Œé¢:&quot; + zSetValue); 26.unionAndStore(K key, K otherKey, K destKey)èŽ·å–2ä¸ªå˜é‡çš„åˆé›†å­˜æ”¾åˆ°ç¬¬3ä¸ªå˜é‡é‡Œé¢ã€‚ redisTemplate.opsForZSet().unionAndStore(&quot;zSetValue&quot;,&quot;typedTupleSet&quot;,&quot;unionSet&quot;); zSetValue = redisTemplate.opsForZSet().range(&quot;unionSet&quot;,0,-1); System.out.println(&quot;é€šè¿‡unionAndStore(K key, K otherKey, K destKey)æ–¹æ³•èŽ·å–2ä¸ªå˜é‡çš„äº¤é›†å­˜æ”¾åˆ°ç¬¬3ä¸ªå˜é‡é‡Œé¢:&quot; + zSetValue); 27.unionAndStore(K key, Collection otherKeys, K destKey)èŽ·å–å¤šä¸ªå˜é‡çš„åˆé›†å­˜æ”¾åˆ°ç¬¬3ä¸ªå˜é‡é‡Œé¢ã€‚ redisTemplate.opsForZSet().unionAndStore(&quot;zSetValue&quot;,list,&quot;unionListSet&quot;); zSetValue = redisTemplate.opsForZSet().range(&quot;unionListSet&quot;,0,-1); System.out.println(&quot;é€šè¿‡unionAndStore(K key, Collection&lt;K&gt; otherKeys, K destKey)æ–¹æ³•èŽ·å–å¤šä¸ªå˜é‡çš„äº¤é›†å­˜æ”¾åˆ°ç¬¬3ä¸ªå˜é‡é‡Œé¢:&quot; + zSetValue); 28.remove(K key, Objectâ€¦ values)æ‰¹é‡ç§»é™¤å…ƒç´ æ ¹æ®å…ƒç´ å€¼ã€‚ long removeCount = redisTemplate.opsForZSet().remove(&quot;unionListSet&quot;,&quot;A&quot;,&quot;B&quot;); zSetValue = redisTemplate.opsForZSet().range(&quot;unionListSet&quot;,0,-1); System.out.print(&quot;é€šè¿‡remove(K key, Object... values)æ–¹æ³•ç§»é™¤å…ƒç´ çš„ä¸ªæ•°:&quot; + removeCount); System.out.println(&quot;,ç§»é™¤åŽå‰©ä½™çš„å…ƒç´ :&quot; + zSetValue); 29.removeRangeByScore(K key, double min, double max)æ ¹æ®åˆ†å€¼ç§»é™¤åŒºé—´å…ƒç´ ã€‚ removeCount = redisTemplate.opsForZSet().removeRangeByScore(&quot;unionListSet&quot;,3,5); zSetValue = redisTemplate.opsForZSet().range(&quot;unionListSet&quot;,0,-1); System.out.print(&quot;é€šè¿‡removeRangeByScore(K key, double min, double max)æ–¹æ³•ç§»é™¤å…ƒç´ çš„ä¸ªæ•°:&quot; + removeCount); System.out.println(&quot;,ç§»é™¤åŽå‰©ä½™çš„å…ƒç´ :&quot; + zSetValue); 30.removeRange(K key, long start, long end)æ ¹æ®ç´¢å¼•å€¼ç§»é™¤åŒºé—´å…ƒç´ ã€‚ removeCount = redisTemplate.opsForZSet().removeRange(&quot;unionListSet&quot;,3,5); zSetValue = redisTemplate.opsForZSet().range(&quot;unionListSet&quot;,0,-1); System.out.print(&quot;é€šè¿‡removeRange(K key, long start, long end)æ–¹æ³•ç§»é™¤å…ƒç´ çš„ä¸ªæ•°:&quot; + removeCount); System.out.println(&quot;,ç§»é™¤åŽå‰©ä½™çš„å…ƒç´ :&quot; + zSetValue); RedisTemplateå®žè·µä¸€å‚èµ›å·çš„è‡ªå¢žï¼Œåˆ©ç”¨è‡ªå¢žèŽ·å–å‚èµ›å·çš„å€¼ï¼Œå†™å…¥å¯¹è±¡å­˜åº“ã€‚ //å‚èµ›å·ä¸ºç©ºï¼Œä¸”èµ·å§‹å€¼å¤§äºŽ-1 if (StringUtils.isEmpty(enrollMatch.getSeq()) &amp;&amp; match.getSeqStart() &gt; -1) { //ç¬¬ä¸€æ¬¡å‚èµ›è¯ç”Ÿæˆ //åˆ¤æ–­redisé‡Œé¢æ˜¯å¦æœ‰å¯¹åº”çš„æ¯”èµ›çš„key,å¦‚æžœæ²¡æœ‰ï¼Œ //æ‰§è¡ŒredisTemplate.opsForHash().increment(&quot;match_seq&quot;, match.get_id(), match.getSeqStart()); //åœ¨èµ·å§‹å‚èµ›å·è‡ªå¢ž1ã€‚ //redisTemplate.opsForHash().hasKey(&quot;match_seq&quot;, match.get_id()) if (!redisTemplate.opsForHash().hasKey(&quot;match_seq&quot;, match.get_id())) redisTemplate.opsForHash().increment(&quot;match_seq&quot;, match.get_id(), match.getSeqStart()); //éžç¬¬ä¸€æ¬¡ long num = redisTemplate.opsForHash().increment(&quot;match_seq&quot;, match.get_id(), 1); String numStr = &quot;&quot; + num; while (numStr.length() &lt; 5) // å‡‘å¤Ÿé•¿åº¦5 numStr = &quot;0&quot; + numStr; String seq = match.getSeqPrefix() + numStr; } å‚èµ›è¯åˆ†é… æ•°æ®ç»“æž„ï¼šç³»ç»Ÿå¯ä»¥é’ˆå¯¹æ¯”èµ›è®¾ç½®èµ›åŒºï¼›èµ›åŒºé‡Œè®¾ç½®è€ƒåœºï¼Œå¦‚ç¬¬ä¸€è€ƒåœºï¼Œç¬¬äºŒè€ƒåœºç­‰ï¼›è€ƒåœºé‡Œè®¾ç½®æœ‰åº§ä½å·ï¼Œæ¯ä¸ªè€ƒåœºåº§ä½å·ä»Ž1å¼€å§‹ï¼Œåº§ä½å·ä¸ªæ•°å¯ä»¥ç³»ç»Ÿè®¾ç½®ã€‚ éœ€æ±‚ï¼šç»™æ¯ä¸ªå‚èµ›é€‰æ‰‹åˆ†é…åº§ä½å·ã€‚ å®žçŽ°è¿‡ç¨‹ï¼š //æŸ¥è¯¢æ‰€æœ‰éœ€è¦åˆ†é…è€ƒåœºåº§ä½çš„è®°å½•ã€‚æ ¹æ®æ¯”èµ›é˜¶æ®µï¼ˆå¤èµ›ï¼Œçº¿ä¸‹å½¢å¼ï¼‰ï¼Œå·²äº¤æŠ¥åè´¹ï¼Œå·²é€‰èµ›ç‚¹ï¼Œæœªåˆ†é…è€ƒåœºã€‚ List&lt;MenrollPhase&gt; menrollPhaseList = mongoTemplate.find(Query.query(Criteria.where(&quot;phaseId&quot;).is(phaseId).and(&quot;state&quot;).is(2).and(&quot;matchPlaceId&quot;).ne(null).ne(&quot;&quot;).and(&quot;matchPlaceRoomId&quot;).in(null,&quot;&quot;)).with(new Sort(&quot;_id&quot;, &quot;ASC&quot;)), MenrollPhase.class); //æŸ¥è¯¢æ¯”èµ›æ˜¯å¦è®¾ç½®èµ›åŒºã€éœ€è¦åˆ†é…è€ƒåœºçš„è®°å½•ä¸ä¸ºç©ºä¸”sizeå¤§äºŽ0 if(mphase.getMatchPlaceIds()!=null&amp;&amp;menrollPhaseList!=null&amp;&amp;menrollPhaseList.size()&gt;0){ lineNumber=menrollPhaseList.size();//è¦ç”Ÿæˆå‚èµ›è¯æ€»æ•° //æŸ¥è¯¢è¯¥æ¯”èµ›æ‰€æœ‰èµ›åŒº List&lt;MmatchPlace&gt; mmatchPlaceList = mongoTemplate.find(Query.query(Criteria.where(&quot;_id&quot;).in(mphase.getMatchPlaceIds())), MmatchPlace.class); if(mmatchPlaceList!=null&amp;&amp;mmatchPlaceList.size()&gt;0){ ListOperations&lt;String, Object&gt; lo = redisTemplate.opsForList(); //å¾ªçŽ¯éåŽ†èµ›åŒºï¼Œå°†è€ƒåœºè®¾ç½®åˆ°èµ›åŒºä¸­ for(MmatchPlace mmatchPlace : mmatchPlaceList){ List&lt;MmatchPlaceRoom&gt; mmatchPlaceRoomList = mongoTemplate.find(Query.query(Criteria.where(&quot;placeId&quot;).in(mmatchPlace.get_id())).with(new Sort(&quot;order&quot;, &quot;ASC&quot;)), MmatchPlaceRoom.class); mmatchPlace.setMmatchPlaceRooms(mmatchPlaceRoomList); } //å‚èµ›è¯æ¨¡æ¿ String[] temp = mphase.getCertTpl().split(&quot;\\|&quot;); //æ–‡ä»¶å String fileName = temp[2]; String quchu=null; //åŠ é”ï¼Œåˆ†å¸ƒå¼çŽ¯å¢ƒä¸‹åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹åŽ»è€ƒåœºèŽ·å–åº§ä½å· boolean groupAbsent = redisTemplate.opsForValue().setIfAbsent(&quot;placeRoom_&quot; + mphase.get_id(), &quot;roomsuo&quot;); //groupAbsentä¸ºtrue å¯ä»¥æ‰§è¡Œå½“å‰ä»£ç  if(groupAbsent){ //éåŽ†èµ›åŒº for(MmatchPlace mmatchPlace : mmatchPlaceList){ //æ¯”èµ›å’Œèµ›åŒºidå…±åŒç»„æˆkey String mmatchPlaceIdKey = &quot;matchPlace_&quot; +mphase.get_id()+mmatchPlace.get_id(); //é¦–æ¬¡åˆ†é… if(!redisTemplate.hasKey(mmatchPlaceIdKey)&amp;&amp;mmatchPlace.getMmatchPlaceRooms()!=null&amp;&amp;mmatchPlace.getMmatchPlaceRooms().size()&gt;0){ //éåŽ†èµ›åŒºä¸‹çš„è€ƒåœºï¼Œè€ƒåœºidå’Œåº§ä½å·å…±åŒç»„æˆvalueï¼Œèµ›åŒºä¸ºkey,è€ƒåœºå’Œåº§ä½ä¸ºvalueä¸­é—´ä»¥â€œï¼Œâ€éš”å¼€ï¼Œå­˜å…¥ //redisã€‚ for(MmatchPlaceRoom mmatchPlaceRoom : mmatchPlace.getMmatchPlaceRooms()){ for(int i=0;i&lt;mmatchPlaceRoom.getCounts();i++){ String placeValue = mmatchPlaceRoom.get_id()+&quot;,&quot;+(i+1); lo.leftPush(mmatchPlaceIdKey, placeValue);//å­˜å…¥redis } } } } checkStatus=1;//å‡†å¤‡è€ƒåœºå·²ç»ç»“æŸ //å¼€å§‹åˆ†è€ƒåœº for(MenrollPhase menrollPhase : menrollPhaseList){ if(!StringUtils.isEmpty(menrollPhase.getMatchPlaceId())&amp;&amp;StringUtils.isEmpty(menrollPhase.getMatchPlaceRoomId())){ for(MmatchPlace mmatchPlace : mmatchPlaceList){ if(mmatchPlace.get_id().equals(menrollPhase.getMatchPlaceId())){ //å–å‡ºåˆ†é…å¥½çš„åº§ä½ quchu = (String) lo.rightPop(&quot;matchPlace_&quot; +mphase.get_id()+mmatchPlace.get_id()); //redisé‡Œé¢æ²¡æœ‰è¯´æ˜Žå·²ç»å–å‡ºäº†ã€‚ if(StringUtils.isEmpty(quchu)){ continue; } String[] tempNum = quchu.split(&quot;,&quot;); String roomId = tempNum[0];//è€ƒåœºId String numBer = tempNum[1];//åº§ä½å· for(MmatchPlaceRoom mmatchPlaceRoom : mmatchPlace.getMmatchPlaceRooms()){ if(mmatchPlaceRoom.get_id().equals(roomId)){ //å°†å–å‡ºçš„è€ƒåœºå’Œåº§ä½å·å­˜å…¥å¯¹è±¡å†™å…¥æ•°æ®åº“ menrollPhase.setMatchPlaceRoomId(mmatchPlaceRoom.get_id()); menrollPhase.setMatchPlaceRoomNum(Integer.valueOf(numBer)); mongoTemplate.save(menrollPhase); menrollPhase.setMatchPlace(mmatchPlace); menrollPhase.setMatchPlaceRoom(mmatchPlaceRoom); } } } } } } } //åˆ é™¤é” redisTemplate.delete(&quot;placeRoom_&quot; + mphase.get_id()); //å¼€å§‹ç”Ÿæˆå‚èµ›è¯ try{ caseCount=0; this.getDetails(menrollPhaseList); //æ–¹æ³•ä¸€ï¼šä½¿ç”¨Windowsç³»ç»Ÿå­—ä½“(TrueType) BaseFont baseFont = BaseFont.createFont(path+&quot;WEB-INF/template/SIMSUN.TTC,1&quot;,BaseFont.IDENTITY_H,BaseFont.NOT_EMBEDDED); for(MenrollPhase menrollPhase : menrollPhaseList){ if(!StringUtils.isEmpty(menrollPhase.getMatchPlaceId()) &amp;&amp;!StringUtils.isEmpty(menrollPhase.getMatchPlaceRoomId()) &amp;&amp;menrollPhase.getMatchPlaceRoomNum()!=0){ boolean isOk = checkedCarState(menrollPhase); if(!isOk){ continue; } PdfReader reader = new PdfReader(fileName); ByteArrayOutputStream bos = new ByteArrayOutputStream(); PdfStamper ps = new PdfStamper(reader, bos); AcroFields fields = ps.getAcroFields(); fields.addSubstitutionFont(baseFont); Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;(); fillMap(map,menrollPhase); fillData(fields, map); ps.setFormFlattening(true); ps.close(); byte[] bytes = bos.toByteArray(); String base = Base64Util.encode(bytes).trim(); redisTemplate.opsForHash().put(&quot;cansai_&quot;+phaseId,menrollPhase.get_id(), base); caseCount++; } } contectStatus=1;//å‚èµ›è¯ç”Ÿæˆç»“æŸ }catch (IOException|DocumentException e) { e.printStackTrace(); } } } Redisåˆ†å¸ƒå¼é”è§£å†³æŠ¢è´­é—®é¢˜å…ˆæ–°å»ºä¸€ä¸ªRedisLockç±»ï¼š public class RedisService { @Autowired private RedisTemplate stringRedisTemplate; /*** * åŠ é” * @param key * @param value å½“å‰æ—¶é—´+è¶…æ—¶æ—¶é—´ * @return é”ä½è¿”å›žtrue */ public boolean lock(String key,String value){ if(stringRedisTemplate.opsForValue().setIfAbsent(key,value)){//setNX è¿”å›žboolean return true; } //å¦‚æžœé”è¶…æ—¶ *** String currentValue = stringRedisTemplate.opsForValue().get(key); if(!StringUtils.isEmpty(currentValue) &amp;&amp; Long.parseLong(currentValue)&lt;System.currentTimeMillis()){ //èŽ·å–ä¸Šä¸€ä¸ªé”çš„æ—¶é—´ String oldvalue = stringRedisTemplate.opsForValue().getAndSet(key,value); if(!StringUtils.isEmpty(oldvalue)&amp;&amp;oldvalue.equals(currentValue)){ return true; } } return false; } /*** * è§£é” * @param key * @param value * @return */ public void unlock(String key,String value){ try { String currentValue = stringRedisTemplate.opsForValue().get(key); if(!StringUtils.isEmpty(currentValue)&amp;&amp;currentValue.equals(value)){ stringRedisTemplate.opsForValue().getOperations().delete(key); } } catch (Exception e) { log.error(&quot;è§£é”å¼‚å¸¸&quot;); } } } é¦–å…ˆï¼Œé”çš„valueå€¼æ˜¯å½“å‰æ—¶é—´åŠ ä¸Šè¿‡æœŸæ—¶é—´çš„æ—¶é—´æˆ³ï¼ŒLongç±»åž‹ã€‚é¦–å…ˆçœ‹åˆ°ç”¨setiFAbsentæ–¹æ³•ä¹Ÿå°±æ˜¯å¯¹åº”çš„SETNXï¼Œåœ¨æ²¡æœ‰çº¿ç¨‹èŽ·å¾—é”çš„æƒ…å†µä¸‹å¯ä»¥ç›´æŽ¥æ‹¿åˆ°é”ï¼Œå¹¶è¿”å›žtrueä¹Ÿå°±æ˜¯åŠ é”ï¼Œæœ€åŽæ²¡æœ‰èŽ·å¾—é”çš„çº¿ç¨‹ä¼šè¿”å›žfalseã€‚ æœ€é‡è¦çš„æ˜¯ä¸­é—´å¯¹äºŽé”è¶…æ—¶çš„å¤„ç†ï¼Œå¦‚æžœæ²¡æœ‰è¿™æ®µä»£ç ï¼Œå½“ç§’æ€æ–¹æ³•å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™ï¼ŒåŽç»­çš„çº¿ç¨‹éƒ½æ— æ³•å¾—åˆ°é”ï¼Œä¹Ÿå°±é™·å…¥äº†ä¸€ä¸ªæ­»é”çš„æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥å‡è®¾CurrentValueä¸ºAï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºäº†å¼‚å¸¸ï¼Œè¿™æ—¶è¿›å…¥äº†ä¸¤ä¸ªvalueä¸ºBçš„çº¿ç¨‹æ¥äº‰å¤ºè¿™ä¸ªé”ï¼Œä¹Ÿå°±æ˜¯èµ°åˆ°äº†æ³¨é‡Š*çš„åœ°æ–¹ã€‚currentValue==Aï¼Œè¿™æ—¶æŸä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°äº†getAndSet(key,value)å‡½æ•°(æŸä¸€æ—¶åˆ»ä¸€å®šåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œå…¶ä»–è¦ç­‰å¾…)ã€‚è¿™æ—¶oldvalueä¹Ÿå°±æ˜¯ä¹‹å‰çš„valueç­‰äºŽAï¼Œåœ¨æ–¹æ³•æ‰§è¡Œè¿‡åŽï¼Œoldvalueä¼šè¢«è®¾ç½®ä¸ºå½“å‰çš„valueä¹Ÿå°±æ˜¯Bã€‚è¿™æ—¶ç»§ç»­æ‰§è¡Œï¼Œç”±äºŽoldValue==currentValueæ‰€ä»¥è¯¥çº¿ç¨‹èŽ·å–åˆ°é”ã€‚è€Œå¦ä¸€ä¸ªçº¿ç¨‹èŽ·å–çš„oldvalueæ˜¯Bï¼Œè€ŒcurrentValueæ˜¯Aï¼Œæ‰€ä»¥ä»–å°±èŽ·å–ä¸åˆ°é”å•¦ã€‚ ä¸šåŠ¡ä»£ç ï¼š private static final int TIMEOUT= 10*1000; @Transactional public void orderProductMockDiffUser(String productId){ long time = System.currentTimeMillions()+TIMEOUT; if(!redislock.lock(productId,String.valueOf(time)){ throw new SellException(101,&quot;æ¢ä¸ªå§¿åŠ¿å†è¯•è¯•&quot;) } //1.æŸ¥åº“å­˜ int stockNum = stock.get(productId); if(stocknum == 0){ throw new SellException(ProductStatusEnum.STOCK_EMPTY); //è¿™é‡ŒæŠ›å‡ºçš„å¼‚å¸¸è¦æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¦åˆ™æ— æ³•è¿›è¡Œæ•°æ®å›žæ»šï¼Œè¿™ä¹Ÿæ˜¯springä¸­æ¯”è¾ƒåŸºç¡€çš„ }else{ //2.ä¸‹å• orders.put(KeyUtil.genUniqueKey(),productId);//ç”Ÿæˆéšæœºç”¨æˆ·idæ¨¡æ‹Ÿé«˜å¹¶å‘ sotckNum = stockNum-1; try{ Thread.sleep(100); } catch (InterruptedExcption e){ e.printStackTrace(); } stock.put(productId,stockNum); } redisLock.unlock(productId,String.valueOf(time)); }]]></content>
      <categories>
        <category>redis</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTPæ¦‚è¿°å’ŒURL]]></title>
    <url>%2F2018%2F12%2F10%2Fhttps%2F</url>
    <content type="text"><![CDATA[å¼•è¨€HTTPåè®®ï¼Œä¸€ä¸ªç†Ÿæ‚‰åˆé™Œç”Ÿçš„åº”ç”¨åè®®ã€‚ç†Ÿæ‚‰çš„æ˜¯å®ƒåœ¨å„ç§è®¡ç®—æœºç½‘ç»œæ•™æä¸­å¿…ç„¶ä¼šè¢«æåŠçš„åº”ç”¨å±‚åè®®ï¼Œç¨å¾®æœ‰ç‚¹è®¡ç®—æœºçŸ¥è¯†çš„äººåŸºæœ¬ä¸Šéƒ½ä¼šå¬è¿‡è¿™ä¸ªåè®®ã€‚å®ƒæ˜¯äº’è”ç½‘çš„åŸºç¡€ï¼Œå¯ä»¥è¿™ä¹ˆè¯´ï¼Œæ²¡æœ‰HTTPåè®®ï¼Œå°±æ²¡æœ‰å½“å‰äº’è”ç½‘çš„è“¬å‹ƒå‘å±•ã€‚ç„¶è€Œï¼Œç¬”è€…å¯¹å®ƒåˆæ˜¯é™Œç”Ÿçš„ã€‚å› ä¸ºè™½ç„¶å‚ä¸Žå¼€å‘äº†ä¸å°‘Webåº”ç”¨ï¼Œä½†å¾ˆå°‘ç›´æŽ¥ä¸ŽHTTPåè®®ç›´æŽ¥æ‰“äº¤é“ï¼Œå› ä¸ºWebå®¹å™¨éšè—äº†å¾ˆå¤šHTTPåè®®çš„ç»†èŠ‚ï¼ˆè­¬å¦‚ï¼šè¯·æ±‚åè®®å¤´çš„è§£æžï¼Œå“åº”æŠ¥æ–‡çš„ç”Ÿæˆï¼‰ï¼Œä½¿å¾—ä¸Šå±‚å¼€å‘ä¸ç”¨å…³å¿ƒHTTPå³å¯ä»¥å¼€å‘å‡ºå¯ç”¨çš„Webåº”ç”¨ã€‚ä¸åº”è¯¥ä»…ä»…æ»¡è¶³å¯ç”¨ï¼Œè¿˜åº”è¯¥è®©åº”ç”¨æ›´åŠ é«˜æ•ˆï¼Œè¿™ä¿ƒä½¿æˆ‘ä¸å¾—ä¸åŽ»ç ”ç©¶HTTPåè®®ã€‚ç§ä»¥ä¸ºï¼Œå¦‚æžœæƒ³è¿›ä¸€æ­¥æå‡è‡ªå·±çš„æŠ€æœ¯èƒ½åŠ›ï¼Œå¿…é¡»è¦æ·±å…¥åˆ°åè®®å±‚çº§åˆ«ï¼Œä¸€äº›å¹³æ—¶æ„Ÿè§‰åˆ°èŽ«åå…¶å¦™çš„é—®é¢˜å°±å¯ä»¥è¿Žåˆƒè€Œè§£ã€‚ æœ€è¿‘é˜…è¯»äº†ã€ŠHTTPæƒå¨æŒ‡å—ã€‹ä¸€ä¹¦ï¼Œæœ¬æ–‡åŒ…å«ä¹¦ä¸­çš„æ ¸å¿ƒè¦ç‚¹ã€ä¸ªäººå»¶ä¼¸ä»¥åŠä¸ªäººæ“ä½œå®žè·µã€‚ç”±äºŽæœ¬ä¹¦æ˜¯2009å¹´å‡ºç‰ˆï¼Œè·çŽ°åœ¨å·²ç»æœ‰6å¹´ä¹‹ä¹…ï¼ŒæœŸé—´ï¼ŒHTTPåè®®æœ¬èº«ä¹Ÿä¸æ–­åœ°å‘å±•ã€‚æ‰€ä»¥ï¼Œä¸€äº›è€æ—§çš„çŸ¥è¯†ç‚¹å°†ä¸ä¼šå‡ºçŽ°åœ¨æœ¬æ–‡ä¸­ã€‚å¸Œæœ›é€šè¿‡ä¸æ–­é˜…è¯»å’Œå®žè·µï¼Œå¹¶ä¸”è®°å½•ä¸‹æ¥ï¼Œèƒ½å¤ŸåŠ æ·±å¯¹HTTPåè®®æœ¬èº«çš„ç†è§£ï¼ HTTPåè®®æ¦‚è¿°æœ¬èŠ‚ä»‹ç»ä¸€äº›HTTPçš„åŸºç¡€çŸ¥è¯†ï¼Œå…ˆå¯¹HTTPæœ‰ä¸€ä¸ªå®è§‚ä¸Šçš„äº†è§£ã€‚ HTTPåè®®æ˜¯ä»€ä¹ˆå¹³å¸¸è€çœ‹åˆ°TCP/IPåè®®ã€FTPåè®®ï¼ŒXXåè®®â€¦â€¦ä¸ç¦è¦é—®ï¼Œåˆ°åº•ä»€ä¹ˆæ˜¯åè®®ï¼ŸæŸ¥é˜…äº†ç™¾åº¦ç™¾ç§‘ï¼Œä¸Šé¢æ˜¯è¿™ä¹ˆå®šä¹‰çš„ï¼š åŸºæœ¬è§£é‡Šï¼šå…±åŒè®¡è®®ï¼›åå•†æ³•å¾‹èŒƒç•´ï¼šåè®®æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šå®žä½“ä¸ºäº†å¼€å±•æŸé¡¹æ´»åŠ¨ï¼Œç»è¿‡åå•†åŽåŒæ–¹è¾¾æˆçš„ä¸€è‡´æ„è§ã€‚ ä¸¤ä¸ªè¦ç‚¹ï¼š 1. ä¸¤ä¸ªåŠä¸¤ä¸ªä»¥ä¸Šå‚ä¸Žè€…ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœåªæœ‰ä¸€æ–¹å‚ä¸Žï¼Œæ ¹æœ¬å°±ä¸ä¼šæ¶‰åŠåˆ°åè®®ã€‚ 2. åå•†ä¸€è‡´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰å‚ä¸Žæ–¹éƒ½å¿…é¡»åŒæ„å¹¶ä¸”éµå®ˆï¼Œæ‰èƒ½ä½¿å¾—æ´»åŠ¨èƒ½æ­£å¸¸è¿è¡Œä¸‹åŽ»ã€‚ ä¸Šé¢è®²çš„ä¸€èˆ¬æ„ä¹‰ä¸Šçš„åè®®ï¼Œåœ¨è®¡ç®—æœºé¢†åŸŸä¸­ï¼Œæˆ‘ä»¬è®²çš„åè®®ä¸€èˆ¬æ˜¯æŒ‡é€šä¿¡åè®®ï¼Œå®ƒä»ç„¶éµå¾ªä¸Šé¢çš„è¦ç‚¹ã€‚é¦–å…ˆï¼Œé€šä¿¡å¿…ç„¶æ¶‰åŠåˆ°å¤šæ–¹å‚ä¸Žï¼›å…¶æ¬¡ï¼Œå¦‚æžœæœ‰ä¸€æ–¹ä¸éµå®ˆåè®®ï¼Œåˆ™æ ¹æœ¬æ²¡æ³•è¿›è¡Œæœ‰æ•ˆé€šä¿¡ã€‚ ä¸‹é¢æ¥çœ‹çœ‹å•¥æ˜¯HTTPåè®®ï¼Œç™¾åº¦ç™¾ç§‘ï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼ŒHyperText Transfer Protocol)æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ã€‚æ‰€æœ‰çš„WWWæ–‡ä»¶éƒ½å¿…é¡»éµå®ˆè¿™ä¸ªæ ‡å‡†ã€‚è®¾è®¡HTTPæœ€åˆçš„ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ç§å‘å¸ƒå’ŒæŽ¥æ”¶HTMLé¡µé¢çš„æ–¹æ³•ã€‚1960å¹´ç¾Žå›½äººTed Nelsonæž„æ€äº†ä¸€ç§é€šè¿‡è®¡ç®—æœºå¤„ç†æ–‡æœ¬ä¿¡æ¯çš„æ–¹æ³•ï¼Œå¹¶ç§°ä¹‹ä¸ºè¶…æ–‡æœ¬ï¼ˆhypertextï¼‰,è¿™æˆä¸ºäº†HTTPè¶…æ–‡æœ¬ä¼ è¾“åè®®æ ‡å‡†æž¶æž„çš„å‘å±•æ ¹åŸºã€‚Ted Nelsonç»„ç»‡åè°ƒä¸‡ç»´ç½‘åä¼šï¼ˆWorld Wide Web Consortiumï¼‰å’Œäº’è”ç½‘å·¥ç¨‹å·¥ä½œå°ç»„ï¼ˆInternet Engineering Task Force ï¼‰å…±åŒåˆä½œç ”ç©¶ï¼Œæœ€ç»ˆå‘å¸ƒäº†ä¸€ç³»åˆ—çš„RFCï¼Œå…¶ä¸­è‘—åçš„RFC 2616å®šä¹‰äº†HTTP 1.1ã€‚ HTTPåè®®çš„ç‰¹ç‚¹ä¸‹é¢ä»Žè¿™ç¯‡åšå®¢ä¸­è½¬è¿‡æ¥çš„HTTPåè®®çš„ç‰¹ç‚¹ï¼Œè¿™ç¯‡æ–‡ç« å¯¹HTTPåšäº†å¾ˆå…¨é¢çš„ä»‹ç»ï¼Œå€¼å¾—ä¸€è¯»ã€‚ æ”¯æŒå®¢æˆ·/æœåŠ¡å™¨æ¨¡å¼ã€‚æ”¯æŒåŸºæœ¬è®¤è¯å’Œå®‰å…¨è®¤è¯ã€‚ ç®€å•å¿«é€Ÿï¼šå®¢æˆ·å‘æœåŠ¡å™¨è¯·æ±‚æœåŠ¡æ—¶ï¼Œåªéœ€ä¼ é€è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„ã€‚è¯·æ±‚æ–¹æ³•å¸¸ç”¨çš„æœ‰GETã€HEADã€POSTã€‚æ¯ç§æ–¹æ³•è§„å®šäº†å®¢æˆ·ä¸ŽæœåŠ¡å™¨è”ç³»çš„ç±»åž‹ä¸åŒã€‚ç”±äºŽHTTPåè®®ç®€å•ï¼Œä½¿å¾—HTTPæœåŠ¡å™¨çš„ç¨‹åºè§„æ¨¡å°ï¼Œå› è€Œé€šä¿¡é€Ÿåº¦å¾ˆå¿«ã€‚ çµæ´»ï¼šHTTPå…è®¸ä¼ è¾“ä»»æ„ç±»åž‹çš„æ•°æ®å¯¹è±¡ã€‚æ­£åœ¨ä¼ è¾“çš„ç±»åž‹ç”±Content-TypeåŠ ä»¥æ ‡è®°ã€‚ HTTP 0.9å’Œ1.0ä½¿ç”¨éžæŒç»­è¿žæŽ¥ï¼ˆæ— è¿žæŽ¥æ€§ï¼‰ï¼šé™åˆ¶æ¯æ¬¡è¿žæŽ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·çš„è¯·æ±‚ï¼Œå¹¶æ”¶åˆ°å®¢æˆ·çš„åº”ç­”åŽï¼Œå³æ–­å¼€è¿žæŽ¥ã€‚é‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´ã€‚HTTP 1.1ä½¿ç”¨æŒç»­è¿žæŽ¥ï¼šä¸å¿…ä¸ºæ¯ä¸ªwebå¯¹è±¡åˆ›å»ºä¸€ä¸ªæ–°çš„è¿žæŽ¥ï¼Œä¸€ä¸ªè¿žæŽ¥å¯ä»¥ä¼ é€å¤šä¸ªå¯¹è±¡ã€‚ æ— çŠ¶æ€ï¼šHTTPåè®®æ˜¯æ— çŠ¶æ€åè®®ã€‚æ— çŠ¶æ€æ˜¯æŒ‡åè®®å¯¹äºŽäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚ç¼ºå°‘çŠ¶æ€æ„å‘³ç€å¦‚æžœåŽç»­å¤„ç†éœ€è¦å‰é¢çš„ä¿¡æ¯ï¼Œåˆ™å®ƒå¿…é¡»é‡ä¼ ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´æ¯æ¬¡è¿žæŽ¥ä¼ é€çš„æ•°æ®é‡å¢žå¤§ ç‰¹åˆ«ç›´æŽ¥è¯´æ˜Žçš„æ˜¯HTTPçš„è¿žæŽ¥æ€§ã€‚åœ¨æˆ‘ä»¥å‰çš„è®¤è¯†é‡Œï¼ŒHTTPæœ€é‡è¦çš„ç‰¹æ€§æ˜¯æ— è¿žæŽ¥æ€§å’Œæ— çŠ¶æ€æ€§ã€‚æ‰€è°“æ— è¿žæŽ¥æ€§ï¼Œæ˜¯æŒ‡æ¯ä¸€æ¬¡è¯·æ±‚éƒ½ä½¿ç”¨æ–°çš„è¿žæŽ¥ï¼Œè¯·æ±‚å®Œæ¯•åŽè¿žæŽ¥å…³é—­ã€‚è¿™æ ·åšæœ€å¤§çš„å¥½å¤„æ—¶ï¼Œæœ€å¤§ç¨‹åº¦ä¸Šå‡å°‘ç©ºé—²è¿žæŽ¥å ç”¨æœåŠ¡ç«¯èµ„æºï¼Œè¿™åœ¨ç³»ç»Ÿèµ„æºæ¯”è¾ƒæ˜‚è´µã€é¡µé¢æ¯”è¾ƒç®€å•ã€ä»…ä¼ è¾“é™æ€é¡µé¢çš„å¹´ä»£ç¡®å®žæ˜¯éžå¸¸åˆç†çš„ã€‚ä½†æ˜¯ï¼Œéšç€ç”µå•†ã€è§†é¢‘ç­‰å¯Œåª’ä½“Webåº”ç”¨çš„å…´èµ·ï¼ŒHTTPçš„æ— è¿žæŽ¥æ€§åˆ¶çº¦äº†ç³»ç»Ÿçš„æ€§èƒ½ã€‚ä¸€ä¸ªWebåº”ç”¨åŠ¨è¾„ä¸Šç™¾å¼ å›¾ç‰‡ï¼Œæ¯ä¸€å¼ å›¾ç‰‡éƒ½è¦å ç”¨ä¸€ä¸ªç½‘ç»œè¿žæŽ¥ã€‚è¦çŸ¥é“ï¼Œæ¯æ–°å»ºä¸€ä¸ªè¿žæŽ¥éƒ½éœ€è¦åœ¨TCPåè®®å±‚è¿›è¡Œâ€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Œæ•ˆçŽ‡éžå¸¸ä½Žä¸‹ã€‚éšç€åœ¨HTTP v1.1ç‰ˆæœ¬ä¸­é»˜è®¤é‡‡ç”¨Keep-Aliveï¼Œå¤šä¸ªè¯·æ±‚å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªè¿žæŽ¥ï¼ŒHTTPçš„æ— è¿žæŽ¥æ€§æè¿°å·²ç»å˜å¾—ä¸å‡†ç¡®äº†ã€‚ ç‰ˆæœ¬å˜åŒ– HTTP/0.9 å·²è¿‡æ—¶ã€‚åªæŽ¥å— GET ä¸€ç§è¯·æ±‚æ–¹æ³•ï¼Œæ²¡æœ‰åœ¨é€šè®¯ä¸­æŒ‡å®šç‰ˆæœ¬å·ï¼Œä¸”ä¸æ”¯æŒè¯·æ±‚å¤´ã€‚ç”±äºŽè¯¥ç‰ˆæœ¬ä¸æ”¯æŒ POST æ–¹æ³•ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯æ— æ³•å‘æœåŠ¡å™¨ä¼ é€’å¤ªå¤šä¿¡æ¯ã€‚ HTTP/1.0 è¿™æ˜¯ç¬¬ä¸€ä¸ªåœ¨é€šè®¯ä¸­æŒ‡å®šç‰ˆæœ¬å·çš„HTTP åè®®ç‰ˆæœ¬ï¼Œè‡³ä»Šä»è¢«å¹¿æ³›é‡‡ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨ä»£ç†æœåŠ¡å™¨ä¸­ã€‚ HTTP/1.1 å½“å‰ç‰ˆæœ¬ã€‚æŒä¹…è¿žæŽ¥è¢«é»˜è®¤é‡‡ç”¨ï¼Œå¹¶èƒ½å¾ˆå¥½åœ°é…åˆä»£ç†æœåŠ¡å™¨å·¥ä½œã€‚è¿˜æ”¯æŒä»¥ç®¡é“æ–¹å¼åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œä»¥ä¾¿é™ä½Žçº¿è·¯è´Ÿè½½ï¼Œæé«˜ä¼ è¾“é€Ÿåº¦ã€‚ URLä¸Žèµ„æºä»€ä¹ˆæ˜¯URLURLï¼ˆUniform Resource Location, ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰æ˜¯Internetä¸Šçš„æ‰€æœ‰èµ„æºçš„æ ‡å‡†åŒ–åç§°ã€‚å¯ä»¥æŠŠInternetçœ‹åšä¸€ä¸ªå·¨å¤§çš„æ­£åœ¨æ‰©å¼ çš„åŸŽå¸‚ï¼Œé‡Œé¢å……æ»¡äº†å„ç§å¯çœ‹çš„ä¸œè¥¿ï¼Œå¯åšçš„äº‹æƒ…ã€‚æˆ‘ä»¬éœ€è¦ä¸ºè¿™ä¸ªåŸŽå¸‚é‡Œé¢çš„æ‰€æœ‰æ™¯ç‚¹å’ŒæœåŠ¡èµ·ä¸€ä¸ªåå­—ï¼Œæ‰€æœ‰çš„åå­—å¿…é¡»åœ¨ç¬¦åˆç»Ÿä¸€çš„æ ‡å‡†ï¼Œè¿™æ ·æ‰èƒ½ä½¿å¾—æˆ‘ä»¬æ–¹ä¾¿åœ°ä½¿ç”¨è¿™åº§åŸŽå¸‚çš„å®è—ã€‚URLå°±æ˜¯å…¶ä¸­ä¸€ç±»é‡è¦çš„èµ„æºå‘½åæ–¹å¼ã€‚URLæŒ‡å‘æ¯ä¸€æ¡ç”µå­ä¿¡æ¯ï¼Œå‘Šè¯‰ä½ å®ƒä½äºŽä½•å¤„ï¼Œå¦‚ä½•ä¸Žä¹‹è¿›è¡Œäº¤äº’ã€‚URLå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªURLåªèƒ½å¯¹åº”å”¯ä¸€çš„èµ„æºã€‚ URIã€URLå’ŒURNè¯´èµ·URLï¼Œå°±å¿…ç„¶è¦æURIå’ŒURNã€‚é‚£ä¹ˆå®ƒä»¬ä¹‹é—´åˆ°åº•æœ‰ä»€ä¹ˆè”ç³»å’ŒåŒºåˆ«å‘¢ï¼Ÿé¦–å…ˆæ¥çœ‹çœ‹URIå’ŒURNæ˜¯ä»€ä¹ˆã€‚ URIï¼šå³Uniform Resource Identifierï¼Œç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ã€‚å®ƒæ˜¯ä¸€ä¸ªé€šç”¨çš„æ¦‚å¿µï¼Œç†è®ºä¸Šï¼Œèƒ½ä¿è¯èµ„æºå…¨å±€å”¯ä¸€æ€§çš„æ ‡è¯†ç¬¦éƒ½å¯ä»¥å«åšURIï¼› URNï¼šå³Uniform Resource Name,ç»Ÿä¸€èµ„æºåç§°ã€‚è¿™æ ·çš„èµ„æºåæ˜¯ä¸Žèµ„æºå…·ä½“çš„ä½ç½®æ— å…³çš„ã€‚ URIã€URLã€URNæ˜¯ç›¸äº’å…³è”çš„ã€‚URLå’ŒURNéƒ½æ˜¯URIçš„å­é›†ï¼ŒæŒ‰ç…§é›†åˆè®ºçš„è§‚ç‚¹ï¼Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»è§ä¸‹å›¾ã€‚ ä¹Ÿå°±è¯´ï¼Œä»»ä½•çš„URLéƒ½å¯ä»¥æ˜¯URIï¼Œåä¹‹ä¸ç„¶ã€‚URLæ˜¯ä¸Žèµ„æºæ‰€å¤„çš„ä½ç½®å¯†åˆ‡ç›¸å…³çš„ï¼Œå¦‚æžœèµ„æºæŒªåŠ¨ä½ç½®ï¼Œåˆ™å¿…ç„¶å¯¼è‡´URLè·Ÿç€ä¸€èµ·å˜åŒ–ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æžœèµ„æºæ¢äº†ä½ç½®ï¼ˆè™½ç„¶è¿™æžå°‘å‘ç”Ÿï¼‰ï¼Œåˆ™åŽŸæ¥å¼€å‘çš„è½¯ä»¶å°±ä¼šå¤±æ•ˆã€‚URNä¸»è¦å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œæå‡ºæ¥çš„ã€‚å®ƒé€šè¿‡ç»™èµ„æºå‘½åè€Œä¸æ˜¯å®šä½æ¥å”¯ä¸€åœ°ç¡®å®šèµ„æºã€‚ å‡å®šçŽ°åœ¨è¦ç»™æˆ‘èµ·ä¸ªç‹¬ä¸€æ— äºŒçš„åç§°ï¼Œæˆ‘å¯ä»¥è‡ªå·±å‘½åä¸ºæ­¤æ—¶æˆ‘æ‰€å¤„çš„åœ°ç†ä½ç½®,å‡è®¾æ˜¯(ä¸œç»36åº¦ï¼ŒåŒ—çº¬36åº¦)ã€‚å¥½äº†ï¼ŒçŽ°åœ¨è¯·å«æˆ‘(ä¸œç»36åº¦ï¼ŒåŒ—çº¬36åº¦)ï¼Œé€šè¿‡åœ°å›¾è‚¯å®šå¯ä»¥æ‰¾åˆ°æˆ‘ã€‚ç„¶è€Œï¼Œæˆ‘å¹¶ä¸æ˜¯æ—¶æ—¶åˆ»åˆ»éƒ½å‘†ç€è¿™é‡Œçš„ï¼Œå› ä¸ºæˆ‘æ˜¯ä¸ªæ´»äººã€‚å½“æˆ‘ç§»åŠ¨ä½ç½®ä¹‹åŽï¼Œé€šè¿‡åŽŸæ¥çš„ä½ç½®å®šä½åˆ°çš„å·²ç„¶ä¸æ˜¯æˆ‘äº†ï¼Œè¿™å°±å¾ˆéº»çƒ¦äº†ã€‚å¦‚æžœç”¨æˆ‘çš„å§“åæ¥æ‰¾æˆ‘ï¼ˆå‡è®¾æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼‰ï¼Œåˆ™æ— è®ºä½•æ—¶ä½•åœ°æ‰¾åˆ°çš„éƒ½æ˜¯æˆ‘äº†ã€‚ ç›®å‰æ¥è¯´ï¼ŒURNè²Œä¼¼è¿˜æ²¡èƒ½åˆ°å®žç”¨é˜¶æ®µï¼Œçœ‹ä¸ŠåŽ»ç”¨å¤„ä¹Ÿä¸å¤§ã€‚ä¸€åˆ™èµ„æºä½ç½®ä¸€èˆ¬ä¸ä¼šå‘ç”Ÿå˜åŠ¨ï¼›äºŒåˆ™URLå·²ç»å®Œå…¨æ™®åŠï¼Œä¸ºå•¥è¦æŠ›å¼ƒå·²ç»ç”¨å¾—æºœæºœçš„ä¸œè¥¿å‘¢ï¼Ÿï¼è‡³å°‘ç›®å‰è¿˜æ²¡æœ‰ç†ç”±è¿™ä¹ˆå¹²ã€‚æ‰€ä»¥ï¼Œåœ¨ã€ŠHTTPæƒå¨æŒ‡å—ã€‹ä¸€ä¹¦ä¸­ï¼Œå¹¶æ²¡æœ‰å°†URIå’ŒURLåŒºåˆ†å¼€æ¥ï¼Œæ‰€æœ‰çš„URIéƒ½å¯ä»¥çœ‹åšæ˜¯URLã€‚ URLçš„å®Œæ•´è¯­æ³•åœ¨Webåº”ç”¨ä¸­ï¼ŒURLé€šå¸¸æ˜¯ç”±3å„éƒ¨åˆ†æž„æˆï¼Œä»¥URLåœ°å€http://www.joes.com/seanonal/index.htmlä¸ºä¾‹æ¥è¿›è¡Œè¯´æ˜Žã€‚ ç¬¬ä¸€éƒ¨åˆ†(http)æ˜¯æ–¹æ¡ˆï¼ˆschemaï¼‰ï¼Œå¯ä»¥å‘ŠçŸ¥å®¢æˆ·ç«¯æ€Žæ ·è®¿é—®èµ„æºã€‚ ç¬¬äºŒéƒ¨åˆ†(www.joes.com)æ˜¯æœåŠ¡å™¨çš„ä½ç½®ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯èµ„æºä½äºŽä½•å¤„ã€‚ ç¬¬ä¸‰éƒ¨åˆ†ï¼ˆ/seanonal/index.htmlï¼‰æ˜¯èµ„æºè·¯å¾„ã€‚ ä¸Šé¢çš„URLåœ°å€åªæ˜¯ä¼—å¤šæ ¼å¼çš„URLåœ°å€ä¸­çš„ä¸€ç§ï¼Œå®žé™…ä¸Šï¼ŒURLè¿˜å¯ä»¥é€šè¿‡HTTPä»¥å¤–çš„å…¶ä»–åè®®æ¥è¿›è¡Œè®¿é—®ã€‚æ¯”å¦‚ä¸ªäººE-mailè´¦æˆ·ï¼š ikangbow@outlook.com æˆ–è€…æ˜¯é€šè¿‡FTPåè®®èŽ·å–æ–‡ä»¶ï¼š ftp://ftp.xxx.com/file.xls å’‹ä¸€çœ‹ï¼Œè¿™äº›URLçš„æ ¼å¼éƒ½ä¸å¤ªä¸€æ ·ï¼Œè¿™æ˜¯ä¸æ˜¯æ„å‘³ç€æ¯ç§ä¸åŒçš„URLæ–¹æ¡ˆä¼šæœ‰å®Œå…¨ä¸åŒçš„è¯­æ³•å‘¢ï¼Ÿå…¶å®žä¸ç„¶ã€‚å¤§å¤šæ•°URLè¯­æ³•éƒ½å»ºç«‹åœ¨9ä¸ªéƒ¨åˆ†æž„æˆçš„é€šç”¨æ ¼å¼ä¸Šï¼š schema://&lt;user&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;path&gt;;&lt;params&gt;?&lt;query&gt;#&lt;frag&gt;&lt;/pre&gt; æ¯ä¸€éƒ¨åˆ†çš„çš„æ„ä¹‰å¦‚ä¸‹ï¼š schemaï¼šèŽ·å–èµ„æºæ—¶ä½¿ç”¨ä½•ç§åè®® userï¼šè®¿é—®èµ„æºæ—¶éœ€è¦çš„ç”¨æˆ·å passwordï¼šè®¿é—®èµ„æºæ—¶ä¸Žç”¨æˆ·åé…å¥—çš„å¯†ç  hostï¼šèµ„æºæ‰€åœ¨çš„æœåŠ¡å™¨åœ°å€ portï¼šæœåŠ¡å™¨æ‰€ç›‘å¬çš„ç«¯å£ pathï¼šæœåŠ¡å™¨ä¸Šçš„æœ¬åœ°èµ„æºè·¯å¾„ï¼Œç”¨/åˆ†éš” paramsï¼šæŒ‡å®šè¾“å…¥å‚æ•°ï¼Œç”¨key/valueè¡¨ç¤º queryï¼šèµ„æºæŸ¥è¯¢å‚æ•° fragï¼šèµ„æºå†…éƒ¨çš„ç‰‡æ®µåå­— URLé€šå¸¸ä¼šç”±å…¶ä¸­çš„æŸäº›éƒ¨åˆ†ç»„åˆè€Œæˆï¼Œä¸‹é¢æ˜¯ä¸€äº›URLå…¸åž‹ç¤ºä¾‹ï¼š http://www.joes.com/seanonal/index.html file:///D:/relativeUrl.html ftp://username:password@ftp.xxx.com/file.xls http://www.joes.com/seanonal/index.html;type=d http://www.joes.com/seanonal/goods.html?item=45454 http://www.joes.com/seanonal/goods.html?item=45454#name ç›¸å¯¹URL ç»å¯¹URLå’Œç›¸å¯¹URLæ˜¯URLçš„ä¸¤ç§ä¸åŒçš„è¡¨çŽ°å½¢å¼ï¼Œå‰é¢æ‰€æœ‰çš„URLç¤ºä¾‹éƒ½æ˜¯ç»å¯¹URLï¼Œç»å¯¹URLåŒ…å«è®¿é—®èµ„æºæ‰€éœ€çš„å…¨éƒ¨èµ„æºã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„HTMLé¡µé¢ä»£ç ï¼Œå…¶ä¸­çš„page1å°±æ˜¯ä¸€ä¸ªåŒ…å«ç›¸å¯¹URLçš„é“¾æŽ¥ã€‚ ç›¸å¯¹URLæ˜¯ä¸å®Œæ•´çš„ï¼Œè¦èŽ·å–èµ„æºçš„å…¨éƒ¨ä¿¡æ¯ï¼Œè¿˜è¦ä¾èµ–ç§°ä¸ºåŸºç¡€ï¼ˆbaseï¼‰çš„URLã€‚åŸºç¡€URLé€šå¸¸æ¥è‡ªä»¥ä¸‹åœ°æ–¹ï¼š ç¬¬ä¸€ï¼Œåœ¨èµ„æºä¸­æ˜¾ç¤ºæä¾›ã€‚åœ¨HTMLæ–‡æ¡£ä¸­ï¼Œå¯ä»¥ç”±æ ‡ç­¾å®šä¹‰ä¸€ä¸ªåŸºç¡€URLã€‚ä¸‹é¢çš„ä»£ç å®šä¹‰äº†&lt;base href=â€http://www.demo.com/base/â€œ &gt; ï¼ŒäºŽæ˜¯ï¼Œpage2å®žé™…çš„ç»å¯¹åœ°å€å°±æ˜¯ï¼šhttp://www.demo.com/base/page2.htmlã€‚ ç¬¬äºŒï¼Œæ‰€å±žèµ„æºçš„URLä½œä¸ºåŸºç¡€URLã€‚è¿˜æ˜¯ä»¥ä¸Šé¢çš„ä»£ç ä¸ºä¾‹ã€‚å‡å®špage1.htmlçš„ç»å¯¹URLæ˜¯http://www.demo.com/page1.htmlï¼Œé‚£ä¹ˆpage1.htmlå±žäºŽhttp://www.demo.com/èµ„æºä¸‹çš„ã€‚ç›´æŽ¥ç”¨è¿™ä¸ªåœ°å€ä½œä¸ºåŸºç¡€URLï¼Œåˆ™page2çš„ç»å¯¹URLæ˜¯ï¼šhttp://www.demo.com/page2.htmlã€‚ ç¬¬ä¸‰ï¼Œæ²¡æœ‰åŸºç¡€URLã€‚æ³¨ï¼šè¿™é‡Œæ²¡æœ‰çœ‹æ‡‚ï¼Œå…ˆåˆ—åœ¨è¿™é‡Œâ€¦â€¦ #URLç¼–ç  åˆæ ¼çš„URLåº”è¯¥æ»¡è¶³ä¸‹é¢çš„è¦æ±‚ï¼š å¯ç§»æ¤æ€§ï¼šä½œä¸ºç»Ÿä¸€çš„å‘½åï¼Œåº”è¯¥è¦èƒ½å¤Ÿé€šè¿‡ä¸åŒçš„åè®®æ¥ä¼ é€èµ„æºã€‚ä¸åŒçš„åè®®å¯èƒ½ä¼šæœ‰ç‰¹å®šçš„ä¿ç•™å­—ç¬¦ï¼Œåœ¨ä¸åŒçš„åè®®ä¸­ä¼ è¾“æ—¶ï¼Œä¸åº”è¯¥å› ä¸ºè¿™äº›ç‰¹æ®Šå­—ç¬¦è€Œä¸¢å¤±ä¿¡æ¯ã€‚ å¯è¯»æ€§ï¼šä¸å¯è§çš„ã€ä¸å¯æ‰“å°çš„ï¼ˆæ¯”å¦‚ç©ºæ ¼ï¼‰å­—ç¬¦ä¸åº”è¯¥å‡ºçŽ°åœ¨URLä¸­ã€‚ å®Œæ•´æ€§ï¼šå¯èƒ½éœ€è¦é€šç”¨å­—ç¬¦å¤–çš„äºŒè¿›åˆ¶æ•°æ®æˆ–å­—ç¬¦ï¼Œå› æ­¤éœ€è¦ä¸€ç§è½¬ä¹‰æœºåˆ¶ï¼Œå°†ä¸å®‰å…¨çš„å­—ç¬¦ç¼–ç ä¸ºå®‰å…¨å­—ç¬¦ã€‚ ä»ŽåŽ†å²æ¥çœ‹ï¼Œè®¡ç®—æœºåº”ç”¨ç¨‹åºéƒ½æ˜¯ç”¨US-ASCIIå­—ç¬¦é›†^footnoteã€‚ç”±äºŽå…¶åŽ†å²æ‚ ä¹…ï¼Œæ‰€ä»¥å¯ç§»æ¤æ€§å¾ˆå¥½ã€‚ä½†æ˜¯å®ƒä¸æ”¯æŒæ•°ç™¾ç§éžç½—é©¬è¯­è¨€ä¸­çš„å­—ç¬¦ã€‚è¿™å°±éœ€è¦ä¸€å¥—è½¬ä¹‰ç¼–ç æœºåˆ¶ï¼Œç”¨US-ASCIIå­—ç¬¦é›†æ¥å¯¹ä»»æ„å­—ç¬¦è¿›è¡Œç¼–ç ã€‚ç›®å‰è®¾è®¡çš„è½¬ä¹‰è¡¨ç¤ºæ³•æ˜¯ç”¨ä¸€ä¸ªâ€œ%â€ï¼ŒåŽé¢è·Ÿç€ä¸¤ä¸ªè¡¨ç¤ºASCIIç çš„åå…­è¿›åˆ¶æ•°ã€‚ä¸‹é¢æ˜¯ä¸€äº›ç¼–ç ç¤ºä¾‹ï¼š ä»ŽåŽ†å²æ¥çœ‹ï¼Œè®¡ç®—æœºåº”ç”¨ç¨‹åºéƒ½æ˜¯ç”¨US-ASCIIå­—ç¬¦é›†^footnoteã€‚ç”±äºŽå…¶åŽ†å²æ‚ ä¹…ï¼Œæ‰€ä»¥å¯ç§»æ¤æ€§å¾ˆå¥½ã€‚ä½†æ˜¯å®ƒä¸æ”¯æŒæ•°ç™¾ç§éžç½—é©¬è¯­è¨€ä¸­çš„å­—ç¬¦ã€‚è¿™å°±éœ€è¦ä¸€å¥—è½¬ä¹‰ç¼–ç æœºåˆ¶ï¼Œç”¨US-ASCIIå­—ç¬¦é›†æ¥å¯¹ä»»æ„å­—ç¬¦è¿›è¡Œç¼–ç ã€‚ç›®å‰è®¾è®¡çš„è½¬ä¹‰è¡¨ç¤ºæ³•æ˜¯ç”¨ä¸€ä¸ªâ€œ%â€ï¼ŒåŽé¢è·Ÿç€ä¸¤ä¸ªè¡¨ç¤ºASCIIç çš„åå…­è¿›åˆ¶æ•°ã€‚ä¸‹é¢æ˜¯ä¸€äº›ç¼–ç ç¤ºä¾‹ï¼š #æ€»ç»“æœ¬æ–‡æ˜¯ã€ŠHTTPæƒå¨æŒ‡å—ã€‹å­¦ä¹ ç¬”è®°çš„ç¬¬ä¸€ç¯‡ï¼Œä»‹ç»ä¸€äº›HTTPä¸­çš„åŸºæœ¬æ¦‚å¿µå’Œæ¦‚è¿°ã€‚é‡ç‚¹ä»‹ç»äº†URLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰è¿™ä¸€ç§æœ€é‡è¦çš„Webèµ„æºå‘½åæ–¹å¼ï¼Œå°†å…¶ä¸ŽURIã€URNè¿™ç±»ç»å¸¸æ··æ·†çš„æ¦‚å¿µè¿›è¡Œçš„æ¯”è¾ƒã€‚æ¦‚è¦è¯´æ˜Žäº†URLçš„è¯­æ³•æ ¼å¼ã€ç›¸å¯¹URLå’ŒURLç¼–ç ã€‚é¦–å…ˆå¯¹HTTPæœ‰ä¸€ä¸ªæ•´ä½“ä¸Šçš„è®¤è¯†ï¼ŒæŽ¥ä¸‹æ¥è¦å†™çš„æ˜¯HTTPä¸­çš„é‡è¦ç»†èŠ‚å†…å®¹ï¼Œä¸Žæ—¥å¸¸çš„å¼€å‘å¯†åˆ‡ç›¸å…³ã€‚]]></content>
      <categories>
        <category>https</category>
      </categories>
      <tags>
        <tag>https</tag>
      </tags>
  </entry>
</search>
